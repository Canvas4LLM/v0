var jc=Object.defineProperty;var Ws=e=>{throw TypeError(e)};var Qc=(e,t,n)=>t in e?jc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Bs=(e,t,n)=>Qc(e,typeof t!="symbol"?t+"":t,n),ho=(e,t,n)=>t.has(e)||Ws("Cannot "+n);var ve=(e,t,n)=>(ho(e,t,"read from private field"),n?n.call(e):t.get(e)),Xe=(e,t,n)=>t.has(e)?Ws("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),go=(e,t,n,i)=>(ho(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),yt=(e,t,n)=>(ho(e,t,"access private method"),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();const eu=!1;var Gi=Array.isArray,ts=Array.from,tu=Object.defineProperty,fn=Object.getOwnPropertyDescriptor,Wa=Object.getOwnPropertyDescriptors,nu=Object.prototype,iu=Array.prototype,ns=Object.getPrototypeOf;function li(e){return typeof e=="function"}const Qt=()=>{};function ru(e){return e()}function kr(e){for(var t=0;t<e.length;t++)e[t]()}const At=2,Ba=4,Zi=8,is=16,Tt=32,$i=64,Po=128,An=256,Er=512,ft=1024,mn=2048,Un=4096,Xt=8192,Jn=16384,ou=32768,Ui=65536,su=1<<17,au=1<<19,Ka=1<<20,hn=Symbol("$state"),Fa=Symbol("legacy props"),lu=Symbol("");function qa(e){return e===this.v}function rs(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function os(e){return!rs(e,this.v)}function cu(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function uu(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function du(e){throw new Error("https://svelte.dev/e/effect_orphan")}function fu(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function hu(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function gu(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function vu(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function mu(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function yu(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let jn=!1;function pu(){jn=!0}const ss=1,as=2,Ga=4,_u=8,wu=16,xu=1,bu=2,Za=4,ku=8,Eu=16,$a=1,Su=2,gt=Symbol(),Ua="http://www.w3.org/2000/svg";function dt(e,t){var n={f:0,v:e,reactions:null,equals:qa,version:0};return n}function Ze(e){return Ja(dt(e))}function Gr(e,t=!1){var i;const n=dt(e);return t||(n.equals=os),jn&&Se!==null&&Se.l!==null&&((i=Se.l).s??(i.s=[])).push(n),n}function F(e,t=!1){return Ja(Gr(e,t))}function Ja(e){return Re!==null&&Re.f&At&&(Yt===null?Ou([e]):Yt.push(e)),e}function D(e,t){return Re!==null&&Jr()&&Re.f&(At|is)&&(Yt===null||!Yt.includes(e))&&yu(),zo(e,t)}function zo(e,t){return e.equals(t)||(e.v=t,e.version=hl(),ja(e,mn),Jr()&&_e!==null&&_e.f&ft&&!(_e.f&Tt)&&(st!==null&&st.includes(e)?(Ot(_e,mn),Qr(_e)):gn===null?Hu([e]):gn.push(e))),t}function ja(e,t){var n=e.reactions;if(n!==null)for(var i=Jr(),r=n.length,o=0;o<r;o++){var a=n[o],s=a.f;s&mn||!i&&a===_e||(Ot(a,t),s&(ft|An)&&(s&At?ja(a,Un):Qr(a)))}}let ls=!1;function Ve(e,t=null,n){if(typeof e!="object"||e===null||hn in e)return e;const i=ns(e);if(i!==nu&&i!==iu)return e;var r=new Map,o=Gi(e),a=dt(0);o&&r.set("length",dt(e.length));var s;return new Proxy(e,{defineProperty(l,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&gu();var f=r.get(c);return f===void 0?(f=dt(u.value),r.set(c,f)):D(f,Ve(u.value,s)),!0},deleteProperty(l,c){var u=r.get(c);if(u===void 0)c in l&&r.set(c,dt(gt));else{if(o&&typeof c=="string"){var f=r.get("length"),h=Number(c);Number.isInteger(h)&&h<f.v&&D(f,h)}D(u,gt),Ks(a)}return!0},get(l,c,u){var p;if(c===hn)return e;var f=r.get(c),h=c in l;if(f===void 0&&(!h||(p=fn(l,c))!=null&&p.writable)&&(f=dt(Ve(h?l[c]:gt,s)),r.set(c,f)),f!==void 0){var g=d(f);return g===gt?void 0:g}return Reflect.get(l,c,u)},getOwnPropertyDescriptor(l,c){var u=Reflect.getOwnPropertyDescriptor(l,c);if(u&&"value"in u){var f=r.get(c);f&&(u.value=d(f))}else if(u===void 0){var h=r.get(c),g=h==null?void 0:h.v;if(h!==void 0&&g!==gt)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return u},has(l,c){var g;if(c===hn)return!0;var u=r.get(c),f=u!==void 0&&u.v!==gt||Reflect.has(l,c);if(u!==void 0||_e!==null&&(!f||(g=fn(l,c))!=null&&g.writable)){u===void 0&&(u=dt(f?Ve(l[c],s):gt),r.set(c,u));var h=d(u);if(h===gt)return!1}return f},set(l,c,u,f){var k;var h=r.get(c),g=c in l;if(o&&c==="length")for(var p=u;p<h.v;p+=1){var y=r.get(p+"");y!==void 0?D(y,gt):p in l&&(y=dt(gt),r.set(p+"",y))}h===void 0?(!g||(k=fn(l,c))!=null&&k.writable)&&(h=dt(void 0),D(h,Ve(u,s)),r.set(c,h)):(g=h.v!==gt,D(h,Ve(u,s)));var S=Reflect.getOwnPropertyDescriptor(l,c);if(S!=null&&S.set&&S.set.call(f,u),!g){if(o&&typeof c=="string"){var _=r.get("length"),m=Number(c);Number.isInteger(m)&&m>=_.v&&D(_,m+1)}Ks(a)}return!0},ownKeys(l){d(a);var c=Reflect.ownKeys(l).filter(h=>{var g=r.get(h);return g===void 0||g.v!==gt});for(var[u,f]of r)f.v!==gt&&!(u in l)&&c.push(u);return c},setPrototypeOf(){vu()}})}function Ks(e,t=1){D(e,e.v+t)}var ct,Qa,el;function Cu(){if(ct===void 0){ct=window;var e=Element.prototype,t=Node.prototype;Qa=fn(t,"firstChild").get,el=fn(t,"nextSibling").get,e.__click=void 0,e.__className="",e.__attributes=null,e.__styles=null,e.__e=void 0,Text.prototype.__t=void 0}}function Ji(e=""){return document.createTextNode(e)}function Vt(e){return Qa.call(e)}function Zr(e){return el.call(e)}function ee(e,t){return Vt(e)}function se(e,t){{var n=Vt(e);return n instanceof Comment&&n.data===""?Zr(n):n}}function te(e,t=1,n=!1){let i=e;for(;t--;)i=Zr(i);return i}function Nu(e){e.textContent=""}function yn(e){var t=At|mn;_e===null?t|=An:_e.f|=Ka;var n=Re!==null&&Re.f&At?Re:null;const i={children:null,ctx:Se,deps:null,equals:qa,f:t,fn:e,reactions:null,v:null,version:0,parent:n??_e};return n!==null&&(n.children??(n.children=[])).push(i),i}function oe(e){const t=yn(e);return t.equals=os,t}function tl(e){var t=e.children;if(t!==null){e.children=null;for(var n=0;n<t.length;n+=1){var i=t[n];i.f&At?cs(i):Kt(i)}}}function Mu(e){for(var t=e.parent;t!==null;){if(!(t.f&At))return t;t=t.parent}return null}function nl(e){var t,n=_e;Et(Mu(e));try{tl(e),t=gl(e)}finally{Et(n)}return t}function il(e){var t=nl(e),n=(kn||e.f&An)&&e.deps!==null?Un:ft;Ot(e,n),e.equals(t)||(e.v=t,e.version=hl())}function cs(e){tl(e),wi(e,0),Ot(e,Jn),e.v=e.children=e.deps=e.ctx=e.reactions=null}function rl(e){_e===null&&Re===null&&du(),Re!==null&&Re.f&An&&uu(),ds&&cu()}function Pu(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Qn(e,t,n,i=!0){var r=(e&$i)!==0,o=_e,a={ctx:Se,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:e|mn,first:null,fn:t,last:null,next:null,parent:r?null:o,prev:null,teardown:null,transitions:null,version:0};if(n){var s=Rn;try{Fs(!0),ji(a),a.f|=ou}catch(u){throw Kt(a),u}finally{Fs(s)}}else t!==null&&Qr(a);var l=n&&a.deps===null&&a.first===null&&a.nodes_start===null&&a.teardown===null&&(a.f&Ka)===0;if(!l&&!r&&i&&(o!==null&&Pu(a,o),Re!==null&&Re.f&At)){var c=Re;(c.children??(c.children=[])).push(a)}return a}function ol(e){const t=Qn(Zi,null,!1);return Ot(t,ft),t.teardown=e,t}function Ao(e){rl();var t=_e!==null&&(_e.f&Tt)!==0&&Se!==null&&!Se.m;if(t){var n=Se;(n.e??(n.e=[])).push({fn:e,effect:_e,reaction:Re})}else{var i=_t(e);return i}}function zu(e){return rl(),ei(e)}function Au(e){const t=Qn($i,e,!0);return(n={})=>new Promise(i=>{n.outro?Bn(t,()=>{Kt(t),i(void 0)}):(Kt(t),i(void 0))})}function _t(e){return Qn(Ba,e,!1)}function G(e,t){var n=Se,i={effect:null,ran:!1};n.l.r1.push(i),i.effect=ei(()=>{e(),!i.ran&&(i.ran=!0,D(n.l.r2,!0),It(t))})}function rt(){var e=Se;ei(()=>{if(d(e.l.r2)){for(var t of e.l.r1){var n=t.effect;n.f&ft&&Ot(n,Un),ni(n)&&ji(n),t.ran=!1}e.l.r2.v=!1}})}function ei(e){return Qn(Zi,e,!0)}function ye(e){return ti(e)}function ti(e,t=0){return Qn(Zi|is|t,e,!0)}function pn(e,t=!0){return Qn(Zi|Tt,e,!0,t)}function sl(e){var t=e.teardown;if(t!==null){const n=ds,i=Re;qs(!0),Ft(null);try{t.call(null)}finally{qs(n),Ft(i)}}}function al(e){var t=e.deriveds;if(t!==null){e.deriveds=null;for(var n=0;n<t.length;n+=1)cs(t[n])}}function ll(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){var i=n.next;Kt(n,t),n=i}}function Iu(e){for(var t=e.first;t!==null;){var n=t.next;t.f&Tt||Kt(t),t=n}}function Kt(e,t=!0){var n=!1;if((t||e.f&au)&&e.nodes_start!==null){for(var i=e.nodes_start,r=e.nodes_end;i!==null;){var o=i===r?null:Zr(i);i.remove(),i=o}n=!0}ll(e,t&&!n),al(e),wi(e,0),Ot(e,Jn);var a=e.transitions;if(a!==null)for(const l of a)l.stop();sl(e);var s=e.parent;s!==null&&s.first!==null&&cl(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function cl(e){var t=e.parent,n=e.prev,i=e.next;n!==null&&(n.next=i),i!==null&&(i.prev=n),t!==null&&(t.first===e&&(t.first=i),t.last===e&&(t.last=n))}function Bn(e,t){var n=[];us(e,n,!0),ul(n,()=>{Kt(e),t&&t()})}function ul(e,t){var n=e.length;if(n>0){var i=()=>--n||t();for(var r of e)r.out(i)}else t()}function us(e,t,n){if(!(e.f&Xt)){if(e.f^=Xt,e.transitions!==null)for(const a of e.transitions)(a.is_global||n)&&t.push(a);for(var i=e.first;i!==null;){var r=i.next,o=(i.f&Ui)!==0||(i.f&Tt)!==0;us(i,t,o?n:!1),i=r}}}function _i(e){dl(e,!0)}function dl(e,t){if(e.f&Xt){ni(e)&&ji(e),e.f^=Xt;for(var n=e.first;n!==null;){var i=n.next,r=(n.f&Ui)!==0||(n.f&Tt)!==0;dl(n,r?t:!1),n=i}if(e.transitions!==null)for(const o of e.transitions)(o.is_global||t)&&o.in()}}let Io=!1,To=[];function Tu(){Io=!1;const e=To.slice();To=[],kr(e)}function $r(e){Io||(Io=!0,queueMicrotask(Tu)),To.push(e)}function Ur(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let yr=!1,Sr=!1,Cr=null,Rn=!1,ds=!1;function Fs(e){Rn=e}function qs(e){ds=e}let Oo=[],mi=0;let Re=null;function Ft(e){Re=e}let _e=null;function Et(e){_e=e}let Yt=null;function Ou(e){Yt=e}let st=null,pt=0,gn=null;function Hu(e){gn=e}let fl=1,kn=!1,Se=null;function hl(){return++fl}function Jr(){return!jn||Se!==null&&Se.l===null}function ni(e){var a,s;var t=e.f;if(t&mn)return!0;if(t&Un){var n=e.deps,i=(t&An)!==0;if(n!==null){var r;if(t&Er){for(r=0;r<n.length;r++)((a=n[r]).reactions??(a.reactions=[])).push(e);e.f^=Er}for(r=0;r<n.length;r++){var o=n[r];if(ni(o)&&il(o),i&&_e!==null&&!kn&&!((s=o==null?void 0:o.reactions)!=null&&s.includes(e))&&(o.reactions??(o.reactions=[])).push(e),o.version>e.version)return!0}}(!i||_e!==null&&!kn)&&Ot(e,ft)}return!1}function Du(e,t){for(var n=t;n!==null;){if(n.f&Po)try{n.fn(e);return}catch{n.f^=Po}n=n.parent}throw yr=!1,e}function Ru(e){return(e.f&Jn)===0&&(e.parent===null||(e.parent.f&Po)===0)}function jr(e,t,n,i){if(yr){if(n===null&&(yr=!1),Ru(t))throw e;return}n!==null&&(yr=!0);{Du(e,t);return}}function gl(e){var h;var t=st,n=pt,i=gn,r=Re,o=kn,a=Yt,s=Se,l=e.f;st=null,pt=0,gn=null,Re=l&(Tt|$i)?null:e,kn=!Rn&&(l&An)!==0,Yt=null,Se=e.ctx;try{var c=(0,e.fn)(),u=e.deps;if(st!==null){var f;if(wi(e,pt),u!==null&&pt>0)for(u.length=pt+st.length,f=0;f<st.length;f++)u[pt+f]=st[f];else e.deps=u=st;if(!kn)for(f=pt;f<u.length;f++)((h=u[f]).reactions??(h.reactions=[])).push(e)}else u!==null&&pt<u.length&&(wi(e,pt),u.length=pt);return c}finally{st=t,pt=n,gn=i,Re=r,kn=o,Yt=a,Se=s}}function Lu(e,t){let n=t.reactions;if(n!==null){var i=n.indexOf(e);if(i!==-1){var r=n.length-1;r===0?n=t.reactions=null:(n[i]=n[r],n.pop())}}n===null&&t.f&At&&(st===null||!st.includes(t))&&(Ot(t,Un),t.f&(An|Er)||(t.f^=Er),wi(t,0))}function wi(e,t){var n=e.deps;if(n!==null)for(var i=t;i<n.length;i++)Lu(e,n[i])}function ji(e){var t=e.f;if(!(t&Jn)){Ot(e,ft);var n=_e,i=Se;_e=e;try{t&is?Iu(e):ll(e),al(e),sl(e);var r=gl(e);e.teardown=typeof r=="function"?r:null,e.version=fl}catch(o){jr(o,e,n,i||e.ctx)}finally{_e=n}}}function Vu(){if(mi>1e3){mi=0;try{fu()}catch(e){if(Cr!==null)jr(e,Cr,null);else throw e}}mi++}function Xu(e){var t=e.length;if(t!==0){Vu();var n=Rn;Rn=!0;try{for(var i=0;i<t;i++){var r=e[i];r.f&ft||(r.f^=ft);var o=[];vl(r,o),Yu(o)}}finally{Rn=n}}}function Yu(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var i=e[n];if(!(i.f&(Jn|Xt)))try{ni(i)&&(ji(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?cl(i):i.fn=null))}catch(r){jr(r,i,null,i.ctx)}}}function Wu(){if(Sr=!1,mi>1001)return;const e=Oo;Oo=[],Xu(e),Sr||(mi=0,Cr=null)}function Qr(e){Sr||(Sr=!0,queueMicrotask(Wu)),Cr=e;for(var t=e;t.parent!==null;){t=t.parent;var n=t.f;if(n&($i|Tt)){if(!(n&ft))return;t.f^=ft}}Oo.push(t)}function vl(e,t){var n=e.first,i=[];e:for(;n!==null;){var r=n.f,o=(r&Tt)!==0,a=o&&(r&ft)!==0,s=n.next;if(!a&&!(r&Xt))if(r&Zi){if(o)n.f^=ft;else try{ni(n)&&ji(n)}catch(f){jr(f,n,null,n.ctx)}var l=n.first;if(l!==null){n=l;continue}}else r&Ba&&i.push(n);if(s===null){let f=n.parent;for(;f!==null;){if(e===f)break e;var c=f.next;if(c!==null){n=c;continue e}f=f.parent}}n=s}for(var u=0;u<i.length;u++)l=i[u],t.push(l),vl(l,t)}function d(e){var u;var t=e.f,n=(t&At)!==0;if(n&&t&Jn){var i=nl(e);return cs(e),i}if(Re!==null){Yt!==null&&Yt.includes(e)&&mu();var r=Re.deps;st===null&&r!==null&&r[pt]===e?pt++:st===null?st=[e]:st.push(e),gn!==null&&_e!==null&&_e.f&ft&&!(_e.f&Tt)&&gn.includes(e)&&(Ot(_e,mn),Qr(_e))}else if(n&&e.deps===null)for(var o=e,a=o.parent,s=o;a!==null;)if(a.f&At){var l=a;s=l,a=l.parent}else{var c=a;(u=c.deriveds)!=null&&u.includes(s)||(c.deriveds??(c.deriveds=[])).push(s);break}return n&&(o=e,ni(o)&&il(o)),e.v}function It(e){const t=Re;try{return Re=null,e()}finally{Re=t}}const Bu=~(mn|Un|ft);function Ot(e,t){e.f=e.f&Bu|t}function Kn(e){return fs().get(e)}function Nr(e,t){return fs().set(e,t),t}function Ku(e){return fs().has(e)}function fs(e){return Se===null&&Ur(),Se.c??(Se.c=new Map(Fu(Se)||void 0))}function Fu(e){let t=e.p;for(;t!==null;){const n=t.c;if(n!==null)return n;t=t.p}return null}function Gs(e,t=1){var n=d(e),i=t===1?n++:n--;return D(e,n),i}function le(e,t=!1,n){Se={p:Se,c:null,e:null,m:!1,s:e,x:null,l:null},jn&&!t&&(Se.l={s:null,u:null,r1:[],r2:dt(!1)})}function ce(e){const t=Se;if(t!==null){const a=t.e;if(a!==null){var n=_e,i=Re;t.e=null;try{for(var r=0;r<a.length;r++){var o=a[r];Et(o.effect),Ft(o.reaction),_t(o.fn)}}finally{Et(n),Ft(i)}}Se=t.p,t.m=!0}return{}}function Y(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(hn in e)Ho(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&hn in n&&Ho(n)}}}function Ho(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let i in e)try{Ho(e[i],t)}catch{}const n=ns(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const i=Wa(n);for(let r in i){const o=i[r].get;if(o)try{o.call(e)}catch{}}}}}function qu(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const Gu=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Zu(e){return Gu.includes(e)}const $u={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject"};function Uu(e){return e=e.toLowerCase(),$u[e]??e}const Ju=["touchstart","touchmove"];function ju(e){return Ju.includes(e)}function Qu(e,t){if(t){const n=document.body;e.autofocus=!0,$r(()=>{document.activeElement===n&&e.focus()})}}let Zs=!1;function ed(){Zs||(Zs=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function ml(e){var t=Re,n=_e;Ft(null),Et(null);try{return e()}finally{Ft(t),Et(n)}}function td(e,t,n,i=n){e.addEventListener(t,()=>ml(n));const r=e.__on_r;r?e.__on_r=()=>{r(),i(!0)}:e.__on_r=()=>i(!0),ed()}const yl=new Set,Do=new Set;function pl(e,t,n,i){function r(o){if(i.capture||fi.call(t,o),!o.cancelBubble)return ml(()=>n.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?$r(()=>{t.addEventListener(e,r,i)}):t.addEventListener(e,r,i),r}function Ae(e,t,n,i,r){var o={capture:i,passive:r},a=pl(e,t,n,o);(t===document.body||t===window||t===document)&&ol(()=>{t.removeEventListener(e,a,o)})}function on(e){for(var t=0;t<e.length;t++)yl.add(e[t]);for(var n of Do)n(e)}function fi(e){var m;var t=this,n=t.ownerDocument,i=e.type,r=((m=e.composedPath)==null?void 0:m.call(e))||[],o=r[0]||e.target,a=0,s=e.__root;if(s){var l=r.indexOf(s);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var c=r.indexOf(t);if(c===-1)return;l<=c&&(a=l)}if(o=r[a]||e.target,o!==t){tu(e,"currentTarget",{configurable:!0,get(){return o||n}});var u=Re,f=_e;Ft(null),Et(null);try{for(var h,g=[];o!==null;){var p=o.assignedSlot||o.parentNode||o.host||null;try{var y=o["__"+i];if(y!==void 0&&!o.disabled)if(Gi(y)){var[S,..._]=y;S.apply(o,[e,..._])}else y.call(o,e)}catch(k){h?g.push(k):h=k}if(e.cancelBubble||p===t||p===null)break;o=p}if(h){for(let k of g)queueMicrotask(()=>{throw k});throw h}}finally{e.__root=t,delete e.currentTarget,Ft(u),Et(f)}}}function hs(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function _n(e,t){var n=_e;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function ae(e,t){var n=(t&$a)!==0,i=(t&Su)!==0,r,o=!e.startsWith("<!>");return()=>{r===void 0&&(r=hs(o?e:"<!>"+e),n||(r=Vt(r)));var a=i?document.importNode(r,!0):r.cloneNode(!0);if(n){var s=Vt(a),l=a.lastChild;_n(s,l)}else _n(a,a);return a}}function Je(e,t,n="svg"){var i=!e.startsWith("<!>"),r=(t&$a)!==0,o=`<${n}>${i?e:"<!>"+e}</${n}>`,a;return()=>{if(!a){var s=hs(o),l=Vt(s);if(r)for(a=document.createDocumentFragment();Vt(l);)a.appendChild(Vt(l));else a=Vt(l)}var c=a.cloneNode(!0);if(r){var u=Vt(c),f=c.lastChild;_n(u,f)}else _n(c,c);return c}}function Ro(e=""){{var t=Ji(e+"");return _n(t,t),t}}function Ne(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Ji();return e.append(t,n),_n(t,n),e}function W(e,t){e!==null&&e.before(t)}function qt(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n==null?"":n+"")}function nd(e,t){return id(e,t)}const On=new Map;function id(e,{target:t,anchor:n,props:i={},events:r,context:o,intro:a=!0}){Cu();var s=new Set,l=f=>{for(var h=0;h<f.length;h++){var g=f[h];if(!s.has(g)){s.add(g);var p=ju(g);t.addEventListener(g,fi,{passive:p});var y=On.get(g);y===void 0?(document.addEventListener(g,fi,{passive:p}),On.set(g,1)):On.set(g,y+1)}}};l(ts(yl)),Do.add(l);var c=void 0,u=Au(()=>{var f=n??t.appendChild(Ji());return pn(()=>{if(o){le({});var h=Se;h.c=o}r&&(i.$$events=r),c=e(f,i)||{},o&&ce()}),()=>{var p;for(var h of s){t.removeEventListener(h,fi);var g=On.get(h);--g===0?(document.removeEventListener(h,fi),On.delete(h)):On.set(h,g)}Do.delete(l),f!==n&&((p=f.parentNode)==null||p.removeChild(f))}});return rd.set(c,u),c}let rd=new WeakMap;function Ce(e,t,n=!1){var i=e,r=null,o=null,a=gt,s=n?Ui:0,l=!1;const c=(f,h=!0)=>{l=!0,u(h,f)},u=(f,h)=>{a!==(a=f)&&(a?(r?_i(r):h&&(r=pn(()=>h(i))),o&&Bn(o,()=>{o=null})):(o?_i(o):h&&(o=pn(()=>h(i))),r&&Bn(r,()=>{r=null})))};ti(()=>{l=!1,t(c),l||u(null,null)},s)}function yi(e,t){return t}function od(e,t,n,i){for(var r=[],o=t.length,a=0;a<o;a++)us(t[a].e,r,!0);var s=o>0&&r.length===0&&n!==null;if(s){var l=n.parentNode;Nu(l),l.append(n),i.clear(),ln(e,t[0].prev,t[o-1].next)}ul(r,()=>{for(var c=0;c<o;c++){var u=t[c];s||(i.delete(u.k),ln(e,u.prev,u.next)),Kt(u.e,!s)}})}function Pt(e,t,n,i,r,o=null){var a=e,s={flags:t,items:new Map,first:null},l=(t&Ga)!==0;if(l){var c=e;a=c.appendChild(Ji())}var u=null,f=!1;ti(()=>{var h=n(),g=Gi(h)?h:h==null?[]:ts(h),p=g.length;if(!(f&&p===0)){f=p===0;{var y=Re;sd(g,s,a,r,t,(y.f&Xt)!==0,i)}o!==null&&(p===0?u?_i(u):u=pn(()=>o(a)):u!==null&&Bn(u,()=>{u=null})),n()}})}function sd(e,t,n,i,r,o,a,s){var O,x,z,I;var l=(r&_u)!==0,c=(r&(ss|as))!==0,u=e.length,f=t.items,h=t.first,g=h,p,y=null,S,_=[],m=[],k,E,b,N;if(l)for(N=0;N<u;N+=1)k=e[N],E=a(k,N),b=f.get(E),b!==void 0&&((O=b.a)==null||O.measure(),(S??(S=new Set)).add(b));for(N=0;N<u;N+=1){if(k=e[N],E=a(k,N),b=f.get(E),b===void 0){var C=g?g.e.nodes_start:n;y=ld(C,t,y,y===null?t.first:y.next,k,E,N,i,r),f.set(E,y),_=[],m=[],g=y.next;continue}if(c&&ad(b,k,N,r),b.e.f&Xt&&(_i(b.e),l&&((x=b.a)==null||x.unfix(),(S??(S=new Set)).delete(b))),b!==g){if(p!==void 0&&p.has(b)){if(_.length<m.length){var M=m[0],P;y=M.prev;var T=_[0],R=_[_.length-1];for(P=0;P<_.length;P+=1)$s(_[P],M,n);for(P=0;P<m.length;P+=1)p.delete(m[P]);ln(t,T.prev,R.next),ln(t,y,T),ln(t,R,M),g=M,y=R,N-=1,_=[],m=[]}else p.delete(b),$s(b,g,n),ln(t,b.prev,b.next),ln(t,b,y===null?t.first:y.next),ln(t,y,b),y=b;continue}for(_=[],m=[];g!==null&&g.k!==E;)(o||!(g.e.f&Xt))&&(p??(p=new Set)).add(g),m.push(g),g=g.next;if(g===null)continue;b=g}_.push(b),y=b,g=b.next}if(g!==null||p!==void 0){for(var L=p===void 0?[]:ts(p);g!==null;)(o||!(g.e.f&Xt))&&L.push(g),g=g.next;var H=L.length;if(H>0){var w=r&Ga&&u===0?n:null;if(l){for(N=0;N<H;N+=1)(z=L[N].a)==null||z.measure();for(N=0;N<H;N+=1)(I=L[N].a)==null||I.fix()}od(t,L,w,f)}}l&&$r(()=>{var A;if(S!==void 0)for(b of S)(A=b.a)==null||A.apply()}),_e.first=t.first&&t.first.e,_e.last=y&&y.e}function ad(e,t,n,i){i&ss&&zo(e.v,t),i&as?zo(e.i,n):e.i=n}function ld(e,t,n,i,r,o,a,s,l,c){var u=(l&ss)!==0,f=(l&wu)===0,h=u?f?Gr(r):dt(r):r,g=l&as?dt(a):a,p={i:g,v:h,k:o,a:null,e:null,prev:n,next:i};try{return p.e=pn(()=>s(e,h,g),ls),p.e.prev=n&&n.e,p.e.next=i&&i.e,n===null?t.first=p:(n.next=p,n.e.next=p.e),i!==null&&(i.prev=p,i.e.prev=p.e),p}finally{}}function $s(e,t,n){for(var i=e.next?e.next.e.nodes_start:n,r=t?t.e.nodes_start:n,o=e.e.nodes_start;o!==i;){var a=Zr(o);r.before(o),o=a}}function ln(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function cd(e,t,n,i,r){var o=e,a="",s;ti(()=>{a!==(a=t()??"")&&(s!==void 0&&(Kt(s),s=void 0),a!==""&&(s=pn(()=>{var l=a+"",c=hs(l);_n(Vt(c),c.lastChild),o.before(c)})))})}function Ie(e,t,n,i,r){var s;var o=(s=t.$$slots)==null?void 0:s[n],a=!1;o===!0&&(o=t[n==="default"?"children":n],a=!0),o===void 0||o(e,a?()=>i:i)}function ud(e){const t={};e.children&&(t.default=!0);for(const n in e.$$slots)t[n]=!0;return t}function _l(e,t,n){var i=e,r,o;ti(()=>{r!==(r=t())&&(o&&(Bn(o),o=null),r&&(o=pn(()=>n(i,r))))},Ui)}function dd(e,t,n,i,r,o){var a,s,l=null,c=e,u;ti(()=>{const f=t()||null;var h=Ua;f!==a&&(u&&(f===null?Bn(u,()=>{u=null,s=null}):f===s?_i(u):Kt(u)),f&&f!==s&&(u=pn(()=>{if(l=document.createElementNS(h,f),_n(l,l),i){var g=l.appendChild(Ji());i(l,g)}_e.nodes_end=l,c.before(l)})),a=f,a&&(s=a))},Ui)}function ut(e,t,n){_t(()=>{var i=It(()=>t(e,n==null?void 0:n())||{});if(n&&(i!=null&&i.update)){var r=!1,o={};ei(()=>{var a=n();Y(a),r&&rs(o,a)&&(o=a,i.update(a))}),r=!0}if(i!=null&&i.destroy)return()=>i.destroy()})}function wl(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=wl(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function fd(){for(var e,t,n=0,i="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=wl(e))&&(i&&(i+=" "),i+=t);return i}function Ht(e){return typeof e=="object"?fd(e):e??""}function hd(e,t){var n=e.__attributes??(e.__attributes={});n.checked!==(n.checked=t??void 0)&&(e.checked=t)}function gd(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function Q(e,t,n,i){var r=e.__attributes??(e.__attributes={});r[t]!==(r[t]=n)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[lu]=n),n==null?e.removeAttribute(t):typeof n!="string"&&gs(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function xl(e,t,n){var i=Re,r=_e;Ft(null),Et(null);try{(Lo.has(e.nodeName)||customElements.get(e.tagName.toLowerCase())?gs(e).includes(t):n&&typeof n=="object")?e[t]=n:Q(e,t,n==null?n:String(n))}finally{Ft(i),Et(r)}}function xi(e,t,n,i,r=!1,o=!1,a=!1){var s=t||{},l=e.tagName==="OPTION";for(var c in t)c in n||(n[c]=null);n.class&&(n.class=Ht(n.class)),i!==void 0&&(n.class=n.class?n.class+" "+i:i);var u=gs(e),f=e.__attributes??(e.__attributes={});for(const m in n){let k=n[m];if(l&&m==="value"&&k==null){e.value=e.__value="",s[m]=k;continue}var h=s[m];if(k!==h){s[m]=k;var g=m[0]+m[1];if(g!=="$$"){if(g==="on"){const E={},b="$$"+m;let N=m.slice(2);var p=Zu(N);if(qu(N)&&(N=N.slice(0,-7),E.capture=!0),!p&&h){if(k!=null)continue;e.removeEventListener(N,s[b],E),s[b]=null}if(k!=null)if(p)e[`__${N}`]=k,on([N]);else{let C=function(M){s[m].call(this,M)};var _=C;s[b]=pl(N,e,C,E)}else p&&(e[`__${N}`]=void 0)}else if(m==="style"&&k!=null)e.style.cssText=k+"";else if(m==="autofocus")Qu(e,!!k);else if(m==="__value"||m==="value"&&k!=null)e.value=e[m]=e.__value=k;else if(m==="selected"&&l)gd(e,k);else{var y=m;r||(y=Uu(y));var S=y==="defaultValue"||y==="defaultChecked";if(k==null&&!o&&!S)if(f[m]=null,y==="value"||y==="checked"){let E=e;if(y==="value"){let b=E.defaultValue;E.removeAttribute(y),E.defaultValue=b}else{let b=E.defaultChecked;E.removeAttribute(y),E.defaultChecked=b}}else e.removeAttribute(m);else S||u.includes(y)&&(o||typeof k!="string")?e[y]=k:typeof k!="function"&&Q(e,y,k)}m==="style"&&"__styles"in e&&(e.__styles={})}}}return s}var Lo=new Map;function gs(e){var t=Lo.get(e.nodeName);if(t)return t;Lo.set(e.nodeName,t=[]);for(var n,i=e,r=Element.prototype;r!==i;){n=Wa(i);for(var o in n)n[o].set&&t.push(o);i=ns(i)}return t}function In(e,t,n){var i=e.__className,r=bl(t,n);(i!==r||ls)&&(r===""?e.removeAttribute("class"):e.setAttribute("class",r),e.__className=r)}function vs(e,t,n){var i=e.__className,r=bl(t,n);(i!==r||ls)&&(t==null&&!n?e.removeAttribute("class"):e.className=r,e.__className=r)}function bl(e,t){return(e??"")+(t?" "+t:"")}function Ye(e,t,n){if(n){if(e.classList.contains(t))return;e.classList.add(t)}else{if(!e.classList.contains(t))return;e.classList.remove(t)}}function We(e,t,n,i){var r=e.__styles??(e.__styles={});r[t]!==n&&(r[t]=n,n==null?e.style.removeProperty(t):e.style.setProperty(t,n,""))}function kl(e,t,n=t){var i=Jr();td(e,"input",r=>{var o=r?e.defaultValue:e.value;if(o=vo(e)?mo(o):o,n(o),i&&o!==(o=t())){var a=e.selectionStart,s=e.selectionEnd;e.value=o??"",s!==null&&(e.selectionStart=a,e.selectionEnd=Math.min(s,e.value.length))}}),It(t)==null&&e.value&&n(vo(e)?mo(e.value):e.value),ei(()=>{var r=t();vo(e)&&r===mo(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function vo(e){var t=e.type;return t==="number"||t==="range"}function mo(e){return e===""?null:+e}var dn,Wn,zi,Wr,El;const Br=class Br{constructor(t){Xe(this,Wr);Xe(this,dn,new WeakMap);Xe(this,Wn);Xe(this,zi);go(this,zi,t)}observe(t,n){var i=ve(this,dn).get(t)||new Set;return i.add(n),ve(this,dn).set(t,i),yt(this,Wr,El).call(this).observe(t,ve(this,zi)),()=>{var r=ve(this,dn).get(t);r.delete(n),r.size===0&&(ve(this,dn).delete(t),ve(this,Wn).unobserve(t))}}};dn=new WeakMap,Wn=new WeakMap,zi=new WeakMap,Wr=new WeakSet,El=function(){return ve(this,Wn)??go(this,Wn,new ResizeObserver(t=>{for(var n of t){Br.entries.set(n.target,n);for(var i of ve(this,dn).get(n.target)||[])i(n)}}))},Bs(Br,"entries",new WeakMap);let Vo=Br;var vd=new Vo({box:"border-box"});function Mr(e,t,n){var i=vd.observe(e,()=>n(e[t]));_t(()=>(It(()=>n(e[t])),i))}function Us(e,t){return e===t||(e==null?void 0:e[hn])===t}function Qi(e={},t,n,i){return _t(()=>{var r,o;return ei(()=>{r=o,o=[],It(()=>{e!==n(...o)&&(t(e,...o),r&&Us(n(...r),e)&&t(null,...r))})}),()=>{$r(()=>{o&&Us(n(...o),e)&&t(null,...o)})}}),e}function he(e=!1){const t=Se,n=t.l.u;if(!n)return;let i=()=>Y(t.s);if(e){let r=0,o={};const a=yn(()=>{let s=!1;const l=t.s;for(const c in l)l[c]!==o[c]&&(o[c]=l[c],s=!0);return s&&r++,r});i=()=>d(a)}n.b.length&&zu(()=>{Js(t,i),kr(n.b)}),Ao(()=>{const r=It(()=>n.m.map(ru));return()=>{for(const o of r)typeof o=="function"&&o()}}),n.a.length&&Ao(()=>{Js(t,i),kr(n.a)})}function Js(e,t){if(e.l.s)for(const n of e.l.s)d(n);t()}function Sl(e){var t=dt(0);return function(){return arguments.length===1?(D(t,d(t)+1),arguments[0]):(d(t),e())}}function ke(e,t){var o;var n=(o=e.$$events)==null?void 0:o[t.type],i=Gi(n)?n.slice():n==null?[]:[n];for(var r of i)r.call(this,t)}function ms(e,t,n){if(e==null)return t(void 0),n&&n(void 0),Qt;const i=It(()=>e.subscribe(t,n));return i.unsubscribe?()=>i.unsubscribe():i}let lr=!1;function q(e,t,n){const i=n[t]??(n[t]={store:null,source:Gr(void 0),unsubscribe:Qt});if(i.store!==e)if(i.unsubscribe(),i.store=e??null,e==null)i.source.v=void 0,i.unsubscribe=Qt;else{var r=!0;i.unsubscribe=ms(e,o=>{r?i.source.v=o:D(i.source,o)}),r=!1}return d(i.source)}function md(e,t,n){let i=n[t];return i&&i.store!==e&&(i.unsubscribe(),i.unsubscribe=Qt),e}function bi(e,t){return e.set(t),t}function je(){const e={};return ol(()=>{for(var t in e)e[t].unsubscribe()}),e}function yd(e){var t=lr;try{return lr=!1,[e(),lr]}finally{lr=t}}const pd={get(e,t){if(!e.exclude.includes(t))return d(e.version),t in e.special?e.special[t]():e.props[t]},set(e,t,n){return t in e.special||(e.special[t]=v({get[t](){return e.props[t]}},t,Za)),e.special[t](n),Gs(e.version),!0},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},deleteProperty(e,t){return e.exclude.includes(t)||(e.exclude.push(t),Gs(e.version)),!0},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function me(e,t){return new Proxy({props:e,exclude:t,special:{},version:dt(0)},pd)}const _d={get(e,t){let n=e.props.length;for(;n--;){let i=e.props[n];if(li(i)&&(i=i()),typeof i=="object"&&i!==null&&t in i)return i[t]}},set(e,t,n){let i=e.props.length;for(;i--;){let r=e.props[i];li(r)&&(r=r());const o=fn(r,t);if(o&&o.set)return o.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let i=e.props[n];if(li(i)&&(i=i()),typeof i=="object"&&i!==null&&t in i){const r=fn(i,t);return r&&!r.configurable&&(r.configurable=!0),r}}},has(e,t){if(t===hn||t===Fa)return!1;for(let n of e.props)if(li(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props){li(n)&&(n=n());for(const i in n)t.includes(i)||t.push(i)}return t}};function $e(...e){return new Proxy({props:e},_d)}function js(e){for(var t=_e,n=_e;t!==null&&!(t.f&(Tt|$i));)t=t.parent;try{return Et(t),e()}finally{Et(n)}}function v(e,t,n,i){var C;var r=(n&xu)!==0,o=!jn||(n&bu)!==0,a=(n&ku)!==0,s=(n&Eu)!==0,l=!1,c;a?[c,l]=yd(()=>e[t]):c=e[t];var u=hn in e||Fa in e,f=((C=fn(e,t))==null?void 0:C.set)??(u&&a&&t in e?M=>e[t]=M:void 0),h=i,g=!0,p=!1,y=()=>(p=!0,g&&(g=!1,s?h=It(i):h=i),h);c===void 0&&i!==void 0&&(f&&o&&hu(),c=y(),f&&f(c));var S;if(o)S=()=>{var M=e[t];return M===void 0?y():(g=!0,p=!1,M)};else{var _=js(()=>(r?yn:oe)(()=>e[t]));_.f|=su,S=()=>{var M=d(_);return M!==void 0&&(h=void 0),M===void 0?h:M}}if(!(n&Za))return S;if(f){var m=e.$$legacy;return function(M,P){return arguments.length>0?((!o||!P||m||l)&&f(P?S():M),M):S()}}var k=!1,E=!1,b=Gr(c),N=js(()=>yn(()=>{var M=S(),P=d(b);return k?(k=!1,E=!0,P):(E=!1,b.v=M)}));return r||(N.equals=os),function(M,P){if(arguments.length>0){const T=P?d(N):o&&a?Ve(M):M;return N.equals(T)||(k=!0,D(b,T),p&&h!==void 0&&(h=T),It(()=>d(N))),M}return d(N)}}function ii(e){Se===null&&Ur(),jn&&Se.l!==null?xd(Se).m.push(e):Ao(()=>{const t=It(e);if(typeof t=="function")return t})}function Cl(e){Se===null&&Ur(),ii(()=>()=>It(e))}function wd(e,t,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:i})}function eo(){const e=Se;return e===null&&Ur(),(t,n,i)=>{var o;const r=(o=e.s.$$events)==null?void 0:o[t];if(r){const a=Gi(r)?r.slice():[r],s=wd(t,n,i);for(const l of a)l.call(e.x,s);return!s.defaultPrevented}return!0}}function xd(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const bd="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(bd);pu();const Hn=[];function kt(e,t){return{subscribe:re(e,t).subscribe}}function re(e,t=Qt){let n=null;const i=new Set;function r(s){if(rs(e,s)&&(e=s,n)){const l=!Hn.length;for(const c of i)c[1](),Hn.push(c,e);if(l){for(let c=0;c<Hn.length;c+=2)Hn[c][0](Hn[c+1]);Hn.length=0}}}function o(s){r(s(e))}function a(s,l=Qt){const c=[s,l];return i.add(c),i.size===1&&(n=t(r,o)||Qt),s(e),()=>{i.delete(c),i.size===0&&n&&(n(),n=null)}}return{set:r,update:o,subscribe:a}}function Cn(e,t,n){const i=!Array.isArray(e),r=i?[e]:e;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=t.length<2;return kt(n,(a,s)=>{let l=!1;const c=[];let u=0,f=Qt;const h=()=>{if(u)return;f();const p=t(i?c[0]:c,a,s);o?a(p):f=typeof p=="function"?p:Qt},g=r.map((p,y)=>ms(p,S=>{c[y]=S,u&=~(1<<y),l&&h()},()=>{u|=1<<y}));return l=!0,h(),function(){kr(g),f(),l=!1}})}function V(e){let t;return ms(e,n=>t=n)(),t}function at(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,i;n<e.length;n++)(i=at(e[n]))!==""&&(t+=(t&&" ")+i);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var kd={value:()=>{}};function to(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new pr(n)}function pr(e){this._=e}function Ed(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}pr.prototype=to.prototype={constructor:pr,on:function(e,t){var n=this._,i=Ed(e+"",n),r,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((r=(e=i[o]).type)&&(r=Sd(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(r=(e=i[o]).type)n[r]=Qs(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Qs(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new pr(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)}};function Sd(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function Qs(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=kd,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Xo="http://www.w3.org/1999/xhtml";const ea={svg:"http://www.w3.org/2000/svg",xhtml:Xo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function no(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ea.hasOwnProperty(t)?{space:ea[t],local:e}:e}function Cd(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Xo&&t.documentElement.namespaceURI===Xo?t.createElement(e):t.createElementNS(n,e)}}function Nd(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Nl(e){var t=no(e);return(t.local?Nd:Cd)(t)}function Md(){}function ys(e){return e==null?Md:function(){return this.querySelector(e)}}function Pd(e){typeof e!="function"&&(e=ys(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],a=o.length,s=i[r]=new Array(a),l,c,u=0;u<a;++u)(l=o[u])&&(c=e.call(l,l.__data__,u,o))&&("__data__"in l&&(c.__data__=l.__data__),s[u]=c);return new xt(i,this._parents)}function zd(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Ad(){return[]}function Ml(e){return e==null?Ad:function(){return this.querySelectorAll(e)}}function Id(e){return function(){return zd(e.apply(this,arguments))}}function Td(e){typeof e=="function"?e=Id(e):e=Ml(e);for(var t=this._groups,n=t.length,i=[],r=[],o=0;o<n;++o)for(var a=t[o],s=a.length,l,c=0;c<s;++c)(l=a[c])&&(i.push(e.call(l,l.__data__,c,a)),r.push(l));return new xt(i,r)}function Pl(e){return function(){return this.matches(e)}}function zl(e){return function(t){return t.matches(e)}}var Od=Array.prototype.find;function Hd(e){return function(){return Od.call(this.children,e)}}function Dd(){return this.firstElementChild}function Rd(e){return this.select(e==null?Dd:Hd(typeof e=="function"?e:zl(e)))}var Ld=Array.prototype.filter;function Vd(){return Array.from(this.children)}function Xd(e){return function(){return Ld.call(this.children,e)}}function Yd(e){return this.selectAll(e==null?Vd:Xd(typeof e=="function"?e:zl(e)))}function Wd(e){typeof e!="function"&&(e=Pl(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],a=o.length,s=i[r]=[],l,c=0;c<a;++c)(l=o[c])&&e.call(l,l.__data__,c,o)&&s.push(l);return new xt(i,this._parents)}function Al(e){return new Array(e.length)}function Bd(){return new xt(this._enter||this._groups.map(Al),this._parents)}function Pr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Pr.prototype={constructor:Pr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Kd(e){return function(){return e}}function Fd(e,t,n,i,r,o){for(var a=0,s,l=t.length,c=o.length;a<c;++a)(s=t[a])?(s.__data__=o[a],i[a]=s):n[a]=new Pr(e,o[a]);for(;a<l;++a)(s=t[a])&&(r[a]=s)}function qd(e,t,n,i,r,o,a){var s,l,c=new Map,u=t.length,f=o.length,h=new Array(u),g;for(s=0;s<u;++s)(l=t[s])&&(h[s]=g=a.call(l,l.__data__,s,t)+"",c.has(g)?r[s]=l:c.set(g,l));for(s=0;s<f;++s)g=a.call(e,o[s],s,o)+"",(l=c.get(g))?(i[s]=l,l.__data__=o[s],c.delete(g)):n[s]=new Pr(e,o[s]);for(s=0;s<u;++s)(l=t[s])&&c.get(h[s])===l&&(r[s]=l)}function Gd(e){return e.__data__}function Zd(e,t){if(!arguments.length)return Array.from(this,Gd);var n=t?qd:Fd,i=this._parents,r=this._groups;typeof e!="function"&&(e=Kd(e));for(var o=r.length,a=new Array(o),s=new Array(o),l=new Array(o),c=0;c<o;++c){var u=i[c],f=r[c],h=f.length,g=$d(e.call(u,u&&u.__data__,c,i)),p=g.length,y=s[c]=new Array(p),S=a[c]=new Array(p),_=l[c]=new Array(h);n(u,f,y,S,_,g,t);for(var m=0,k=0,E,b;m<p;++m)if(E=y[m]){for(m>=k&&(k=m+1);!(b=S[k])&&++k<p;);E._next=b||null}}return a=new xt(a,i),a._enter=s,a._exit=l,a}function $d(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ud(){return new xt(this._exit||this._groups.map(Al),this._parents)}function Jd(e,t,n){var i=this.enter(),r=this,o=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function jd(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,o=i.length,a=Math.min(r,o),s=new Array(r),l=0;l<a;++l)for(var c=n[l],u=i[l],f=c.length,h=s[l]=new Array(f),g,p=0;p<f;++p)(g=c[p]||u[p])&&(h[p]=g);for(;l<r;++l)s[l]=n[l];return new xt(s,this._parents)}function Qd(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,o=i[r],a;--r>=0;)(a=i[r])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function ef(e){e||(e=tf);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var a=n[o],s=a.length,l=r[o]=new Array(s),c,u=0;u<s;++u)(c=a[u])&&(l[u]=c);l.sort(t)}return new xt(r,this._parents).order()}function tf(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function nf(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function rf(){return Array.from(this)}function of(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null}function sf(){let e=0;for(const t of this)++e;return e}function af(){return!this.node()}function lf(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],o=0,a=r.length,s;o<a;++o)(s=r[o])&&e.call(s,s.__data__,o,r);return this}function cf(e){return function(){this.removeAttribute(e)}}function uf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function df(e,t){return function(){this.setAttribute(e,t)}}function ff(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function hf(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function gf(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function vf(e,t){var n=no(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?uf:cf:typeof t=="function"?n.local?gf:hf:n.local?ff:df)(n,t))}function Il(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function mf(e){return function(){this.style.removeProperty(e)}}function yf(e,t,n){return function(){this.style.setProperty(e,t,n)}}function pf(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function _f(e,t,n){return arguments.length>1?this.each((t==null?mf:typeof t=="function"?pf:yf)(e,t,n??"")):Fn(this.node(),e)}function Fn(e,t){return e.style.getPropertyValue(t)||Il(e).getComputedStyle(e,null).getPropertyValue(t)}function wf(e){return function(){delete this[e]}}function xf(e,t){return function(){this[e]=t}}function bf(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function kf(e,t){return arguments.length>1?this.each((t==null?wf:typeof t=="function"?bf:xf)(e,t)):this.node()[e]}function Tl(e){return e.trim().split(/^|\s+/)}function ps(e){return e.classList||new Ol(e)}function Ol(e){this._node=e,this._names=Tl(e.getAttribute("class")||"")}Ol.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Hl(e,t){for(var n=ps(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function Dl(e,t){for(var n=ps(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function Ef(e){return function(){Hl(this,e)}}function Sf(e){return function(){Dl(this,e)}}function Cf(e,t){return function(){(t.apply(this,arguments)?Hl:Dl)(this,e)}}function Nf(e,t){var n=Tl(e+"");if(arguments.length<2){for(var i=ps(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Cf:t?Ef:Sf)(n,t))}function Mf(){this.textContent=""}function Pf(e){return function(){this.textContent=e}}function zf(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Af(e){return arguments.length?this.each(e==null?Mf:(typeof e=="function"?zf:Pf)(e)):this.node().textContent}function If(){this.innerHTML=""}function Tf(e){return function(){this.innerHTML=e}}function Of(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Hf(e){return arguments.length?this.each(e==null?If:(typeof e=="function"?Of:Tf)(e)):this.node().innerHTML}function Df(){this.nextSibling&&this.parentNode.appendChild(this)}function Rf(){return this.each(Df)}function Lf(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Vf(){return this.each(Lf)}function Xf(e){var t=typeof e=="function"?e:Nl(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Yf(){return null}function Wf(e,t){var n=typeof e=="function"?e:Nl(e),i=t==null?Yf:typeof t=="function"?t:ys(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Bf(){var e=this.parentNode;e&&e.removeChild(this)}function Kf(){return this.each(Bf)}function Ff(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function qf(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Gf(e){return this.select(e?qf:Ff)}function Zf(e){return arguments.length?this.property("__data__",e):this.node().__data__}function $f(e){return function(t){e.call(this,t,this.__data__)}}function Uf(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function Jf(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,r=t.length,o;n<r;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++i]=o;++i?t.length=i:delete this.__on}}}function jf(e,t,n){return function(){var i=this.__on,r,o=$f(t);if(i){for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=t;return}}this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Qf(e,t,n){var i=Uf(e+""),r,o=i.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,c=s.length,u;l<c;++l)for(r=0,u=s[l];r<o;++r)if((a=i[r]).type===u.type&&a.name===u.name)return u.value}return}for(s=t?jf:Jf,r=0;r<o;++r)this.each(s(i[r],t,n));return this}function Rl(e,t,n){var i=Il(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function eh(e,t){return function(){return Rl(this,e,t)}}function th(e,t){return function(){return Rl(this,e,t.apply(this,arguments))}}function nh(e,t){return this.each((typeof t=="function"?th:eh)(e,t))}function*ih(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length,a;r<o;++r)(a=i[r])&&(yield a)}var Ll=[null];function xt(e,t){this._groups=e,this._parents=t}function er(){return new xt([[document.documentElement]],Ll)}function rh(){return this}xt.prototype=er.prototype={constructor:xt,select:Pd,selectAll:Td,selectChild:Rd,selectChildren:Yd,filter:Wd,data:Zd,enter:Bd,exit:Ud,join:Jd,merge:jd,selection:rh,order:Qd,sort:ef,call:nf,nodes:rf,node:of,size:sf,empty:af,each:lf,attr:vf,style:_f,property:kf,classed:Nf,text:Af,html:Hf,raise:Rf,lower:Vf,append:Xf,insert:Wf,remove:Kf,clone:Gf,datum:Zf,on:Qf,dispatch:nh,[Symbol.iterator]:ih};function wt(e){return typeof e=="string"?new xt([[document.querySelector(e)]],[document.documentElement]):new xt([[e]],Ll)}function oh(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Nt(e,t){if(e=oh(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const sh={passive:!1},ki={capture:!0,passive:!1};function yo(e){e.stopImmediatePropagation()}function Ln(e){e.preventDefault(),e.stopImmediatePropagation()}function Vl(e){var t=e.document.documentElement,n=wt(e).on("dragstart.drag",Ln,ki);"onselectstart"in t?n.on("selectstart.drag",Ln,ki):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Xl(e,t){var n=e.document.documentElement,i=wt(e).on("dragstart.drag",null);t&&(i.on("click.drag",Ln,ki),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const cr=e=>()=>e;function Yo(e,{sourceEvent:t,subject:n,target:i,identifier:r,active:o,x:a,y:s,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}Yo.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function ah(e){return!e.ctrlKey&&!e.button}function lh(){return this.parentNode}function ch(e,t){return t??{x:e.x,y:e.y}}function uh(){return navigator.maxTouchPoints||"ontouchstart"in this}function Yl(){var e=ah,t=lh,n=ch,i=uh,r={},o=to("start","drag","end"),a=0,s,l,c,u,f=0;function h(E){E.on("mousedown.drag",g).filter(i).on("touchstart.drag",S).on("touchmove.drag",_,sh).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(E,b){if(!(u||!e.call(this,E,b))){var N=k(this,t.call(this,E,b),E,b,"mouse");N&&(wt(E.view).on("mousemove.drag",p,ki).on("mouseup.drag",y,ki),Vl(E.view),yo(E),c=!1,s=E.clientX,l=E.clientY,N("start",E))}}function p(E){if(Ln(E),!c){var b=E.clientX-s,N=E.clientY-l;c=b*b+N*N>f}r.mouse("drag",E)}function y(E){wt(E.view).on("mousemove.drag mouseup.drag",null),Xl(E.view,c),Ln(E),r.mouse("end",E)}function S(E,b){if(e.call(this,E,b)){var N=E.changedTouches,C=t.call(this,E,b),M=N.length,P,T;for(P=0;P<M;++P)(T=k(this,C,E,b,N[P].identifier,N[P]))&&(yo(E),T("start",E,N[P]))}}function _(E){var b=E.changedTouches,N=b.length,C,M;for(C=0;C<N;++C)(M=r[b[C].identifier])&&(Ln(E),M("drag",E,b[C]))}function m(E){var b=E.changedTouches,N=b.length,C,M;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),C=0;C<N;++C)(M=r[b[C].identifier])&&(yo(E),M("end",E,b[C]))}function k(E,b,N,C,M,P){var T=o.copy(),R=Nt(P||N,b),L,H,w;if((w=n.call(E,new Yo("beforestart",{sourceEvent:N,target:h,identifier:M,active:a,x:R[0],y:R[1],dx:0,dy:0,dispatch:T}),C))!=null)return L=w.x-R[0]||0,H=w.y-R[1]||0,function O(x,z,I){var A=R,X;switch(x){case"start":r[M]=O,X=a++;break;case"end":delete r[M],--a;case"drag":R=Nt(I||z,b),X=a;break}T.call(x,E,new Yo(x,{sourceEvent:z,subject:w,target:h,identifier:M,active:X,x:R[0]+L,y:R[1]+H,dx:R[0]-A[0],dy:R[1]-A[1],dispatch:T}),C)}}return h.filter=function(E){return arguments.length?(e=typeof E=="function"?E:cr(!!E),h):e},h.container=function(E){return arguments.length?(t=typeof E=="function"?E:cr(E),h):t},h.subject=function(E){return arguments.length?(n=typeof E=="function"?E:cr(E),h):n},h.touchable=function(E){return arguments.length?(i=typeof E=="function"?E:cr(!!E),h):i},h.on=function(){var E=o.on.apply(o,arguments);return E===o?h:E},h.clickDistance=function(E){return arguments.length?(f=(E=+E)*E,h):Math.sqrt(f)},h}function _s(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Wl(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function tr(){}var Ei=.7,zr=1/Ei,Vn="\\s*([+-]?\\d+)\\s*",Si="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dh=/^#([0-9a-f]{3,8})$/,fh=new RegExp(`^rgb\\(${Vn},${Vn},${Vn}\\)$`),hh=new RegExp(`^rgb\\(${Wt},${Wt},${Wt}\\)$`),gh=new RegExp(`^rgba\\(${Vn},${Vn},${Vn},${Si}\\)$`),vh=new RegExp(`^rgba\\(${Wt},${Wt},${Wt},${Si}\\)$`),mh=new RegExp(`^hsl\\(${Si},${Wt},${Wt}\\)$`),yh=new RegExp(`^hsla\\(${Si},${Wt},${Wt},${Si}\\)$`),ta={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};_s(tr,Ci,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:na,formatHex:na,formatHex8:ph,formatHsl:_h,formatRgb:ia,toString:ia});function na(){return this.rgb().formatHex()}function ph(){return this.rgb().formatHex8()}function _h(){return Bl(this).formatHsl()}function ia(){return this.rgb().formatRgb()}function Ci(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=dh.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ra(t):n===3?new vt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ur(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ur(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=fh.exec(e))?new vt(t[1],t[2],t[3],1):(t=hh.exec(e))?new vt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=gh.exec(e))?ur(t[1],t[2],t[3],t[4]):(t=vh.exec(e))?ur(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=mh.exec(e))?aa(t[1],t[2]/100,t[3]/100,1):(t=yh.exec(e))?aa(t[1],t[2]/100,t[3]/100,t[4]):ta.hasOwnProperty(e)?ra(ta[e]):e==="transparent"?new vt(NaN,NaN,NaN,0):null}function ra(e){return new vt(e>>16&255,e>>8&255,e&255,1)}function ur(e,t,n,i){return i<=0&&(e=t=n=NaN),new vt(e,t,n,i)}function wh(e){return e instanceof tr||(e=Ci(e)),e?(e=e.rgb(),new vt(e.r,e.g,e.b,e.opacity)):new vt}function Wo(e,t,n,i){return arguments.length===1?wh(e):new vt(e,t,n,i??1)}function vt(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}_s(vt,Wo,Wl(tr,{brighter(e){return e=e==null?zr:Math.pow(zr,e),new vt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ei:Math.pow(Ei,e),new vt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new vt(Nn(this.r),Nn(this.g),Nn(this.b),Ar(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:oa,formatHex:oa,formatHex8:xh,formatRgb:sa,toString:sa}));function oa(){return`#${En(this.r)}${En(this.g)}${En(this.b)}`}function xh(){return`#${En(this.r)}${En(this.g)}${En(this.b)}${En((isNaN(this.opacity)?1:this.opacity)*255)}`}function sa(){const e=Ar(this.opacity);return`${e===1?"rgb(":"rgba("}${Nn(this.r)}, ${Nn(this.g)}, ${Nn(this.b)}${e===1?")":`, ${e})`}`}function Ar(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Nn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function En(e){return e=Nn(e),(e<16?"0":"")+e.toString(16)}function aa(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Mt(e,t,n,i)}function Bl(e){if(e instanceof Mt)return new Mt(e.h,e.s,e.l,e.opacity);if(e instanceof tr||(e=Ci(e)),!e)return new Mt;if(e instanceof Mt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),o=Math.max(t,n,i),a=NaN,s=o-r,l=(o+r)/2;return s?(t===o?a=(n-i)/s+(n<i)*6:n===o?a=(i-t)/s+2:a=(t-n)/s+4,s/=l<.5?o+r:2-o-r,a*=60):s=l>0&&l<1?0:a,new Mt(a,s,l,e.opacity)}function bh(e,t,n,i){return arguments.length===1?Bl(e):new Mt(e,t,n,i??1)}function Mt(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}_s(Mt,bh,Wl(tr,{brighter(e){return e=e==null?zr:Math.pow(zr,e),new Mt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ei:Math.pow(Ei,e),new Mt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new vt(po(e>=240?e-240:e+120,r,i),po(e,r,i),po(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new Mt(la(this.h),dr(this.s),dr(this.l),Ar(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ar(this.opacity);return`${e===1?"hsl(":"hsla("}${la(this.h)}, ${dr(this.s)*100}%, ${dr(this.l)*100}%${e===1?")":`, ${e})`}`}}));function la(e){return e=(e||0)%360,e<0?e+360:e}function dr(e){return Math.max(0,Math.min(1,e||0))}function po(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Kl=e=>()=>e;function kh(e,t){return function(n){return e+n*t}}function Eh(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function Sh(e){return(e=+e)==1?Fl:function(t,n){return n-t?Eh(t,n,e):Kl(isNaN(t)?n:t)}}function Fl(e,t){var n=t-e;return n?kh(e,n):Kl(isNaN(e)?t:e)}const ca=function e(t){var n=Sh(t);function i(r,o){var a=n((r=Wo(r)).r,(o=Wo(o)).r),s=n(r.g,o.g),l=n(r.b,o.b),c=Fl(r.opacity,o.opacity);return function(u){return r.r=a(u),r.g=s(u),r.b=l(u),r.opacity=c(u),r+""}}return i.gamma=e,i}(1);function cn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Bo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_o=new RegExp(Bo.source,"g");function Ch(e){return function(){return e}}function Nh(e){return function(t){return e(t)+""}}function Mh(e,t){var n=Bo.lastIndex=_o.lastIndex=0,i,r,o,a=-1,s=[],l=[];for(e=e+"",t=t+"";(i=Bo.exec(e))&&(r=_o.exec(t));)(o=r.index)>n&&(o=t.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(i=i[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:cn(i,r)})),n=_o.lastIndex;return n<t.length&&(o=t.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?Nh(l[0].x):Ch(t):(t=l.length,function(c){for(var u=0,f;u<t;++u)s[(f=l[u]).i]=f.x(c);return s.join("")})}var ua=180/Math.PI,Ko={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ql(e,t,n,i,r,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,l/=s),e*i<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(t,e)*ua,skewX:Math.atan(l)*ua,scaleX:a,scaleY:s}}var fr;function Ph(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ko:ql(t.a,t.b,t.c,t.d,t.e,t.f)}function zh(e){return e==null||(fr||(fr=document.createElementNS("http://www.w3.org/2000/svg","g")),fr.setAttribute("transform",e),!(e=fr.transform.baseVal.consolidate()))?Ko:(e=e.matrix,ql(e.a,e.b,e.c,e.d,e.e,e.f))}function Gl(e,t,n,i){function r(c){return c.length?c.pop()+" ":""}function o(c,u,f,h,g,p){if(c!==f||u!==h){var y=g.push("translate(",null,t,null,n);p.push({i:y-4,x:cn(c,f)},{i:y-2,x:cn(u,h)})}else(f||h)&&g.push("translate("+f+t+h+n)}function a(c,u,f,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:f.push(r(f)+"rotate(",null,i)-2,x:cn(c,u)})):u&&f.push(r(f)+"rotate("+u+i)}function s(c,u,f,h){c!==u?h.push({i:f.push(r(f)+"skewX(",null,i)-2,x:cn(c,u)}):u&&f.push(r(f)+"skewX("+u+i)}function l(c,u,f,h,g,p){if(c!==f||u!==h){var y=g.push(r(g)+"scale(",null,",",null,")");p.push({i:y-4,x:cn(c,f)},{i:y-2,x:cn(u,h)})}else(f!==1||h!==1)&&g.push(r(g)+"scale("+f+","+h+")")}return function(c,u){var f=[],h=[];return c=e(c),u=e(u),o(c.translateX,c.translateY,u.translateX,u.translateY,f,h),a(c.rotate,u.rotate,f,h),s(c.skewX,u.skewX,f,h),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,h),c=u=null,function(g){for(var p=-1,y=h.length,S;++p<y;)f[(S=h[p]).i]=S.x(g);return f.join("")}}}var Ah=Gl(Ph,"px, ","px)","deg)"),Ih=Gl(zh,", ",")",")"),Th=1e-12;function da(e){return((e=Math.exp(e))+1/e)/2}function Oh(e){return((e=Math.exp(e))-1/e)/2}function Hh(e){return((e=Math.exp(2*e))-1)/(e+1)}const Dh=function e(t,n,i){function r(o,a){var s=o[0],l=o[1],c=o[2],u=a[0],f=a[1],h=a[2],g=u-s,p=f-l,y=g*g+p*p,S,_;if(y<Th)_=Math.log(h/c)/t,S=function(C){return[s+C*g,l+C*p,c*Math.exp(t*C*_)]};else{var m=Math.sqrt(y),k=(h*h-c*c+i*y)/(2*c*n*m),E=(h*h-c*c-i*y)/(2*h*n*m),b=Math.log(Math.sqrt(k*k+1)-k),N=Math.log(Math.sqrt(E*E+1)-E);_=(N-b)/t,S=function(C){var M=C*_,P=da(b),T=c/(n*m)*(P*Hh(t*M+b)-Oh(b));return[s+T*g,l+T*p,c*P/da(t*M+b)]}}return S.duration=_*1e3*t/Math.SQRT2,S}return r.rho=function(o){var a=Math.max(.001,+o),s=a*a,l=s*s;return e(a,s,l)},r}(Math.SQRT2,2,4);var qn=0,hi=0,ci=0,Zl=1e3,Ir,gi,Tr=0,Mn=0,io=0,Ni=typeof performance=="object"&&performance.now?performance:Date,$l=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ws(){return Mn||($l(Rh),Mn=Ni.now()+io)}function Rh(){Mn=0}function Or(){this._call=this._time=this._next=null}Or.prototype=Ul.prototype={constructor:Or,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ws():+n)+(t==null?0:+t),!this._next&&gi!==this&&(gi?gi._next=this:Ir=this,gi=this),this._call=e,this._time=n,Fo()},stop:function(){this._call&&(this._call=null,this._time=1/0,Fo())}};function Ul(e,t,n){var i=new Or;return i.restart(e,t,n),i}function Lh(){ws(),++qn;for(var e=Ir,t;e;)(t=Mn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--qn}function fa(){Mn=(Tr=Ni.now())+io,qn=hi=0;try{Lh()}finally{qn=0,Xh(),Mn=0}}function Vh(){var e=Ni.now(),t=e-Tr;t>Zl&&(io-=t,Tr=e)}function Xh(){for(var e,t=Ir,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ir=n);gi=e,Fo(i)}function Fo(e){if(!qn){hi&&(hi=clearTimeout(hi));var t=e-Mn;t>24?(e<1/0&&(hi=setTimeout(fa,e-Ni.now()-io)),ci&&(ci=clearInterval(ci))):(ci||(Tr=Ni.now(),ci=setInterval(Vh,Zl)),qn=1,$l(fa))}}function ha(e,t,n){var i=new Or;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var Yh=to("start","end","cancel","interrupt"),Wh=[],Jl=0,ga=1,qo=2,_r=3,va=4,Go=5,wr=6;function ro(e,t,n,i,r,o){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;Bh(e,n,{name:t,index:i,group:r,on:Yh,tween:Wh,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Jl})}function xs(e,t){var n=Dt(e,t);if(n.state>Jl)throw new Error("too late; already scheduled");return n}function Gt(e,t){var n=Dt(e,t);if(n.state>_r)throw new Error("too late; already running");return n}function Dt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Bh(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=Ul(o,0,n.time);function o(c){n.state=ga,n.timer.restart(a,n.delay,n.time),n.delay<=c&&a(c-n.delay)}function a(c){var u,f,h,g;if(n.state!==ga)return l();for(u in i)if(g=i[u],g.name===n.name){if(g.state===_r)return ha(a);g.state===va?(g.state=wr,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete i[u]):+u<t&&(g.state=wr,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete i[u])}if(ha(function(){n.state===_r&&(n.state=va,n.timer.restart(s,n.delay,n.time),s(c))}),n.state=qo,n.on.call("start",e,e.__data__,n.index,n.group),n.state===qo){for(n.state=_r,r=new Array(h=n.tween.length),u=0,f=-1;u<h;++u)(g=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++f]=g);r.length=f+1}}function s(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Go,1),f=-1,h=r.length;++f<h;)r[f].call(e,u);n.state===Go&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=wr,n.timer.stop(),delete i[t];for(var c in i)return;delete e.__transition}}function xr(e,t){var n=e.__transition,i,r,o=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((i=n[a]).name!==t){o=!1;continue}r=i.state>qo&&i.state<Go,i.state=wr,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[a]}o&&delete e.__transition}}function Kh(e){return this.each(function(){xr(this,e)})}function Fh(e,t){var n,i;return function(){var r=Gt(this,e),o=r.tween;if(o!==n){i=n=o;for(var a=0,s=i.length;a<s;++a)if(i[a].name===t){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function qh(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var o=Gt(this,e),a=o.tween;if(a!==i){r=(i=a).slice();for(var s={name:t,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=s;break}l===c&&r.push(s)}o.tween=r}}function Gh(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=Dt(this.node(),n).tween,r=0,o=i.length,a;r<o;++r)if((a=i[r]).name===e)return a.value;return null}return this.each((t==null?Fh:qh)(n,e,t))}function bs(e,t,n){var i=e._id;return e.each(function(){var r=Gt(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Dt(r,i).value[t]}}function jl(e,t){var n;return(typeof t=="number"?cn:t instanceof Ci?ca:(n=Ci(t))?(t=n,ca):Mh)(e,t)}function Zh(e){return function(){this.removeAttribute(e)}}function $h(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Uh(e,t,n){var i,r=n+"",o;return function(){var a=this.getAttribute(e);return a===r?null:a===i?o:o=t(i=a,n)}}function Jh(e,t,n){var i,r=n+"",o;return function(){var a=this.getAttributeNS(e.space,e.local);return a===r?null:a===i?o:o=t(i=a,n)}}function jh(e,t,n){var i,r,o;return function(){var a,s=n(this),l;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=s+"",a===l?null:a===i&&l===r?o:(r=l,o=t(i=a,s)))}}function Qh(e,t,n){var i,r,o;return function(){var a,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=s+"",a===l?null:a===i&&l===r?o:(r=l,o=t(i=a,s)))}}function eg(e,t){var n=no(e),i=n==="transform"?Ih:jl;return this.attrTween(e,typeof t=="function"?(n.local?Qh:jh)(n,i,bs(this,"attr."+e,t)):t==null?(n.local?$h:Zh)(n):(n.local?Jh:Uh)(n,i,t))}function tg(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ng(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ig(e,t){var n,i;function r(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&ng(e,o)),n}return r._value=t,r}function rg(e,t){var n,i;function r(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&tg(e,o)),n}return r._value=t,r}function og(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=no(e);return this.tween(n,(i.local?ig:rg)(i,t))}function sg(e,t){return function(){xs(this,e).delay=+t.apply(this,arguments)}}function ag(e,t){return t=+t,function(){xs(this,e).delay=t}}function lg(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?sg:ag)(t,e)):Dt(this.node(),t).delay}function cg(e,t){return function(){Gt(this,e).duration=+t.apply(this,arguments)}}function ug(e,t){return t=+t,function(){Gt(this,e).duration=t}}function dg(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?cg:ug)(t,e)):Dt(this.node(),t).duration}function fg(e,t){if(typeof t!="function")throw new Error;return function(){Gt(this,e).ease=t}}function hg(e){var t=this._id;return arguments.length?this.each(fg(t,e)):Dt(this.node(),t).ease}function gg(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Gt(this,e).ease=n}}function vg(e){if(typeof e!="function")throw new Error;return this.each(gg(this._id,e))}function mg(e){typeof e!="function"&&(e=Pl(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],a=o.length,s=i[r]=[],l,c=0;c<a;++c)(l=o[c])&&e.call(l,l.__data__,c,o)&&s.push(l);return new nn(i,this._parents,this._name,this._id)}function yg(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,o=Math.min(i,r),a=new Array(i),s=0;s<o;++s)for(var l=t[s],c=n[s],u=l.length,f=a[s]=new Array(u),h,g=0;g<u;++g)(h=l[g]||c[g])&&(f[g]=h);for(;s<i;++s)a[s]=t[s];return new nn(a,this._parents,this._name,this._id)}function pg(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function _g(e,t,n){var i,r,o=pg(t)?xs:Gt;return function(){var a=o(this,e),s=a.on;s!==i&&(r=(i=s).copy()).on(t,n),a.on=r}}function wg(e,t){var n=this._id;return arguments.length<2?Dt(this.node(),n).on.on(e):this.each(_g(n,e,t))}function xg(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function bg(){return this.on("end.remove",xg(this._id))}function kg(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ys(e));for(var i=this._groups,r=i.length,o=new Array(r),a=0;a<r;++a)for(var s=i[a],l=s.length,c=o[a]=new Array(l),u,f,h=0;h<l;++h)(u=s[h])&&(f=e.call(u,u.__data__,h,s))&&("__data__"in u&&(f.__data__=u.__data__),c[h]=f,ro(c[h],t,n,h,c,Dt(u,n)));return new nn(o,this._parents,t,n)}function Eg(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ml(e));for(var i=this._groups,r=i.length,o=[],a=[],s=0;s<r;++s)for(var l=i[s],c=l.length,u,f=0;f<c;++f)if(u=l[f]){for(var h=e.call(u,u.__data__,f,l),g,p=Dt(u,n),y=0,S=h.length;y<S;++y)(g=h[y])&&ro(g,t,n,y,h,p);o.push(h),a.push(u)}return new nn(o,a,t,n)}var Sg=er.prototype.constructor;function Cg(){return new Sg(this._groups,this._parents)}function Ng(e,t){var n,i,r;return function(){var o=Fn(this,e),a=(this.style.removeProperty(e),Fn(this,e));return o===a?null:o===n&&a===i?r:r=t(n=o,i=a)}}function Ql(e){return function(){this.style.removeProperty(e)}}function Mg(e,t,n){var i,r=n+"",o;return function(){var a=Fn(this,e);return a===r?null:a===i?o:o=t(i=a,n)}}function Pg(e,t,n){var i,r,o;return function(){var a=Fn(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),Fn(this,e))),a===l?null:a===i&&l===r?o:(r=l,o=t(i=a,s))}}function zg(e,t){var n,i,r,o="style."+t,a="end."+o,s;return function(){var l=Gt(this,e),c=l.on,u=l.value[o]==null?s||(s=Ql(t)):void 0;(c!==n||r!==u)&&(i=(n=c).copy()).on(a,r=u),l.on=i}}function Ag(e,t,n){var i=(e+="")=="transform"?Ah:jl;return t==null?this.styleTween(e,Ng(e,i)).on("end.style."+e,Ql(e)):typeof t=="function"?this.styleTween(e,Pg(e,i,bs(this,"style."+e,t))).each(zg(this._id,e)):this.styleTween(e,Mg(e,i,t),n).on("end.style."+e,null)}function Ig(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function Tg(e,t,n){var i,r;function o(){var a=t.apply(this,arguments);return a!==r&&(i=(r=a)&&Ig(e,a,n)),i}return o._value=t,o}function Og(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,Tg(e,t,n??""))}function Hg(e){return function(){this.textContent=e}}function Dg(e){return function(){var t=e(this);this.textContent=t??""}}function Rg(e){return this.tween("text",typeof e=="function"?Dg(bs(this,"text",e)):Hg(e==null?"":e+""))}function Lg(e){return function(t){this.textContent=e.call(this,t)}}function Vg(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Lg(r)),t}return i._value=e,i}function Xg(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Vg(e))}function Yg(){for(var e=this._name,t=this._id,n=ec(),i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],s=a.length,l,c=0;c<s;++c)if(l=a[c]){var u=Dt(l,t);ro(l,e,n,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new nn(i,this._parents,e,n)}function Wg(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(o,a){var s={value:a},l={value:function(){--r===0&&o()}};n.each(function(){var c=Gt(this,i),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),c.on=t}),r===0&&o()})}var Bg=0;function nn(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function ec(){return++Bg}var Zt=er.prototype;nn.prototype={constructor:nn,select:kg,selectAll:Eg,selectChild:Zt.selectChild,selectChildren:Zt.selectChildren,filter:mg,merge:yg,selection:Cg,transition:Yg,call:Zt.call,nodes:Zt.nodes,node:Zt.node,size:Zt.size,empty:Zt.empty,each:Zt.each,on:wg,attr:eg,attrTween:og,style:Ag,styleTween:Og,text:Rg,textTween:Xg,remove:bg,tween:Gh,delay:lg,duration:dg,ease:hg,easeVarying:vg,end:Wg,[Symbol.iterator]:Zt[Symbol.iterator]};function Kg(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Fg={time:null,delay:0,duration:250,ease:Kg};function qg(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Gg(e){var t,n;e instanceof nn?(t=e._id,e=e._name):(t=ec(),(n=Fg).time=ws(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],s=a.length,l,c=0;c<s;++c)(l=a[c])&&ro(l,e,t,c,a,n||qg(l,t));return new nn(i,this._parents,e,t)}er.prototype.interrupt=Kh;er.prototype.transition=Gg;const hr=e=>()=>e;function Zg(e,{sourceEvent:t,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function $t(e,t,n){this.k=e,this.x=t,this.y=n}$t.prototype={constructor:$t,scale:function(e){return e===1?this:new $t(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new $t(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var oo=new $t(1,0,0);tc.prototype=$t.prototype;function tc(e){for(;!e.__zoom;)if(!(e=e.parentNode))return oo;return e.__zoom}function wo(e){e.stopImmediatePropagation()}function ui(e){e.preventDefault(),e.stopImmediatePropagation()}function $g(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Ug(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ma(){return this.__zoom||oo}function Jg(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function jg(){return navigator.maxTouchPoints||"ontouchstart"in this}function Qg(e,t,n){var i=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function nc(){var e=$g,t=Ug,n=Qg,i=Jg,r=jg,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,l=Dh,c=to("start","zoom","end"),u,f,h,g=500,p=150,y=0,S=10;function _(w){w.property("__zoom",ma).on("wheel.zoom",M,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",T).filter(r).on("touchstart.zoom",R).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",H).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(w,O,x,z){var I=w.selection?w.selection():w;I.property("__zoom",ma),w!==I?b(w,O,x,z):I.interrupt().each(function(){N(this,arguments).event(z).start().zoom(null,typeof O=="function"?O.apply(this,arguments):O).end()})},_.scaleBy=function(w,O,x,z){_.scaleTo(w,function(){var I=this.__zoom.k,A=typeof O=="function"?O.apply(this,arguments):O;return I*A},x,z)},_.scaleTo=function(w,O,x,z){_.transform(w,function(){var I=t.apply(this,arguments),A=this.__zoom,X=x==null?E(I):typeof x=="function"?x.apply(this,arguments):x,K=A.invert(X),$=typeof O=="function"?O.apply(this,arguments):O;return n(k(m(A,$),X,K),I,a)},x,z)},_.translateBy=function(w,O,x,z){_.transform(w,function(){return n(this.__zoom.translate(typeof O=="function"?O.apply(this,arguments):O,typeof x=="function"?x.apply(this,arguments):x),t.apply(this,arguments),a)},null,z)},_.translateTo=function(w,O,x,z,I){_.transform(w,function(){var A=t.apply(this,arguments),X=this.__zoom,K=z==null?E(A):typeof z=="function"?z.apply(this,arguments):z;return n(oo.translate(K[0],K[1]).scale(X.k).translate(typeof O=="function"?-O.apply(this,arguments):-O,typeof x=="function"?-x.apply(this,arguments):-x),A,a)},z,I)};function m(w,O){return O=Math.max(o[0],Math.min(o[1],O)),O===w.k?w:new $t(O,w.x,w.y)}function k(w,O,x){var z=O[0]-x[0]*w.k,I=O[1]-x[1]*w.k;return z===w.x&&I===w.y?w:new $t(w.k,z,I)}function E(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function b(w,O,x,z){w.on("start.zoom",function(){N(this,arguments).event(z).start()}).on("interrupt.zoom end.zoom",function(){N(this,arguments).event(z).end()}).tween("zoom",function(){var I=this,A=arguments,X=N(I,A).event(z),K=t.apply(I,A),$=x==null?E(K):typeof x=="function"?x.apply(I,A):x,ne=Math.max(K[1][0]-K[0][0],K[1][1]-K[0][1]),B=I.__zoom,J=typeof O=="function"?O.apply(I,A):O,ie=l(B.invert($).concat(ne/B.k),J.invert($).concat(ne/J.k));return function(ue){if(ue===1)ue=J;else{var de=ie(ue),Z=ne/de[2];ue=new $t(Z,$[0]-de[0]*Z,$[1]-de[1]*Z)}X.zoom(null,ue)}})}function N(w,O,x){return!x&&w.__zooming||new C(w,O)}function C(w,O){this.that=w,this.args=O,this.active=0,this.sourceEvent=null,this.extent=t.apply(w,O),this.taps=0}C.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,O){return this.mouse&&w!=="mouse"&&(this.mouse[1]=O.invert(this.mouse[0])),this.touch0&&w!=="touch"&&(this.touch0[1]=O.invert(this.touch0[0])),this.touch1&&w!=="touch"&&(this.touch1[1]=O.invert(this.touch1[0])),this.that.__zoom=O,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var O=wt(this.that).datum();c.call(w,this.that,new Zg(w,{sourceEvent:this.sourceEvent,target:_,type:w,transform:this.that.__zoom,dispatch:c}),O)}};function M(w,...O){if(!e.apply(this,arguments))return;var x=N(this,O).event(w),z=this.__zoom,I=Math.max(o[0],Math.min(o[1],z.k*Math.pow(2,i.apply(this,arguments)))),A=Nt(w);if(x.wheel)(x.mouse[0][0]!==A[0]||x.mouse[0][1]!==A[1])&&(x.mouse[1]=z.invert(x.mouse[0]=A)),clearTimeout(x.wheel);else{if(z.k===I)return;x.mouse=[A,z.invert(A)],xr(this),x.start()}ui(w),x.wheel=setTimeout(X,p),x.zoom("mouse",n(k(m(z,I),x.mouse[0],x.mouse[1]),x.extent,a));function X(){x.wheel=null,x.end()}}function P(w,...O){if(h||!e.apply(this,arguments))return;var x=w.currentTarget,z=N(this,O,!0).event(w),I=wt(w.view).on("mousemove.zoom",$,!0).on("mouseup.zoom",ne,!0),A=Nt(w,x),X=w.clientX,K=w.clientY;Vl(w.view),wo(w),z.mouse=[A,this.__zoom.invert(A)],xr(this),z.start();function $(B){if(ui(B),!z.moved){var J=B.clientX-X,ie=B.clientY-K;z.moved=J*J+ie*ie>y}z.event(B).zoom("mouse",n(k(z.that.__zoom,z.mouse[0]=Nt(B,x),z.mouse[1]),z.extent,a))}function ne(B){I.on("mousemove.zoom mouseup.zoom",null),Xl(B.view,z.moved),ui(B),z.event(B).end()}}function T(w,...O){if(e.apply(this,arguments)){var x=this.__zoom,z=Nt(w.changedTouches?w.changedTouches[0]:w,this),I=x.invert(z),A=x.k*(w.shiftKey?.5:2),X=n(k(m(x,A),z,I),t.apply(this,O),a);ui(w),s>0?wt(this).transition().duration(s).call(b,X,z,w):wt(this).call(_.transform,X,z,w)}}function R(w,...O){if(e.apply(this,arguments)){var x=w.touches,z=x.length,I=N(this,O,w.changedTouches.length===z).event(w),A,X,K,$;for(wo(w),X=0;X<z;++X)K=x[X],$=Nt(K,this),$=[$,this.__zoom.invert($),K.identifier],I.touch0?!I.touch1&&I.touch0[2]!==$[2]&&(I.touch1=$,I.taps=0):(I.touch0=$,A=!0,I.taps=1+!!u);u&&(u=clearTimeout(u)),A&&(I.taps<2&&(f=$[0],u=setTimeout(function(){u=null},g)),xr(this),I.start())}}function L(w,...O){if(this.__zooming){var x=N(this,O).event(w),z=w.changedTouches,I=z.length,A,X,K,$;for(ui(w),A=0;A<I;++A)X=z[A],K=Nt(X,this),x.touch0&&x.touch0[2]===X.identifier?x.touch0[0]=K:x.touch1&&x.touch1[2]===X.identifier&&(x.touch1[0]=K);if(X=x.that.__zoom,x.touch1){var ne=x.touch0[0],B=x.touch0[1],J=x.touch1[0],ie=x.touch1[1],ue=(ue=J[0]-ne[0])*ue+(ue=J[1]-ne[1])*ue,de=(de=ie[0]-B[0])*de+(de=ie[1]-B[1])*de;X=m(X,Math.sqrt(ue/de)),K=[(ne[0]+J[0])/2,(ne[1]+J[1])/2],$=[(B[0]+ie[0])/2,(B[1]+ie[1])/2]}else if(x.touch0)K=x.touch0[0],$=x.touch0[1];else return;x.zoom("touch",n(k(X,K,$),x.extent,a))}}function H(w,...O){if(this.__zooming){var x=N(this,O).event(w),z=w.changedTouches,I=z.length,A,X;for(wo(w),h&&clearTimeout(h),h=setTimeout(function(){h=null},g),A=0;A<I;++A)X=z[A],x.touch0&&x.touch0[2]===X.identifier?delete x.touch0:x.touch1&&x.touch1[2]===X.identifier&&delete x.touch1;if(x.touch1&&!x.touch0&&(x.touch0=x.touch1,delete x.touch1),x.touch0)x.touch0[1]=this.__zoom.invert(x.touch0[0]);else if(x.end(),x.taps===2&&(X=Nt(X,this),Math.hypot(f[0]-X[0],f[1]-X[1])<S)){var K=wt(this).on("dblclick.zoom");K&&K.apply(this,arguments)}}}return _.wheelDelta=function(w){return arguments.length?(i=typeof w=="function"?w:hr(+w),_):i},_.filter=function(w){return arguments.length?(e=typeof w=="function"?w:hr(!!w),_):e},_.touchable=function(w){return arguments.length?(r=typeof w=="function"?w:hr(!!w),_):r},_.extent=function(w){return arguments.length?(t=typeof w=="function"?w:hr([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),_):t},_.scaleExtent=function(w){return arguments.length?(o[0]=+w[0],o[1]=+w[1],_):[o[0],o[1]]},_.translateExtent=function(w){return arguments.length?(a[0][0]=+w[0][0],a[1][0]=+w[1][0],a[0][1]=+w[0][1],a[1][1]=+w[1][1],_):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},_.constrain=function(w){return arguments.length?(n=w,_):n},_.duration=function(w){return arguments.length?(s=+w,_):s},_.interpolate=function(w){return arguments.length?(l=w,_):l},_.on=function(){var w=c.on.apply(c,arguments);return w===c?_:w},_.clickDistance=function(w){return arguments.length?(y=(w=+w)*w,_):Math.sqrt(y)},_.tapDistance=function(w){return arguments.length?(S=+w,_):S},_}const nr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:i}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`},Hr=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]];var Pn;(function(e){e.Strict="strict",e.Loose="loose"})(Pn||(Pn={}));var vn;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(vn||(vn={}));var Dr;(function(e){e.Partial="partial",e.Full="full"})(Dr||(Dr={}));const Zo={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Xn;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Xn||(Xn={}));var Rr;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Rr||(Rr={}));var fe;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(fe||(fe={}));const ya={[fe.Left]:fe.Right,[fe.Right]:fe.Left,[fe.Top]:fe.Bottom,[fe.Bottom]:fe.Top};function ic(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function pa(e,t,n){if(!n)return;const i=[];e.forEach((r,o)=>{t!=null&&t.has(o)||i.push(r)}),i.length&&n(i)}function ev(e){return e===null?null:e?"valid":"invalid"}const tv=e=>"id"in e&&"source"in e&&"target"in e,nv=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),ks=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),ir=(e,t=[0,0])=>{const{width:n,height:i}=xn(e),r=e.origin??t,o=n*r[0],a=i*r[1];return{x:e.position.x-o,y:e.position.y-a}},iv=(e,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((i,r)=>{const o=typeof r=="string";let a=!t.nodeLookup&&!o?r:void 0;t.nodeLookup&&(a=o?t.nodeLookup.get(r):ks(r)?r:t.nodeLookup.get(r.id));const s=a?Lr(a,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return so(i,s)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return ao(n)},rr=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(i=>{if(t.filter===void 0||t.filter(i)){const r=Lr(i);n=so(n,r)}}),ao(n)},rc=(e,t,[n,i,r]=[0,0,1],o=!1,a=!1)=>{const s={...or(t,[n,i,r]),width:t.width/r,height:t.height/r},l=[];for(const c of e.values()){const{measured:u,selectable:f=!0,hidden:h=!1}=c;if(a&&!f||h)continue;const g=u.width??c.width??c.initialWidth??null,p=u.height??c.height??c.initialHeight??null,y=Mi(s,Zn(c)),S=(g??0)*(p??0),_=o&&y>0;(!c.internals.handleBounds||_||y>=S||c.dragging)&&l.push(c)}return l},$o=(e,t)=>{const n=new Set;return e.forEach(i=>{n.add(i.id)}),t.filter(i=>n.has(i.source)||n.has(i.target))};function _a(e,t){const n=new Map,i=t!=null&&t.nodes?new Set(t.nodes.map(r=>r.id)):null;return e.forEach(r=>{r.measured.width&&r.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!r.hidden)&&(!i||i.has(r.id))&&n.set(r.id,r)}),n}async function wa({nodes:e,width:t,height:n,panZoom:i,minZoom:r,maxZoom:o},a){if(e.size===0)return Promise.resolve(!1);const s=rr(e),l=Ss(s,t,n,(a==null?void 0:a.minZoom)??r,(a==null?void 0:a.maxZoom)??o,(a==null?void 0:a.padding)??.1);return await i.setViewport(l,{duration:a==null?void 0:a.duration}),Promise.resolve(!0)}function rv({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:r,onError:o}){const a=n.get(e),s=a.parentId?n.get(a.parentId):void 0,{x:l,y:c}=s?s.internals.positionAbsolute:{x:0,y:0},u=a.origin??i;let f=r;if(a.extent==="parent"&&!a.expandParent)if(!s)o==null||o("005",nr.error005());else{const g=s.measured.width,p=s.measured.height;g&&p&&(f=[[l,c],[l+g,c+p]])}else s&&$n(a.extent)&&(f=[[a.extent[0][0]+l,a.extent[0][1]+c],[a.extent[1][0]+l,a.extent[1][1]+c]]);const h=$n(f)?zn(t,f,a.measured):t;return{position:{x:h.x-l+a.measured.width*u[0],y:h.y-c+a.measured.height*u[1]},positionAbsolute:h}}async function oc({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:i,onBeforeDelete:r}){const o=new Set(e.map(h=>h.id)),a=[];for(const h of n){if(h.deletable===!1)continue;const g=o.has(h.id),p=!g&&h.parentId&&a.find(y=>y.id===h.parentId);(g||p)&&a.push(h)}const s=new Set(t.map(h=>h.id)),l=i.filter(h=>h.deletable!==!1),u=$o(a,l);for(const h of l)s.has(h.id)&&!u.find(p=>p.id===h.id)&&u.push(h);if(!r)return{edges:u,nodes:a};const f=await r({nodes:a,edges:u});return typeof f=="boolean"?f?{edges:u,nodes:a}:{edges:[],nodes:[]}:f}const Gn=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),zn=(e={x:0,y:0},t,n)=>({x:Gn(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Gn(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function sc(e,t,n){const{width:i,height:r}=xn(n),{x:o,y:a}=n.internals.positionAbsolute;return zn(e,[[o,a],[o+i,a+r]],t)}const xa=(e,t,n)=>e<t?Gn(Math.abs(e-t),1,t)/t:e>n?-Gn(Math.abs(e-n),1,t)/t:0,ac=(e,t,n=15,i=40)=>{const r=xa(e.x,i,t.width-i)*n,o=xa(e.y,i,t.height-i)*n;return[r,o]},so=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Uo=({x:e,y:t,width:n,height:i})=>({x:e,y:t,x2:e+n,y2:t+i}),ao=({x:e,y:t,x2:n,y2:i})=>({x:e,y:t,width:n-e,height:i-t}),Zn=(e,t=[0,0])=>{var r,o;const{x:n,y:i}=ks(e)?e.internals.positionAbsolute:ir(e,t);return{x:n,y:i,width:((r=e.measured)==null?void 0:r.width)??e.width??e.initialWidth??0,height:((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0}},Lr=(e,t=[0,0])=>{var r,o;const{x:n,y:i}=ks(e)?e.internals.positionAbsolute:ir(e,t);return{x:n,y:i,x2:n+(((r=e.measured)==null?void 0:r.width)??e.width??e.initialWidth??0),y2:i+(((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0)}},lc=(e,t)=>ao(so(Uo(e),Uo(t))),Mi=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),i=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*i)},ba=e=>Ut(e.width)&&Ut(e.height)&&Ut(e.x)&&Ut(e.y),Ut=e=>!isNaN(e)&&isFinite(e),ov=(e,t)=>{},Es=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),or=({x:e,y:t},[n,i,r],o=!1,a=[1,1])=>{const s={x:(e-n)/r,y:(t-i)/r};return o?Es(s,a):s},cc=({x:e,y:t},[n,i,r])=>({x:e*r+n,y:t*r+i}),Ss=(e,t,n,i,r,o)=>{const a=t/(e.width*(1+o)),s=n/(e.height*(1+o)),l=Math.min(a,s),c=Gn(l,i,r),u=e.x+e.width/2,f=e.y+e.height/2,h=t/2-u*c,g=n/2-f*c;return{x:h,y:g,zoom:c}},Vr=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function $n(e){return e!==void 0&&e!=="parent"}function xn(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function uc(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function sv(e,t={width:0,height:0},n,i,r){const o={...e},a=i.get(n);if(a){const s=a.origin||r;o.x+=a.internals.positionAbsolute.x-(t.width??0)*s[0],o.y+=a.internals.positionAbsolute.y-(t.height??0)*s[1]}return o}function pi(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:i,containerBounds:r}){const{x:o,y:a}=en(e),s=or({x:o-((r==null?void 0:r.left)??0),y:a-((r==null?void 0:r.top)??0)},i),{x:l,y:c}=n?Es(s,t):s;return{xSnapped:l,ySnapped:c,...s}}const Cs=e=>({width:e.offsetWidth,height:e.offsetHeight}),av=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},lv=["INPUT","SELECT","TEXTAREA"];function cv(e){var i,r,o;const t=((r=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:r[0])||e.target;return lv.includes(t==null?void 0:t.nodeName)||((o=t==null?void 0:t.hasAttribute)==null?void 0:o.call(t,"contenteditable"))||!!(t!=null&&t.closest(".nokey"))}const dc=e=>"clientX"in e,en=(e,t)=>{var o,a;const n=dc(e),i=n?e.clientX:(o=e.touches)==null?void 0:o[0].clientX,r=n?e.clientY:(a=e.touches)==null?void 0:a[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}},ka=(e,t,n,i,r)=>{const o=t.querySelectorAll(`.${e}`);return!o||!o.length?null:Array.from(o).map(a=>{const s=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),type:e,nodeId:r,position:a.getAttribute("data-handlepos"),x:(s.left-n.left)/i,y:(s.top-n.top)/i,...Cs(a)}})};function uv({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:r,sourceControlY:o,targetControlX:a,targetControlY:s}){const l=e*.125+r*.375+a*.375+n*.125,c=t*.125+o*.375+s*.375+i*.125,u=Math.abs(l-e),f=Math.abs(c-t);return[l,c,u,f]}function gr(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Ea({pos:e,x1:t,y1:n,x2:i,y2:r,c:o}){switch(e){case fe.Left:return[t-gr(t-i,o),n];case fe.Right:return[t+gr(i-t,o),n];case fe.Top:return[t,n-gr(n-r,o)];case fe.Bottom:return[t,n+gr(r-n,o)]}}function fc({sourceX:e,sourceY:t,sourcePosition:n=fe.Bottom,targetX:i,targetY:r,targetPosition:o=fe.Top,curvature:a=.25}){const[s,l]=Ea({pos:n,x1:e,y1:t,x2:i,y2:r,c:a}),[c,u]=Ea({pos:o,x1:i,y1:r,x2:e,y2:t,c:a}),[f,h,g,p]=uv({sourceX:e,sourceY:t,targetX:i,targetY:r,sourceControlX:s,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${s},${l} ${c},${u} ${i},${r}`,f,h,g,p]}function hc({sourceX:e,sourceY:t,targetX:n,targetY:i}){const r=Math.abs(n-e)/2,o=n<e?n+r:n-r,a=Math.abs(i-t)/2,s=i<t?i+a:i-a;return[o,s,r,a]}function dv({sourceNode:e,targetNode:t,selected:n=!1,zIndex:i=0,elevateOnSelect:r=!1}){if(!r)return i;const o=n||t.selected||e.selected,a=Math.max(e.internals.z||0,t.internals.z||0,1e3);return i+(o?a:0)}function fv({sourceNode:e,targetNode:t,width:n,height:i,transform:r}){const o=so(Lr(e),Lr(t));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const a={x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:i/r[2]};return Mi(a,ao(o))>0}const hv=({source:e,sourceHandle:t,target:n,targetHandle:i})=>`xy-edge__${e}${t||""}-${n}${i||""}`,gv=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),vv=(e,t)=>{if(!e.source||!e.target)return t;let n;return tv(e)?n={...e}:n={...e,id:hv(e)},gv(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function Jo({sourceX:e,sourceY:t,targetX:n,targetY:i}){const[r,o,a,s]=hc({sourceX:e,sourceY:t,targetX:n,targetY:i});return[`M ${e},${t}L ${n},${i}`,r,o,a,s]}const Sa={[fe.Left]:{x:-1,y:0},[fe.Right]:{x:1,y:0},[fe.Top]:{x:0,y:-1},[fe.Bottom]:{x:0,y:1}},mv=({source:e,sourcePosition:t=fe.Bottom,target:n})=>t===fe.Left||t===fe.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Ca=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function yv({source:e,sourcePosition:t=fe.Bottom,target:n,targetPosition:i=fe.Top,center:r,offset:o}){const a=Sa[t],s=Sa[i],l={x:e.x+a.x*o,y:e.y+a.y*o},c={x:n.x+s.x*o,y:n.y+s.y*o},u=mv({source:l,sourcePosition:t,target:c}),f=u.x!==0?"x":"y",h=u[f];let g=[],p,y;const S={x:0,y:0},_={x:0,y:0},[m,k,E,b]=hc({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[f]*s[f]===-1){p=r.x??m,y=r.y??k;const C=[{x:p,y:l.y},{x:p,y:c.y}],M=[{x:l.x,y},{x:c.x,y}];a[f]===h?g=f==="x"?C:M:g=f==="x"?M:C}else{const C=[{x:l.x,y:c.y}],M=[{x:c.x,y:l.y}];if(f==="x"?g=a.x===h?M:C:g=a.y===h?C:M,t===i){const H=Math.abs(e[f]-n[f]);if(H<=o){const w=Math.min(o-1,o-H);a[f]===h?S[f]=(l[f]>e[f]?-1:1)*w:_[f]=(c[f]>n[f]?-1:1)*w}}if(t!==i){const H=f==="x"?"y":"x",w=a[f]===s[H],O=l[H]>c[H],x=l[H]<c[H];(a[f]===1&&(!w&&O||w&&x)||a[f]!==1&&(!w&&x||w&&O))&&(g=f==="x"?C:M)}const P={x:l.x+S.x,y:l.y+S.y},T={x:c.x+_.x,y:c.y+_.y},R=Math.max(Math.abs(P.x-g[0].x),Math.abs(T.x-g[0].x)),L=Math.max(Math.abs(P.y-g[0].y),Math.abs(T.y-g[0].y));R>=L?(p=(P.x+T.x)/2,y=g[0].y):(p=g[0].x,y=(P.y+T.y)/2)}return[[e,{x:l.x+S.x,y:l.y+S.y},...g,{x:c.x+_.x,y:c.y+_.y},n],p,y,E,b]}function pv(e,t,n,i){const r=Math.min(Ca(e,t)/2,Ca(t,n)/2,i),{x:o,y:a}=t;if(e.x===o&&o===n.x||e.y===a&&a===n.y)return`L${o} ${a}`;if(e.y===a){const c=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${o+r*c},${a}Q ${o},${a} ${o},${a+r*u}`}const s=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${o},${a+r*l}Q ${o},${a} ${o+r*s},${a}`}function Xr({sourceX:e,sourceY:t,sourcePosition:n=fe.Bottom,targetX:i,targetY:r,targetPosition:o=fe.Top,borderRadius:a=5,centerX:s,centerY:l,offset:c=20}){const[u,f,h,g,p]=yv({source:{x:e,y:t},sourcePosition:n,target:{x:i,y:r},targetPosition:o,center:{x:s,y:l},offset:c});return[u.reduce((S,_,m)=>{let k="";return m>0&&m<u.length-1?k=pv(u[m-1],_,u[m+1],a):k=`${m===0?"M":"L"}${_.x} ${_.y}`,S+=k,S},""),f,h,g,p]}function Na(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function _v(e){var f;const{sourceNode:t,targetNode:n}=e;if(!Na(t)||!Na(n))return null;const i=t.internals.handleBounds||Ma(t.handles),r=n.internals.handleBounds||Ma(n.handles),o=Pa((i==null?void 0:i.source)??[],e.sourceHandle),a=Pa(e.connectionMode===Pn.Strict?(r==null?void 0:r.target)??[]:((r==null?void 0:r.target)??[]).concat((r==null?void 0:r.source)??[]),e.targetHandle);if(!o||!a)return(f=e.onError)==null||f.call(e,"008",nr.error008(o?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const s=(o==null?void 0:o.position)||fe.Bottom,l=(a==null?void 0:a.position)||fe.Top,c=Pi(t,o,s),u=Pi(n,a,l);return{sourceX:c.x,sourceY:c.y,targetX:u.x,targetY:u.y,sourcePosition:s,targetPosition:l}}function Ma(e){if(!e)return null;const t=[],n=[];for(const i of e)i.width=i.width??1,i.height=i.height??1,i.type==="source"?t.push(i):i.type==="target"&&n.push(i);return{source:t,target:n}}function Pi(e,t,n=fe.Left,i=!1){const r=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,o=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:a,height:s}=t??xn(e);if(i)return{x:r+a/2,y:o+s/2};switch((t==null?void 0:t.position)??n){case fe.Top:return{x:r+a/2,y:o};case fe.Right:return{x:r+a,y:o+s/2};case fe.Bottom:return{x:r+a/2,y:o+s};case fe.Left:return{x:r,y:o+s/2}}}function Pa(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function jo(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(i=>`${i}=${e[i]}`).join("&")}`:""}function wv(e,{id:t,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:r}){const o=new Set;return e.reduce((a,s)=>([s.markerStart||i,s.markerEnd||r].forEach(l=>{if(l&&typeof l=="object"){const c=jo(l,t);o.has(c)||(a.push({id:c,color:l.color||n,...l}),o.add(c))}}),a),[]).sort((a,s)=>a.id.localeCompare(s.id))}const Ns={nodeOrigin:[0,0],nodeExtent:Hr,elevateNodesOnSelect:!0,defaults:{}},xv={...Ns,checkEquality:!0};function Ms(e,t){const n={...e};for(const i in t)t[i]!==void 0&&(n[i]=t[i]);return n}function bv(e,t,n){const i=Ms(Ns,n);for(const r of e.values())if(r.parentId)Ps(r,e,t,i);else{const o=ir(r,i.nodeOrigin),a=$n(r.extent)?r.extent:i.nodeExtent,s=zn(o,a,xn(r));r.internals.positionAbsolute=s}}function gc(e,t,n,i){var s,l;const r=Ms(xv,i),o=new Map(t),a=r!=null&&r.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const c of e){let u=o.get(c.id);if(r.checkEquality&&c===(u==null?void 0:u.internals.userNode))t.set(c.id,u);else{const f=ir(c,r.nodeOrigin),h=$n(c.extent)?c.extent:r.nodeExtent,g=zn(f,h,xn(c));u={...r.defaults,...c,measured:{width:(s=c.measured)==null?void 0:s.width,height:(l=c.measured)==null?void 0:l.height},internals:{positionAbsolute:g,handleBounds:c.measured?u==null?void 0:u.internals.handleBounds:void 0,z:vc(c,a),userNode:c}},t.set(c.id,u)}c.parentId&&Ps(u,t,n,i)}}function kv(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Ps(e,t,n,i){const{elevateNodesOnSelect:r,nodeOrigin:o,nodeExtent:a}=Ms(Ns,i),s=e.parentId,l=t.get(s);if(!l){console.warn(`Parent node ${s} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}kv(e,n);const c=r?1e3:0,{x:u,y:f,z:h}=Ev(e,l,o,a,c),{positionAbsolute:g}=e.internals,p=u!==g.x||f!==g.y;(p||h!==e.internals.z)&&(e.internals={...e.internals,positionAbsolute:p?{x:u,y:f}:g,z:h})}function vc(e,t){return(Ut(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Ev(e,t,n,i,r){const{x:o,y:a}=t.internals.positionAbsolute,s=xn(e),l=ir(e,n),c=$n(e.extent)?zn(l,e.extent,s):l;let u=zn({x:o+c.x,y:a+c.y},i,s);e.extent==="parent"&&(u=sc(u,s,t));const f=vc(e,r),h=t.internals.z??0;return{x:u.x,y:u.y,z:h>f?h:f}}function Sv(e,t,n,i=[0,0]){var a;const r=[],o=new Map;for(const s of e){const l=t.get(s.parentId);if(!l)continue;const c=((a=o.get(s.parentId))==null?void 0:a.expandedRect)??Zn(l),u=lc(c,s.rect);o.set(s.parentId,{expandedRect:u,parent:l})}return o.size>0&&o.forEach(({expandedRect:s,parent:l},c)=>{var k;const u=l.internals.positionAbsolute,f=xn(l),h=l.origin??i,g=s.x<u.x?Math.round(Math.abs(u.x-s.x)):0,p=s.y<u.y?Math.round(Math.abs(u.y-s.y)):0,y=Math.max(f.width,Math.round(s.width)),S=Math.max(f.height,Math.round(s.height)),_=(y-f.width)*h[0],m=(S-f.height)*h[1];(g>0||p>0||_||m)&&(r.push({id:c,type:"position",position:{x:l.position.x-g+_,y:l.position.y-p+m}}),(k=n.get(c))==null||k.forEach(E=>{e.some(b=>b.id===E.id)||r.push({id:E.id,type:"position",position:{x:E.position.x+g,y:E.position.y+p}})})),(f.width<s.width||f.height<s.height||g||p)&&r.push({id:c,type:"dimensions",setAttributes:!0,dimensions:{width:y+(g?h[0]*g-_:0),height:S+(p?h[1]*p-m:0)}})}),r}function Cv(e,t,n,i,r,o){const a=i==null?void 0:i.querySelector(".xyflow__viewport");let s=!1;if(!a)return{changes:[],updatedInternals:s};const l=[],c=window.getComputedStyle(a),{m22:u}=new window.DOMMatrixReadOnly(c.transform),f=[];for(const h of e.values()){const g=t.get(h.id);if(g)if(g.hidden)g.internals={...g.internals,handleBounds:void 0},s=!0;else{const p=Cs(h.nodeElement),y=g.measured.width!==p.width||g.measured.height!==p.height;if(!!(p.width&&p.height&&(y||!g.internals.handleBounds||h.force))){const _=h.nodeElement.getBoundingClientRect(),m=$n(g.extent)?g.extent:o;let{positionAbsolute:k}=g.internals;g.parentId&&g.extent==="parent"?k=sc(k,p,t.get(g.parentId)):m&&(k=zn(k,m,p)),g.measured=p,g.internals={...g.internals,positionAbsolute:k,handleBounds:{source:ka("source",h.nodeElement,_,u,g.id),target:ka("target",h.nodeElement,_,u,g.id)}},g.parentId&&Ps(g,t,n,{nodeOrigin:r}),s=!0,y&&(l.push({id:g.id,type:"dimensions",dimensions:p}),g.expandParent&&g.parentId&&f.push({id:g.id,parentId:g.parentId,rect:Zn(g,r)}))}}}if(f.length>0){const h=Sv(f,t,n,r);l.push(...h)}return{changes:l,updatedInternals:s}}async function Nv({delta:e,panZoom:t,transform:n,translateExtent:i,width:r,height:o}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const a=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[r,o]],i),s=!!a&&(a.x!==n[0]||a.y!==n[1]||a.k!==n[2]);return Promise.resolve(s)}function mc(e,t,n){e.clear(),t.clear();for(const i of n){const{source:r,target:o,sourceHandle:a=null,targetHandle:s=null}=i,l=`${r}-source-${a}`,c=`${o}-target-${s}`,u=e.get(l)||new Map,f=e.get(c)||new Map,h={edgeId:i.id,source:r,target:o,sourceHandle:a,targetHandle:s};t.set(i.id,i),e.set(l,u.set(`${o}-${s}`,h)),e.set(c,f.set(`${r}-${a}`,h))}}function yc(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:yc(n,t):!1}function za(e,t,n){let i=e;do{if(i!=null&&i.matches(t))return!0;if(i===n)return!1;i=i.parentElement}while(i);return!1}function Mv(e,t,n,i){const r=new Map;for(const[o,a]of e)if((a.selected||a.id===i)&&(!a.parentId||!yc(a,e))&&(a.draggable||t&&typeof a.draggable>"u")){const s=e.get(o);s&&r.set(o,{id:o,position:s.position||{x:0,y:0},distance:{x:n.x-s.internals.positionAbsolute.x,y:n.y-s.internals.positionAbsolute.y},extent:s.extent,parentId:s.parentId,origin:s.origin,expandParent:s.expandParent,internals:{positionAbsolute:s.internals.positionAbsolute||{x:0,y:0}},measured:{width:s.measured.width??0,height:s.measured.height??0}})}return r}function xo({nodeId:e,dragItems:t,nodeLookup:n,dragging:i=!0}){var a,s,l;const r=[];for(const[c,u]of t){const f=(a=n.get(c))==null?void 0:a.internals.userNode;f&&r.push({...f,position:u.position,dragging:i})}if(!e)return[r[0],r];const o=(s=n.get(e))==null?void 0:s.internals.userNode;return[o?{...o,position:((l=t.get(e))==null?void 0:l.position)||o.position,dragging:i}:r[0],r]}function Pv({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:i,onDragStop:r}){let o={x:null,y:null},a=0,s=new Map,l=!1,c={x:0,y:0},u=null,f=!1,h=null,g=!1;function p({noDragClassName:S,handleSelector:_,domNode:m,isSelectable:k,nodeId:E,nodeClickDistance:b=0}){h=wt(m);function N({x:T,y:R},L){const{nodeLookup:H,nodeExtent:w,snapGrid:O,snapToGrid:x,nodeOrigin:z,onNodeDrag:I,onSelectionDrag:A,onError:X,updateNodePositions:K}=t();o={x:T,y:R};let $=!1,ne={x:0,y:0,x2:0,y2:0};if(s.size>1&&w){const B=rr(s);ne=Uo(B)}for(const[B,J]of s){if(!H.has(B))continue;let ie={x:T-J.distance.x,y:R-J.distance.y};x&&(ie=Es(ie,O));let ue=[[w[0][0],w[0][1]],[w[1][0],w[1][1]]];if(s.size>1&&w&&!J.extent){const{positionAbsolute:U}=J.internals,j=U.x-ne.x+w[0][0],ge=U.x+J.measured.width-ne.x2+w[1][0],xe=U.y-ne.y+w[0][1],pe=U.y+J.measured.height-ne.y2+w[1][1];ue=[[j,xe],[ge,pe]]}const{position:de,positionAbsolute:Z}=rv({nodeId:B,nextPosition:ie,nodeLookup:H,nodeExtent:ue,nodeOrigin:z,onError:X});$=$||J.position.x!==de.x||J.position.y!==de.y,J.position=de,J.internals.positionAbsolute=Z}if($&&(K(s,!0),L&&(i||I||!E&&A))){const[B,J]=xo({nodeId:E,dragItems:s,nodeLookup:H});i==null||i(L,s,B,J),I==null||I(L,B,J),E||A==null||A(L,J)}}async function C(){if(!u)return;const{transform:T,panBy:R,autoPanSpeed:L}=t(),[H,w]=ac(c,u,L);(H!==0||w!==0)&&(o.x=(o.x??0)-H/T[2],o.y=(o.y??0)-w/T[2],await R({x:H,y:w})&&N(o,null)),a=requestAnimationFrame(C)}function M(T){var $;const{nodeLookup:R,multiSelectionActive:L,nodesDraggable:H,transform:w,snapGrid:O,snapToGrid:x,selectNodesOnDrag:z,onNodeDragStart:I,onSelectionDragStart:A,unselectNodesAndEdges:X}=t();f=!0,(!z||!k)&&!L&&E&&(($=R.get(E))!=null&&$.selected||X()),k&&z&&E&&(e==null||e(E));const K=pi(T.sourceEvent,{transform:w,snapGrid:O,snapToGrid:x,containerBounds:u});if(o=K,s=Mv(R,H,K,E),s.size>0&&(n||I||!E&&A)){const[ne,B]=xo({nodeId:E,dragItems:s,nodeLookup:R});n==null||n(T.sourceEvent,s,ne,B),I==null||I(T.sourceEvent,ne,B),E||A==null||A(T.sourceEvent,B)}}const P=Yl().clickDistance(b).on("start",T=>{const{domNode:R,nodeDragThreshold:L,transform:H,snapGrid:w,snapToGrid:O}=t();u=(R==null?void 0:R.getBoundingClientRect())||null,g=!1,L===0&&M(T),o=pi(T.sourceEvent,{transform:H,snapGrid:w,snapToGrid:O,containerBounds:u}),c=en(T.sourceEvent,u)}).on("drag",T=>{const{autoPanOnNodeDrag:R,transform:L,snapGrid:H,snapToGrid:w,nodeDragThreshold:O,nodeLookup:x}=t(),z=pi(T.sourceEvent,{transform:L,snapGrid:H,snapToGrid:w,containerBounds:u});if((T.sourceEvent.type==="touchmove"&&T.sourceEvent.touches.length>1||E&&!x.has(E))&&(g=!0),!g){if(!l&&R&&f&&(l=!0,C()),!f){const I=z.xSnapped-(o.x??0),A=z.ySnapped-(o.y??0);Math.sqrt(I*I+A*A)>O&&M(T)}(o.x!==z.xSnapped||o.y!==z.ySnapped)&&s&&f&&(c=en(T.sourceEvent,u),N(z,T.sourceEvent))}}).on("end",T=>{if(!(!f||g)&&(l=!1,f=!1,cancelAnimationFrame(a),s.size>0)){const{nodeLookup:R,updateNodePositions:L,onNodeDragStop:H,onSelectionDragStop:w}=t();if(L(s,!1),r||H||!E&&w){const[O,x]=xo({nodeId:E,dragItems:s,nodeLookup:R,dragging:!1});r==null||r(T.sourceEvent,s,O,x),H==null||H(T.sourceEvent,O,x),E||w==null||w(T.sourceEvent,x)}}}).filter(T=>{const R=T.target;return!T.button&&(!S||!za(R,`.${S}`,m))&&(!_||za(R,_,m))});h.call(P)}function y(){h==null||h.on(".drag",null)}return{update:p,destroy:y}}function zv(e,t,n){const i=[],r={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const o of t.values())Mi(r,Zn(o))>0&&i.push(o);return i}const Av=250;function Iv(e,t,n,i){var s,l;let r=[],o=1/0;const a=zv(e,n,t+Av);for(const c of a){const u=[...((s=c.internals.handleBounds)==null?void 0:s.source)??[],...((l=c.internals.handleBounds)==null?void 0:l.target)??[]];for(const f of u){if(i.nodeId===f.nodeId&&i.type===f.type&&i.id===f.id)continue;const{x:h,y:g}=Pi(c,f,f.position,!0),p=Math.sqrt(Math.pow(h-e.x,2)+Math.pow(g-e.y,2));p>t||(p<o?(r=[{...f,x:h,y:g}],o=p):p===o&&r.push({...f,x:h,y:g}))}}if(!r.length)return null;if(r.length>1){const c=i.type==="source"?"target":"source";return r.find(u=>u.type===c)??r[0]}return r[0]}function pc(e,t,n,i,r,o=!1){var c,u,f;const a=i.get(e);if(!a)return null;const s=r==="strict"?(c=a.internals.handleBounds)==null?void 0:c[t]:[...((u=a.internals.handleBounds)==null?void 0:u.source)??[],...((f=a.internals.handleBounds)==null?void 0:f.target)??[]],l=(n?s==null?void 0:s.find(h=>h.id===n):s==null?void 0:s[0])??null;return l&&o?{...l,...Pi(a,l,l.position,!0)}:l}function _c(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Tv(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const wc=()=>!0;function Ov(e,{connectionMode:t,connectionRadius:n,handleId:i,nodeId:r,edgeUpdaterType:o,isTarget:a,domNode:s,nodeLookup:l,lib:c,autoPanOnConnect:u,flowId:f,panBy:h,cancelConnection:g,onConnectStart:p,onConnect:y,onConnectEnd:S,isValidConnection:_=wc,onReconnectEnd:m,updateConnection:k,getTransform:E,getFromHandle:b,autoPanSpeed:N}){const C=av(e.target);let M=0,P;const{x:T,y:R}=en(e),L=C==null?void 0:C.elementFromPoint(T,R),H=_c(o,L),w=s==null?void 0:s.getBoundingClientRect();if(!w||!H)return;const O=pc(r,H,i,l,t);if(!O)return;let x=en(e,w),z=!1,I=null,A=!1,X=null;function K(){if(!u||!w)return;const[Z,U]=ac(x,w,N);h({x:Z,y:U}),M=requestAnimationFrame(K)}const $={...O,nodeId:r,type:H,position:O.position},ne=l.get(r),J={inProgress:!0,isValid:null,from:Pi(ne,$,fe.Left,!0),fromHandle:$,fromPosition:$.position,fromNode:ne,to:x,toHandle:null,toPosition:ya[$.position],toNode:null};k(J);let ie=J;p==null||p(e,{nodeId:r,handleId:i,handleType:H});function ue(Z){if(!b()||!$){de(Z);return}const U=E();x=en(Z,w),P=Iv(or(x,U,!1,[1,1]),n,l,$),z||(K(),z=!0);const j=xc(Z,{handle:P,connectionMode:t,fromNodeId:r,fromHandleId:i,fromType:a?"target":"source",isValidConnection:_,doc:C,lib:c,flowId:f,nodeLookup:l});X=j.handleDomNode,I=j.connection,A=Tv(!!P,j.isValid);const ge={...ie,isValid:A,to:P&&A?cc({x:P.x,y:P.y},U):x,toHandle:j.toHandle,toPosition:A&&j.toHandle?j.toHandle.position:ya[$.position],toNode:j.toHandle?l.get(j.toHandle.nodeId):null};A&&P&&ie.toHandle&&ge.toHandle&&ie.toHandle.type===ge.toHandle.type&&ie.toHandle.nodeId===ge.toHandle.nodeId&&ie.toHandle.id===ge.toHandle.id&&ie.to.x===ge.to.x&&ie.to.y===ge.to.y||(k(ge),ie=ge)}function de(Z){(P||X)&&I&&A&&(y==null||y(I));const{inProgress:U,...j}=ie,ge={...j,toPosition:ie.toHandle?ie.toPosition:null};S==null||S(Z,ge),o&&(m==null||m(Z,ge)),g(),cancelAnimationFrame(M),z=!1,A=!1,I=null,X=null,C.removeEventListener("mousemove",ue),C.removeEventListener("mouseup",de),C.removeEventListener("touchmove",ue),C.removeEventListener("touchend",de)}C.addEventListener("mousemove",ue),C.addEventListener("mouseup",de),C.addEventListener("touchmove",ue),C.addEventListener("touchend",de)}function xc(e,{handle:t,connectionMode:n,fromNodeId:i,fromHandleId:r,fromType:o,doc:a,lib:s,flowId:l,isValidConnection:c=wc,nodeLookup:u}){const f=o==="target",h=t?a.querySelector(`.${s}-flow__handle[data-id="${l}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:g,y:p}=en(e),y=a.elementFromPoint(g,p),S=y!=null&&y.classList.contains(`${s}-flow__handle`)?y:h,_={handleDomNode:S,isValid:!1,connection:null,toHandle:null};if(S){const m=_c(void 0,S),k=S.getAttribute("data-nodeid"),E=S.getAttribute("data-handleid"),b=S.classList.contains("connectable"),N=S.classList.contains("connectableend");if(!k||!m)return _;const C={source:f?k:i,sourceHandle:f?E:r,target:f?i:k,targetHandle:f?r:E};_.connection=C;const P=b&&N&&(n===Pn.Strict?f&&m==="source"||!f&&m==="target":k!==i||E!==r);_.isValid=P&&c(C),_.toHandle=pc(k,m,E,u,n,!1)}return _}const Hv={onPointerDown:Ov,isValid:xc};function Dv({domNode:e,panZoom:t,getTransform:n,getViewScale:i}){const r=wt(e);function o({translateExtent:s,width:l,height:c,zoomStep:u=10,pannable:f=!0,zoomable:h=!0,inversePan:g=!1}){const p=k=>{const E=n();if(k.sourceEvent.type!=="wheel"||!t)return;const b=-k.sourceEvent.deltaY*(k.sourceEvent.deltaMode===1?.05:k.sourceEvent.deltaMode?1:.002)*u,N=E[2]*Math.pow(2,b);t.scaleTo(N)};let y=[0,0];const S=k=>{(k.sourceEvent.type==="mousedown"||k.sourceEvent.type==="touchstart")&&(y=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY])},_=k=>{const E=n();if(k.sourceEvent.type!=="mousemove"&&k.sourceEvent.type!=="touchmove"||!t)return;const b=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY],N=[b[0]-y[0],b[1]-y[1]];y=b;const C=i()*Math.max(E[2],Math.log(E[2]))*(g?-1:1),M={x:E[0]-N[0]*C,y:E[1]-N[1]*C},P=[[0,0],[l,c]];t.setViewportConstrained({x:M.x,y:M.y,zoom:E[2]},P,s)},m=nc().on("start",S).on("zoom",f?_:null).on("zoom.wheel",h?p:null);r.call(m,{})}function a(){r.on("zoom",null)}return{update:o,destroy:a,pointer:Nt}}const Rv=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,lo=e=>({x:e.x,y:e.y,zoom:e.k}),bo=({x:e,y:t,zoom:n})=>oo.translate(e,t).scale(n),Dn=(e,t)=>e.target.closest(`.${t}`),bc=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),ko=(e,t=0,n=()=>{})=>{const i=typeof t=="number"&&t>0;return i||n(),i?e.transition().duration(t).on("end",n):e},kc=e=>{const t=e.ctrlKey&&Vr()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Lv({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:i,panOnScrollMode:r,panOnScrollSpeed:o,zoomOnPinch:a,onPanZoomStart:s,onPanZoom:l,onPanZoomEnd:c}){return u=>{if(Dn(u,t))return!1;u.preventDefault(),u.stopImmediatePropagation();const f=n.property("__zoom").k||1;if(u.ctrlKey&&a){const S=Nt(u),_=kc(u),m=f*Math.pow(2,_);i.scaleTo(n,m,S,u);return}const h=u.deltaMode===1?20:1;let g=r===vn.Vertical?0:u.deltaX*h,p=r===vn.Horizontal?0:u.deltaY*h;!Vr()&&u.shiftKey&&r!==vn.Vertical&&(g=u.deltaY*h,p=0),i.translateBy(n,-(g/f)*o,-(p/f)*o,{internal:!0});const y=lo(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,s==null||s(u,y)),e.isPanScrolling&&(l==null||l(u,y),e.panScrollTimeout=setTimeout(()=>{c==null||c(u,y),e.isPanScrolling=!1},150))}}function Vv({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(i,r){if(!t&&i.type==="wheel"&&!i.ctrlKey||Dn(i,e))return null;i.preventDefault(),n.call(this,i,r)}}function Xv({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return i=>{var o,a,s;if((o=i.sourceEvent)!=null&&o.internal)return;const r=lo(i.transform);e.mouseButton=((a=i.sourceEvent)==null?void 0:a.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=r,((s=i.sourceEvent)==null?void 0:s.type)==="mousedown"&&t(!0),n&&(n==null||n(i.sourceEvent,r))}}function Yv({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:i,onPanZoom:r}){return o=>{var a,s;e.usedRightMouseButton=!!(n&&bc(t,e.mouseButton??0)),(a=o.sourceEvent)!=null&&a.sync||i([o.transform.x,o.transform.y,o.transform.k]),r&&!((s=o.sourceEvent)!=null&&s.internal)&&(r==null||r(o.sourceEvent,lo(o.transform)))}}function Wv({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:r,onPaneContextMenu:o}){return a=>{var s;if(!((s=a.sourceEvent)!=null&&s.internal)&&(e.isZoomingOrPanning=!1,o&&bc(t,e.mouseButton??0)&&!e.usedRightMouseButton&&a.sourceEvent&&o(a.sourceEvent),e.usedRightMouseButton=!1,i(!1),r&&Rv(e.prevViewport,a.transform))){const l=lo(a.transform);e.prevViewport=l,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{r==null||r(a.sourceEvent,l)},n?150:0)}}}function Bv({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:i,panOnScroll:r,zoomOnDoubleClick:o,userSelectionActive:a,noWheelClassName:s,noPanClassName:l,lib:c}){return u=>{var p;const f=e||t,h=n&&u.ctrlKey;if(u.button===1&&u.type==="mousedown"&&(Dn(u,`${c}-flow__node`)||Dn(u,`${c}-flow__edge`)))return!0;if(!i&&!f&&!r&&!o&&!n||a||Dn(u,s)&&u.type==="wheel"||Dn(u,l)&&(u.type!=="wheel"||r&&u.type==="wheel"&&!e)||!n&&u.ctrlKey&&u.type==="wheel")return!1;if(!n&&u.type==="touchstart"&&((p=u.touches)==null?void 0:p.length)>1)return u.preventDefault(),!1;if(!f&&!r&&!h&&u.type==="wheel"||!i&&(u.type==="mousedown"||u.type==="touchstart")||Array.isArray(i)&&!i.includes(u.button)&&u.type==="mousedown")return!1;const g=Array.isArray(i)&&i.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||u.type==="wheel")&&g}}function Kv({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:i,translateExtent:r,viewport:o,onPanZoom:a,onPanZoomStart:s,onPanZoomEnd:l,onDraggingChange:c}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=e.getBoundingClientRect(),h=nc().clickDistance(!Ut(i)||i<0?0:i).scaleExtent([t,n]).translateExtent(r),g=wt(e).call(h);k({x:o.x,y:o.y,zoom:Gn(o.zoom,t,n)},[[0,0],[f.width,f.height]],r);const p=g.on("wheel.zoom"),y=g.on("dblclick.zoom");h.wheelDelta(kc);function S(L,H){return g?new Promise(w=>{h==null||h.transform(ko(g,H==null?void 0:H.duration,()=>w(!0)),L)}):Promise.resolve(!1)}function _({noWheelClassName:L,noPanClassName:H,onPaneContextMenu:w,userSelectionActive:O,panOnScroll:x,panOnDrag:z,panOnScrollMode:I,panOnScrollSpeed:A,preventScrolling:X,zoomOnPinch:K,zoomOnScroll:$,zoomOnDoubleClick:ne,zoomActivationKeyPressed:B,lib:J,onTransformChange:ie}){O&&!u.isZoomingOrPanning&&m();const de=x&&!B&&!O?Lv({zoomPanValues:u,noWheelClassName:L,d3Selection:g,d3Zoom:h,panOnScrollMode:I,panOnScrollSpeed:A,zoomOnPinch:K,onPanZoomStart:s,onPanZoom:a,onPanZoomEnd:l}):Vv({noWheelClassName:L,preventScrolling:X,d3ZoomHandler:p});if(g.on("wheel.zoom",de,{passive:!1}),!O){const U=Xv({zoomPanValues:u,onDraggingChange:c,onPanZoomStart:s});h.on("start",U);const j=Yv({zoomPanValues:u,panOnDrag:z,onPaneContextMenu:!!w,onPanZoom:a,onTransformChange:ie});h.on("zoom",j);const ge=Wv({zoomPanValues:u,panOnDrag:z,panOnScroll:x,onPaneContextMenu:w,onPanZoomEnd:l,onDraggingChange:c});h.on("end",ge)}const Z=Bv({zoomActivationKeyPressed:B,panOnDrag:z,zoomOnScroll:$,panOnScroll:x,zoomOnDoubleClick:ne,zoomOnPinch:K,userSelectionActive:O,noPanClassName:H,noWheelClassName:L,lib:J});h.filter(Z),ne?g.on("dblclick.zoom",y):g.on("dblclick.zoom",null)}function m(){h.on("zoom",null)}async function k(L,H,w){const O=bo(L),x=h==null?void 0:h.constrain()(O,H,w);return x&&await S(x),new Promise(z=>z(x))}async function E(L,H){const w=bo(L);return await S(w,H),new Promise(O=>O(w))}function b(L){if(g){const H=bo(L),w=g.property("__zoom");(w.k!==L.zoom||w.x!==L.x||w.y!==L.y)&&(h==null||h.transform(g,H,null,{sync:!0}))}}function N(){const L=g?tc(g.node()):{x:0,y:0,k:1};return{x:L.x,y:L.y,zoom:L.k}}function C(L,H){return g?new Promise(w=>{h==null||h.scaleTo(ko(g,H==null?void 0:H.duration,()=>w(!0)),L)}):Promise.resolve(!1)}function M(L,H){return g?new Promise(w=>{h==null||h.scaleBy(ko(g,H==null?void 0:H.duration,()=>w(!0)),L)}):Promise.resolve(!1)}function P(L){h==null||h.scaleExtent(L)}function T(L){h==null||h.translateExtent(L)}function R(L){const H=!Ut(L)||L<0?0:L;h==null||h.clickDistance(H)}return{update:_,destroy:m,setViewport:E,setViewportConstrained:k,getViewport:N,scaleTo:C,scaleBy:M,setScaleExtent:P,setTranslateExtent:T,syncViewport:b,setClickDistance:R}}var un;(function(e){e.Line="line",e.Handle="handle"})(un||(un={}));const Fv=["top-left","top-right","bottom-left","bottom-right"],qv=["top","right","bottom","left"];function Gv({width:e,prevWidth:t,height:n,prevHeight:i,affectsX:r,affectsY:o}){const a=e-t,s=n-i,l=[a>0?1:a<0?-1:0,s>0?1:s<0?-1:0];return a&&r&&(l[0]=l[0]*-1),s&&o&&(l[1]=l[1]*-1),l}function Zv(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),i=e.includes("left"),r=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:i,affectsY:r}}function sn(e,t){return Math.max(0,t-e)}function an(e,t){return Math.max(0,e-t)}function vr(e,t,n){return Math.max(0,t-e,e-n)}function Aa(e,t){return e?!t:t}function $v(e,t,n,i,r,o,a,s){let{affectsX:l,affectsY:c}=t;const{isHorizontal:u,isVertical:f}=t,h=u&&f,{xSnapped:g,ySnapped:p}=n,{minWidth:y,maxWidth:S,minHeight:_,maxHeight:m}=i,{x:k,y:E,width:b,height:N,aspectRatio:C}=e;let M=Math.floor(u?g-e.pointerX:0),P=Math.floor(f?p-e.pointerY:0);const T=b+(l?-M:M),R=N+(c?-P:P),L=-o[0]*b,H=-o[1]*N;let w=vr(T,y,S),O=vr(R,_,m);if(a){let I=0,A=0;l&&M<0?I=sn(k+M+L,a[0][0]):!l&&M>0&&(I=an(k+T+L,a[1][0])),c&&P<0?A=sn(E+P+H,a[0][1]):!c&&P>0&&(A=an(E+R+H,a[1][1])),w=Math.max(w,I),O=Math.max(O,A)}if(s){let I=0,A=0;l&&M>0?I=an(k+M,s[0][0]):!l&&M<0&&(I=sn(k+T,s[1][0])),c&&P>0?A=an(E+P,s[0][1]):!c&&P<0&&(A=sn(E+R,s[1][1])),w=Math.max(w,I),O=Math.max(O,A)}if(r){if(u){const I=vr(T/C,_,m)*C;if(w=Math.max(w,I),a){let A=0;!l&&!c||l&&!c&&h?A=an(E+H+T/C,a[1][1])*C:A=sn(E+H+(l?M:-M)/C,a[0][1])*C,w=Math.max(w,A)}if(s){let A=0;!l&&!c||l&&!c&&h?A=sn(E+T/C,s[1][1])*C:A=an(E+(l?M:-M)/C,s[0][1])*C,w=Math.max(w,A)}}if(f){const I=vr(R*C,y,S)/C;if(O=Math.max(O,I),a){let A=0;!l&&!c||c&&!l&&h?A=an(k+R*C+L,a[1][0])/C:A=sn(k+(c?P:-P)*C+L,a[0][0])/C,O=Math.max(O,A)}if(s){let A=0;!l&&!c||c&&!l&&h?A=sn(k+R*C,s[1][0])/C:A=an(k+(c?P:-P)*C,s[0][0])/C,O=Math.max(O,A)}}}P=P+(P<0?O:-O),M=M+(M<0?w:-w),r&&(h?T>R*C?P=(Aa(l,c)?-M:M)/C:M=(Aa(l,c)?-P:P)*C:u?(P=M/C,c=l):(M=P*C,l=c));const x=l?k+M:k,z=c?E+P:E;return{width:b+(l?-M:M),height:N+(c?-P:P),x:o[0]*M*(l?-1:1)+x,y:o[1]*P*(c?-1:1)+z}}const Ec={width:0,height:0,x:0,y:0},Uv={...Ec,pointerX:0,pointerY:0,aspectRatio:1};function Jv(e){return[[0,0],[e.measured.width,e.measured.height]]}function jv(e,t,n){const i=t.position.x+e.position.x,r=t.position.y+e.position.y,o=e.measured.width??0,a=e.measured.height??0,s=n[0]*o,l=n[1]*a;return[[i-s,r-l],[i+o-s,r+a-l]]}function Qv({domNode:e,nodeId:t,getStoreItems:n,onChange:i,onEnd:r}){const o=wt(e);function a({controlPosition:l,boundaries:c,keepAspectRatio:u,onResizeStart:f,onResize:h,onResizeEnd:g,shouldResize:p}){let y={...Ec},S={...Uv};const _=Zv(l);let m,k=null,E=[],b,N,C;const M=Yl().on("start",P=>{const{nodeLookup:T,transform:R,snapGrid:L,snapToGrid:H,nodeOrigin:w,paneDomNode:O}=n();if(m=T.get(t),!m)return;k=(O==null?void 0:O.getBoundingClientRect())??null;const{xSnapped:x,ySnapped:z}=pi(P.sourceEvent,{transform:R,snapGrid:L,snapToGrid:H,containerBounds:k});y={width:m.measured.width??0,height:m.measured.height??0,x:m.position.x??0,y:m.position.y??0},S={...y,pointerX:x,pointerY:z,aspectRatio:y.width/y.height},b=void 0,m.parentId&&(m.extent==="parent"||m.expandParent)&&(b=T.get(m.parentId),N=b&&m.extent==="parent"?Jv(b):void 0),E=[],C=void 0;for(const[I,A]of T)if(A.parentId===t&&(E.push({id:I,position:{...A.position},extent:A.extent}),A.extent==="parent"||A.expandParent)){const X=jv(A,m,A.origin??w);C?C=[[Math.min(X[0][0],C[0][0]),Math.min(X[0][1],C[0][1])],[Math.max(X[1][0],C[1][0]),Math.max(X[1][1],C[1][1])]]:C=X}f==null||f(P,{...y})}).on("drag",P=>{const{transform:T,snapGrid:R,snapToGrid:L,nodeOrigin:H}=n(),w=pi(P.sourceEvent,{transform:T,snapGrid:R,snapToGrid:L,containerBounds:k}),O=[];if(!m)return;const{x,y:z,width:I,height:A}=y,X={},K=m.origin??H,{width:$,height:ne,x:B,y:J}=$v(S,_,w,c,u,K,N,C),ie=$!==I,ue=ne!==A,de=B!==x&&ie,Z=J!==z&&ue;if(!de&&!Z&&!ie&&!ue)return;if((de||Z||K[0]===1||K[1]===1)&&(X.x=de?B:y.x,X.y=Z?J:y.y,y.x=X.x,y.y=X.y,E.length>0)){const xe=B-x,pe=J-z;for(const Ee of E)Ee.position={x:Ee.position.x-xe+K[0]*($-I),y:Ee.position.y-pe+K[1]*(ne-A)},O.push(Ee)}if((ie||ue)&&(X.width=ie?$:y.width,X.height=ue?ne:y.height,y.width=X.width,y.height=X.height),b&&m.expandParent){const xe=K[0]*(X.width??0);X.x&&X.x<xe&&(y.x=xe,S.x=S.x-(X.x-xe));const pe=K[1]*(X.height??0);X.y&&X.y<pe&&(y.y=pe,S.y=S.y-(X.y-pe))}const U=Gv({width:y.width,prevWidth:I,height:y.height,prevHeight:A,affectsX:_.affectsX,affectsY:_.affectsY}),j={...y,direction:U};(p==null?void 0:p(P,j))!==!1&&(h==null||h(P,j),i(X,O))}).on("end",P=>{g==null||g(P,{...y}),r==null||r()});o.call(M)}function s(){o.on(".drag",null)}return{update:a,destroy:s}}var e0=ae('<div role="button" tabindex="-1"><!></div>');function wn(e,t){le(t,!1);const n=je(),i=()=>q($,"$connectable",n),r=()=>q(ue,"$connectionRadius",n),o=()=>q(J,"$domNode",n),a=()=>q(ie,"$nodeLookup",n),s=()=>q(B,"$connectionMode",n),l=()=>q(U,"$lib",n),c=()=>q(Me,"$autoPanOnConnect",n),u=()=>q(Ge,"$flowId",n),f=()=>q(Z,"$isValidConnectionStore",n),h=()=>q(ge,"$onedgecreate",n),g=()=>q(qe,"$onConnectAction",n),p=()=>q(Pe,"$onConnectStartAction",n),y=()=>q(we,"$onConnectEndAction",n),S=()=>q(de,"$viewport",n),_=()=>q(mt,"$connection",n),m=()=>q(Be,"$edges",n),k=()=>q(Le,"$connectionLookup",n),E=F(),b=F(),N=F(),C=F(),M=F(),P=F(),T=F(),R=F();let L=v(t,"id",8,void 0),H=v(t,"type",8,"source"),w=v(t,"position",24,()=>fe.Top),O=v(t,"style",8,void 0),x=v(t,"isValidConnection",8,void 0),z=v(t,"onconnect",8,void 0),I=v(t,"ondisconnect",8,void 0),A=v(t,"isConnectable",8,void 0),X=v(t,"class",8,void 0);const K=Kn("svelteflow__node_id"),$=Kn("svelteflow__node_connectable"),ne=Fe(),{connectionMode:B,domNode:J,nodeLookup:ie,connectionRadius:ue,viewport:de,isValidConnection:Z,lib:U,addEdge:j,onedgecreate:ge,panBy:xe,cancelConnection:pe,updateConnection:Ee,autoPanOnConnect:Me,edges:Be,connectionLookup:Le,onconnect:qe,onconnectstart:Pe,onconnectend:we,flowId:Ge,connection:mt}=ne;function Te(Ue){const et=dc(Ue);(et&&Ue.button===0||!et)&&Hv.onPointerDown(Ue,{handleId:d(N),nodeId:K,isTarget:d(E),connectionRadius:r(),domNode:o(),nodeLookup:a(),connectionMode:s(),lib:l(),autoPanOnConnect:c(),flowId:u(),isValidConnection:x()??f(),updateConnection:Ee,cancelConnection:pe,panBy:xe,onConnect:ze=>{var bt;const nt=h()?h()(ze):ze;nt&&(j(nt),(bt=g())==null||bt(ze))},onConnectStart:(ze,nt)=>{var bt;(bt=p())==null||bt(ze,{nodeId:nt.nodeId,handleId:nt.handleId,handleType:nt.handleType})},onConnectEnd:(ze,nt)=>{var bt;(bt=y())==null||bt(ze,nt)},getTransform:()=>[S().x,S().y,S().zoom],getFromHandle:()=>_().fromHandle})}let Qe=F(null),Ke=F();G(()=>Y(H()),()=>{D(E,H()==="target")}),G(()=>(Y(A()),i()),()=>{D(b,A()!==void 0?A():i())}),G(()=>Y(L()),()=>{D(N,L()||null)}),G(()=>(Y(z()),Y(I()),m(),k(),Y(H()),Y(L())),()=>{(z()||I())&&(m(),D(Ke,k().get(`${K}-${H()}-${L()||null}`)))}),G(()=>(d(Qe),d(Ke),Y(I()),Y(z())),()=>{if(d(Qe)&&!ic(d(Ke),d(Qe))){const Ue=d(Ke)??new Map;pa(d(Qe),Ue,I()),pa(Ue,d(Qe),z())}D(Qe,d(Ke)??new Map)}),G(()=>_(),()=>{D(C,!!_().fromHandle)}),G(()=>(_(),Y(H()),d(N)),()=>{var Ue,et,ze;D(M,((Ue=_().fromHandle)==null?void 0:Ue.nodeId)===K&&((et=_().fromHandle)==null?void 0:et.type)===H()&&((ze=_().fromHandle)==null?void 0:ze.id)===d(N))}),G(()=>(_(),Y(H()),d(N)),()=>{var Ue,et,ze;D(P,((Ue=_().toHandle)==null?void 0:Ue.nodeId)===K&&((et=_().toHandle)==null?void 0:et.type)===H()&&((ze=_().toHandle)==null?void 0:ze.id)===d(N))}),G(()=>(s(),_(),Y(H()),d(N)),()=>{var Ue,et,ze;D(T,s()===Pn.Strict?((Ue=_().fromHandle)==null?void 0:Ue.type)!==H():K!==((et=_().fromHandle)==null?void 0:et.nodeId)||d(N)!==((ze=_().fromHandle)==null?void 0:ze.id))}),G(()=>(d(P),_()),()=>{D(R,d(P)&&_().isValid)}),rt(),he();var He=e0();Q(He,"data-nodeid",K);const bn=oe(()=>Ht(at(["svelte-flow__handle",`svelte-flow__handle-${w()}`,"nodrag","nopan",w(),X()])));var Tn=ee(He);Ie(Tn,t,"default",{}),ye(()=>{Q(He,"data-handleid",d(N)),Q(He,"data-handlepos",w()),Q(He,"data-id",`${u()??""}-${K??""}-${(L()||null)??""}-${H()??""}`),vs(He,d(bn),""),Q(He,"style",O()),Ye(He,"valid",d(R)),Ye(He,"connectingto",d(P)),Ye(He,"connectingfrom",d(M)),Ye(He,"source",!d(E)),Ye(He,"target",d(E)),Ye(He,"connectablestart",d(b)),Ye(He,"connectableend",d(b)),Ye(He,"connectable",d(b)),Ye(He,"connectionindicator",d(b)&&(!d(C)||d(T)))}),Ae("mousedown",He,Te),Ae("touchstart",He,Te),W(e,He),ce()}var t0=ae("<!> <!>",1);function Qo(e,t){const n=me(t,["children","$$slots","$$events","$$legacy"]);me(n,["data","targetPosition","sourcePosition"]),le(t,!1);let i=v(t,"data",24,()=>({label:"Node"})),r=v(t,"targetPosition",8,void 0),o=v(t,"sourcePosition",8,void 0);he();var a=t0(),s=se(a),l=oe(()=>r()??fe.Top);wn(s,{type:"target",get position(){return d(l)}});var c=te(s),u=te(c),f=oe(()=>o()??fe.Bottom);wn(u,{type:"source",get position(){return d(f)}}),ye(()=>{var h;return qt(c,` ${((h=i())==null?void 0:h.label)??""} `)}),W(e,a),ce()}var n0=ae(" <!>",1);function i0(e,t){const n=me(t,["children","$$slots","$$events","$$legacy"]);me(n,["data","sourcePosition"]),le(t,!1);let i=v(t,"data",24,()=>({label:"Node"})),r=v(t,"sourcePosition",8,void 0);he();var o=n0(),a=se(o),s=te(a),l=oe(()=>r()??fe.Bottom);wn(s,{type:"source",get position(){return d(l)}}),ye(()=>{var c;return qt(a,`${((c=i())==null?void 0:c.label)??""} `)}),W(e,o),ce()}var r0=ae(" <!>",1);function o0(e,t){const n=me(t,["children","$$slots","$$events","$$legacy"]);me(n,["data","targetPosition"]),le(t,!1);let i=v(t,"data",24,()=>({label:"Node"})),r=v(t,"targetPosition",8,void 0);he();var o=r0(),a=se(o),s=te(a),l=oe(()=>r()??fe.Top);wn(s,{type:"target",get position(){return d(l)}}),ye(()=>{var c;return qt(a,`${((c=i())==null?void 0:c.label)??""} `)}),W(e,o),ce()}function s0(e,t){const n=me(t,["children","$$slots","$$events","$$legacy"]);me(n,[])}function Ia(e,t,n){if(!t)return;const i=n?t.querySelector(n):t;i&&i.appendChild(e)}function Eo(e,{target:t,domNode:n}){return Ia(e,n,t),{async update({target:i,domNode:r}){Ia(e,r,i)},destroy(){e.parentNode&&e.parentNode.removeChild(e)}}}var a0=ae("<div><!></div>");function l0(e,t){le(t,!1);const n=je(),i=()=>q(r,"$domNode",n),{domNode:r}=Fe();he();var o=a0(),a=ee(o);Ie(a,t,"default",{}),ut(o,(s,l)=>Eo==null?void 0:Eo(s,l),()=>({target:".svelte-flow__edgelabel-renderer",domNode:i()})),W(e,o),ce()}function Sc(){const{edgeLookup:e,selectionRect:t,selectionRectMode:n,multiselectionKeyPressed:i,addSelectedEdges:r,unselectNodesAndEdges:o,elementsSelectable:a}=Fe();return s=>{const l=V(e).get(s);if(!l){console.warn("012",nr.error012(s));return}(l.selectable||V(a)&&typeof l.selectable>"u")&&(t.set(null),n.set(null),l.selected?l.selected&&V(i)&&o({nodes:[],edges:[l]}):r([s]))}}var c0=ae('<div class="svelte-flow__edge-label" role="button" tabindex="-1"><!></div>');function u0(e,t){le(t,!1);let n=v(t,"style",8,void 0),i=v(t,"x",8,void 0),r=v(t,"y",8,void 0);const o=Sc(),a=Kn("svelteflow__edge_id");he(),l0(e,{children:(s,l)=>{var c=c0(),u=ee(c);Ie(u,t,"default",{}),ye(()=>{Q(c,"style","pointer-events: all;"+n()),We(c,"transform",`translate(-50%, -50%) translate(${i()??""}px,${r()??""}px)`)}),Ae("keyup",c,()=>{}),Ae("click",c,()=>{a&&o(a)}),W(s,c)},$$slots:{default:!0}}),ce()}var d0=Je('<path fill="none" class="svelte-flow__edge-interaction"></path>'),f0=Je('<path fill="none"></path><!><!>',1);function co(e,t){le(t,!1);let n=v(t,"id",8,void 0),i=v(t,"path",8),r=v(t,"label",8,void 0),o=v(t,"labelX",8,void 0),a=v(t,"labelY",8,void 0),s=v(t,"labelStyle",8,void 0),l=v(t,"markerStart",8,void 0),c=v(t,"markerEnd",8,void 0),u=v(t,"style",8,void 0),f=v(t,"interactionWidth",8,20),h=v(t,"class",8,void 0),g=f()===void 0?20:f();he();var p=f0(),y=se(p);const S=oe(()=>Ht(at(["svelte-flow__edge-path",h()])));var _=te(y);{var m=b=>{var N=d0();Q(N,"stroke-opacity",0),Q(N,"stroke-width",g),ye(()=>Q(N,"d",i())),W(b,N)};Ce(_,b=>{g&&b(m)})}var k=te(_);{var E=b=>{u0(b,{get x(){return o()},get y(){return a()},get style(){return s()},children:(N,C)=>{var M=Ro();ye(()=>qt(M,r())),W(N,M)},$$slots:{default:!0}})};Ce(k,b=>{r()&&b(E)})}ye(()=>{Q(y,"id",n()),Q(y,"d",i()),In(y,d(S),""),Q(y,"marker-start",l()),Q(y,"marker-end",c()),Q(y,"style",u())}),W(e,p),ce()}function es(e,t){const n=me(t,["children","$$slots","$$events","$$legacy"]);me(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),le(t,!1);const i=F(),r=F(),o=F();let a=v(t,"label",8,void 0),s=v(t,"labelStyle",8,void 0),l=v(t,"style",8,void 0),c=v(t,"markerStart",8,void 0),u=v(t,"markerEnd",8,void 0),f=v(t,"interactionWidth",8,void 0),h=v(t,"sourceX",8),g=v(t,"sourceY",8),p=v(t,"sourcePosition",8),y=v(t,"targetX",8),S=v(t,"targetY",8),_=v(t,"targetPosition",8);G(()=>(d(i),d(r),d(o),Y(h()),Y(g()),Y(y()),Y(S()),Y(p()),Y(_())),()=>{(m=>(D(i,m[0]),D(r,m[1]),D(o,m[2])))(fc({sourceX:h(),sourceY:g(),targetX:y(),targetY:S(),sourcePosition:p(),targetPosition:_()}))}),rt(),he(),co(e,{get path(){return d(i)},get labelX(){return d(r)},get labelY(){return d(o)},get label(){return a()},get labelStyle(){return s()},get markerStart(){return c()},get markerEnd(){return u()},get interactionWidth(){return f()},get style(){return l()}}),ce()}function h0(e,t){const n=me(t,["children","$$slots","$$events","$$legacy"]);me(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),le(t,!1);const i=F(),r=F(),o=F();let a=v(t,"label",8,void 0),s=v(t,"labelStyle",8,void 0),l=v(t,"style",8,void 0),c=v(t,"markerStart",8,void 0),u=v(t,"markerEnd",8,void 0),f=v(t,"interactionWidth",8,void 0),h=v(t,"sourceX",8),g=v(t,"sourceY",8),p=v(t,"sourcePosition",8),y=v(t,"targetX",8),S=v(t,"targetY",8),_=v(t,"targetPosition",8);G(()=>(d(i),d(r),d(o),Y(h()),Y(g()),Y(y()),Y(S()),Y(p()),Y(_())),()=>{(m=>(D(i,m[0]),D(r,m[1]),D(o,m[2])))(Xr({sourceX:h(),sourceY:g(),targetX:y(),targetY:S(),sourcePosition:p(),targetPosition:_()}))}),rt(),he(),co(e,{get path(){return d(i)},get labelX(){return d(r)},get labelY(){return d(o)},get label(){return a()},get labelStyle(){return s()},get markerStart(){return c()},get markerEnd(){return u()},get interactionWidth(){return f()},get style(){return l()}}),ce()}function g0(e,t){const n=me(t,["children","$$slots","$$events","$$legacy"]);me(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","targetX","targetY"]),le(t,!1);const i=F(),r=F(),o=F();let a=v(t,"label",8,void 0),s=v(t,"labelStyle",8,void 0),l=v(t,"style",8,void 0),c=v(t,"markerStart",8,void 0),u=v(t,"markerEnd",8,void 0),f=v(t,"interactionWidth",8,void 0),h=v(t,"sourceX",8),g=v(t,"sourceY",8),p=v(t,"targetX",8),y=v(t,"targetY",8);G(()=>(d(i),d(r),d(o),Y(h()),Y(g()),Y(p()),Y(y())),()=>{(S=>(D(i,S[0]),D(r,S[1]),D(o,S[2])))(Jo({sourceX:h(),sourceY:g(),targetX:p(),targetY:y()}))}),rt(),he(),co(e,{get path(){return d(i)},get labelX(){return d(r)},get labelY(){return d(o)},get label(){return a()},get labelStyle(){return s()},get markerStart(){return c()},get markerEnd(){return u()},get interactionWidth(){return f()},get style(){return l()}}),ce()}function v0(e,t){const n=me(t,["children","$$slots","$$events","$$legacy"]);me(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),le(t,!1);const i=F(),r=F(),o=F();let a=v(t,"label",8,void 0),s=v(t,"labelStyle",8,void 0),l=v(t,"style",8,void 0),c=v(t,"markerStart",8,void 0),u=v(t,"markerEnd",8,void 0),f=v(t,"interactionWidth",8,void 0),h=v(t,"sourceX",8),g=v(t,"sourceY",8),p=v(t,"sourcePosition",8),y=v(t,"targetX",8),S=v(t,"targetY",8),_=v(t,"targetPosition",8);G(()=>(d(i),d(r),d(o),Y(h()),Y(g()),Y(y()),Y(S()),Y(p()),Y(_())),()=>{(m=>(D(i,m[0]),D(r,m[1]),D(o,m[2])))(Xr({sourceX:h(),sourceY:g(),targetX:y(),targetY:S(),sourcePosition:p(),targetPosition:_(),borderRadius:0}))}),rt(),he(),co(e,{get path(){return d(i)},get labelX(){return d(r)},get labelY(){return d(o)},get label(){return a()},get labelStyle(){return s()},get markerStart(){return c()},get markerEnd(){return u()},get interactionWidth(){return f()},get style(){return l()}}),ce()}function m0(e,t){const n=e.set,i=t.set,r=V(e),o=V(t);let s=r.length===0&&o.length>0?o:r;e.set(s);const l=c=>{const u=n(c);return s=u,i(s),u};e.set=t.set=l,e.update=t.update=c=>l(c(s))}function y0(e,t){const n=e.set,i=t.set;let r=V(t);e.set(r);const o=a=>{n(a),i(a),r=a};e.set=t.set=o,e.update=t.update=a=>o(a(r))}const p0=(e,t,n)=>{if(!n)return;const i=V(e),r=t.set,o=n.set;let a=n?V(n):{x:0,y:0,zoom:1};t.set(a),t.set=s=>(r(s),o(s),a=s,s),n.set=s=>(i==null||i.syncViewport(s),r(s),o(s),a=s,s),t.update=s=>{t.set(s(a))},n.update=s=>{n.set(s(a))}},_0=(e,t,n,i=[0,0],r=Hr)=>{const{subscribe:o,set:a,update:s}=re([]);let l=e,c={},u=!0;const f=y=>(gc(y,t,n,{elevateNodesOnSelect:u,nodeOrigin:i,nodeExtent:r,defaults:c,checkEquality:!1}),l=y,a(l),l),h=y=>f(y(l)),g=y=>{c=y},p=y=>{u=y.elevateNodesOnSelect??u};return f(l),{subscribe:o,set:f,update:h,setDefaultOptions:g,setOptions:p}},w0=(e,t,n,i)=>{const{subscribe:r,set:o,update:a}=re([]);let s=e,l={};const c=h=>{const g=l?h.map(p=>({...l,...p})):h;mc(t,n,g),s=g,o(s)},u=h=>c(h(s)),f=h=>{l=h};return c(s),{subscribe:r,set:c,update:u,setDefaultOptions:f}},Cc={input:i0,output:o0,default:Qo,group:s0},Nc={straight:g0,smoothstep:h0,default:es,step:v0},x0=({nodes:e=[],edges:t=[],width:n,height:i,fitView:r,nodeOrigin:o,nodeExtent:a})=>{const s=new Map,l=new Map,c=new Map,u=new Map,f=o??[0,0],h=a??Hr;gc(e,s,l,{nodeExtent:h,nodeOrigin:f,elevateNodesOnSelect:!1,checkEquality:!1}),mc(c,u,t);let g={x:0,y:0,zoom:1};if(r&&n&&i){const p=rr(s,{filter:y=>!!((y.width||y.initialWidth)&&(y.height||y.initialHeight))});g=Ss(p,n,i,.5,2,.1)}return{flowId:re(null),nodes:_0(e,s,l,f,h),nodeLookup:kt(s),parentLookup:kt(l),edgeLookup:kt(u),visibleNodes:kt([]),edges:w0(t,c,u),visibleEdges:kt([]),connectionLookup:kt(c),height:re(500),width:re(500),minZoom:re(.5),maxZoom:re(2),nodeOrigin:re(f),nodeDragThreshold:re(1),nodeExtent:re(h),translateExtent:re(Hr),autoPanOnNodeDrag:re(!0),autoPanOnConnect:re(!0),fitViewOnInit:re(!1),fitViewOnInitDone:re(!1),fitViewOptions:re(void 0),panZoom:re(null),snapGrid:re(null),dragging:re(!1),selectionRect:re(null),selectionKeyPressed:re(!1),multiselectionKeyPressed:re(!1),deleteKeyPressed:re(!1),panActivationKeyPressed:re(!1),zoomActivationKeyPressed:re(!1),selectionRectMode:re(null),selectionMode:re(Dr.Partial),nodeTypes:re(Cc),edgeTypes:re(Nc),viewport:re(g),connectionMode:re(Pn.Strict),domNode:re(null),connection:kt(Zo),connectionLineType:re(Xn.Bezier),connectionRadius:re(20),isValidConnection:re(()=>!0),nodesDraggable:re(!0),nodesConnectable:re(!0),elementsSelectable:re(!0),selectNodesOnDrag:re(!0),markers:kt([]),defaultMarkerColor:re("#b1b1b7"),lib:kt("svelte"),onlyRenderVisibleElements:re(!1),onerror:re(ov),ondelete:re(void 0),onedgecreate:re(void 0),onconnect:re(void 0),onconnectstart:re(void 0),onconnectend:re(void 0),onbeforedelete:re(void 0),nodesInitialized:re(!1),edgesInitialized:re(!1),viewportInitialized:re(!1),initialized:kt(!1)}};function b0(e){const t=Cn([e.edges,e.nodes,e.nodeLookup,e.onlyRenderVisibleElements,e.viewport,e.width,e.height],([n,,i,r,o,a,s])=>r&&a&&s?n.filter(c=>{const u=i.get(c.source),f=i.get(c.target);return u&&f&&fv({sourceNode:u,targetNode:f,width:a,height:s,transform:[o.x,o.y,o.zoom]})}):n);return Cn([t,e.nodes,e.nodeLookup,e.connectionMode,e.onerror],([n,,i,r,o])=>n.reduce((s,l)=>{const c=i.get(l.source),u=i.get(l.target);if(!c||!u)return s;const f=_v({id:l.id,sourceNode:c,targetNode:u,sourceHandle:l.sourceHandle||null,targetHandle:l.targetHandle||null,connectionMode:r,onError:o});return f&&s.push({...l,zIndex:dv({selected:l.selected,zIndex:l.zIndex,sourceNode:c,targetNode:u,elevateOnSelect:!1}),...f}),s},[]))}function k0(e){return Cn([e.nodeLookup,e.onlyRenderVisibleElements,e.width,e.height,e.viewport,e.nodes],([t,n,i,r,o])=>{const a=[o.x,o.y,o.zoom];return n?rc(t,{x:0,y:0,width:i,height:r},a,!0):Array.from(t.values())})}const zs=Symbol();function E0({nodes:e,edges:t,width:n,height:i,fitView:r,nodeOrigin:o,nodeExtent:a}){const s=x0({nodes:e,edges:t,width:n,height:i,fitView:r,nodeOrigin:o,nodeExtent:a});function l(x){s.nodeTypes.set({...Cc,...x})}function c(x){s.edgeTypes.set({...Nc,...x})}function u(x){const z=V(s.edges);s.edges.set(vv(x,z))}const f=(x,z=!1)=>{var A;const I=V(s.nodeLookup);for(const[X,K]of x){const $=(A=I.get(X))==null?void 0:A.internals.userNode;$&&($.position=K.position,$.dragging=z)}s.nodes.update(X=>X)};function h(x){var K,$,ne;const z=V(s.nodeLookup),I=V(s.parentLookup),{changes:A,updatedInternals:X}=Cv(x,z,V(s.parentLookup),V(s.domNode),V(s.nodeOrigin));if(X){if(bv(z,I,{nodeOrigin:o,nodeExtent:a}),!V(s.fitViewOnInitDone)&&V(s.fitViewOnInit)){const B=V(s.fitViewOptions),J=p({...B,nodes:B==null?void 0:B.nodes});s.fitViewOnInitDone.set(J)}for(const B of A){const J=(K=z.get(B.id))==null?void 0:K.internals.userNode;if(J)switch(B.type){case"dimensions":{const ie={...J.measured,...B.dimensions};B.setAttributes&&(J.width=(($=B.dimensions)==null?void 0:$.width)??J.width,J.height=((ne=B.dimensions)==null?void 0:ne.height)??J.height),J.measured=ie;break}case"position":J.position=B.position??J.position;break}}s.nodes.update(B=>B),V(s.nodesInitialized)||s.nodesInitialized.set(!0)}}function g(x){const z=V(s.panZoom),I=V(s.domNode);if(!z||!I)return Promise.resolve(!1);const{width:A,height:X}=Cs(I),K=_a(V(s.nodeLookup),x);return wa({nodes:K,width:A,height:X,minZoom:V(s.minZoom),maxZoom:V(s.maxZoom),panZoom:z},x)}function p(x){const z=V(s.panZoom);if(!z)return!1;const I=_a(V(s.nodeLookup),x);return wa({nodes:I,width:V(s.width),height:V(s.height),minZoom:V(s.minZoom),maxZoom:V(s.maxZoom),panZoom:z},x),I.size>0}function y(x,z){const I=V(s.panZoom);return I?I.scaleBy(x,z):Promise.resolve(!1)}function S(x){return y(1.2,x)}function _(x){return y(1/1.2,x)}function m(x){const z=V(s.panZoom);z&&(z.setScaleExtent([x,V(s.maxZoom)]),s.minZoom.set(x))}function k(x){const z=V(s.panZoom);z&&(z.setScaleExtent([V(s.minZoom),x]),s.maxZoom.set(x))}function E(x){const z=V(s.panZoom);z&&(z.setTranslateExtent(x),s.translateExtent.set(x))}function b(x){let z=!1;return x.forEach(I=>{I.selected&&(I.selected=!1,z=!0)}),z}function N(x){var z;(z=V(s.panZoom))==null||z.setClickDistance(x)}function C(x){b((x==null?void 0:x.nodes)||V(s.nodes))&&s.nodes.set(V(s.nodes)),b((x==null?void 0:x.edges)||V(s.edges))&&s.edges.set(V(s.edges))}s.deleteKeyPressed.subscribe(async x=>{var z;if(x){const I=V(s.nodes),A=V(s.edges),X=I.filter(B=>B.selected),K=A.filter(B=>B.selected),{nodes:$,edges:ne}=await oc({nodesToRemove:X,edgesToRemove:K,nodes:I,edges:A,onBeforeDelete:V(s.onbeforedelete)});($.length||ne.length)&&(s.nodes.update(B=>B.filter(J=>!$.some(ie=>ie.id===J.id))),s.edges.update(B=>B.filter(J=>!ne.some(ie=>ie.id===J.id))),(z=V(s.ondelete))==null||z({nodes:$,edges:ne}))}});function M(x){const z=V(s.multiselectionKeyPressed);s.nodes.update(I=>I.map(A=>{const X=x.includes(A.id),K=z&&A.selected||X;return A.selected=K,A})),z||s.edges.update(I=>I.map(A=>(A.selected=!1,A)))}function P(x){const z=V(s.multiselectionKeyPressed);s.edges.update(I=>I.map(A=>{const X=x.includes(A.id),K=z&&A.selected||X;return A.selected=K,A})),z||s.nodes.update(I=>I.map(A=>(A.selected=!1,A)))}function T(x){var I;const z=(I=V(s.nodes))==null?void 0:I.find(A=>A.id===x);if(!z){console.warn("012",nr.error012(x));return}s.selectionRect.set(null),s.selectionRectMode.set(null),z.selected?z.selected&&V(s.multiselectionKeyPressed)&&C({nodes:[z],edges:[]}):M([x])}function R(x){const z=V(s.viewport);return Nv({delta:x,panZoom:V(s.panZoom),transform:[z.x,z.y,z.zoom],translateExtent:V(s.translateExtent),width:V(s.width),height:V(s.height)})}const L=re(Zo),H=x=>{L.set({...x})};function w(){L.set(Zo)}function O(){s.fitViewOnInitDone.set(!1),s.selectionRect.set(null),s.selectionRectMode.set(null),s.snapGrid.set(null),s.isValidConnection.set(()=>!0),C(),w()}return{...s,visibleEdges:b0(s),visibleNodes:k0(s),connection:Cn([L,s.viewport],([x,z])=>x.inProgress?{...x,to:or(x.to,[z.x,z.y,z.zoom])}:{...x}),markers:Cn([s.edges,s.defaultMarkerColor,s.flowId],([x,z,I])=>wv(x,{defaultColor:z,id:I})),initialized:(()=>{let x=!1;const z=V(s.nodes).length,I=V(s.edges).length;return Cn([s.nodesInitialized,s.edgesInitialized,s.viewportInitialized],([A,X,K])=>x||(z===0?x=K:I===0?x=K&&A:x=K&&A&&X,x))})(),syncNodeStores:x=>m0(s.nodes,x),syncEdgeStores:x=>y0(s.edges,x),syncViewport:x=>p0(s.panZoom,s.viewport,x),setNodeTypes:l,setEdgeTypes:c,addEdge:u,updateNodePositions:f,updateNodeInternals:h,zoomIn:S,zoomOut:_,fitView:x=>g(x),setMinZoom:m,setMaxZoom:k,setTranslateExtent:E,setPaneClickDistance:N,unselectNodesAndEdges:C,addSelectedNodes:M,addSelectedEdges:P,handleNodeSelection:T,panBy:R,updateConnection:H,cancelConnection:w,reset:O}}function Fe(){const e=Kn(zs);if(!e)throw new Error("In order to use useStore you need to wrap your component in a <SvelteFlowProvider />");return e.getStore()}function S0({nodes:e,edges:t,width:n,height:i,fitView:r,nodeOrigin:o,nodeExtent:a}){const s=E0({nodes:e,edges:t,width:n,height:i,fitView:r,nodeOrigin:o,nodeExtent:a});return Nr(zs,{getStore:()=>s}),s}function So(e,t){const{panZoom:n,minZoom:i,maxZoom:r,initialViewport:o,viewport:a,dragging:s,translateExtent:l,paneClickDistance:c}=t,u=Kv({domNode:e,minZoom:i,maxZoom:r,translateExtent:l,viewport:o,paneClickDistance:c,onDraggingChange:s.set}),f=u.getViewport();return a.set(f),n.set(u),u.update(t),{update(h){u.update(h)}}}var C0=ae('<div class="svelte-flow__zoom svelte-4xkw84"><!></div>');function N0(e,t){le(t,!1);const n=je(),i=()=>q(z,"$panActivationKeyPressed",n),r=()=>q(L,"$minZoom",n),o=()=>q(H,"$maxZoom",n),a=()=>q(I,"$zoomActivationKeyPressed",n),s=()=>q(R,"$selectionRect",n),l=()=>q(O,"$translateExtent",n),c=()=>q(x,"$lib",n),u=F(),f=F(),h=F();let g=v(t,"initialViewport",8,void 0),p=v(t,"onMoveStart",8,void 0),y=v(t,"onMove",8,void 0),S=v(t,"onMoveEnd",8,void 0),_=v(t,"panOnScrollMode",8),m=v(t,"preventScrolling",8),k=v(t,"zoomOnScroll",8),E=v(t,"zoomOnDoubleClick",8),b=v(t,"zoomOnPinch",8),N=v(t,"panOnDrag",8),C=v(t,"panOnScroll",8),M=v(t,"paneClickDistance",8);const{viewport:P,panZoom:T,selectionRect:R,minZoom:L,maxZoom:H,dragging:w,translateExtent:O,lib:x,panActivationKeyPressed:z,zoomActivationKeyPressed:I,viewportInitialized:A}=Fe(),X=ne=>P.set({x:ne[0],y:ne[1],zoom:ne[2]});ii(()=>{bi(A,!0)}),G(()=>Y(g()),()=>{D(u,g()||{x:0,y:0,zoom:1})}),G(()=>(i(),Y(N())),()=>{D(f,i()||N())}),G(()=>(i(),Y(C())),()=>{D(h,i()||C())}),rt(),he();var K=C0(),$=ee(K);Ie($,t,"default",{}),ut(K,(ne,B)=>So==null?void 0:So(ne,B),()=>({viewport:P,minZoom:r(),maxZoom:o(),initialViewport:d(u),dragging:w,panZoom:T,onPanZoomStart:p(),onPanZoom:y(),onPanZoomEnd:S(),zoomOnScroll:k(),zoomOnDoubleClick:E(),zoomOnPinch:b(),panOnScroll:d(h),panOnDrag:d(f),panOnScrollSpeed:.5,panOnScrollMode:_()||vn.Free,zoomActivationKeyPressed:a(),preventScrolling:typeof m()=="boolean"?m():!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!s(),translateExtent:l(),lib:c(),paneClickDistance:M(),onTransformChange:X})),W(e,K),ce()}function Ta(e,t){return n=>{n.target===t&&(e==null||e(n))}}function Oa(e){return t=>{const n=e.includes(t.id);return t.selected!==n&&(t.selected=n),t}}var M0=ae('<div class="svelte-flow__pane svelte-1esy7hx"><!></div>');function P0(e,t){le(t,!1);const n=je(),i=()=>q(H,"$panActivationKeyPressed",n),r=()=>q(R,"$selectionKeyPressed",n),o=()=>q(P,"$selectionRect",n),a=()=>q(M,"$elementsSelectable",n),s=()=>q(T,"$selectionRectMode",n),l=()=>q(b,"$edges",n),c=()=>q(E,"$nodeLookup",n),u=()=>q(N,"$viewport",n),f=()=>q(L,"$selectionMode",n),h=()=>q(C,"$dragging",n),g=F(),p=F(),y=F();let S=v(t,"panOnDrag",8,void 0),_=v(t,"selectionOnDrag",8,void 0);const m=eo(),{nodes:k,nodeLookup:E,edges:b,viewport:N,dragging:C,elementsSelectable:M,selectionRect:P,selectionRectMode:T,selectionKeyPressed:R,selectionMode:L,panActivationKeyPressed:H,unselectNodesAndEdges:w}=Fe();let O=F(),x=null,z=[],I=!1;function A(Z){if(I){I=!1;return}m("paneclick",{event:Z}),w(),T.set(null)}function X(Z){var ge,xe;if(x=d(O).getBoundingClientRect(),!M||!d(p)||Z.button!==0||Z.target!==d(O)||!x)return;(xe=(ge=Z.target)==null?void 0:ge.setPointerCapture)==null||xe.call(ge,Z.pointerId);const{x:U,y:j}=en(Z,x);w(),P.set({width:0,height:0,startX:U,startY:j,x:U,y:j})}function K(Z){if(!d(p)||!x||!o())return;I=!0;const U=en(Z,x),j=o().startX??0,ge=o().startY??0,xe={...o(),x:U.x<j?U.x:j,y:U.y<ge?U.y:ge,width:Math.abs(U.x-j),height:Math.abs(U.y-ge)},pe=z.map(Le=>Le.id),Ee=$o(z,l()).map(Le=>Le.id);z=rc(c(),xe,[u().x,u().y,u().zoom],f()===Dr.Partial,!0);const Me=$o(z,l()).map(Le=>Le.id),Be=z.map(Le=>Le.id);(pe.length!==Be.length||Be.some(Le=>!pe.includes(Le)))&&k.update(Le=>Le.map(Oa(Be))),(Ee.length!==Me.length||Me.some(Le=>!Ee.includes(Le)))&&b.update(Le=>Le.map(Oa(Me))),T.set("user"),P.set(xe)}function $(Z){var U,j;Z.button===0&&((j=(U=Z.target)==null?void 0:U.releasePointerCapture)==null||j.call(U,Z.pointerId),!d(p)&&s()==="user"&&Z.target===d(O)&&(A==null||A(Z)),P.set(null),z.length>0&&bi(T,"nodes"),r()&&(I=!1))}const ne=Z=>{var U;if(Array.isArray(d(g))&&((U=d(g))!=null&&U.includes(2))){Z.preventDefault();return}m("panecontextmenu",{event:Z})};G(()=>(i(),Y(S())),()=>{D(g,i()||S())}),G(()=>(r(),o(),Y(_()),d(g)),()=>{D(p,r()||o()||_()&&d(g)!==!0)}),G(()=>(a(),d(p),s()),()=>{D(y,a()&&(d(p)||s()==="user"))}),rt(),he();var B=M0(),J=yn(()=>d(y)?void 0:Ta(A,d(O))),ie=yn(()=>Ta(ne,d(O)));const ue=oe(()=>S()===!0||Array.isArray(S())&&S().includes(0));ye(()=>Ye(B,"draggable",d(ue)));var de=ee(B);Ie(de,t,"default",{}),Qi(B,Z=>D(O,Z),()=>d(O)),ye(()=>{Ye(B,"dragging",h()),Ye(B,"selection",d(p))}),Ae("click",B,function(...Z){var U;(U=d(J))==null||U.apply(this,Z)}),Ae("pointerdown",B,function(...Z){var U;(U=d(y)?X:void 0)==null||U.apply(this,Z)}),Ae("pointermove",B,function(...Z){var U;(U=d(y)?K:void 0)==null||U.apply(this,Z)}),Ae("pointerup",B,function(...Z){var U;(U=d(y)?$:void 0)==null||U.apply(this,Z)}),Ae("contextmenu",B,function(...Z){var U;(U=d(ie))==null||U.apply(this,Z)}),W(e,B),ce()}var z0=ae('<div class="svelte-flow__viewport xyflow__viewport svelte-1floaup"><!></div>');function A0(e,t){le(t,!1);const n=je(),i=()=>q(r,"$viewport",n),{viewport:r}=Fe();he();var o=z0(),a=ee(o);Ie(a,t,"default",{}),ye(()=>Q(o,"style",`transform: translate(${i().x??""}px, ${i().y??""}px) scale(${i().zoom??""})`)),W(e,o),ce()}function Yn(e,t){const{store:n,onDrag:i,onDragStart:r,onDragStop:o,onNodeMouseDown:a}=t,s=Pv({onDrag:i,onDragStart:r,onDragStop:o,onNodeMouseDown:a,getStoreItems:()=>{const c=V(n.snapGrid),u=V(n.viewport);return{nodes:V(n.nodes),nodeLookup:V(n.nodeLookup),edges:V(n.edges),nodeExtent:V(n.nodeExtent),snapGrid:c||[0,0],snapToGrid:!!c,nodeOrigin:V(n.nodeOrigin),multiSelectionActive:V(n.multiselectionKeyPressed),domNode:V(n.domNode),transform:[u.x,u.y,u.zoom],autoPanOnNodeDrag:V(n.autoPanOnNodeDrag),nodesDraggable:V(n.nodesDraggable),selectNodesOnDrag:V(n.selectNodesOnDrag),nodeDragThreshold:V(n.nodeDragThreshold),unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,panBy:n.panBy}}});function l(c,u){if(u.disabled){s.destroy();return}s.update({domNode:c,noDragClassName:u.noDragClass,handleSelector:u.handleSelector,nodeId:u.nodeId,isSelectable:u.isSelectable,nodeClickDistance:u.nodeClickDistance})}return l(e,t),{update(c){l(e,c)},destroy(){s.destroy()}}}function I0({width:e,height:t,initialWidth:n,initialHeight:i,measuredWidth:r,measuredHeight:o}){if(r===void 0&&o===void 0){const a=e??n,s=t??i;return{width:a?`width:${a}px;`:"",height:s?`height:${s}px;`:""}}return{width:e?`width:${e}px;`:"",height:t?`height:${t}px;`:""}}var T0=ae("<div><!></div>");function O0(e,t){le(t,!1);const n=je(),i=()=>q(B,"$nodeTypes",n),r=()=>q(ge,"$connectableStore",n),o=F(void 0,!0),a=F(void 0,!0),s=F(void 0,!0),l=F(void 0,!0);let c=v(t,"node",9),u=v(t,"id",9),f=v(t,"data",25,()=>({})),h=v(t,"selected",9,!1),g=v(t,"draggable",9,void 0),p=v(t,"selectable",9,void 0),y=v(t,"connectable",9,!0),S=v(t,"deletable",9,!0),_=v(t,"hidden",9,!1),m=v(t,"dragging",9,!1),k=v(t,"resizeObserver",9,null),E=v(t,"style",9,void 0),b=v(t,"type",9,"default"),N=v(t,"isParent",9,!1),C=v(t,"positionX",9),M=v(t,"positionY",9),P=v(t,"sourcePosition",9,void 0),T=v(t,"targetPosition",9,void 0),R=v(t,"zIndex",9),L=v(t,"measuredWidth",9,void 0),H=v(t,"measuredHeight",9,void 0),w=v(t,"initialWidth",9,void 0),O=v(t,"initialHeight",9,void 0),x=v(t,"width",9,void 0),z=v(t,"height",9,void 0),I=v(t,"dragHandle",9,void 0),A=v(t,"initialized",9,!1),X=v(t,"parentId",9,void 0),K=v(t,"nodeClickDistance",9,void 0),$=v(t,"class",9,"");const ne=Fe(),{nodeTypes:B,nodeDragThreshold:J,selectNodesOnDrag:ie,handleNodeSelection:ue,updateNodeInternals:de}=ne;let Z=F(void 0,!0),U=F(null,!0);const j=eo(),ge=re(y());let xe=F(void 0,!0),pe=F(void 0,!0),Ee=F(void 0,!0);Nr("svelteflow__node_id",u()),Nr("svelteflow__node_connectable",ge),Cl(()=>{var Pe;d(U)&&((Pe=k())==null||Pe.unobserve(d(U)))});function Me(Pe){p()&&(!V(ie)||!g()||V(J)>0)&&ue(u()),j("nodeclick",{node:c().internals.userNode,event:Pe})}G(()=>Y(b()),()=>{D(o,b()||"default")}),G(()=>(i(),d(o)),()=>{D(a,!!i()[d(o)])}),G(()=>(i(),d(o),Qo),()=>{D(s,i()[d(o)]||Qo)}),G(()=>(d(a),Y(b())),()=>{d(a)||console.warn("003",nr.error003(b()))}),G(()=>(Y(x()),Y(z()),Y(w()),Y(O()),Y(L()),Y(H())),()=>{D(l,I0({width:x(),height:z(),initialWidth:w(),initialHeight:O(),measuredWidth:L(),measuredHeight:H()}))}),G(()=>Y(y()),()=>{ge.set(!!y())}),G(()=>(d(xe),d(o),d(pe),Y(P()),d(Ee),Y(T()),Y(u()),d(Z)),()=>{(d(xe)&&d(o)!==d(xe)||d(pe)&&P()!==d(pe)||d(Ee)&&T()!==d(Ee))&&requestAnimationFrame(()=>de(new Map([[u(),{id:u(),nodeElement:d(Z),force:!0}]]))),D(xe,d(o)),D(pe,P()),D(Ee,T())}),G(()=>(Y(k()),d(Z),d(U),Y(A())),()=>{k()&&(d(Z)!==d(U)||!A())&&(d(U)&&k().unobserve(d(U)),d(Z)&&k().observe(d(Z)),D(U,d(Z)))}),rt(),he(!0);var Be=Ne(),Le=se(Be);{var qe=Pe=>{var we=T0();const Ge=oe(()=>Ht(at(["svelte-flow__node",`svelte-flow__node-${d(o)}`,$()])));var mt=ee(we);_l(mt,()=>d(s),(Te,Qe)=>{Qe(Te,{get data(){return f()},get id(){return u()},get selected(){return h()},get selectable(){return p()},get deletable(){return S()},get sourcePosition(){return P()},get targetPosition(){return T()},get zIndex(){return R()},get dragging(){return m()},get draggable(){return g()},get dragHandle(){return I()},get parentId(){return X()},get type(){return d(o)},get isConnectable(){return r()},get positionAbsoluteX(){return C()},get positionAbsoluteY(){return M()},get width(){return x()},get height(){return z()}})}),ut(we,(Te,Qe)=>Yn==null?void 0:Yn(Te,Qe),()=>({nodeId:u(),isSelectable:p(),disabled:!1,handleSelector:I(),noDragClass:"nodrag",nodeClickDistance:K(),onNodeMouseDown:ue,onDrag:(Te,Qe,Ke,He)=>{j("nodedrag",{event:Te,targetNode:Ke,nodes:He})},onDragStart:(Te,Qe,Ke,He)=>{j("nodedragstart",{event:Te,targetNode:Ke,nodes:He})},onDragStop:(Te,Qe,Ke,He)=>{j("nodedragstop",{event:Te,targetNode:Ke,nodes:He})},store:ne})),Qi(we,Te=>D(Z,Te),()=>d(Z)),_t(()=>Ae("click",we,Me)),_t(()=>Ae("mouseenter",we,Te=>j("nodemouseenter",{node:c(),event:Te}))),_t(()=>Ae("mouseleave",we,Te=>j("nodemouseleave",{node:c(),event:Te}))),_t(()=>Ae("mousemove",we,Te=>j("nodemousemove",{node:c(),event:Te}))),_t(()=>Ae("contextmenu",we,Te=>j("nodecontextmenu",{node:c(),event:Te}))),ye(()=>{Q(we,"data-id",u()),vs(we,d(Ge),""),Q(we,"style",`${E()??""??""};${d(l).width??""}${d(l).height??""}`),Ye(we,"dragging",m()),Ye(we,"selected",h()),Ye(we,"draggable",g()),Ye(we,"connectable",y()),Ye(we,"selectable",p()),Ye(we,"nopan",g()),Ye(we,"parent",N()),We(we,"z-index",R()),We(we,"transform",`translate(${C()??""}px, ${M()??""}px)`),We(we,"visibility",A()?"visible":"hidden")}),W(Pe,we)};Ce(Le,Pe=>{_()||Pe(qe)})}W(e,Be),ce()}var H0=ae('<div class="svelte-flow__nodes svelte-tf4uy4"></div>');function D0(e,t){le(t,!1);const n=je(),i=()=>q(c,"$visibleNodes",n),r=()=>q(u,"$nodesDraggable",n),o=()=>q(h,"$elementsSelectable",n),a=()=>q(f,"$nodesConnectable",n),s=()=>q(p,"$parentLookup",n);let l=v(t,"nodeClickDistance",8,0);const{visibleNodes:c,nodesDraggable:u,nodesConnectable:f,elementsSelectable:h,updateNodeInternals:g,parentLookup:p}=Fe(),y=typeof ResizeObserver>"u"?null:new ResizeObserver(_=>{const m=new Map;_.forEach(k=>{const E=k.target.getAttribute("data-id");m.set(E,{id:E,nodeElement:k.target,force:!0})}),g(m)});Cl(()=>{y==null||y.disconnect()}),he();var S=H0();Pt(S,5,i,_=>_.id,(_,m)=>{var k=oe(()=>!!d(m).selected),E=oe(()=>!!d(m).hidden),b=oe(()=>!!(d(m).draggable||r()&&typeof d(m).draggable>"u")),N=oe(()=>!!(d(m).selectable||o()&&typeof d(m).selectable>"u")),C=oe(()=>!!(d(m).connectable||a()&&typeof d(m).connectable>"u")),M=oe(()=>d(m).deletable??!0),P=oe(()=>s().has(d(m).id)),T=oe(()=>d(m).type??"default"),R=oe(()=>d(m).internals.z??0),L=oe(()=>uc(d(m)));O0(_,{get node(){return d(m)},get id(){return d(m).id},get data(){return d(m).data},get selected(){return d(k)},get hidden(){return d(E)},get draggable(){return d(b)},get selectable(){return d(N)},get connectable(){return d(C)},get deletable(){return d(M)},get positionX(){return d(m).internals.positionAbsolute.x},get positionY(){return d(m).internals.positionAbsolute.y},get isParent(){return d(P)},get style(){return d(m).style},get class(){return d(m).class},get type(){return d(T)},get sourcePosition(){return d(m).sourcePosition},get targetPosition(){return d(m).targetPosition},get dragging(){return d(m).dragging},get zIndex(){return d(R)},get dragHandle(){return d(m).dragHandle},get initialized(){return d(L)},get width(){return d(m).width},get height(){return d(m).height},get initialWidth(){return d(m).initialWidth},get initialHeight(){return d(m).initialHeight},get measuredWidth(){return d(m).measured.width},get measuredHeight(){return d(m).measured.height},get parentId(){return d(m).parentId},resizeObserver:y,get nodeClickDistance(){return l()},$$events:{nodeclick(H){ke.call(this,t,H)},nodemouseenter(H){ke.call(this,t,H)},nodemousemove(H){ke.call(this,t,H)},nodemouseleave(H){ke.call(this,t,H)},nodedrag(H){ke.call(this,t,H)},nodedragstart(H){ke.call(this,t,H)},nodedragstop(H){ke.call(this,t,H)},nodecontextmenu(H){ke.call(this,t,H)}}})}),W(e,S),ce()}var R0=Je('<svg><g role="img"><!></g></svg>');function L0(e,t){le(t,!1);const n=je(),i=()=>q(B,"$edgeTypes",n),r=()=>q(J,"$flowId",n),o=()=>q(ie,"$elementsSelectable",n),a=()=>q(ne,"$edgeLookup",n),s=F(void 0,!0),l=F(void 0,!0),c=F(void 0,!0),u=F(void 0,!0),f=F(void 0,!0);let h=v(t,"id",9),g=v(t,"type",9,"default"),p=v(t,"source",9,""),y=v(t,"target",9,""),S=v(t,"data",25,()=>({})),_=v(t,"style",9,void 0),m=v(t,"zIndex",9,void 0),k=v(t,"animated",9,!1),E=v(t,"selected",9,!1),b=v(t,"selectable",9,void 0),N=v(t,"deletable",9,void 0),C=v(t,"hidden",9,!1),M=v(t,"label",9,void 0),P=v(t,"labelStyle",9,void 0),T=v(t,"markerStart",9,void 0),R=v(t,"markerEnd",9,void 0),L=v(t,"sourceHandle",9,void 0),H=v(t,"targetHandle",9,void 0),w=v(t,"sourceX",9),O=v(t,"sourceY",9),x=v(t,"targetX",9),z=v(t,"targetY",9),I=v(t,"sourcePosition",9),A=v(t,"targetPosition",9),X=v(t,"ariaLabel",9,void 0),K=v(t,"interactionWidth",9,void 0),$=v(t,"class",9,"");Nr("svelteflow__edge_id",h());const{edgeLookup:ne,edgeTypes:B,flowId:J,elementsSelectable:ie}=Fe(),ue=eo(),de=Sc();function Z(pe){const Ee=a().get(h());Ee&&(de(h()),ue("edgeclick",{event:pe,edge:Ee}))}function U(pe,Ee){const Me=a().get(h());Me&&ue(Ee,{event:pe,edge:Me})}G(()=>Y(g()),()=>{D(s,g()||"default")}),G(()=>(i(),d(s),es),()=>{D(l,i()[d(s)]||es)}),G(()=>(Y(T()),r()),()=>{D(c,T()?`url('#${jo(T(),r())}')`:void 0)}),G(()=>(Y(R()),r()),()=>{D(u,R()?`url('#${jo(R(),r())}')`:void 0)}),G(()=>(Y(b()),o()),()=>{D(f,b()??o())}),rt(),he(!0);var j=Ne(),ge=se(j);{var xe=pe=>{var Ee=R0(),Me=ee(Ee);const Be=oe(()=>Ht(at(["svelte-flow__edge",$()])));var Le=ee(Me),qe=oe(()=>N()??!0);_l(Le,()=>d(l),(Pe,we)=>{we(Pe,{get id(){return h()},get source(){return p()},get target(){return y()},get sourceX(){return w()},get sourceY(){return O()},get targetX(){return x()},get targetY(){return z()},get sourcePosition(){return I()},get targetPosition(){return A()},get animated(){return k()},get selected(){return E()},get label(){return M()},get labelStyle(){return P()},get data(){return S()},get style(){return _()},get interactionWidth(){return K()},get selectable(){return d(f)},get deletable(){return d(qe)},get type(){return d(s)},get sourceHandleId(){return L()},get targetHandleId(){return H()},get markerStart(){return d(c)},get markerEnd(){return d(u)}})}),ye(()=>{We(Ee,"z-index",m()),In(Me,d(Be),""),Q(Me,"data-id",h()),Q(Me,"aria-label",X()===null?void 0:X()?X():`Edge from ${p()} to ${y()}`),Ye(Me,"animated",k()),Ye(Me,"selected",E()),Ye(Me,"selectable",d(f))}),Ae("click",Me,Z),Ae("contextmenu",Me,Pe=>{U(Pe,"edgecontextmenu")}),Ae("mouseenter",Me,Pe=>{U(Pe,"edgemouseenter")}),Ae("mouseleave",Me,Pe=>{U(Pe,"edgemouseleave")}),W(pe,Ee)};Ce(ge,pe=>{C()||pe(xe)})}W(e,j),ce()}function V0(e,t){le(t,!1);let n=v(t,"onMount",8,void 0),i=v(t,"onDestroy",8,void 0);ii(()=>{var r;return(r=n())==null||r(),i()}),he(),ce()}var X0=Je("<defs></defs>");function Y0(e,t){le(t,!1);const n=je(),i=()=>q(r,"$markers",n),{markers:r}=Fe();he();var o=X0();Pt(o,5,i,a=>a.id,(a,s)=>{F0(a,$e(()=>d(s)))}),W(e,o),ce()}var W0=Je('<polyline stroke-linecap="round" stroke-linejoin="round" fill="none" points="-5,-4 0,0 -5,4"></polyline>'),B0=Je('<polyline stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),K0=Je('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');function F0(e,t){le(t,!1);let n=v(t,"id",8),i=v(t,"type",8),r=v(t,"width",8,12.5),o=v(t,"height",8,12.5),a=v(t,"markerUnits",8,"strokeWidth"),s=v(t,"orient",8,"auto-start-reverse"),l=v(t,"color",8,void 0),c=v(t,"strokeWidth",8,void 0);he();var u=K0(),f=ee(u);{var h=p=>{var y=W0();ye(()=>{Q(y,"stroke",l()),Q(y,"stroke-width",c())}),W(p,y)},g=p=>{var y=Ne(),S=se(y);{var _=m=>{var k=B0();ye(()=>{Q(k,"stroke",l()),Q(k,"stroke-width",c()),Q(k,"fill",l())}),W(m,k)};Ce(S,m=>{i()===Rr.ArrowClosed&&m(_)},!0)}W(p,y)};Ce(f,p=>{i()===Rr.Arrow?p(h):p(g,!1)})}ye(()=>{Q(u,"id",n()),Q(u,"markerWidth",`${r()}`),Q(u,"markerHeight",`${o()}`),Q(u,"markerUnits",a()),Q(u,"orient",s())}),W(e,u),ce()}var q0=ae('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!> <!></div>');function G0(e,t){le(t,!1);const n=je(),i=()=>q(a,"$visibleEdges",n),r=()=>q(c,"$elementsSelectable",n);let o=v(t,"defaultEdgeOptions",8);const{visibleEdges:a,edgesInitialized:s,edges:{setDefaultOptions:l},elementsSelectable:c}=Fe();ii(()=>{o()&&l(o())}),he();var u=q0(),f=ee(u),h=ee(f);Y0(h,{});var g=te(f,2);Pt(g,1,i,S=>S.id,(S,_)=>{var m=oe(()=>d(_).selectable??r()),k=oe(()=>d(_).type||"default");L0(S,{get id(){return d(_).id},get source(){return d(_).source},get target(){return d(_).target},get data(){return d(_).data},get style(){return d(_).style},get animated(){return d(_).animated},get selected(){return d(_).selected},get selectable(){return d(m)},get deletable(){return d(_).deletable},get hidden(){return d(_).hidden},get label(){return d(_).label},get labelStyle(){return d(_).labelStyle},get markerStart(){return d(_).markerStart},get markerEnd(){return d(_).markerEnd},get sourceHandle(){return d(_).sourceHandle},get targetHandle(){return d(_).targetHandle},get sourceX(){return d(_).sourceX},get sourceY(){return d(_).sourceY},get targetX(){return d(_).targetX},get targetY(){return d(_).targetY},get sourcePosition(){return d(_).sourcePosition},get targetPosition(){return d(_).targetPosition},get ariaLabel(){return d(_).ariaLabel},get interactionWidth(){return d(_).interactionWidth},get class(){return d(_).class},get type(){return d(k)},get zIndex(){return d(_).zIndex},$$events:{edgeclick(E){ke.call(this,t,E)},edgecontextmenu(E){ke.call(this,t,E)},edgemouseenter(E){ke.call(this,t,E)},edgemouseleave(E){ke.call(this,t,E)}}})});var p=te(g,2);{var y=S=>{V0(S,{onMount:()=>{bi(s,!0)},onDestroy:()=>{bi(s,!1)}})};Ce(p,S=>{i().length>0&&S(y)})}W(e,u),ce()}var Z0=ae('<div class="svelte-flow__selection svelte-1iugwpu"></div>');function Mc(e,t){let n=v(t,"x",8,0),i=v(t,"y",8,0),r=v(t,"width",8,0),o=v(t,"height",8,0),a=v(t,"isVisible",8,!0);var s=Ne(),l=se(s);{var c=u=>{var f=Z0();ye(()=>{We(f,"width",typeof r()=="string"?r():`${r()}px`),We(f,"height",typeof o()=="string"?o():`${o()}px`),We(f,"transform",`translate(${n()}px, ${i()}px)`)}),W(u,f)};Ce(l,u=>{a()&&u(c)})}W(e,s)}function $0(e,t){le(t,!1);const n=je(),i=()=>q(o,"$selectionRect",n),r=()=>q(a,"$selectionRectMode",n),{selectionRect:o,selectionRectMode:a}=Fe();he();var s=oe(()=>!!(i()&&r()==="user")),l=oe(()=>{var h;return(h=i())==null?void 0:h.width}),c=oe(()=>{var h;return(h=i())==null?void 0:h.height}),u=oe(()=>{var h;return(h=i())==null?void 0:h.x}),f=oe(()=>{var h;return(h=i())==null?void 0:h.y});Mc(e,{get isVisible(){return d(s)},get width(){return d(l)},get height(){return d(c)},get x(){return d(u)},get y(){return d(f)}}),ce()}var U0=ae('<div class="selection-wrapper nopan svelte-5pxri" role="button" tabindex="-1"><!></div>');function J0(e,t){le(t,!1);const n=je(),i=()=>q(s,"$selectionRectMode",n),r=()=>q(c,"$nodeLookup",n),o=()=>q(l,"$nodes",n),a=Fe(),{selectionRectMode:s,nodes:l,nodeLookup:c}=a,u=eo();let f=F(null);function h(_){const m=o().filter(k=>k.selected);u("selectioncontextmenu",{nodes:m,event:_})}function g(_){const m=o().filter(k=>k.selected);u("selectionclick",{nodes:m,event:_})}G(()=>(i(),r(),o()),()=>{i()==="nodes"&&(D(f,rr(r(),{filter:_=>!!_.selected})),o())}),rt(),he();var p=Ne(),y=se(p);{var S=_=>{var m=U0(),k=ee(m);Mc(k,{width:"100%",height:"100%",x:0,y:0}),ut(m,(E,b)=>Yn==null?void 0:Yn(E,b),()=>({disabled:!1,store:a,onDrag:(E,b,N,C)=>{u("nodedrag",{event:E,targetNode:null,nodes:C})},onDragStart:(E,b,N,C)=>{u("nodedragstart",{event:E,targetNode:null,nodes:C})},onDragStop:(E,b,N,C)=>{u("nodedragstop",{event:E,targetNode:null,nodes:C})}})),_t(()=>Ae("contextmenu",m,h)),_t(()=>Ae("click",m,g)),_t(()=>Ae("keyup",m,()=>{})),ye(()=>Q(m,"style",`width: ${d(f).width??""}px; height: ${d(f).height??""}px; transform: translate(${d(f).x??""}px, ${d(f).y??""}px)`)),W(_,m)};Ce(y,_=>{i()==="nodes"&&d(f)&&Ut(d(f).x)&&Ut(d(f).y)&&_(S)})}W(e,p),ce()}function Oe(e,t){let{enabled:n=!0,trigger:i,type:r="keydown"}=t;function o(a){const s=Array.isArray(i)?i:[i],l={alt:a.altKey,ctrl:a.ctrlKey,shift:a.shiftKey,meta:a.metaKey};for(const c of s){const u={modifier:[],preventDefault:!1,enabled:!0,...c},{modifier:f,key:h,callback:g,preventDefault:p,enabled:y}=u;if(y){if(f.length&&!(Array.isArray(f)?f:[f]).map(m=>typeof m=="string"?[m]:m).some(m=>m.every(k=>l[k])))continue;if(a.key===h){p&&a.preventDefault();const S={node:e,trigger:u,originalEvent:a};e.dispatchEvent(new CustomEvent("shortcut",{detail:S})),g==null||g(S)}}}}return n&&e.addEventListener(r,o),{update:a=>{const{enabled:s=!0,type:l="keydown"}=a;n&&(!s||r!==l)?e.removeEventListener(r,o):!n&&s&&e.addEventListener(l,o),n=s,r=l,i=a.trigger},destroy:()=>{e.removeEventListener(r,o)}}}function j0(e,t){le(t,!1);let n=v(t,"selectionKey",8,"Shift"),i=v(t,"multiSelectionKey",24,()=>Vr()?"Meta":"Control"),r=v(t,"deleteKey",8,"Backspace"),o=v(t,"panActivationKey",8," "),a=v(t,"zoomActivationKey",24,()=>Vr()?"Meta":"Control");const{selectionKeyPressed:s,multiselectionKeyPressed:l,deleteKeyPressed:c,panActivationKeyPressed:u,zoomActivationKeyPressed:f,selectionRect:h}=Fe();function g(m){return m!==null&&typeof m=="object"}function p(m){return g(m)?m.modifier||[]:[]}function y(m){return m==null?"":g(m)?m.key:m}function S(m,k){return(Array.isArray(m)?m:[m]).map(b=>{const N=y(b);return{key:N,modifier:p(b),enabled:N!==null,callback:k}})}function _(){h.set(null),s.set(!1),l.set(!1),c.set(!1),u.set(!1),f.set(!1)}he(),Ae("blur",ct,_),Ae("contextmenu",ct,_),ut(ct,(m,k)=>Oe==null?void 0:Oe(m,k),()=>({trigger:S(n(),()=>s.set(!0)),type:"keydown"})),ut(ct,(m,k)=>Oe==null?void 0:Oe(m,k),()=>({trigger:S(n(),()=>s.set(!1)),type:"keyup"})),ut(ct,(m,k)=>Oe==null?void 0:Oe(m,k),()=>({trigger:S(i(),()=>l.set(!0)),type:"keydown"})),ut(ct,(m,k)=>Oe==null?void 0:Oe(m,k),()=>({trigger:S(i(),()=>l.set(!1)),type:"keyup"})),ut(ct,(m,k)=>Oe==null?void 0:Oe(m,k),()=>({trigger:S(r(),m=>{!(m.originalEvent.ctrlKey||m.originalEvent.metaKey||m.originalEvent.shiftKey)&&!cv(m.originalEvent)&&c.set(!0)}),type:"keydown"})),ut(ct,(m,k)=>Oe==null?void 0:Oe(m,k),()=>({trigger:S(r(),()=>c.set(!1)),type:"keyup"})),ut(ct,(m,k)=>Oe==null?void 0:Oe(m,k),()=>({trigger:S(o(),()=>u.set(!0)),type:"keydown"})),ut(ct,(m,k)=>Oe==null?void 0:Oe(m,k),()=>({trigger:S(o(),()=>u.set(!1)),type:"keyup"})),ut(ct,(m,k)=>Oe==null?void 0:Oe(m,k),()=>({trigger:S(a(),()=>f.set(!0)),type:"keydown"})),ut(ct,(m,k)=>Oe==null?void 0:Oe(m,k),()=>({trigger:S(a(),()=>f.set(!1)),type:"keyup"})),ce()}var Q0=Je('<path fill="none" class="svelte-flow__connection-path"></path>'),em=Je('<svg class="svelte-flow__connectionline"><g><!><!></g></svg>');function tm(e,t){le(t,!1);const n=je(),i=()=>q(h,"$connection",n),r=()=>q(g,"$connectionLineType",n),o=()=>q(u,"$width",n),a=()=>q(f,"$height",n);let s=v(t,"containerStyle",8,""),l=v(t,"style",8,""),c=v(t,"isCustomComponent",8,!1);const{width:u,height:f,connection:h,connectionLineType:g}=Fe();let p=F(null);G(()=>(i(),Y(c()),r(),d(p),Jo),()=>{if(i().inProgress&&!c()){const{from:m,to:k,fromPosition:E,toPosition:b}=i(),N={sourceX:m.x,sourceY:m.y,sourcePosition:E,targetX:k.x,targetY:k.y,targetPosition:b};switch(r()){case Xn.Bezier:(C=>D(p,C[0]))(fc(N));break;case Xn.Step:(C=>D(p,C[0]))(Xr({...N,borderRadius:0}));break;case Xn.SmoothStep:(C=>D(p,C[0]))(Xr(N));break;default:(C=>D(p,C[0]))(Jo(N))}}}),rt(),he();var y=Ne(),S=se(y);{var _=m=>{var k=em(),E=ee(k);const b=oe(()=>Ht(at(["svelte-flow__connection",ev(i().isValid)])));var N=ee(E);Ie(N,t,"connectionLine",{});var C=te(N);{var M=P=>{var T=Q0();ye(()=>{Q(T,"d",d(p)),Q(T,"style",l())}),W(P,T)};Ce(C,P=>{c()||P(M)})}ye(()=>{Q(k,"width",o()),Q(k,"height",a()),Q(k,"style",s()),In(E,d(b),"")}),W(m,k)};Ce(S,m=>{i().inProgress&&m(_)})}W(e,y),ce()}var nm=ae("<div><!></div>");function As(e,t){const n=me(t,["children","$$slots","$$events","$$legacy"]),i=me(n,["position","style","class"]);le(t,!1);const r=je(),o=()=>q(u,"$selectionRectMode",r),a=F();let s=v(t,"position",8,"top-right"),l=v(t,"style",8,void 0),c=v(t,"class",8,void 0);const{selectionRectMode:u}=Fe();G(()=>Y(s()),()=>{D(a,`${s()}`.split("-"))}),rt(),he();var f=nm();let h;var g=ee(f);Ie(g,t,"default",{}),ye(()=>{h=xi(f,h,{class:at(["svelte-flow__panel",c(),...d(a)]),style:l(),...i}),We(f,"pointer-events",o()?"none":"")}),W(e,f),ce()}var im=ae('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');function rm(e,t){le(t,!1);let n=v(t,"proOptions",8,void 0),i=v(t,"position",8,"bottom-right");he();var r=Ne(),o=se(r);{var a=s=>{As(s,{get position(){return i()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(l,c)=>{var u=im();W(l,u)},$$slots:{default:!0}})};Ce(o,s=>{var l;(l=n())!=null&&l.hideAttribution||s(a)})}W(e,r),ce()}function Ha(e,{nodeTypes:t,edgeTypes:n,minZoom:i,maxZoom:r,translateExtent:o,paneClickDistance:a}){t!==void 0&&e.setNodeTypes(t),n!==void 0&&e.setEdgeTypes(n),i!==void 0&&e.setMinZoom(i),r!==void 0&&e.setMaxZoom(r),o!==void 0&&e.setTranslateExtent(o),a!==void 0&&e.setPaneClickDistance(a)}const om=e=>Object.keys(e);function Da(e,t){om(t).forEach(n=>{const i=t[n];i!==void 0&&e[n].set(i)})}function sm(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function am(e="light"){return kt("light",n=>{if(e!=="system"){n(e);return}const i=sm(),r=()=>n(i!=null&&i.matches?"dark":"light");return n(i!=null&&i.matches?"dark":"light"),i==null||i.addEventListener("change",r),()=>{i==null||i.removeEventListener("change",r)}})}var lm=ae('<!> <!> <div class="svelte-flow__edgelabel-renderer"></div> <div class="svelte-flow__viewport-portal"></div> <!> <!>',1),cm=ae("<!> <!>",1),um=ae("<div><!> <!> <!> <!></div>");function dm(e,t){const n=ud(t),i=me(t,["children","$$slots","$$events","$$legacy"]),r=me(i,["id","nodes","edges","fitView","fitViewOptions","minZoom","maxZoom","initialViewport","viewport","nodeTypes","edgeTypes","selectionKey","selectionMode","panActivationKey","multiSelectionKey","zoomActivationKey","nodesDraggable","nodesConnectable","nodeDragThreshold","elementsSelectable","snapGrid","deleteKey","connectionRadius","connectionLineType","connectionMode","connectionLineStyle","connectionLineContainerStyle","onMoveStart","onMove","onMoveEnd","isValidConnection","translateExtent","nodeExtent","onlyRenderVisibleElements","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","autoPanOnConnect","autoPanOnNodeDrag","onerror","ondelete","onedgecreate","attributionPosition","proOptions","defaultEdgeOptions","width","height","colorMode","onconnect","onconnectstart","onconnectend","onbeforedelete","oninit","nodeOrigin","paneClickDistance","nodeClickDistance","defaultMarkerColor","style","class"]);le(t,!1);const o=je(),a=()=>q(m(),"$viewport",o),s=()=>q(oi,"$initialized",o),l=()=>q(d(c),"$colorModeClass",o),c=F();let u=v(t,"id",8,"1"),f=v(t,"nodes",8),h=v(t,"edges",8),g=v(t,"fitView",8,void 0),p=v(t,"fitViewOptions",8,void 0),y=v(t,"minZoom",8,void 0),S=v(t,"maxZoom",8,void 0),_=v(t,"initialViewport",8,void 0),m=v(t,"viewport",8,void 0),k=v(t,"nodeTypes",8,void 0),E=v(t,"edgeTypes",8,void 0),b=v(t,"selectionKey",8,void 0),N=v(t,"selectionMode",8,void 0),C=v(t,"panActivationKey",8,void 0),M=v(t,"multiSelectionKey",8,void 0),P=v(t,"zoomActivationKey",8,void 0),T=v(t,"nodesDraggable",8,void 0),R=v(t,"nodesConnectable",8,void 0),L=v(t,"nodeDragThreshold",8,void 0),H=v(t,"elementsSelectable",8,void 0),w=v(t,"snapGrid",8,void 0),O=v(t,"deleteKey",8,void 0),x=v(t,"connectionRadius",8,void 0),z=v(t,"connectionLineType",8,void 0),I=v(t,"connectionMode",24,()=>Pn.Strict),A=v(t,"connectionLineStyle",8,""),X=v(t,"connectionLineContainerStyle",8,""),K=v(t,"onMoveStart",8,void 0),$=v(t,"onMove",8,void 0),ne=v(t,"onMoveEnd",8,void 0),B=v(t,"isValidConnection",8,void 0),J=v(t,"translateExtent",8,void 0),ie=v(t,"nodeExtent",8,void 0),ue=v(t,"onlyRenderVisibleElements",8,void 0),de=v(t,"panOnScrollMode",24,()=>vn.Free),Z=v(t,"preventScrolling",8,!0),U=v(t,"zoomOnScroll",8,!0),j=v(t,"zoomOnDoubleClick",8,!0),ge=v(t,"zoomOnPinch",8,!0),xe=v(t,"panOnScroll",8,!1),pe=v(t,"panOnDrag",8,!0),Ee=v(t,"selectionOnDrag",8,void 0),Me=v(t,"autoPanOnConnect",8,!0),Be=v(t,"autoPanOnNodeDrag",8,!0),Le=v(t,"onerror",8,void 0),qe=v(t,"ondelete",8,void 0),Pe=v(t,"onedgecreate",8,void 0),we=v(t,"attributionPosition",8,void 0),Ge=v(t,"proOptions",8,void 0),mt=v(t,"defaultEdgeOptions",8,void 0),Te=v(t,"width",8,void 0),Qe=v(t,"height",8,void 0),Ke=v(t,"colorMode",8,"light"),He=v(t,"onconnect",8,void 0),bn=v(t,"onconnectstart",8,void 0),Tn=v(t,"onconnectend",8,void 0),Ue=v(t,"onbeforedelete",8,void 0),et=v(t,"oninit",8,void 0),ze=v(t,"nodeOrigin",8,void 0),nt=v(t,"paneClickDistance",8,0),bt=v(t,"nodeClickDistance",8,0),ri=v(t,"defaultMarkerColor",8,"#b1b1b7"),uo=v(t,"style",8,void 0),St=v(t,"class",8,void 0),Ct=F(),Rt=F(),lt=F();const fo=a()||_(),it=Ku(zs)?Fe():S0({nodes:V(f()),edges:V(h()),width:Te(),height:Qe(),fitView:g(),nodeOrigin:ze(),nodeExtent:ie()});ii(()=>(it.width.set(d(Rt)),it.height.set(d(lt)),it.domNode.set(d(Ct)),it.syncNodeStores(f()),it.syncEdgeStores(h()),it.syncViewport(m()),g()!==void 0&&it.fitViewOnInit.set(g()),p()&&it.fitViewOptions.set(p()),Ha(it,{nodeTypes:k(),edgeTypes:E(),minZoom:y(),maxZoom:S(),translateExtent:J(),paneClickDistance:nt()}),()=>{it.reset()}));const{initialized:oi}=it;let si=F(!1);G(()=>(d(Rt),d(lt)),()=>{d(Rt)!==void 0&&d(lt)!==void 0&&(it.width.set(d(Rt)),it.height.set(d(lt)))}),G(()=>(d(si),s(),Y(et())),()=>{var ot;!d(si)&&s()&&((ot=et())==null||ot(),D(si,!0))}),G(()=>(Y(u()),Y(z()),Y(x()),Y(N()),Y(w()),Y(ri()),Y(T()),Y(R()),Y(H()),Y(ue()),Y(B()),Y(Me()),Y(Be()),Y(Le()),Y(qe()),Y(Pe()),Y(I()),Y(L()),Y(He()),Y(bn()),Y(Tn()),Y(Ue()),Y(ze()),Da),()=>{const ot={flowId:u(),connectionLineType:z(),connectionRadius:x(),selectionMode:N(),snapGrid:w(),defaultMarkerColor:ri(),nodesDraggable:T(),nodesConnectable:R(),elementsSelectable:H(),onlyRenderVisibleElements:ue(),isValidConnection:B(),autoPanOnConnect:Me(),autoPanOnNodeDrag:Be(),onerror:Le(),ondelete:qe(),onedgecreate:Pe(),connectionMode:I(),nodeDragThreshold:L(),onconnect:He(),onconnectstart:bn(),onconnectend:Tn(),onbeforedelete:Ue(),nodeOrigin:ze()};Da(it,ot)}),G(()=>(Y(k()),Y(E()),Y(y()),Y(S()),Y(J()),Y(nt())),()=>{Ha(it,{nodeTypes:k(),edgeTypes:E(),minZoom:y(),maxZoom:S(),translateExtent:J(),paneClickDistance:nt()})}),G(()=>Y(Ke()),()=>{md(D(c,am(Ke())),"$colorModeClass",o)}),rt(),he();var Lt=um();let sr;var ar=ee(Lt);j0(ar,{get selectionKey(){return b()},get deleteKey(){return O()},get panActivationKey(){return C()},get multiSelectionKey(){return M()},get zoomActivationKey(){return P()}});var Ts=te(ar,2),Lc=oe(()=>de()===void 0?vn.Free:de()),Vc=oe(()=>Z()===void 0?!0:Z()),Xc=oe(()=>U()===void 0?!0:U()),Yc=oe(()=>j()===void 0?!0:j()),Wc=oe(()=>ge()===void 0?!0:ge()),Bc=oe(()=>xe()===void 0?!1:xe()),Kc=oe(()=>pe()===void 0?!0:pe()),Fc=oe(()=>nt()===void 0?0:nt());N0(Ts,{initialViewport:fo,get onMoveStart(){return K()},get onMove(){return $()},get onMoveEnd(){return ne()},get panOnScrollMode(){return d(Lc)},get preventScrolling(){return d(Vc)},get zoomOnScroll(){return d(Xc)},get zoomOnDoubleClick(){return d(Yc)},get zoomOnPinch(){return d(Wc)},get panOnScroll(){return d(Bc)},get panOnDrag(){return d(Kc)},get paneClickDistance(){return d(Fc)},children:(ot,np)=>{var Gc=oe(()=>pe()===void 0?!0:pe());P0(ot,{get panOnDrag(){return d(Gc)},get selectionOnDrag(){return Ee()},$$events:{paneclick(ai){ke.call(this,t,ai)},panecontextmenu(ai){ke.call(this,t,ai)}},children:(ai,ip)=>{var Hs=cm(),Ds=se(Hs);A0(Ds,{children:($c,rp)=>{var Rs=lm(),Ls=se(Rs);G0(Ls,{get defaultEdgeOptions(){return mt()},$$events:{edgeclick(be){ke.call(this,t,be)},edgecontextmenu(be){ke.call(this,t,be)},edgemouseenter(be){ke.call(this,t,be)},edgemouseleave(be){ke.call(this,t,be)}}});var Vs=te(Ls,2);tm(Vs,{get containerStyle(){return X()},get style(){return A()},isCustomComponent:n.connectionLine,$$slots:{connectionLine:(be,op)=>{var Ys=Ne(),Jc=se(Ys);Ie(Jc,t,"connectionLine",{}),W(be,Ys)}}});var Xs=te(Vs,6);D0(Xs,{get nodeClickDistance(){return bt()},$$events:{nodeclick(be){ke.call(this,t,be)},nodemouseenter(be){ke.call(this,t,be)},nodemousemove(be){ke.call(this,t,be)},nodemouseleave(be){ke.call(this,t,be)},nodedragstart(be){ke.call(this,t,be)},nodedrag(be){ke.call(this,t,be)},nodedragstop(be){ke.call(this,t,be)},nodecontextmenu(be){ke.call(this,t,be)}}});var Uc=te(Xs,2);J0(Uc,{$$events:{selectionclick(be){ke.call(this,t,be)},selectioncontextmenu(be){ke.call(this,t,be)},nodedragstart(be){ke.call(this,t,be)},nodedrag(be){ke.call(this,t,be)},nodedragstop(be){ke.call(this,t,be)}}}),W($c,Rs)},$$slots:{default:!0}});var Zc=te(Ds,2);$0(Zc,{}),W(ai,Hs)},$$slots:{default:!0}})},$$slots:{default:!0}});var Os=te(Ts,2);rm(Os,{get proOptions(){return Ge()},get position(){return we()}});var qc=te(Os,2);Ie(qc,t,"default",{}),Qi(Lt,ot=>D(Ct,ot),()=>d(Ct)),ye(()=>sr=xi(Lt,sr,{style:uo(),class:at(["svelte-flow",St(),l()]),"data-testid":"svelte-flow__wrapper",...r,role:"application"},"svelte-12wlba6")),Mr(Lt,"clientWidth",ot=>D(Rt,ot)),Mr(Lt,"clientHeight",ot=>D(lt,ot)),Ae("dragover",Lt,function(ot){ke.call(this,t,ot)}),Ae("drop",Lt,function(ot){ke.call(this,t,ot)}),W(e,Lt),ce()}var fm=ae("<button><!></button>");function Jt(e,t){const n=me(t,["children","$$slots","$$events","$$legacy"]),i=me(n,["class"]);le(t,!1);let r=v(t,"class",8,void 0),o,a,s,l,c;he();var u=fm();let f;var h=ee(u);Ie(h,t,"default",{class:"button-svg"}),ye(()=>{f=xi(u,f,{type:"button",class:at(["svelte-flow__controls-button",r()]),...i}),We(u,"--xy-controls-button-background-color-props",o),We(u,"--xy-controls-button-background-color-hover-props",a),We(u,"--xy-controls-button-color-props",s),We(u,"--xy-controls-button-color-hover-props",l),We(u,"--xy-controls-button-border-color-props",c)}),Ae("click",u,function(g){ke.call(this,t,g)}),W(e,u),ce()}var hm=Je('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"></path></svg>');function gm(e){var t=hm();W(e,t)}var vm=Je('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 5"><path d="M0 0h32v4.2H0z"></path></svg>');function mm(e){var t=vm();W(e,t)}var ym=Je('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 30"><path d="M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"></path></svg>');function pm(e){var t=ym();W(e,t)}var _m=Je('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"></path></svg>');function wm(e){var t=_m();W(e,t)}var xm=Je('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"></path></svg>');function bm(e){var t=xm();W(e,t)}var km=ae("<!> <!>",1),Em=ae("<!> <!> <!> <!> <!> <!>",1);function Pc(e,t){le(t,!1);const n=je(),i=()=>q(z,"$nodesDraggable",n),r=()=>q(I,"$nodesConnectable",n),o=()=>q(A,"$elementsSelectable",n),a=()=>q(w,"$viewport",n),s=()=>q(O,"$minZoom",n),l=()=>q(x,"$maxZoom",n),c=F(),u=F(),f=F(),h=F();let g=v(t,"position",8,"bottom-left"),p=v(t,"showZoom",8,!0),y=v(t,"showFitView",8,!0),S=v(t,"showLock",8,!0),_=v(t,"buttonBgColor",8,void 0),m=v(t,"buttonBgColorHover",8,void 0),k=v(t,"buttonColor",8,void 0),E=v(t,"buttonColorHover",8,void 0),b=v(t,"buttonBorderColor",8,void 0),N=v(t,"ariaLabel",8,void 0),C=v(t,"style",8,void 0),M=v(t,"orientation",8,"vertical"),P=v(t,"fitViewOptions",8,void 0),T=v(t,"class",8,"");const{zoomIn:R,zoomOut:L,fitView:H,viewport:w,minZoom:O,maxZoom:x,nodesDraggable:z,nodesConnectable:I,elementsSelectable:A}=Fe(),X={bgColor:_(),bgColorHover:m(),color:k(),colorHover:E(),borderColor:b()},K=()=>{R()},$=()=>{L()},ne=()=>{H(P())},B=()=>{D(c,!d(c)),z.set(d(c)),I.set(d(c)),A.set(d(c))};G(()=>(i(),r(),o()),()=>{D(c,i()||r()||o())}),G(()=>(a(),s()),()=>{D(u,a().zoom<=s())}),G(()=>(a(),l()),()=>{D(f,a().zoom>=l())}),G(()=>Y(M()),()=>{D(h,M()==="horizontal"?"horizontal":"vertical")}),rt(),he();var J=oe(()=>at(["svelte-flow__controls",d(h),T()])),ie=oe(()=>N()??"Svelte Flow controls");As(e,{get class(){return d(J)},get position(){return g()},"data-testid":"svelte-flow__controls",get"aria-label"(){return d(ie)},get style(){return C()},children:(ue,de)=>{var Z=Em(),U=se(Z);Ie(U,t,"before",{});var j=te(U,2);{var ge=qe=>{var Pe=km(),we=se(Pe);Jt(we,$e({class:"svelte-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",get disabled(){return d(f)}},X,{$$events:{click:K},children:(mt,Te)=>{gm(mt)},$$slots:{default:!0}}));var Ge=te(we,2);Jt(Ge,$e({class:"svelte-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",get disabled(){return d(u)}},X,{$$events:{click:$},children:(mt,Te)=>{mm(mt)},$$slots:{default:!0}})),W(qe,Pe)};Ce(j,qe=>{p()&&qe(ge)})}var xe=te(j,2);{var pe=qe=>{Jt(qe,$e({class:"svelte-flow__controls-fitview",title:"fit view","aria-label":"fit view"},X,{$$events:{click:ne},children:(Pe,we)=>{pm(Pe)},$$slots:{default:!0}}))};Ce(xe,qe=>{y()&&qe(pe)})}var Ee=te(xe,2);{var Me=qe=>{Jt(qe,$e({class:"svelte-flow__controls-interactive",title:"toggle interactivity","aria-label":"toggle interactivity"},X,{$$events:{click:B},children:(Pe,we)=>{var Ge=Ne(),mt=se(Ge);{var Te=Ke=>{bm(Ke)},Qe=Ke=>{wm(Ke)};Ce(mt,Ke=>{d(c)?Ke(Te):Ke(Qe,!1)})}W(Pe,Ge)},$$slots:{default:!0}}))};Ce(Ee,qe=>{S()&&qe(Me)})}var Be=te(Ee,2);Ie(Be,t,"default",{});var Le=te(Be,2);Ie(Le,t,"after",{}),W(ue,Z)},$$slots:{default:!0}}),ce()}var tn;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(tn||(tn={}));var Sm=Je("<circle></circle>");function Cm(e,t){le(t,!1);let n=v(t,"radius",8,5),i=v(t,"class",8,"");he();var r=Sm();const o=oe(()=>Ht(at(["svelte-flow__background-pattern","dots",i()])));ye(()=>{Q(r,"cx",n()),Q(r,"cy",n()),Q(r,"r",n()),In(r,d(o),"")}),W(e,r),ce()}var Nm=Je("<path></path>");function Mm(e,t){le(t,!1);let n=v(t,"lineWidth",8,1),i=v(t,"dimensions",8),r=v(t,"variant",8,void 0),o=v(t,"class",8,"");he();var a=Nm();const s=oe(()=>Ht(at(["svelte-flow__background-pattern",r(),o()])));ye(()=>{Q(a,"stroke-width",n()),Q(a,"d",`M${i()[0]/2} 0 V${i()[1]} M0 ${i()[1]/2} H${i()[0]}`),In(a,d(s),"")}),W(e,a),ce()}const Pm={[tn.Dots]:1,[tn.Lines]:1,[tn.Cross]:6};var zm=Je('<svg data-testid="svelte-flow__background"><pattern patternUnits="userSpaceOnUse"><!></pattern><rect x="0" y="0" width="100%" height="100%"></rect></svg>');function Am(e,t){le(t,!1);const n=je(),i=()=>q(E,"$flowId",n),r=()=>q(k,"$viewport",n),o=F(),a=F(),s=F(),l=F(),c=F();let u=v(t,"id",8,void 0),f=v(t,"variant",24,()=>tn.Dots),h=v(t,"gap",8,20),g=v(t,"size",8,1),p=v(t,"lineWidth",8,1),y=v(t,"bgColor",8,void 0),S=v(t,"patternColor",8,void 0),_=v(t,"patternClass",8,void 0),m=v(t,"class",8,"");const{viewport:k,flowId:E}=Fe(),b=g()||Pm[f()],N=f()===tn.Dots,C=f()===tn.Cross,M=Array.isArray(h())?h():[h(),h()];G(()=>(i(),Y(u())),()=>{D(o,`background-pattern-${i()}-${u()?u():""}`)}),G(()=>r(),()=>{D(a,[M[0]*r().zoom||1,M[1]*r().zoom||1])}),G(()=>r(),()=>{D(s,b*r().zoom)}),G(()=>(d(s),d(a)),()=>{D(l,C?[d(s),d(s)]:d(a))}),G(()=>(d(s),d(l)),()=>{D(c,N?[d(s)/2,d(s)/2]:[d(l)[0]/2,d(l)[1]/2])}),rt(),he();var P=zm();const T=oe(()=>Ht(at(["svelte-flow__background",m()])));var R=ee(P),L=ee(R);{var H=x=>{var z=oe(()=>d(s)/2);Cm(x,{get radius(){return d(z)},get class(){return _()}})},w=x=>{Mm(x,{get dimensions(){return d(l)},get variant(){return f()},get lineWidth(){return p()},get class(){return _()}})};Ce(L,x=>{N?x(H):x(w,!1)})}var O=te(R);ye(()=>{In(P,d(T),"svelte-1r7pe8d"),We(P,"--xy-background-color-props",y()),We(P,"--xy-background-pattern-color-props",S()),Q(R,"id",d(o)),Q(R,"x",r().x%d(a)[0]),Q(R,"y",r().y%d(a)[1]),Q(R,"width",d(a)[0]),Q(R,"height",d(a)[1]),Q(R,"patternTransform",`translate(-${d(c)[0]},-${d(c)[1]})`),Q(O,"fill",`url(#${d(o)})`)}),W(e,P),ce()}var Im=Je("<rect></rect>");function Tm(e,t){le(t,!1);let n=v(t,"x",8),i=v(t,"y",8),r=v(t,"width",8,0),o=v(t,"height",8,0),a=v(t,"borderRadius",8,5),s=v(t,"color",8,void 0),l=v(t,"shapeRendering",8),c=v(t,"strokeColor",8,void 0),u=v(t,"strokeWidth",8,2),f=v(t,"selected",8,!1),h=v(t,"class",8,"");he();var g=Im();const p=oe(()=>Ht(at(["svelte-flow__minimap-node",h()])));ye(()=>{In(g,d(p),""),Q(g,"x",n()),Q(g,"y",i()),Q(g,"rx",a()),Q(g,"ry",a()),Q(g,"width",r()),Q(g,"height",o()),Q(g,"style",`${s()?`fill: ${s()};`:""}${c()?`stroke: ${c()};`:""}${u()?`stroke-width: ${u()};`:""}`),Q(g,"shape-rendering",l()),Ye(g,"selected",f())}),W(e,g),ce()}function Co(e,t){const n=Dv({domNode:e,panZoom:t.panZoom,getTransform:()=>{const r=V(t.viewport);return[r.x,r.y,r.zoom]},getViewScale:t.getViewScale});function i(r){n.update({translateExtent:r.translateExtent,width:r.width,height:r.height,inversePan:r.inversePan,zoomStep:r.zoomStep,pannable:r.pannable,zoomable:r.zoomable})}return{update:i,destroy(){n.destroy()}}}const No=e=>e instanceof Function?e:()=>e;var Om=ae("<title> </title>"),Hm=Je('<svg class="svelte-flow__minimap-svg" role="img"><!><!><path class="svelte-flow__minimap-mask" fill-rule="evenodd" pointer-events="none"></path></svg>');function Dm(e,t){le(t,!1);const n=je(),i=()=>q(pe,"$flowId",n),r=()=>q(j,"$viewport",n),o=()=>q(ge,"$containerWidth",n),a=()=>q(xe,"$containerHeight",n),s=()=>q(U,"$nodeLookup",n),l=()=>q(Z,"$nodes",n),c=()=>q(Ee,"$panZoom",n),u=()=>q(Me,"$translateExtent",n),f=F(),h=F(),g=F(),p=F(),y=F(),S=F(),_=F(),m=F(),k=F(),E=F(),b=F(),N=F(),C=F();let M=v(t,"position",8,"bottom-right"),P=v(t,"ariaLabel",8,"Mini map"),T=v(t,"nodeStrokeColor",8,"transparent"),R=v(t,"nodeColor",8,void 0),L=v(t,"nodeClass",8,""),H=v(t,"nodeBorderRadius",8,5),w=v(t,"nodeStrokeWidth",8,2),O=v(t,"bgColor",8,void 0),x=v(t,"maskColor",8,void 0),z=v(t,"maskStrokeColor",8,void 0),I=v(t,"maskStrokeWidth",8,void 0),A=v(t,"width",8,void 0),X=v(t,"height",8,void 0),K=v(t,"pannable",8,!0),$=v(t,"zoomable",8,!0),ne=v(t,"inversePan",8,void 0),B=v(t,"zoomStep",8,void 0),J=v(t,"style",8,""),ie=v(t,"class",8,"");const ue=200,de=150,{nodes:Z,nodeLookup:U,viewport:j,width:ge,height:xe,flowId:pe,panZoom:Ee,translateExtent:Me}=Fe(),Be=R()===void 0?void 0:No(R()),Le=No(T()),qe=No(L()),Pe=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",we=`svelte-flow__minimap-desc-${i()}`;let Ge=F(d(f));const mt=()=>d(S);G(()=>(r(),o(),a()),()=>{D(f,{x:-r().x/r().zoom,y:-r().y/r().zoom,width:o()/r().zoom,height:a()/r().zoom})}),G(()=>(s(),d(f),l()),()=>{D(Ge,s().size>0?lc(rr(s()),d(f)):d(f)),l()}),G(()=>Y(A()),()=>{D(h,A()??ue)}),G(()=>Y(X()),()=>{D(g,X()??de)}),G(()=>(d(Ge),d(h)),()=>{D(p,d(Ge).width/d(h))}),G(()=>(d(Ge),d(g)),()=>{D(y,d(Ge).height/d(g))}),G(()=>(d(p),d(y)),()=>{D(S,Math.max(d(p),d(y)))}),G(()=>(d(S),d(h)),()=>{D(_,d(S)*d(h))}),G(()=>(d(S),d(g)),()=>{D(m,d(S)*d(g))}),G(()=>d(S),()=>{D(k,5*d(S))}),G(()=>(d(Ge),d(_),d(k)),()=>{D(E,d(Ge).x-(d(_)-d(Ge).width)/2-d(k))}),G(()=>(d(Ge),d(m),d(k)),()=>{D(b,d(Ge).y-(d(m)-d(Ge).height)/2-d(k))}),G(()=>(d(_),d(k)),()=>{D(N,d(_)+d(k)*2)}),G(()=>(d(m),d(k)),()=>{D(C,d(m)+d(k)*2)}),rt(),he();var Te=oe(()=>J()+(O()?`;--xy-minimap-background-color-props:${O()}`:"")),Qe=oe(()=>at(["svelte-flow__minimap",ie()]));As(e,{get position(){return M()},get style(){return d(Te)},get class(){return d(Qe)},"data-testid":"svelte-flow__minimap",children:(Ke,He)=>{var bn=Ne(),Tn=se(bn);{var Ue=et=>{var ze=Hm();Q(ze,"aria-labelledby",we);var nt=ee(ze);{var bt=St=>{var Ct=Om();Q(Ct,"id",we);var Rt=ee(Ct);ye(()=>qt(Rt,P())),W(St,Ct)};Ce(nt,St=>{P()&&St(bt)})}var ri=te(nt);Pt(ri,1,l,St=>St.id,(St,Ct)=>{var Rt=Ne();const lt=oe(()=>s().get(d(Ct).id));var fo=se(Rt);{var it=oi=>{const si=oe(()=>xn(d(lt)));var Lt=oe(()=>Be==null?void 0:Be(d(lt))),sr=oe(()=>Le(d(lt))),ar=oe(()=>qe(d(lt)));Tm(oi,$e({get x(){return d(lt).internals.positionAbsolute.x},get y(){return d(lt).internals.positionAbsolute.y}},()=>d(si),{get selected(){return d(lt).selected},get color(){return d(Lt)},get borderRadius(){return H()},get strokeColor(){return d(sr)},get strokeWidth(){return w()},shapeRendering:Pe,get class(){return d(ar)}}))};Ce(fo,oi=>{d(lt)&&uc(d(lt))&&oi(it)})}W(St,Rt)});var uo=te(ri);ut(ze,(St,Ct)=>Co==null?void 0:Co(St,Ct),()=>({panZoom:c(),viewport:j,getViewScale:mt,translateExtent:u(),width:o(),height:a(),inversePan:ne(),zoomStep:B(),pannable:K(),zoomable:$()})),ye(()=>{Q(ze,"width",d(h)),Q(ze,"height",d(g)),Q(ze,"viewBox",`${d(E)??""} ${d(b)??""} ${d(N)??""} ${d(C)??""}`),We(ze,"--xy-minimap-mask-background-color-props",x()),We(ze,"--xy-minimap-mask-stroke-color-props",z()),We(ze,"--xy-minimap-mask-stroke-width-props",I()?I()*d(S):void 0),Q(uo,"d",`M${d(E)-d(k)},${d(b)-d(k)}h${d(N)+d(k)*2}v${d(C)+d(k)*2}h${-d(N)-d(k)*2}z
      M${d(f).x??""},${d(f).y??""}h${d(f).width??""}v${d(f).height??""}h${-d(f).width}z`)}),W(et,ze)};Ce(Tn,et=>{c()&&et(Ue)})}W(Ke,bn)},$$slots:{default:!0}}),ce()}const Ra=e=>nv(e);function Rm(){const{zoomIn:e,zoomOut:t,fitView:n,onbeforedelete:i,snapGrid:r,viewport:o,width:a,height:s,minZoom:l,maxZoom:c,panZoom:u,nodes:f,edges:h,domNode:g,nodeLookup:p,nodeOrigin:y,edgeLookup:S,connectionLookup:_}=Fe(),m=b=>{var T,R;const N=V(p),C=Ra(b)?b:N.get(b.id),M=C.parentId?sv(C.position,C.measured,C.parentId,N,V(y)):C.position,P={...C,position:M,width:((T=C.measured)==null?void 0:T.width)??C.width,height:((R=C.measured)==null?void 0:R.height)??C.height};return Zn(P)},k=(b,N,C={replace:!1})=>{var T;const M=(T=V(p).get(b))==null?void 0:T.internals.userNode;if(!M)return;const P=typeof N=="function"?N(M):N;C.replace?f.update(R=>R.map(L=>L.id===b?Ra(P)?P:{...L,...P}:L)):(Object.assign(M,P),f.update(R=>R))},E=b=>V(p).get(b);return{zoomIn:e,zoomOut:t,getInternalNode:E,getNode:b=>{var N;return(N=E(b))==null?void 0:N.internals.userNode},getNodes:b=>b===void 0?V(f):La(V(p),b),getEdge:b=>V(S).get(b),getEdges:b=>b===void 0?V(h):La(V(S),b),setZoom:(b,N)=>{const C=V(u);return C?C.scaleTo(b,{duration:N==null?void 0:N.duration}):Promise.resolve(!1)},getZoom:()=>V(o).zoom,setViewport:async(b,N)=>{const C=V(o),M=V(u);return M?(await M.setViewport({x:b.x??C.x,y:b.y??C.y,zoom:b.zoom??C.zoom},{duration:N==null?void 0:N.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>V(o),setCenter:async(b,N,C)=>{const M=typeof(C==null?void 0:C.zoom)<"u"?C.zoom:V(c),P=V(u);return P?(await P.setViewport({x:V(a)/2-b*M,y:V(s)/2-N*M,zoom:M},{duration:C==null?void 0:C.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:n,fitBounds:async(b,N)=>{const C=V(u);if(!C)return Promise.resolve(!1);const M=Ss(b,V(a),V(s),V(l),V(c),(N==null?void 0:N.padding)??.1);return await C.setViewport(M,{duration:N==null?void 0:N.duration}),Promise.resolve(!0)},getIntersectingNodes:(b,N=!0,C)=>{const M=ba(b),P=M?b:m(b);return P?(C||V(f)).filter(T=>{const R=V(p).get(T.id);if(!R||!M&&T.id===b.id)return!1;const L=Zn(R),H=Mi(L,P);return N&&H>0||H>=P.width*P.height}):[]},isNodeIntersecting:(b,N,C=!0)=>{const P=ba(b)?b:m(b);if(!P)return!1;const T=Mi(P,N);return C&&T>0||T>=P.width*P.height},deleteElements:async({nodes:b=[],edges:N=[]})=>{const{nodes:C,edges:M}=await oc({nodesToRemove:b,edgesToRemove:N,nodes:V(f),edges:V(h),onBeforeDelete:V(i)});return C&&f.update(P=>P.filter(T=>!C.some(({id:R})=>R===T.id))),M&&h.update(P=>P.filter(T=>!M.some(({id:R})=>R===T.id))),{deletedNodes:C,deletedEdges:M}},screenToFlowPosition:(b,N={snapToGrid:!0})=>{const C=V(g);if(!C)return b;const M=N.snapToGrid?V(r):!1,{x:P,y:T,zoom:R}=V(o),{x:L,y:H}=C.getBoundingClientRect(),w={x:b.x-L,y:b.y-H};return or(w,[P,T,R],M!==null,M||[1,1])},flowToScreenPosition:b=>{const N=V(g);if(!N)return b;const{x:C,y:M,zoom:P}=V(o),{x:T,y:R}=N.getBoundingClientRect(),L=cc(b,[C,M,P]);return{x:L.x+T,y:L.y+R}},toObject:()=>({nodes:V(f).map(b=>({...b,position:{...b.position},data:{...b.data}})),edges:V(h).map(b=>({...b})),viewport:{...V(o)}}),updateNode:k,updateNodeData:(b,N,C)=>{var T;const M=(T=V(p).get(b))==null?void 0:T.internals.userNode;if(!M)return;const P=typeof N=="function"?N(M):N;M.data=C!=null&&C.replace?P:{...M.data,...P},f.update(R=>R)},getNodesBounds:b=>{const N=V(p),C=V(y);return iv(b,{nodeLookup:N,nodeOrigin:C})},getHandleConnections:({type:b,id:N,nodeId:C})=>{var M;return Array.from(((M=V(_).get(`${C}-${b}-${N??null}`))==null?void 0:M.values())??[])},viewport:o}}function La(e,t){var i;const n=[];for(const r of t){const o=e.get(r);if(o){const a="internals"in o?(i=o.internals)==null?void 0:i.userNode:o;n.push(a)}}return n}var Lm=ae("<div><!></div>");function Va(e,t){le(t,!1);const n=je(),i=()=>q(A,"$nodeLookup",n),r=()=>q(K,"$viewport",n),o=()=>q(X,"$snapGrid",n),a=()=>q(ne,"$nodeOrigin",n),s=()=>q(B,"$domNode",n),l=()=>q($,"$nodes",n),c=F(),u=F(),f=F(),h=F(),g=F(),p=F(),y=F(),S=F(),_=F(),m=F(),k=F();let E=v(t,"nodeId",8,void 0),b=v(t,"position",8,void 0),N=v(t,"variant",24,()=>un.Handle),C=v(t,"color",8,void 0),M=v(t,"minWidth",8,10),P=v(t,"minHeight",8,10),T=v(t,"maxWidth",24,()=>Number.MAX_VALUE),R=v(t,"maxHeight",24,()=>Number.MAX_VALUE),L=v(t,"keepAspectRatio",8,!1),H=v(t,"shouldResize",8,void 0),w=v(t,"onResizeStart",8,void 0),O=v(t,"onResize",8,void 0),x=v(t,"onResizeEnd",8,void 0),z=v(t,"style",8,""),I=v(t,"class",8,"");const{nodeLookup:A,snapGrid:X,viewport:K,nodes:$,nodeOrigin:ne,domNode:B}=Fe(),J=Kn("svelteflow__node_id");let ie=F(),ue=F(null);ii(()=>(d(ie)&&D(ue,Qv({domNode:d(ie),nodeId:d(g),getStoreItems:()=>({nodeLookup:i(),transform:[r().x,r().y,r().zoom],snapGrid:o()??void 0,snapToGrid:!!o(),nodeOrigin:a(),paneDomNode:s()}),onChange:(j,ge)=>{var pe,Ee;const xe=(pe=i().get(d(g)))==null?void 0:pe.internals.userNode;if(xe){j.x!==void 0&&j.y!==void 0&&(xe.position={x:j.x,y:j.y}),j.width!==void 0&&j.height!==void 0&&(xe.width=j.width,xe.height=j.height);for(const Me of ge){const Be=(Ee=i().get(Me.id))==null?void 0:Ee.internals.userNode;Be&&(Be.position=Me.position)}bi($,l())}}})),()=>{var j;(j=d(ue))==null||j.destroy()})),G(()=>Y(M()),()=>{D(c,M()??10)}),G(()=>Y(P()),()=>{D(u,P()??10)}),G(()=>Y(T()),()=>{D(f,T()??Number.MAX_VALUE)}),G(()=>Y(R()),()=>{D(h,R()??Number.MAX_VALUE)}),G(()=>Y(E()),()=>{D(g,typeof E()=="string"?E():J)}),G(()=>(Y(N()),un),()=>{D(p,N()===un.Line?"right":"bottom-right")}),G(()=>(Y(b()),d(p)),()=>{D(y,b()??d(p))}),G(()=>d(y),()=>{D(S,d(y).split("-"))}),G(()=>(Y(N()),un),()=>{D(_,N()===un.Line?"border-color":"background-color")}),G(()=>Y(z()),()=>{D(m,z()??"")}),G(()=>(Y(C()),d(m),d(_)),()=>{D(k,C()?`${d(m)} ${d(_)}: ${C()};`:d(m))}),G(()=>(d(ue),d(y),d(c),d(u),d(f),d(h),Y(L()),Y(w()),Y(O()),Y(x()),Y(H())),()=>{var j;(j=d(ue))==null||j.update({controlPosition:d(y),boundaries:{minWidth:d(c),minHeight:d(u),maxWidth:d(f),maxHeight:d(h)},keepAspectRatio:!!L(),onResizeStart:w(),onResize:O(),onResizeEnd:x(),shouldResize:H()})}),rt(),he();var de=Lm();const Z=oe(()=>Ht(at(["svelte-flow__resize-control","nodrag",...d(S),N(),I()])));var U=ee(de);Ie(U,t,"default",{}),Qi(de,j=>D(ie,j),()=>d(ie)),ye(()=>{vs(de,d(Z),""),Q(de,"style",d(k))}),W(e,de),ce()}var Vm=ae("<!> <!>",1);function zc(e,t){le(t,!1);let n=v(t,"nodeId",8,void 0),i=v(t,"isVisible",8,!0),r=v(t,"handleClass",8,void 0),o=v(t,"handleStyle",8,void 0),a=v(t,"lineClass",8,void 0),s=v(t,"lineStyle",8,void 0),l=v(t,"color",8,void 0),c=v(t,"minWidth",8,10),u=v(t,"minHeight",8,10),f=v(t,"maxWidth",24,()=>Number.MAX_VALUE),h=v(t,"maxHeight",24,()=>Number.MAX_VALUE),g=v(t,"keepAspectRatio",8,!1),p=v(t,"shouldResize",8,void 0),y=v(t,"onResizeStart",8,void 0),S=v(t,"onResize",8,void 0),_=v(t,"onResizeEnd",8,void 0),m=c()||10,k=u()||10,E=f()||Number.MAX_VALUE,b=h()||Number.MAX_VALUE;he();var N=Ne(),C=se(N);{var M=P=>{var T=Vm(),R=se(T);Pt(R,1,()=>qv,H=>H,(H,w)=>{Va(H,{get class(){return a()},get style(){return s()},get nodeId(){return n()},get position(){return d(w)},get variant(){return un.Line},get color(){return l()},minWidth:m,minHeight:k,maxWidth:E,maxHeight:b,get onResizeStart(){return y()},get keepAspectRatio(){return g()},get shouldResize(){return p()},get onResize(){return S()},get onResizeEnd(){return _()}})});var L=te(R,2);Pt(L,1,()=>Fv,H=>H,(H,w)=>{Va(H,{get class(){return r()},get style(){return o()},get nodeId(){return n()},get position(){return d(w)},get color(){return l()},minWidth:m,minHeight:k,maxWidth:E,maxHeight:b,get onResizeStart(){return y()},get keepAspectRatio(){return g()},get shouldResize(){return p()},get onResize(){return S()},get onResizeEnd(){return _()}})}),W(P,T)};Ce(C,P=>{i()&&P(M)})}W(e,N),ce()}const Xm=[];function Ym({type:e,nodeId:t,id:n=null}){const{edges:i,connectionLookup:r}=Fe(),o=Kn("svelteflow__node_id"),a=t??o;let s;return Cn([i,r],([,l],c)=>{const u=l.get(`${a}-${e}-${n||null}`);ic(u,s)||(s=u,c(Array.from((s==null?void 0:s.values())||[])))},Xm)}/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wm={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var Bm=Je("<svg><!><!></svg>");function ht(e,t){const n=me(t,["children","$$slots","$$events","$$legacy"]),i=me(n,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);le(t,!1);let r=v(t,"name",8,void 0),o=v(t,"color",8,"currentColor"),a=v(t,"size",8,24),s=v(t,"strokeWidth",8,2),l=v(t,"absoluteStrokeWidth",8,!1),c=v(t,"iconNode",24,()=>[]);const u=(...y)=>y.filter((S,_,m)=>!!S&&m.indexOf(S)===_).join(" ");he();var f=Bm();let h;var g=ee(f);Pt(g,1,c,yi,(y,S)=>{let _=()=>d(S)[0],m=()=>d(S)[1];var k=Ne(),E=se(k);dd(E,_,!0,(b,N)=>{let C;ye(()=>C=xi(b,C,{...m()},void 0,b.namespaceURI===Ua,b.nodeName.includes("-")))}),W(y,k)});var p=te(g);Ie(p,t,"default",{}),ye(()=>h=xi(f,h,{...Wm,...i,width:a(),height:a(),stroke:o(),"stroke-width":l()?Number(s())*24/Number(a()):s(),class:u("lucide-icon","lucide",r()?`lucide-${r()}`:"",n.class)},void 0,!0)),W(e,f),ce()}function Km(e,t){const n=me(t,["children","$$slots","$$events","$$legacy"]);ht(e,$e({name:"circle-help"},()=>n,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}],["path",{d:"M12 17h.01"}]],children:(r,o)=>{var a=Ne(),s=se(a);Ie(s,t,"default",{}),W(r,a)},$$slots:{default:!0}}))}function Fm(e,t){const n=me(t,["children","$$slots","$$events","$$legacy"]);ht(e,$e({name:"copy"},()=>n,{iconNode:[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"}]],children:(r,o)=>{var a=Ne(),s=se(a);Ie(s,t,"default",{}),W(r,a)},$$slots:{default:!0}}))}function qm(e,t){const n=me(t,["children","$$slots","$$events","$$legacy"]);ht(e,$e({name:"download"},()=>n,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"7 10 12 15 17 10"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3"}]],children:(r,o)=>{var a=Ne(),s=se(a);Ie(s,t,"default",{}),W(r,a)},$$slots:{default:!0}}))}function Gm(e,t){const n=me(t,["children","$$slots","$$events","$$legacy"]);ht(e,$e({name:"ellipsis-vertical"},()=>n,{iconNode:[["circle",{cx:"12",cy:"12",r:"1"}],["circle",{cx:"12",cy:"5",r:"1"}],["circle",{cx:"12",cy:"19",r:"1"}]],children:(r,o)=>{var a=Ne(),s=se(a);Ie(s,t,"default",{}),W(r,a)},$$slots:{default:!0}}))}function Ac(e,t){const n=me(t,["children","$$slots","$$events","$$legacy"]);ht(e,$e({name:"loader"},()=>n,{iconNode:[["path",{d:"M12 2v4"}],["path",{d:"m16.2 7.8 2.9-2.9"}],["path",{d:"M18 12h4"}],["path",{d:"m16.2 16.2 2.9 2.9"}],["path",{d:"M12 18v4"}],["path",{d:"m4.9 19.1 2.9-2.9"}],["path",{d:"M2 12h4"}],["path",{d:"m4.9 4.9 2.9 2.9"}]],children:(r,o)=>{var a=Ne(),s=se(a);Ie(s,t,"default",{}),W(r,a)},$$slots:{default:!0}}))}function Zm(e,t){const n=me(t,["children","$$slots","$$events","$$legacy"]);ht(e,$e({name:"map"},()=>n,{iconNode:[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z"}],["path",{d:"M15 5.764v15"}],["path",{d:"M9 3.236v15"}]],children:(r,o)=>{var a=Ne(),s=se(a);Ie(s,t,"default",{}),W(r,a)},$$slots:{default:!0}}))}function $m(e,t){const n=me(t,["children","$$slots","$$events","$$legacy"]);ht(e,$e({name:"messages-square"},()=>n,{iconNode:[["path",{d:"M14 9a2 2 0 0 1-2 2H6l-4 4V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2z"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v11l-4-4h-6a2 2 0 0 1-2-2v-1"}]],children:(r,o)=>{var a=Ne(),s=se(a);Ie(s,t,"default",{}),W(r,a)},$$slots:{default:!0}}))}function Um(e,t){const n=me(t,["children","$$slots","$$events","$$legacy"]);ht(e,$e({name:"play"},()=>n,{iconNode:[["polygon",{points:"6 3 20 12 6 21 6 3"}]],children:(r,o)=>{var a=Ne(),s=se(a);Ie(s,t,"default",{}),W(r,a)},$$slots:{default:!0}}))}function Jm(e,t){const n=me(t,["children","$$slots","$$events","$$legacy"]);ht(e,$e({name:"settings"},()=>n,{iconNode:[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}],["circle",{cx:"12",cy:"12",r:"3"}]],children:(r,o)=>{var a=Ne(),s=se(a);Ie(s,t,"default",{}),W(r,a)},$$slots:{default:!0}}))}function jm(e,t){const n=me(t,["children","$$slots","$$events","$$legacy"]);ht(e,$e({name:"square-arrow-out-up-right"},()=>n,{iconNode:[["path",{d:"M21 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h6"}],["path",{d:"m21 3-9 9"}],["path",{d:"M15 3h6v6"}]],children:(r,o)=>{var a=Ne(),s=se(a);Ie(s,t,"default",{}),W(r,a)},$$slots:{default:!0}}))}function Qm(e,t){const n=me(t,["children","$$slots","$$events","$$legacy"]);ht(e,$e({name:"square-play"},()=>n,{iconNode:[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}],["path",{d:"m9 8 6 4-6 4Z"}]],children:(r,o)=>{var a=Ne(),s=se(a);Ie(s,t,"default",{}),W(r,a)},$$slots:{default:!0}}))}function Xa(e,t){const n=me(t,["children","$$slots","$$events","$$legacy"]);ht(e,$e({name:"square-x"},()=>n,{iconNode:[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}],["path",{d:"m15 9-6 6"}],["path",{d:"m9 9 6 6"}]],children:(r,o)=>{var a=Ne(),s=se(a);Ie(s,t,"default",{}),W(r,a)},$$slots:{default:!0}}))}function ey(e,t){const n=me(t,["children","$$slots","$$events","$$legacy"]);ht(e,$e({name:"text-cursor-input"},()=>n,{iconNode:[["path",{d:"M5 4h1a3 3 0 0 1 3 3 3 3 0 0 1 3-3h1"}],["path",{d:"M13 20h-1a3 3 0 0 1-3-3 3 3 0 0 1-3 3H5"}],["path",{d:"M5 16H4a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h1"}],["path",{d:"M13 8h7a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-7"}],["path",{d:"M9 7v10"}]],children:(r,o)=>{var a=Ne(),s=se(a);Ie(s,t,"default",{}),W(r,a)},$$slots:{default:!0}}))}function ty(e,t){const n=me(t,["children","$$slots","$$events","$$legacy"]);ht(e,$e({name:"upload"},()=>n,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"17 8 12 3 7 8"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15"}]],children:(r,o)=>{var a=Ne(),s=se(a);Ie(s,t,"default",{}),W(r,a)},$$slots:{default:!0}}))}function Ic(e,t){const n=me(t,["children","$$slots","$$events","$$legacy"]);ht(e,$e({name:"x"},()=>n,{iconNode:[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]],children:(r,o)=>{var a=Ne(),s=se(a);Ie(s,t,"default",{}),W(r,a)},$$slots:{default:!0}}))}const ny={nodes:[{id:"1",type:"textInput",position:{x:-20,y:0},data:{value:"What is AGI?"},width:180,height:100},{id:"2",type:"generate",position:{x:240,y:0},width:460,height:340,data:{markdown:"",html:"",model:"gemini-2.0-flash-exp"}}],edges:[{source:"1",target:"2"}]};var Kr,Tc;class iy{constructor(){Xe(this,Kr);const t=yt(this,Kr,Tc).call(this);this.nodes=re(t.nodes),this.edges=re(t.edges)}LoadFromFile(t){this.nodes.set(t.nodes),this.edges.set(t.edges),this.Save()}AddNode(t){this.nodes.update(n=>(n.push(t),n)),this.Save()}AddEdge(t,n){this.edges.update(i=>(i.push({source:t,target:n,id:new Date().getTime().toString()}),i)),this.Save()}RemoveNode(t){this.nodes.update(n=>n.filter(i=>i.id!=t.id)),this.Save()}RemoveEdge(t){this.edges.update(n=>n.filter(i=>i.source!=t.source||i.target!=t.target)),this.Save()}RemovePrevEdge(t){const n={};n[t.fromHandle.type]=t.fromHandle.nodeId,n[t.toHandle.type]=t.toHandle.nodeId,this.edges.update(i=>{for(let r=i.length-1;r>=0;r--){let o=i[r];n.id?o.target==n.target&&o.id!=n.id&&i.splice(r,1):o.source==n.source&&o.target==n.target&&(n.id=o.id)}return i}),this.Save()}UpdateNode(t,n){this.nodes.update(i=>{const r=i.find(o=>o.id===t);return r&&(r.data={...r.data,...n}),i}),this.Save()}Dump(){return{nodes:V(this.nodes),edges:V(this.edges)}}Save(){const t=this.Dump();localStorage.graph=JSON.stringify(t)}GetPrompt(t){const i=V(this.edges).find(s=>s.target===t);if(!i)return"";const o=V(this.nodes).find(s=>s.id===i.source);let a;switch(o.type){case"textInput":a={role:"user",content:o.data.value};break;case"generate":a={role:"model",content:o.data.markdown};break}return[...this.GetPrompt(o.id),a]}}Kr=new WeakSet,Tc=function(){return localStorage.graph?JSON.parse(localStorage.graph):ny};const tt=new iy;var Ai,Ii,Ti,Oi,Hi,Di,Ri,Li,Vi,Sn,vi;class ry{constructor(){Xe(this,Sn);Xe(this,Ai,Ze(!1));Xe(this,Ii,Ze(null));Xe(this,Ti,Ze(null));Xe(this,Oi,Ze(void 0));Xe(this,Hi,Ze(void 0));Xe(this,Di,Ze(void 0));Xe(this,Ri,Ze(void 0));Xe(this,Li,Ze(0));Xe(this,Vi,Ze(0))}get IsVisible(){return d(ve(this,Ai))}set IsVisible(t){D(ve(this,Ai),Ve(t))}get Node(){return d(ve(this,Ii))}set Node(t){D(ve(this,Ii),Ve(t))}get Edge(){return d(ve(this,Ti))}set Edge(t){D(ve(this,Ti),Ve(t))}get Top(){return d(ve(this,Oi))}set Top(t){D(ve(this,Oi),Ve(t))}get Left(){return d(ve(this,Hi))}set Left(t){D(ve(this,Hi),Ve(t))}get Right(){return d(ve(this,Di))}set Right(t){D(ve(this,Di),Ve(t))}get Bottom(){return d(ve(this,Ri))}set Bottom(t){D(ve(this,Ri),Ve(t))}get CanvasWidth(){return d(ve(this,Li))}set CanvasWidth(t){D(ve(this,Li),Ve(t))}get CanvasHeight(){return d(ve(this,Vi))}set CanvasHeight(t){D(ve(this,Vi),Ve(t))}ShowPane(t){yt(this,Sn,vi).call(this,t)}ShowNode(t,n){yt(this,Sn,vi).call(this,t,n)}ShowEdge(t,n){yt(this,Sn,vi).call(this,t,null,n)}ShowConnect(t,n){yt(this,Sn,vi).call(this,t,null,null,n)}Hide(){this.IsVisible&&(this.Event=null,this.Node=null,this.Edge=null,this.IsVisible=!1)}}Ai=new WeakMap,Ii=new WeakMap,Ti=new WeakMap,Oi=new WeakMap,Hi=new WeakMap,Di=new WeakMap,Ri=new WeakMap,Li=new WeakMap,Vi=new WeakMap,Sn=new WeakSet,vi=function(t,n,i,r){if(t.target.closest(".nomenu")){this.Hide();return}this.Event=t,this.Node=n,this.Edge=i,this.Connection=r,t.preventDefault(),this.Top=t.clientY<this.CanvasHeight-200?t.clientY+"px":void 0,this.Left=t.clientX<this.CanvasWidth-200?t.clientX+"px":void 0,this.Right=t.clientX>=this.CanvasWidth-200?this.CanvasWidth-t.clientX+"px":void 0,this.Bottom=t.clientY>=this.CanvasHeight-200?this.CanvasHeight-t.clientY+"px":void 0,this.IsVisible=!0};const De=new ry,oy={models:[{id:"openai",name:"OpenAI",link:"https://platform.openai.com/api-keys",models:[{id:"gpt-4o"},{id:"gpt-4o-mini"},{id:"chatgpt-4o-latest"},{id:"o1"},{id:"o1-mini"},{id:"o1-preview"}]},{id:"anthropic",name:"Anthropic",link:"https://console.anthropic.com/account/keys",models:[{id:"claude-3-5-sonnet-latest"},{id:"claude-3-5-haiku-latest"},{id:"claude-3-opus-latest"},{id:"claude-3-sonnet-20240229"},{id:"claude-3-haiku-20240307"}]},{id:"google",name:"Google",link:"https://aistudio.google.com/app/apikey",models:[{id:"gemini-2.0-flash-exp"},{id:"gemini-2.0-flash-thinking-exp-1219"},{id:"gemini-exp-1206"},{id:"gemini-1.5-pro"},{id:"gemini-1.5-flash"},{id:"gemini-1.5-flash-8b"},{id:"learnlm-1.5-pro-experimental"}]}]};var Xi,Yi,Bt,Oc,Hc,br;class sy{constructor(){Xe(this,Bt);Xe(this,Xi,Ze(Ve([])));Xe(this,Yi,Ze(Ve({})));yt(this,Bt,Oc).call(this),yt(this,Bt,Hc).call(this)}get providers(){return d(ve(this,Xi))}set providers(t){D(ve(this,Xi),Ve(t))}get models(){return d(ve(this,Yi))}set models(t){D(ve(this,Yi),Ve(t))}}Xi=new WeakMap,Yi=new WeakMap,Bt=new WeakSet,Oc=function(){if(!localStorage.info){yt(this,Bt,br).call(this,oy);return}try{const t=JSON.parse(localStorage.info);yt(this,Bt,br).call(this,t)}catch(t){console.log("[AppInfo > readLocal]",t,localStorage.info)}},Hc=async function(){const t="https://script.google.com/macros/s/AKfycbzt9TaEx3_lNwYDXiWk1SOvcdsq4c4THAX85Mc-5-yYH4AQ9fuJ3G3TTuUK1fMC9k9dMQ/exec?app="+window.location,n=await fetch(t);if(!n.ok)throw new Error(`[AppInfo > readRemote] ${n.status}: ${n.statusText}`);const i=await n.json();localStorage.info=JSON.stringify(i),yt(this,Bt,br).call(this,i)},br=function(t){const n={};for(let i=0;i<t.models.length;i++){let r=t.models[i];for(let o=0;o<r.models.length;o++){let a=r.models[o];n[a.id]=r.id}}this.models=n,this.providers=t.models};const rn=new sy;var Wi,Bi,Fr,Dc;class ay{constructor(){Xe(this,Fr);Xe(this,Wi,Ze(!1));Xe(this,Bi,Ze(Ve({defaultModel:"gemini-2.0-flash-exp"})));if(localStorage.settings){const t=JSON.parse(localStorage.settings);t.geminiKey&&(t.googleKey=t.geminiKey,delete t.geminiKey,localStorage.settings=JSON.stringify(t)),this.Data=t}yt(this,Fr,Dc).call(this)}get IsVisible(){return d(ve(this,Wi))}set IsVisible(t){D(ve(this,Wi),Ve(t))}get Data(){return d(ve(this,Bi))}set Data(t){D(ve(this,Bi),Ve(t))}Save(){localStorage.settings=JSON.stringify(this.Data)}Show(){this.IsVisible=!0}Hide(){this.IsVisible=!1}}Wi=new WeakMap,Bi=new WeakMap,Fr=new WeakSet,Dc=async function(){for(let t=0;t<rn.providers.length;t++){let n=rn.providers[t];if(this.Data[n.id+"Key"])return}this.Show()};const zt=new ay;var Ki;class ly{constructor(){Xe(this,Ki,Ze(!1))}get IsVisible(){return d(ve(this,Ki))}set IsVisible(t){D(ve(this,Ki),Ve(t))}Show(){this.IsVisible=!0}Hide(){this.IsVisible=!1}}Ki=new WeakMap;const Yr=new ly;var cy=ae("<!> <!> <!> <!>",1),uy=ae('<input type="file" id="fileInput" style="display: none;" accept=".json"> <!>',1);function dy(e,t){le(t,!1);let n=F();function i(l){const c=l.target.files[0];if(!c||c.type!="application/json")throw"Invalid file";const u=new FileReader;u.onload=f=>{const h=f.target.result.toString(),g=JSON.parse(h);if(!Array.isArray(g.nodes)||!Array.isArray(g.edges))throw"Invalid file";tt.LoadFromFile(g)},u.readAsText(c)}function r(){const l=tt.Dump(),c=JSON.stringify(l,null,2),u=new Blob([c],{type:"application/json"}),f=URL.createObjectURL(u),h=document.createElement("a");h.href=f,h.download="llm-graph.json",h.click(),URL.revokeObjectURL(f)}he();var o=uy(),a=se(o);a.__change=i,Qi(a,l=>D(n,l),()=>d(n));var s=te(a,2);Pc(s,{position:"top-left",showFitView:!1,showLock:!1,showZoom:!1,children:(l,c)=>{var u=cy(),f=se(u);Jt(f,{title:"Import",class:"canvas-llm-controll-button",$$events:{click:()=>d(n).click()},children:(y,S)=>{ty(y,{size:24})},$$slots:{default:!0}});var h=te(f,2);Jt(h,{title:"Export",class:"canvas-llm-controll-button",$$events:{click:r},children:(y,S)=>{qm(y,{size:24})},$$slots:{default:!0}});var g=te(h,2);Jt(g,{title:"Settings",class:"canvas-llm-controll-button",$$events:{click:()=>zt.Show()},children:(y,S)=>{Jm(y,{size:24})},$$slots:{default:!0}});var p=te(g,2);Jt(p,{title:"Help",class:"canvas-llm-controll-button",$$events:{click:()=>Yr.Show()},children:(y,S)=>{Km(y,{size:24})},$$slots:{default:!0}}),W(l,u)},$$slots:{default:!0}}),W(e,o),ce()}on(["change"]);var fy=ae('<button class="context-menu-item svelte-1llxoho"><!> Delete node</button>'),hy=ae('<button class="context-menu-item svelte-1llxoho"><!> Delete edge</button>'),gy=ae('<div class="context-menu-item svelte-1llxoho" style="padding: 0.5em;background: #ddd; color: #666;">Add node:</div> <button class="context-menu-item svelte-1llxoho"><!> TextInput</button> <button class="context-menu-item svelte-1llxoho"><!> Generate</button>',1),vy=ae('<div class="context-menu svelte-1llxoho"><!></div>');function my(e,t){le(t,!1);const{screenToFlowPosition:n}=Rm();function i(f){f.id=new Date().getTime().toString(),f.origin=[0,0],f.position=n({x:De.Event.clientX,y:De.Event.clientY}),tt.AddNode(f),De.Connection&&(De.Connection.fromHandle.type=="source"?tt.AddEdge(De.Connection.fromNode.id,f.id):tt.AddEdge(f.id,De.Connection.fromNode.id)),De.Hide()}function r(){i({type:"textInput",width:260,height:120,data:{value:""}})}function o(){i({type:"generate",width:460,height:340,data:{markdown:"",html:"",model:zt.Data.defaultModel}})}function a(){tt.RemoveNode(De.Node),De.Hide()}function s(){tt.RemoveEdge(De.Edge),De.Hide()}he();var l=Ne(),c=se(l);{var u=f=>{var h=vy(),g=ee(h);{var p=S=>{var _=fy(),m=ee(_);Xa(m,{size:24,color:"red"}),Ae("click",_,a),W(S,_)},y=S=>{var _=Ne(),m=se(_);{var k=b=>{var N=hy(),C=ee(N);Xa(C,{size:24,color:"red"}),Ae("click",N,s),W(b,N)},E=b=>{var N=gy(),C=te(se(N),2),M=ee(C);ey(M,{size:24,color:"#00abff"});var P=te(C,2),T=ee(P);Qm(T,{size:24,color:"#00abff"}),Ae("click",C,r),Ae("click",P,o),W(b,N)};Ce(m,b=>{De.Edge?b(k):b(E,!1)},!0)}W(S,_)};Ce(g,S=>{De.Node?S(p):S(y,!1)})}ye(()=>{We(h,"top",De.Top),We(h,"left",De.Left),We(h,"right",De.Right),We(h,"bottom",De.Bottom)}),W(f,h)};Ce(c,f=>{De.IsVisible&&f(u)})}W(e,l),ce()}function yy(e,t){t.text&&navigator.clipboard.writeText(t.text)}var py=ae('<button class="btn-dark svelte-1fizegg" title="Copy text" aria-label="Copy text"><!></button>');function Rc(e,t){var n=py();n.__click=[yy,t];var i=ee(n);Fm(i,{size:16}),W(e,n)}on(["click"]);function _y(e,t,n){tt.UpdateNode(t.id,{value:d(n)})}var wy=ae('<!> <!> <!> <node-content><node-header><node-header-left>Input</node-header-left> <node-header-right><!></node-header-right></node-header> <node-body><textarea class="nodrag nozoom node-text"></textarea></node-body></node-content>',3);function xy(e,t){le(t,!0),je();let n=Ze(Ve(t.data.value));Ym({nodeId:t.id,type:"target"});var i=wy(),r=se(i);zc(r,{minWidth:100,minHeight:30,onResizeEnd:()=>tt.Save()});var o=te(r,2);wn(o,{type:"target",get position(){return fe.Left}});var a=te(o,2);wn(a,{type:"source",get position(){return fe.Right}});var s=te(a,2),l=ee(s),c=ee(l),u=te(c,2),f=ee(u);Rc(f,{get text(){return d(n)}});var h=te(l,2);xl(h,"class","nomenu");var g=ee(h);g.__change=[_y,t,n],kl(g,()=>d(n),p=>D(n,p)),W(e,i),ce()}on(["change"]);var by=ae('<button type="button" class="btn-dark svelte-1fizegg"><!></button>');function ky(e,t){var n=by();n.__click=function(...r){var o;(o=t.onclick)==null||o.apply(this,r)};var i=ee(n);Gm(i,{size:16}),W(e,n)}on(["click"]);const Mo=`

---

`;class Ey{async Call(t,n){const i=rn.models[t];let r;switch(i){case"openai":r=await this.CallOpenAI(t,n);break;case"google":r=await this.CallGoogle(t,n);break;case"anthropic":r=await this.CallAnthropic(t,n);break;default:throw`[AiClient > Call] Invalid LLM: ${i} / ${t}`}const o=marked.parse(r);return{markdown:r,html:o}}async CallOpenAI(t,n){var a;const i="https://api.openai.com/v1/chat/completions",r=[];for(var o=0;o<n.length;o++){let s=n[o],l={content:s.content};switch(s.role){case"system":l.role="system";break;case"user":l.role="user";break;case"model":l.role="assistant";break}r.push(l)}try{const s=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+zt.Data.openaiKey},body:JSON.stringify({model:t,messages:r})}),l=await s.json();if((a=l==null?void 0:l.error)!=null&&a.message)throw l.error.message;if(!s.ok)throw`${s.status}: ${s.statusText}`;let c="";return l.choices.forEach(u=>{c&&(c+=Mo),c+=u.message.content}),c}catch(s){throw console.error("[AiClient > CallOpenAI]",s),s}}async CallGoogle(t,n){var a;const i=`https://generativelanguage.googleapis.com/v1beta/models/${t}:generateContent?key=${zt.Data.googleKey}`,r=[];for(var o=0;o<n.length;o++){let s=n[o],l={parts:[{text:s.content}]};switch(s.role){case"user":l.role="user";break;case"model":l.role="model";break;case"system":l.role="user",l.parts[0].text=`*${s.content}*`;break}r.push(l)}try{const s=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:r,safetySettings:[{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"BLOCK_NONE"}]})}),l=await s.json();if((a=l==null?void 0:l.error)!=null&&a.message)throw l.error.message;if(!s.ok)throw`${s.status}: ${s.statusText}`;let c="";return l.candidates.forEach(u=>{u.content.parts.forEach(f=>{c&&(c+=Mo),c+=f.text})}),c}catch(s){throw console.error("[AiClient > CallGoogle]",s),s}}async CallAnthropic(t,n){var a;const i="https://api.anthropic.com/v1/messages",r=[];for(var o=0;o<n.length;o++){let s=n[o],l={content:s.content};switch(s.role){case"system":l.role="user";break;case"user":l.role="user";break;case"model":l.role="assistant";break}r.push(l)}try{const s=await fetch(i,{method:"POST",headers:{"x-api-key":zt.Data.anthropicKey,"anthropic-version":"2023-06-01","content-type":"application/json","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:t,messages:r,max_tokens:2048})}),l=await s.json();if((a=l==null?void 0:l.error)!=null&&a.message)throw l.error.message;if(!s.ok)throw`${s.status}: ${s.statusText}`;let c="";return l.content.forEach(u=>{c&&(c+=Mo),c+=u.text}),c}catch(s){throw console.error("[AiClient > CallAnthropic]",s),s}}}const Sy=new Ey;var Fi,qi,qr,Ya;let Cy=(Ya=class{constructor(){Xe(this,Fi,Ze(0));Xe(this,qi,Ze(""));Xe(this,qr,yn(()=>this.NodeID>0))}get NodeID(){return d(ve(this,Fi))}set NodeID(t){D(ve(this,Fi),Ve(t))}get ModelID(){return d(ve(this,qi))}set ModelID(t){D(ve(this,qi),Ve(t))}get IsVisible(){return d(ve(this,qr))}Show(t,n){this.NodeID=t,this.ModelID=n}Hide(){this.NodeID=0}},Fi=new WeakMap,qi=new WeakMap,qr=new WeakMap,Ya);const jt=new Cy;async function Ny(e,t,n,i){if(D(t,""),!n.data.model){jt.Show(n.id);return}if(!rn.models[n.data.model]){jt.Show(n.id);return}const r=rn.models[n.data.model];if(!zt.Data[r+"Key"]){zt.Show();return}D(i,!0);try{const o=tt.GetPrompt(n.id),{markdown:a,html:s}=await Sy.Call(n.data.model,o);tt.UpdateNode(n.id,{markdown:a,html:s})}catch(o){console.error("[GenerateNode > Exec]",n.data.model,o),D(t,Ve(o))}D(i,!1)}var My=ae('<button class="btn-main" title="Call LLM" aria-label="Call LLM"><!></button>'),Py=ae('<button class="btn-main" title="In progress..." aria-label="In progress..." disabled><!></button>'),zy=(e,t)=>{D(t,"")},Ay=ae('<error class="svelte-15jxjnv"> <button type="button" class="btn-dark svelte-15jxjnv"><!></button></error>'),Iy=ae("<!> <!> <!> <node-content><node-header><node-header-left><!> <!></node-header-left> <node-header-right><!> <!></node-header-right></node-header> <node-body><!> <!></node-body></node-content>",3);function Ty(e,t){le(t,!0);let n=Ze(!1),i=Ze("");var r=Iy(),o=se(r);zc(o,{minWidth:100,minHeight:30,onResizeEnd:()=>tt.Save()});var a=te(o,2);wn(a,{type:"target",get position(){return fe.Left}});var s=te(a,2);wn(s,{type:"source",get position(){return fe.Right}});var l=te(s,2),c=ee(l),u=ee(c),f=ee(u);{var h=M=>{var P=Ro();ye(()=>qt(P,t.data.model)),W(M,P)},g=M=>{var P=Ro("Generate");W(M,P)};Ce(f,M=>{t.data.model?M(h):M(g,!1)})}var p=te(f,2);{var y=M=>{var P=My();P.__click=[Ny,i,t,n];var T=ee(P);Um(T,{size:16}),W(M,P)},S=M=>{var P=Py(),T=ee(P);Ac(T,{size:16,class:"rotate"}),W(M,P)};Ce(p,M=>{d(n)?M(S,!1):M(y)})}var _=te(u,2),m=ee(_);Rc(m,{get text(){return t.data.markdown}});var k=te(m,2);ky(k,{onclick:()=>jt.Show(t.id,t.data.model)});var E=te(c,2);xl(E,"class","nodrag nozoom nomenu node-text");var b=ee(E);cd(b,()=>t.data.html);var N=te(b,2);{var C=M=>{var P=Ay(),T=ee(P),R=te(T);R.__click=[zy,i];var L=ee(R);Ic(L,{size:24,strokeWidth:2}),ye(()=>qt(T,`${d(i)??""} `)),W(M,P)};Ce(N,M=>{d(i)&&M(C)})}W(e,r),ce()}on(["click"]);var Oy=ae("<!> <!> <!> <!> <!>",1),Hy=ae("<div><!></div>");function Dy(e,t){le(t,!0);const n={textInput:xy,generate:Ty};let i=Ze(!1),r=Ze(!0),o=yn(()=>d(r));async function a(c,u){if(u.isValid){tt.RemovePrevEdge(u);return}console.log(u),await new Promise(f=>setTimeout(f,100)),De.ShowConnect(c,u)}var s=Hy();We(s,"height","100%");var l=ee(s);dm(l,{get nodes(){return tt.nodes},get edges(){return tt.edges},nodeTypes:n,get zoomOnScroll(){return d(r)},get preventScrolling(){return d(o)},fitView:!0,fitViewOptions:{maxZoom:1,minZoom:1},proOptions:{hideAttribution:!0},colorMode:"dark",snapGrid:[20,20],onconnectstart:()=>De.Hide(),onconnectend:a,ondelete:c=>tt.Save(),$$events:{paneclick:()=>De.Hide(),nodeclick:()=>De.Hide(),edgeclick:()=>De.Hide(),nodedragstart:()=>De.Hide(),nodedragstop:()=>tt.Save(),panecontextmenu:({detail:{event:c}})=>De.ShowPane(c),nodecontextmenu:({detail:{event:c,node:u}})=>De.ShowNode(c,u),edgecontextmenu:({detail:{event:c,edge:u}})=>De.ShowEdge(c,u),nodemousemove:({detail:{event:c}})=>{D(r,c.target.closest(".nozoom")==null)},nodemouseleave:()=>{D(r,!0)}},children:(c,u)=>{var f=Oy(),h=se(f);Pc(h,{children:(m,k)=>{Jt(m,{title:"MiniMap",class:"canvas-llm-controll-button",$$events:{click:()=>D(i,!d(i))},children:(E,b)=>{Zm(E,{size:24})},$$slots:{default:!0}})},$$slots:{default:!0}});var g=te(h,2);my(g,{});var p=te(g,2);dy(p,{});var y=te(p,2);{var S=m=>{Dm(m,{})};Ce(y,m=>{d(i)&&m(S)})}var _=te(y,2);Am(_,{get variant(){return tn.Dots},patternColor:"rgba(255,255,255,0.5)",gap:20}),W(c,f)},$$slots:{default:!0}}),Mr(s,"clientWidth",c=>De.CanvasWidth=c),Mr(s,"clientHeight",c=>De.CanvasHeight=c),W(e,s),ce()}var Ry=ae('<button type="button" class="btn-dark svelte-1sun3k7"><!> Close</button>');function Is(e,t){le(t,!0);function n(o){o.key==="Escape"&&t.onclick()}var i=Ry();Ae("keydown",ct,n),i.__click=function(...o){var a;(a=t.onclick)==null||a.apply(this,o)};var r=ee(i);Ic(r,{size:48,strokeWidth:1}),W(e,i),ce()}on(["click"]);var mr=Sl(()=>zt),Ly=ae('<th class="svelte-1lfplf3"><h1 class="svelte-1lfplf3"> </h1></th>'),Vy=(e,t,n)=>{t(d(n).id)},Xy=(e,t,n)=>{t(e,d(n).id)},Yy=ae('<button class="svelte-1lfplf3"> <input type="radio" name="defaultModel" title="Default Model" class="svelte-1lfplf3"></button>'),Wy=ae('<td class="svelte-1lfplf3"></td>'),By=ae('<!> <table class="form"><thead><tr></tr></thead><tbody><tr></tr></tbody></table>',1);function Ky(e,t){le(t,!1);function n(f){tt.UpdateNode(jt.NodeID,{model:f}),jt.Hide()}function i(f,h){mr(mr().Data.defaultModel=h),mr().Save(),f.stopPropagation()}he();var r=By(),o=se(r);Is(o,{onclick:()=>jt.Hide()});var a=te(o,2),s=ee(a),l=ee(s);Pt(l,5,()=>rn.providers,yi,(f,h)=>{var g=Ly(),p=ee(g),y=ee(p);ye(()=>qt(y,d(h).name)),W(f,g)});var c=te(s),u=ee(c);Pt(u,5,()=>rn.providers,yi,(f,h)=>{var g=Wy();Pt(g,5,()=>d(h).models,yi,(p,y)=>{var S=Yy();S.__click=[Vy,n,y];var _=ee(S),m=te(_);m.__click=[Xy,i,y],ye(()=>{Ye(S,"selected",jt.ModelID==d(y).id),qt(_,`${d(y).id??""} `),hd(m,d(y).id==mr().Data.defaultModel)}),W(p,S)}),W(f,g)}),W(e,r),ce()}on(["click"]);var di=Sl(()=>zt),Fy=ae('<div style="animation: rotate 3s infinite linear, blink 1s infinite linear"><!></div>'),qy=ae('<tr><td class="svelte-1xsv1sz"><div class="provider svelte-1xsv1sz"> <a target="_blank" title="Get API Key" class="svelte-1xsv1sz"><!></a></div></td><td class="key svelte-1xsv1sz"><input type="text" class="svelte-1xsv1sz"></td></tr>'),Gy=ae('<div class="settings svelte-1xsv1sz"><h3 class="text-lg font-bold">API Keys</h3> <table class="form svelte-1xsv1sz"><tbody></tbody></table></div>'),Zy=ae("<!> <!>",1);function $y(e,t){le(t,!1),he();var n=Zy(),i=se(n);Is(i,{onclick:()=>di().Hide()});var r=te(i,2);{var o=s=>{var l=Fy(),c=ee(l);Ac(c,{size:32}),W(s,l)},a=s=>{var l=Gy(),c=te(ee(l),2),u=ee(c);Pt(u,5,()=>rn.providers,yi,(f,h)=>{var g=qy(),p=ee(g),y=ee(p),S=ee(y),_=te(S),m=ee(_);jm(m,{size:16});var k=te(p),E=ee(k);E.__change=()=>di().Save(),ye(()=>{qt(S,`${d(h).name??""} `),Q(_,"href",d(h).link)}),kl(E,()=>di().Data[d(h).id+"Key"],b=>di(di().Data[d(h).id+"Key"]=b)),W(f,g)}),W(s,l)};Ce(r,s=>{rn.providers.length==0?s(o):s(a,!1)})}W(e,n),ce()}on(["change"]);var Uy=ae('<!> <div class="help svelte-1ksccvz">Hello! <br> Feel free to ask for assistance: <br> <a href="https://t.me/xyz4fun" target="_blank" class="svelte-1ksccvz">@xyz4fun</a> <div class="icon svelte-1ksccvz"><!></div></div>',1);function Jy(e,t){le(t,!1),he();var n=Uy(),i=se(n);Is(i,{onclick:()=>Yr.Hide()});var r=te(i,2),o=te(ee(r),7),a=ee(o);$m(a,{size:32,strokeWidth:1.5}),W(e,n),ce()}var jy=ae('<div class="full-screen center-h svelte-uz21qr"><div class="relative max-size center-v"><!></div></div>');function Qy(e,t){le(t,!1),he();var n=Ne(),i=se(n);{var r=o=>{var a=jy(),s=ee(a),l=ee(s);{var c=f=>{$y(f,{})},u=f=>{var h=Ne(),g=se(h);{var p=S=>{Jy(S,{})},y=S=>{var _=Ne(),m=se(_);{var k=E=>{Ky(E,{})};Ce(m,E=>{jt.IsVisible&&E(k)},!0)}W(S,_)};Ce(g,S=>{Yr.IsVisible?S(p):S(y,!1)},!0)}W(f,h)};Ce(l,f=>{zt.IsVisible?f(c):f(u,!1)})}W(o,a)};Ce(i,o=>{(zt.IsVisible||Yr.IsVisible||jt.IsVisible)&&o(r)})}W(e,n),ce()}var ep=ae("<!> <!>",1);function tp(e){var t=ep(),n=se(t);Dy(n,{});var i=te(n,2);Qy(i,{}),W(e,t)}nd(tp,{target:document.getElementById("app")});
