var $c=Object.defineProperty;var Vs=e=>{throw TypeError(e)};var Jc=(e,t,n)=>t in e?$c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Xs=(e,t,n)=>Jc(e,typeof t!="symbol"?t+"":t,n),uo=(e,t,n)=>t.has(e)||Vs("Cannot "+n);var ve=(e,t,n)=>(uo(e,t,"read from private field"),n?n.call(e):t.get(e)),Xe=(e,t,n)=>t.has(e)?Vs("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),fo=(e,t,n,i)=>(uo(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),mt=(e,t,n)=>(uo(e,t,"access private method"),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();const jc=!1;var qi=Array.isArray,Qo=Array.from,Qc=Object.defineProperty,fn=Object.getOwnPropertyDescriptor,Va=Object.getOwnPropertyDescriptors,eu=Object.prototype,tu=Array.prototype,es=Object.getPrototypeOf;function li(e){return typeof e=="function"}const jt=()=>{};function nu(e){return e()}function br(e){for(var t=0;t<e.length;t++)e[t]()}const At=2,Xa=4,Gi=8,ts=16,Tt=32,Zi=64,No=128,An=256,Er=512,ft=1024,mn=2048,$n=4096,Xt=8192,Jn=16384,iu=32768,Ui=65536,ru=1<<17,ou=1<<19,Ya=1<<20,hn=Symbol("$state"),Wa=Symbol("legacy props"),su=Symbol("");function Ba(e){return e===this.v}function ns(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function is(e){return!ns(e,this.v)}function au(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function lu(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function cu(e){throw new Error("https://svelte.dev/e/effect_orphan")}function uu(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function du(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function fu(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function hu(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function gu(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function vu(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let jn=!1;function mu(){jn=!0}const rs=1,os=2,Ka=4,yu=8,pu=16,_u=1,wu=2,Fa=4,xu=8,bu=16,qa=1,Eu=2,ht=Symbol(),Ga="http://www.w3.org/2000/svg";function dt(e,t){var n={f:0,v:e,reactions:null,equals:Ba,version:0};return n}function Ue(e){return Za(dt(e))}function Fr(e,t=!1){var i;const n=dt(e);return t||(n.equals=is),jn&&Se!==null&&Se.l!==null&&((i=Se.l).s??(i.s=[])).push(n),n}function F(e,t=!1){return Za(Fr(e,t))}function Za(e){return He!==null&&He.f&At&&(Yt===null?Iu([e]):Yt.push(e)),e}function H(e,t){return He!==null&&Ur()&&He.f&(At|ts)&&(Yt===null||!Yt.includes(e))&&vu(),Mo(e,t)}function Mo(e,t){return e.equals(t)||(e.v=t,e.version=ul(),Ua(e,mn),Ur()&&pe!==null&&pe.f&ft&&!(pe.f&Tt)&&(st!==null&&st.includes(e)?(Ot(pe,mn),Jr(pe)):gn===null?Tu([e]):gn.push(e))),t}function Ua(e,t){var n=e.reactions;if(n!==null)for(var i=Ur(),r=n.length,o=0;o<r;o++){var a=n[o],s=a.f;s&mn||!i&&a===pe||(Ot(a,t),s&(ft|An)&&(s&At?Ua(a,$n):Jr(a)))}}let ss=!1;function Ve(e,t=null,n){if(typeof e!="object"||e===null||hn in e)return e;const i=es(e);if(i!==eu&&i!==tu)return e;var r=new Map,o=qi(e),a=dt(0);o&&r.set("length",dt(e.length));var s;return new Proxy(e,{defineProperty(l,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&fu();var f=r.get(c);return f===void 0?(f=dt(u.value),r.set(c,f)):H(f,Ve(u.value,s)),!0},deleteProperty(l,c){var u=r.get(c);if(u===void 0)c in l&&r.set(c,dt(ht));else{if(o&&typeof c=="string"){var f=r.get("length"),h=Number(c);Number.isInteger(h)&&h<f.v&&H(f,h)}H(u,ht),Ys(a)}return!0},get(l,c,u){var y;if(c===hn)return e;var f=r.get(c),h=c in l;if(f===void 0&&(!h||(y=fn(l,c))!=null&&y.writable)&&(f=dt(Ve(h?l[c]:ht,s)),r.set(c,f)),f!==void 0){var g=d(f);return g===ht?void 0:g}return Reflect.get(l,c,u)},getOwnPropertyDescriptor(l,c){var u=Reflect.getOwnPropertyDescriptor(l,c);if(u&&"value"in u){var f=r.get(c);f&&(u.value=d(f))}else if(u===void 0){var h=r.get(c),g=h==null?void 0:h.v;if(h!==void 0&&g!==ht)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return u},has(l,c){var g;if(c===hn)return!0;var u=r.get(c),f=u!==void 0&&u.v!==ht||Reflect.has(l,c);if(u!==void 0||pe!==null&&(!f||(g=fn(l,c))!=null&&g.writable)){u===void 0&&(u=dt(f?Ve(l[c],s):ht),r.set(c,u));var h=d(u);if(h===ht)return!1}return f},set(l,c,u,f){var E;var h=r.get(c),g=c in l;if(o&&c==="length")for(var y=u;y<h.v;y+=1){var p=r.get(y+"");p!==void 0?H(p,ht):y in l&&(p=dt(ht),r.set(y+"",p))}h===void 0?(!g||(E=fn(l,c))!=null&&E.writable)&&(h=dt(void 0),H(h,Ve(u,s)),r.set(c,h)):(g=h.v!==ht,H(h,Ve(u,s)));var N=Reflect.getOwnPropertyDescriptor(l,c);if(N!=null&&N.set&&N.set.call(f,u),!g){if(o&&typeof c=="string"){var _=r.get("length"),m=Number(c);Number.isInteger(m)&&m>=_.v&&H(_,m+1)}Ys(a)}return!0},ownKeys(l){d(a);var c=Reflect.ownKeys(l).filter(h=>{var g=r.get(h);return g===void 0||g.v!==ht});for(var[u,f]of r)f.v!==ht&&!(u in l)&&c.push(u);return c},setPrototypeOf(){hu()}})}function Ys(e,t=1){H(e,e.v+t)}var ct,$a,Ja;function ku(){if(ct===void 0){ct=window;var e=Element.prototype,t=Node.prototype;$a=fn(t,"firstChild").get,Ja=fn(t,"nextSibling").get,e.__click=void 0,e.__className="",e.__attributes=null,e.__styles=null,e.__e=void 0,Text.prototype.__t=void 0}}function $i(e=""){return document.createTextNode(e)}function Vt(e){return $a.call(e)}function qr(e){return Ja.call(e)}function ee(e,t){return Vt(e)}function ae(e,t){{var n=Vt(e);return n instanceof Comment&&n.data===""?qr(n):n}}function ne(e,t=1,n=!1){let i=e;for(;t--;)i=qr(i);return i}function Su(e){e.textContent=""}function yn(e){var t=At|mn;pe===null?t|=An:pe.f|=Ya;var n=He!==null&&He.f&At?He:null;const i={children:null,ctx:Se,deps:null,equals:Ba,f:t,fn:e,reactions:null,v:null,version:0,parent:n??pe};return n!==null&&(n.children??(n.children=[])).push(i),i}function oe(e){const t=yn(e);return t.equals=is,t}function ja(e){var t=e.children;if(t!==null){e.children=null;for(var n=0;n<t.length;n+=1){var i=t[n];i.f&At?as(i):Kt(i)}}}function Cu(e){for(var t=e.parent;t!==null;){if(!(t.f&At))return t;t=t.parent}return null}function Qa(e){var t,n=pe;kt(Cu(e));try{ja(e),t=dl(e)}finally{kt(n)}return t}function el(e){var t=Qa(e),n=(En||e.f&An)&&e.deps!==null?$n:ft;Ot(e,n),e.equals(t)||(e.v=t,e.version=ul())}function as(e){ja(e),wi(e,0),Ot(e,Jn),e.v=e.children=e.deps=e.ctx=e.reactions=null}function tl(e){pe===null&&He===null&&cu(),He!==null&&He.f&An&&lu(),cs&&au()}function Nu(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Qn(e,t,n,i=!0){var r=(e&Zi)!==0,o=pe,a={ctx:Se,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:e|mn,first:null,fn:t,last:null,next:null,parent:r?null:o,prev:null,teardown:null,transitions:null,version:0};if(n){var s=Rn;try{Ws(!0),Ji(a),a.f|=iu}catch(u){throw Kt(a),u}finally{Ws(s)}}else t!==null&&Jr(a);var l=n&&a.deps===null&&a.first===null&&a.nodes_start===null&&a.teardown===null&&(a.f&Ya)===0;if(!l&&!r&&i&&(o!==null&&Nu(a,o),He!==null&&He.f&At)){var c=He;(c.children??(c.children=[])).push(a)}return a}function nl(e){const t=Qn(Gi,null,!1);return Ot(t,ft),t.teardown=e,t}function Po(e){tl();var t=pe!==null&&(pe.f&Tt)!==0&&Se!==null&&!Se.m;if(t){var n=Se;(n.e??(n.e=[])).push({fn:e,effect:pe,reaction:He})}else{var i=pt(e);return i}}function Mu(e){return tl(),ei(e)}function Pu(e){const t=Qn(Zi,e,!0);return(n={})=>new Promise(i=>{n.outro?Bn(t,()=>{Kt(t),i(void 0)}):(Kt(t),i(void 0))})}function pt(e){return Qn(Xa,e,!1)}function G(e,t){var n=Se,i={effect:null,ran:!1};n.l.r1.push(i),i.effect=ei(()=>{e(),!i.ran&&(i.ran=!0,H(n.l.r2,!0),It(t))})}function rt(){var e=Se;ei(()=>{if(d(e.l.r2)){for(var t of e.l.r1){var n=t.effect;n.f&ft&&Ot(n,$n),ni(n)&&Ji(n),t.ran=!1}e.l.r2.v=!1}})}function ei(e){return Qn(Gi,e,!0)}function me(e){return ti(e)}function ti(e,t=0){return Qn(Gi|ts|t,e,!0)}function pn(e,t=!0){return Qn(Gi|Tt,e,!0,t)}function il(e){var t=e.teardown;if(t!==null){const n=cs,i=He;Bs(!0),Ft(null);try{t.call(null)}finally{Bs(n),Ft(i)}}}function rl(e){var t=e.deriveds;if(t!==null){e.deriveds=null;for(var n=0;n<t.length;n+=1)as(t[n])}}function ol(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){var i=n.next;Kt(n,t),n=i}}function zu(e){for(var t=e.first;t!==null;){var n=t.next;t.f&Tt||Kt(t),t=n}}function Kt(e,t=!0){var n=!1;if((t||e.f&ou)&&e.nodes_start!==null){for(var i=e.nodes_start,r=e.nodes_end;i!==null;){var o=i===r?null:qr(i);i.remove(),i=o}n=!0}ol(e,t&&!n),rl(e),wi(e,0),Ot(e,Jn);var a=e.transitions;if(a!==null)for(const l of a)l.stop();il(e);var s=e.parent;s!==null&&s.first!==null&&sl(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function sl(e){var t=e.parent,n=e.prev,i=e.next;n!==null&&(n.next=i),i!==null&&(i.prev=n),t!==null&&(t.first===e&&(t.first=i),t.last===e&&(t.last=n))}function Bn(e,t){var n=[];ls(e,n,!0),al(n,()=>{Kt(e),t&&t()})}function al(e,t){var n=e.length;if(n>0){var i=()=>--n||t();for(var r of e)r.out(i)}else t()}function ls(e,t,n){if(!(e.f&Xt)){if(e.f^=Xt,e.transitions!==null)for(const a of e.transitions)(a.is_global||n)&&t.push(a);for(var i=e.first;i!==null;){var r=i.next,o=(i.f&Ui)!==0||(i.f&Tt)!==0;ls(i,t,o?n:!1),i=r}}}function _i(e){ll(e,!0)}function ll(e,t){if(e.f&Xt){ni(e)&&Ji(e),e.f^=Xt;for(var n=e.first;n!==null;){var i=n.next,r=(n.f&Ui)!==0||(n.f&Tt)!==0;ll(n,r?t:!1),n=i}if(e.transitions!==null)for(const o of e.transitions)(o.is_global||t)&&o.in()}}let zo=!1,Ao=[];function Au(){zo=!1;const e=Ao.slice();Ao=[],br(e)}function Gr(e){zo||(zo=!0,queueMicrotask(Au)),Ao.push(e)}function Zr(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let mr=!1,kr=!1,Sr=null,Rn=!1,cs=!1;function Ws(e){Rn=e}function Bs(e){cs=e}let Io=[],mi=0;let He=null;function Ft(e){He=e}let pe=null;function kt(e){pe=e}let Yt=null;function Iu(e){Yt=e}let st=null,yt=0,gn=null;function Tu(e){gn=e}let cl=1,En=!1,Se=null;function ul(){return++cl}function Ur(){return!jn||Se!==null&&Se.l===null}function ni(e){var a,s;var t=e.f;if(t&mn)return!0;if(t&$n){var n=e.deps,i=(t&An)!==0;if(n!==null){var r;if(t&Er){for(r=0;r<n.length;r++)((a=n[r]).reactions??(a.reactions=[])).push(e);e.f^=Er}for(r=0;r<n.length;r++){var o=n[r];if(ni(o)&&el(o),i&&pe!==null&&!En&&!((s=o==null?void 0:o.reactions)!=null&&s.includes(e))&&(o.reactions??(o.reactions=[])).push(e),o.version>e.version)return!0}}(!i||pe!==null&&!En)&&Ot(e,ft)}return!1}function Ou(e,t){for(var n=t;n!==null;){if(n.f&No)try{n.fn(e);return}catch{n.f^=No}n=n.parent}throw mr=!1,e}function Du(e){return(e.f&Jn)===0&&(e.parent===null||(e.parent.f&No)===0)}function $r(e,t,n,i){if(mr){if(n===null&&(mr=!1),Du(t))throw e;return}n!==null&&(mr=!0);{Ou(e,t);return}}function dl(e){var h;var t=st,n=yt,i=gn,r=He,o=En,a=Yt,s=Se,l=e.f;st=null,yt=0,gn=null,He=l&(Tt|Zi)?null:e,En=!Rn&&(l&An)!==0,Yt=null,Se=e.ctx;try{var c=(0,e.fn)(),u=e.deps;if(st!==null){var f;if(wi(e,yt),u!==null&&yt>0)for(u.length=yt+st.length,f=0;f<st.length;f++)u[yt+f]=st[f];else e.deps=u=st;if(!En)for(f=yt;f<u.length;f++)((h=u[f]).reactions??(h.reactions=[])).push(e)}else u!==null&&yt<u.length&&(wi(e,yt),u.length=yt);return c}finally{st=t,yt=n,gn=i,He=r,En=o,Yt=a,Se=s}}function Hu(e,t){let n=t.reactions;if(n!==null){var i=n.indexOf(e);if(i!==-1){var r=n.length-1;r===0?n=t.reactions=null:(n[i]=n[r],n.pop())}}n===null&&t.f&At&&(st===null||!st.includes(t))&&(Ot(t,$n),t.f&(An|Er)||(t.f^=Er),wi(t,0))}function wi(e,t){var n=e.deps;if(n!==null)for(var i=t;i<n.length;i++)Hu(e,n[i])}function Ji(e){var t=e.f;if(!(t&Jn)){Ot(e,ft);var n=pe,i=Se;pe=e;try{t&ts?zu(e):ol(e),rl(e),il(e);var r=dl(e);e.teardown=typeof r=="function"?r:null,e.version=cl}catch(o){$r(o,e,n,i||e.ctx)}finally{pe=n}}}function Ru(){if(mi>1e3){mi=0;try{uu()}catch(e){if(Sr!==null)$r(e,Sr,null);else throw e}}mi++}function Lu(e){var t=e.length;if(t!==0){Ru();var n=Rn;Rn=!0;try{for(var i=0;i<t;i++){var r=e[i];r.f&ft||(r.f^=ft);var o=[];fl(r,o),Vu(o)}}finally{Rn=n}}}function Vu(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var i=e[n];if(!(i.f&(Jn|Xt)))try{ni(i)&&(Ji(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?sl(i):i.fn=null))}catch(r){$r(r,i,null,i.ctx)}}}function Xu(){if(kr=!1,mi>1001)return;const e=Io;Io=[],Lu(e),kr||(mi=0,Sr=null)}function Jr(e){kr||(kr=!0,queueMicrotask(Xu)),Sr=e;for(var t=e;t.parent!==null;){t=t.parent;var n=t.f;if(n&(Zi|Tt)){if(!(n&ft))return;t.f^=ft}}Io.push(t)}function fl(e,t){var n=e.first,i=[];e:for(;n!==null;){var r=n.f,o=(r&Tt)!==0,a=o&&(r&ft)!==0,s=n.next;if(!a&&!(r&Xt))if(r&Gi){if(o)n.f^=ft;else try{ni(n)&&Ji(n)}catch(f){$r(f,n,null,n.ctx)}var l=n.first;if(l!==null){n=l;continue}}else r&Xa&&i.push(n);if(s===null){let f=n.parent;for(;f!==null;){if(e===f)break e;var c=f.next;if(c!==null){n=c;continue e}f=f.parent}}n=s}for(var u=0;u<i.length;u++)l=i[u],t.push(l),fl(l,t)}function d(e){var u;var t=e.f,n=(t&At)!==0;if(n&&t&Jn){var i=Qa(e);return as(e),i}if(He!==null){Yt!==null&&Yt.includes(e)&&gu();var r=He.deps;st===null&&r!==null&&r[yt]===e?yt++:st===null?st=[e]:st.push(e),gn!==null&&pe!==null&&pe.f&ft&&!(pe.f&Tt)&&gn.includes(e)&&(Ot(pe,mn),Jr(pe))}else if(n&&e.deps===null)for(var o=e,a=o.parent,s=o;a!==null;)if(a.f&At){var l=a;s=l,a=l.parent}else{var c=a;(u=c.deriveds)!=null&&u.includes(s)||(c.deriveds??(c.deriveds=[])).push(s);break}return n&&(o=e,ni(o)&&el(o)),e.v}function It(e){const t=He;try{return He=null,e()}finally{He=t}}const Yu=~(mn|$n|ft);function Ot(e,t){e.f=e.f&Yu|t}function Kn(e){return us().get(e)}function Cr(e,t){return us().set(e,t),t}function Wu(e){return us().has(e)}function us(e){return Se===null&&Zr(),Se.c??(Se.c=new Map(Bu(Se)||void 0))}function Bu(e){let t=e.p;for(;t!==null;){const n=t.c;if(n!==null)return n;t=t.p}return null}function Ks(e,t=1){var n=d(e),i=t===1?n++:n--;return H(e,n),i}function le(e,t=!1,n){Se={p:Se,c:null,e:null,m:!1,s:e,x:null,l:null},jn&&!t&&(Se.l={s:null,u:null,r1:[],r2:dt(!1)})}function ce(e){const t=Se;if(t!==null){const a=t.e;if(a!==null){var n=pe,i=He;t.e=null;try{for(var r=0;r<a.length;r++){var o=a[r];kt(o.effect),Ft(o.reaction),pt(o.fn)}}finally{kt(n),Ft(i)}}Se=t.p,t.m=!0}return{}}function Y(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(hn in e)To(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&hn in n&&To(n)}}}function To(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let i in e)try{To(e[i],t)}catch{}const n=es(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const i=Va(n);for(let r in i){const o=i[r].get;if(o)try{o.call(e)}catch{}}}}}function Ku(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const Fu=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function qu(e){return Fu.includes(e)}const Gu={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject"};function Zu(e){return e=e.toLowerCase(),Gu[e]??e}const Uu=["touchstart","touchmove"];function $u(e){return Uu.includes(e)}function Ju(e,t){if(t){const n=document.body;e.autofocus=!0,Gr(()=>{document.activeElement===n&&e.focus()})}}let Fs=!1;function ju(){Fs||(Fs=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function hl(e){var t=He,n=pe;Ft(null),kt(null);try{return e()}finally{Ft(t),kt(n)}}function Qu(e,t,n,i=n){e.addEventListener(t,()=>hl(n));const r=e.__on_r;r?e.__on_r=()=>{r(),i(!0)}:e.__on_r=()=>i(!0),ju()}const gl=new Set,Oo=new Set;function vl(e,t,n,i){function r(o){if(i.capture||fi.call(t,o),!o.cancelBubble)return hl(()=>n.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Gr(()=>{t.addEventListener(e,r,i)}):t.addEventListener(e,r,i),r}function ze(e,t,n,i,r){var o={capture:i,passive:r},a=vl(e,t,n,o);(t===document.body||t===window||t===document)&&nl(()=>{t.removeEventListener(e,a,o)})}function rn(e){for(var t=0;t<e.length;t++)gl.add(e[t]);for(var n of Oo)n(e)}function fi(e){var m;var t=this,n=t.ownerDocument,i=e.type,r=((m=e.composedPath)==null?void 0:m.call(e))||[],o=r[0]||e.target,a=0,s=e.__root;if(s){var l=r.indexOf(s);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var c=r.indexOf(t);if(c===-1)return;l<=c&&(a=l)}if(o=r[a]||e.target,o!==t){Qc(e,"currentTarget",{configurable:!0,get(){return o||n}});var u=He,f=pe;Ft(null),kt(null);try{for(var h,g=[];o!==null;){var y=o.assignedSlot||o.parentNode||o.host||null;try{var p=o["__"+i];if(p!==void 0&&!o.disabled)if(qi(p)){var[N,..._]=p;N.apply(o,[e,..._])}else p.call(o,e)}catch(E){h?g.push(E):h=E}if(e.cancelBubble||y===t||y===null)break;o=y}if(h){for(let E of g)queueMicrotask(()=>{throw E});throw h}}finally{e.__root=t,delete e.currentTarget,Ft(u),kt(f)}}}function ds(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function _n(e,t){var n=pe;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function se(e,t){var n=(t&qa)!==0,i=(t&Eu)!==0,r,o=!e.startsWith("<!>");return()=>{r===void 0&&(r=ds(o?e:"<!>"+e),n||(r=Vt(r)));var a=i?document.importNode(r,!0):r.cloneNode(!0);if(n){var s=Vt(a),l=a.lastChild;_n(s,l)}else _n(a,a);return a}}function $e(e,t,n="svg"){var i=!e.startsWith("<!>"),r=(t&qa)!==0,o=`<${n}>${i?e:"<!>"+e}</${n}>`,a;return()=>{if(!a){var s=ds(o),l=Vt(s);if(r)for(a=document.createDocumentFragment();Vt(l);)a.appendChild(Vt(l));else a=Vt(l)}var c=a.cloneNode(!0);if(r){var u=Vt(c),f=c.lastChild;_n(u,f)}else _n(c,c);return c}}function Do(e=""){{var t=$i(e+"");return _n(t,t),t}}function Te(){var e=document.createDocumentFragment(),t=document.createComment(""),n=$i();return e.append(t,n),_n(t,n),e}function W(e,t){e!==null&&e.before(t)}function qt(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n==null?"":n+"")}function ed(e,t){return td(e,t)}const On=new Map;function td(e,{target:t,anchor:n,props:i={},events:r,context:o,intro:a=!0}){ku();var s=new Set,l=f=>{for(var h=0;h<f.length;h++){var g=f[h];if(!s.has(g)){s.add(g);var y=$u(g);t.addEventListener(g,fi,{passive:y});var p=On.get(g);p===void 0?(document.addEventListener(g,fi,{passive:y}),On.set(g,1)):On.set(g,p+1)}}};l(Qo(gl)),Oo.add(l);var c=void 0,u=Pu(()=>{var f=n??t.appendChild($i());return pn(()=>{if(o){le({});var h=Se;h.c=o}r&&(i.$$events=r),c=e(f,i)||{},o&&ce()}),()=>{var y;for(var h of s){t.removeEventListener(h,fi);var g=On.get(h);--g===0?(document.removeEventListener(h,fi),On.delete(h)):On.set(h,g)}Oo.delete(l),f!==n&&((y=f.parentNode)==null||y.removeChild(f))}});return nd.set(c,u),c}let nd=new WeakMap;function Ne(e,t,n=!1){var i=e,r=null,o=null,a=ht,s=n?Ui:0,l=!1;const c=(f,h=!0)=>{l=!0,u(h,f)},u=(f,h)=>{a!==(a=f)&&(a?(r?_i(r):h&&(r=pn(()=>h(i))),o&&Bn(o,()=>{o=null})):(o?_i(o):h&&(o=pn(()=>h(i))),r&&Bn(r,()=>{r=null})))};ti(()=>{l=!1,t(c),l||u(null,null)},s)}function yi(e,t){return t}function id(e,t,n,i){for(var r=[],o=t.length,a=0;a<o;a++)ls(t[a].e,r,!0);var s=o>0&&r.length===0&&n!==null;if(s){var l=n.parentNode;Su(l),l.append(n),i.clear(),an(e,t[0].prev,t[o-1].next)}al(r,()=>{for(var c=0;c<o;c++){var u=t[c];s||(i.delete(u.k),an(e,u.prev,u.next)),Kt(u.e,!s)}})}function Pt(e,t,n,i,r,o=null){var a=e,s={flags:t,items:new Map,first:null},l=(t&Ka)!==0;if(l){var c=e;a=c.appendChild($i())}var u=null,f=!1;ti(()=>{var h=n(),g=qi(h)?h:h==null?[]:Qo(h),y=g.length;if(!(f&&y===0)){f=y===0;{var p=He;rd(g,s,a,r,t,(p.f&Xt)!==0,i)}o!==null&&(y===0?u?_i(u):u=pn(()=>o(a)):u!==null&&Bn(u,()=>{u=null})),n()}})}function rd(e,t,n,i,r,o,a,s){var O,x,z,I;var l=(r&yu)!==0,c=(r&(rs|os))!==0,u=e.length,f=t.items,h=t.first,g=h,y,p=null,N,_=[],m=[],E,k,b,C;if(l)for(C=0;C<u;C+=1)E=e[C],k=a(E,C),b=f.get(k),b!==void 0&&((O=b.a)==null||O.measure(),(N??(N=new Set)).add(b));for(C=0;C<u;C+=1){if(E=e[C],k=a(E,C),b=f.get(k),b===void 0){var S=g?g.e.nodes_start:n;p=sd(S,t,p,p===null?t.first:p.next,E,k,C,i,r),f.set(k,p),_=[],m=[],g=p.next;continue}if(c&&od(b,E,C,r),b.e.f&Xt&&(_i(b.e),l&&((x=b.a)==null||x.unfix(),(N??(N=new Set)).delete(b))),b!==g){if(y!==void 0&&y.has(b)){if(_.length<m.length){var M=m[0],P;p=M.prev;var T=_[0],R=_[_.length-1];for(P=0;P<_.length;P+=1)qs(_[P],M,n);for(P=0;P<m.length;P+=1)y.delete(m[P]);an(t,T.prev,R.next),an(t,p,T),an(t,R,M),g=M,p=R,C-=1,_=[],m=[]}else y.delete(b),qs(b,g,n),an(t,b.prev,b.next),an(t,b,p===null?t.first:p.next),an(t,p,b),p=b;continue}for(_=[],m=[];g!==null&&g.k!==k;)(o||!(g.e.f&Xt))&&(y??(y=new Set)).add(g),m.push(g),g=g.next;if(g===null)continue;b=g}_.push(b),p=b,g=b.next}if(g!==null||y!==void 0){for(var L=y===void 0?[]:Qo(y);g!==null;)(o||!(g.e.f&Xt))&&L.push(g),g=g.next;var D=L.length;if(D>0){var w=r&Ka&&u===0?n:null;if(l){for(C=0;C<D;C+=1)(z=L[C].a)==null||z.measure();for(C=0;C<D;C+=1)(I=L[C].a)==null||I.fix()}id(t,L,w,f)}}l&&Gr(()=>{var A;if(N!==void 0)for(b of N)(A=b.a)==null||A.apply()}),pe.first=t.first&&t.first.e,pe.last=p&&p.e}function od(e,t,n,i){i&rs&&Mo(e.v,t),i&os?Mo(e.i,n):e.i=n}function sd(e,t,n,i,r,o,a,s,l,c){var u=(l&rs)!==0,f=(l&pu)===0,h=u?f?Fr(r):dt(r):r,g=l&os?dt(a):a,y={i:g,v:h,k:o,a:null,e:null,prev:n,next:i};try{return y.e=pn(()=>s(e,h,g),ss),y.e.prev=n&&n.e,y.e.next=i&&i.e,n===null?t.first=y:(n.next=y,n.e.next=y.e),i!==null&&(i.prev=y,i.e.prev=y.e),y}finally{}}function qs(e,t,n){for(var i=e.next?e.next.e.nodes_start:n,r=t?t.e.nodes_start:n,o=e.e.nodes_start;o!==i;){var a=qr(o);r.before(o),o=a}}function an(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function ad(e,t,n,i,r){var o=e,a="",s;ti(()=>{a!==(a=t()??"")&&(s!==void 0&&(Kt(s),s=void 0),a!==""&&(s=pn(()=>{var l=a+"",c=ds(l);_n(Vt(c),c.lastChild),o.before(c)})))})}function Re(e,t,n,i,r){var s;var o=(s=t.$$slots)==null?void 0:s[n],a=!1;o===!0&&(o=t[n==="default"?"children":n],a=!0),o===void 0||o(e,a?()=>i:i)}function ld(e){const t={};e.children&&(t.default=!0);for(const n in e.$$slots)t[n]=!0;return t}function ml(e,t,n){var i=e,r,o;ti(()=>{r!==(r=t())&&(o&&(Bn(o),o=null),r&&(o=pn(()=>n(i,r))))},Ui)}function cd(e,t,n,i,r,o){var a,s,l=null,c=e,u;ti(()=>{const f=t()||null;var h=Ga;f!==a&&(u&&(f===null?Bn(u,()=>{u=null,s=null}):f===s?_i(u):Kt(u)),f&&f!==s&&(u=pn(()=>{if(l=document.createElementNS(h,f),_n(l,l),i){var g=l.appendChild($i());i(l,g)}pe.nodes_end=l,c.before(l)})),a=f,a&&(s=a))},Ui)}function ut(e,t,n){pt(()=>{var i=It(()=>t(e,n==null?void 0:n())||{});if(n&&(i!=null&&i.update)){var r=!1,o={};ei(()=>{var a=n();Y(a),r&&ns(o,a)&&(o=a,i.update(a))}),r=!0}if(i!=null&&i.destroy)return()=>i.destroy()})}function yl(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=yl(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function ud(){for(var e,t,n=0,i="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=yl(e))&&(i&&(i+=" "),i+=t);return i}function Dt(e){return typeof e=="object"?ud(e):e??""}function dd(e,t){var n=e.__attributes??(e.__attributes={});n.checked!==(n.checked=t??void 0)&&(e.checked=t)}function fd(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function Q(e,t,n,i){var r=e.__attributes??(e.__attributes={});r[t]!==(r[t]=n)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[su]=n),n==null?e.removeAttribute(t):typeof n!="string"&&fs(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function pl(e,t,n){var i=He,r=pe;Ft(null),kt(null);try{(Ho.has(e.nodeName)||customElements.get(e.tagName.toLowerCase())?fs(e).includes(t):n&&typeof n=="object")?e[t]=n:Q(e,t,n==null?n:String(n))}finally{Ft(i),kt(r)}}function xi(e,t,n,i,r=!1,o=!1,a=!1){var s=t||{},l=e.tagName==="OPTION";for(var c in t)c in n||(n[c]=null);n.class&&(n.class=Dt(n.class)),i!==void 0&&(n.class=n.class?n.class+" "+i:i);var u=fs(e),f=e.__attributes??(e.__attributes={});for(const m in n){let E=n[m];if(l&&m==="value"&&E==null){e.value=e.__value="",s[m]=E;continue}var h=s[m];if(E!==h){s[m]=E;var g=m[0]+m[1];if(g!=="$$"){if(g==="on"){const k={},b="$$"+m;let C=m.slice(2);var y=qu(C);if(Ku(C)&&(C=C.slice(0,-7),k.capture=!0),!y&&h){if(E!=null)continue;e.removeEventListener(C,s[b],k),s[b]=null}if(E!=null)if(y)e[`__${C}`]=E,rn([C]);else{let S=function(M){s[m].call(this,M)};var _=S;s[b]=vl(C,e,S,k)}else y&&(e[`__${C}`]=void 0)}else if(m==="style"&&E!=null)e.style.cssText=E+"";else if(m==="autofocus")Ju(e,!!E);else if(m==="__value"||m==="value"&&E!=null)e.value=e[m]=e.__value=E;else if(m==="selected"&&l)fd(e,E);else{var p=m;r||(p=Zu(p));var N=p==="defaultValue"||p==="defaultChecked";if(E==null&&!o&&!N)if(f[m]=null,p==="value"||p==="checked"){let k=e;if(p==="value"){let b=k.defaultValue;k.removeAttribute(p),k.defaultValue=b}else{let b=k.defaultChecked;k.removeAttribute(p),k.defaultChecked=b}}else e.removeAttribute(m);else N||u.includes(p)&&(o||typeof E!="string")?e[p]=E:typeof E!="function"&&Q(e,p,E)}m==="style"&&"__styles"in e&&(e.__styles={})}}}return s}var Ho=new Map;function fs(e){var t=Ho.get(e.nodeName);if(t)return t;Ho.set(e.nodeName,t=[]);for(var n,i=e,r=Element.prototype;r!==i;){n=Va(i);for(var o in n)n[o].set&&t.push(o);i=es(i)}return t}function In(e,t,n){var i=e.__className,r=_l(t,n);(i!==r||ss)&&(r===""?e.removeAttribute("class"):e.setAttribute("class",r),e.__className=r)}function hs(e,t,n){var i=e.__className,r=_l(t,n);(i!==r||ss)&&(t==null&&!n?e.removeAttribute("class"):e.className=r,e.__className=r)}function _l(e,t){return(e??"")+(t?" "+t:"")}function Ye(e,t,n){if(n){if(e.classList.contains(t))return;e.classList.add(t)}else{if(!e.classList.contains(t))return;e.classList.remove(t)}}function We(e,t,n,i){var r=e.__styles??(e.__styles={});r[t]!==n&&(r[t]=n,n==null?e.style.removeProperty(t):e.style.setProperty(t,n,""))}function wl(e,t,n=t){var i=Ur();Qu(e,"input",r=>{var o=r?e.defaultValue:e.value;if(o=ho(e)?go(o):o,n(o),i&&o!==(o=t())){var a=e.selectionStart,s=e.selectionEnd;e.value=o??"",s!==null&&(e.selectionStart=a,e.selectionEnd=Math.min(s,e.value.length))}}),It(t)==null&&e.value&&n(ho(e)?go(e.value):e.value),ei(()=>{var r=t();ho(e)&&r===go(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function ho(e){var t=e.type;return t==="number"||t==="range"}function go(e){return e===""?null:+e}var un,Wn,zi,Xr,xl;const Yr=class Yr{constructor(t){Xe(this,Xr);Xe(this,un,new WeakMap);Xe(this,Wn);Xe(this,zi);fo(this,zi,t)}observe(t,n){var i=ve(this,un).get(t)||new Set;return i.add(n),ve(this,un).set(t,i),mt(this,Xr,xl).call(this).observe(t,ve(this,zi)),()=>{var r=ve(this,un).get(t);r.delete(n),r.size===0&&(ve(this,un).delete(t),ve(this,Wn).unobserve(t))}}};un=new WeakMap,Wn=new WeakMap,zi=new WeakMap,Xr=new WeakSet,xl=function(){return ve(this,Wn)??fo(this,Wn,new ResizeObserver(t=>{for(var n of t){Yr.entries.set(n.target,n);for(var i of ve(this,un).get(n.target)||[])i(n)}}))},Xs(Yr,"entries",new WeakMap);let Ro=Yr;var hd=new Ro({box:"border-box"});function Nr(e,t,n){var i=hd.observe(e,()=>n(e[t]));pt(()=>(It(()=>n(e[t])),i))}function Gs(e,t){return e===t||(e==null?void 0:e[hn])===t}function ji(e={},t,n,i){return pt(()=>{var r,o;return ei(()=>{r=o,o=[],It(()=>{e!==n(...o)&&(t(e,...o),r&&Gs(n(...r),e)&&t(null,...r))})}),()=>{Gr(()=>{o&&Gs(n(...o),e)&&t(null,...o)})}}),e}function he(e=!1){const t=Se,n=t.l.u;if(!n)return;let i=()=>Y(t.s);if(e){let r=0,o={};const a=yn(()=>{let s=!1;const l=t.s;for(const c in l)l[c]!==o[c]&&(o[c]=l[c],s=!0);return s&&r++,r});i=()=>d(a)}n.b.length&&Mu(()=>{Zs(t,i),br(n.b)}),Po(()=>{const r=It(()=>n.m.map(nu));return()=>{for(const o of r)typeof o=="function"&&o()}}),n.a.length&&Po(()=>{Zs(t,i),br(n.a)})}function Zs(e,t){if(e.l.s)for(const n of e.l.s)d(n);t()}function bl(e){var t=dt(0);return function(){return arguments.length===1?(H(t,d(t)+1),arguments[0]):(d(t),e())}}function Ee(e,t){var o;var n=(o=e.$$events)==null?void 0:o[t.type],i=qi(n)?n.slice():n==null?[]:[n];for(var r of i)r.call(this,t)}function gs(e,t,n){if(e==null)return t(void 0),n&&n(void 0),jt;const i=It(()=>e.subscribe(t,n));return i.unsubscribe?()=>i.unsubscribe():i}let ar=!1;function q(e,t,n){const i=n[t]??(n[t]={store:null,source:Fr(void 0),unsubscribe:jt});if(i.store!==e)if(i.unsubscribe(),i.store=e??null,e==null)i.source.v=void 0,i.unsubscribe=jt;else{var r=!0;i.unsubscribe=gs(e,o=>{r?i.source.v=o:H(i.source,o)}),r=!1}return d(i.source)}function gd(e,t,n){let i=n[t];return i&&i.store!==e&&(i.unsubscribe(),i.unsubscribe=jt),e}function bi(e,t){return e.set(t),t}function Je(){const e={};return nl(()=>{for(var t in e)e[t].unsubscribe()}),e}function vd(e){var t=ar;try{return ar=!1,[e(),ar]}finally{ar=t}}const md={get(e,t){if(!e.exclude.includes(t))return d(e.version),t in e.special?e.special[t]():e.props[t]},set(e,t,n){return t in e.special||(e.special[t]=v({get[t](){return e.props[t]}},t,Fa)),e.special[t](n),Ks(e.version),!0},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},deleteProperty(e,t){return e.exclude.includes(t)||(e.exclude.push(t),Ks(e.version)),!0},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function _e(e,t){return new Proxy({props:e,exclude:t,special:{},version:dt(0)},md)}const yd={get(e,t){let n=e.props.length;for(;n--;){let i=e.props[n];if(li(i)&&(i=i()),typeof i=="object"&&i!==null&&t in i)return i[t]}},set(e,t,n){let i=e.props.length;for(;i--;){let r=e.props[i];li(r)&&(r=r());const o=fn(r,t);if(o&&o.set)return o.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let i=e.props[n];if(li(i)&&(i=i()),typeof i=="object"&&i!==null&&t in i){const r=fn(i,t);return r&&!r.configurable&&(r.configurable=!0),r}}},has(e,t){if(t===hn||t===Wa)return!1;for(let n of e.props)if(li(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props){li(n)&&(n=n());for(const i in n)t.includes(i)||t.push(i)}return t}};function Qe(...e){return new Proxy({props:e},yd)}function Us(e){for(var t=pe,n=pe;t!==null&&!(t.f&(Tt|Zi));)t=t.parent;try{return kt(t),e()}finally{kt(n)}}function v(e,t,n,i){var S;var r=(n&_u)!==0,o=!jn||(n&wu)!==0,a=(n&xu)!==0,s=(n&bu)!==0,l=!1,c;a?[c,l]=vd(()=>e[t]):c=e[t];var u=hn in e||Wa in e,f=((S=fn(e,t))==null?void 0:S.set)??(u&&a&&t in e?M=>e[t]=M:void 0),h=i,g=!0,y=!1,p=()=>(y=!0,g&&(g=!1,s?h=It(i):h=i),h);c===void 0&&i!==void 0&&(f&&o&&du(),c=p(),f&&f(c));var N;if(o)N=()=>{var M=e[t];return M===void 0?p():(g=!0,y=!1,M)};else{var _=Us(()=>(r?yn:oe)(()=>e[t]));_.f|=ru,N=()=>{var M=d(_);return M!==void 0&&(h=void 0),M===void 0?h:M}}if(!(n&Fa))return N;if(f){var m=e.$$legacy;return function(M,P){return arguments.length>0?((!o||!P||m||l)&&f(P?N():M),M):N()}}var E=!1,k=!1,b=Fr(c),C=Us(()=>yn(()=>{var M=N(),P=d(b);return E?(E=!1,k=!0,P):(k=!1,b.v=M)}));return r||(C.equals=is),function(M,P){if(arguments.length>0){const T=P?d(C):o&&a?Ve(M):M;return C.equals(T)||(E=!0,H(b,T),y&&h!==void 0&&(h=T),It(()=>d(C))),M}return d(C)}}function ii(e){Se===null&&Zr(),jn&&Se.l!==null?_d(Se).m.push(e):Po(()=>{const t=It(e);if(typeof t=="function")return t})}function El(e){Se===null&&Zr(),ii(()=>()=>It(e))}function pd(e,t,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:i})}function jr(){const e=Se;return e===null&&Zr(),(t,n,i)=>{var o;const r=(o=e.s.$$events)==null?void 0:o[t];if(r){const a=qi(r)?r.slice():[r],s=pd(t,n,i);for(const l of a)l.call(e.x,s);return!s.defaultPrevented}return!0}}function _d(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const wd="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(wd);mu();const Dn=[];function Et(e,t){return{subscribe:re(e,t).subscribe}}function re(e,t=jt){let n=null;const i=new Set;function r(s){if(ns(e,s)&&(e=s,n)){const l=!Dn.length;for(const c of i)c[1](),Dn.push(c,e);if(l){for(let c=0;c<Dn.length;c+=2)Dn[c][0](Dn[c+1]);Dn.length=0}}}function o(s){r(s(e))}function a(s,l=jt){const c=[s,l];return i.add(c),i.size===1&&(n=t(r,o)||jt),s(e),()=>{i.delete(c),i.size===0&&n&&(n(),n=null)}}return{set:r,update:o,subscribe:a}}function Cn(e,t,n){const i=!Array.isArray(e),r=i?[e]:e;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=t.length<2;return Et(n,(a,s)=>{let l=!1;const c=[];let u=0,f=jt;const h=()=>{if(u)return;f();const y=t(i?c[0]:c,a,s);o?a(y):f=typeof y=="function"?y:jt},g=r.map((y,p)=>gs(y,N=>{c[p]=N,u&=~(1<<p),l&&h()},()=>{u|=1<<p}));return l=!0,h(),function(){br(g),f(),l=!1}})}function V(e){let t;return gs(e,n=>t=n)(),t}function at(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,i;n<e.length;n++)(i=at(e[n]))!==""&&(t+=(t&&" ")+i);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var xd={value:()=>{}};function Qr(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new yr(n)}function yr(e){this._=e}function bd(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}yr.prototype=Qr.prototype={constructor:yr,on:function(e,t){var n=this._,i=bd(e+"",n),r,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((r=(e=i[o]).type)&&(r=Ed(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(r=(e=i[o]).type)n[r]=$s(n[r],e.name,t);else if(t==null)for(r in n)n[r]=$s(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new yr(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)}};function Ed(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function $s(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=xd,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Lo="http://www.w3.org/1999/xhtml";const Js={svg:"http://www.w3.org/2000/svg",xhtml:Lo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function eo(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Js.hasOwnProperty(t)?{space:Js[t],local:e}:e}function kd(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Lo&&t.documentElement.namespaceURI===Lo?t.createElement(e):t.createElementNS(n,e)}}function Sd(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function kl(e){var t=eo(e);return(t.local?Sd:kd)(t)}function Cd(){}function vs(e){return e==null?Cd:function(){return this.querySelector(e)}}function Nd(e){typeof e!="function"&&(e=vs(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],a=o.length,s=i[r]=new Array(a),l,c,u=0;u<a;++u)(l=o[u])&&(c=e.call(l,l.__data__,u,o))&&("__data__"in l&&(c.__data__=l.__data__),s[u]=c);return new wt(i,this._parents)}function Md(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Pd(){return[]}function Sl(e){return e==null?Pd:function(){return this.querySelectorAll(e)}}function zd(e){return function(){return Md(e.apply(this,arguments))}}function Ad(e){typeof e=="function"?e=zd(e):e=Sl(e);for(var t=this._groups,n=t.length,i=[],r=[],o=0;o<n;++o)for(var a=t[o],s=a.length,l,c=0;c<s;++c)(l=a[c])&&(i.push(e.call(l,l.__data__,c,a)),r.push(l));return new wt(i,r)}function Cl(e){return function(){return this.matches(e)}}function Nl(e){return function(t){return t.matches(e)}}var Id=Array.prototype.find;function Td(e){return function(){return Id.call(this.children,e)}}function Od(){return this.firstElementChild}function Dd(e){return this.select(e==null?Od:Td(typeof e=="function"?e:Nl(e)))}var Hd=Array.prototype.filter;function Rd(){return Array.from(this.children)}function Ld(e){return function(){return Hd.call(this.children,e)}}function Vd(e){return this.selectAll(e==null?Rd:Ld(typeof e=="function"?e:Nl(e)))}function Xd(e){typeof e!="function"&&(e=Cl(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],a=o.length,s=i[r]=[],l,c=0;c<a;++c)(l=o[c])&&e.call(l,l.__data__,c,o)&&s.push(l);return new wt(i,this._parents)}function Ml(e){return new Array(e.length)}function Yd(){return new wt(this._enter||this._groups.map(Ml),this._parents)}function Mr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Mr.prototype={constructor:Mr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Wd(e){return function(){return e}}function Bd(e,t,n,i,r,o){for(var a=0,s,l=t.length,c=o.length;a<c;++a)(s=t[a])?(s.__data__=o[a],i[a]=s):n[a]=new Mr(e,o[a]);for(;a<l;++a)(s=t[a])&&(r[a]=s)}function Kd(e,t,n,i,r,o,a){var s,l,c=new Map,u=t.length,f=o.length,h=new Array(u),g;for(s=0;s<u;++s)(l=t[s])&&(h[s]=g=a.call(l,l.__data__,s,t)+"",c.has(g)?r[s]=l:c.set(g,l));for(s=0;s<f;++s)g=a.call(e,o[s],s,o)+"",(l=c.get(g))?(i[s]=l,l.__data__=o[s],c.delete(g)):n[s]=new Mr(e,o[s]);for(s=0;s<u;++s)(l=t[s])&&c.get(h[s])===l&&(r[s]=l)}function Fd(e){return e.__data__}function qd(e,t){if(!arguments.length)return Array.from(this,Fd);var n=t?Kd:Bd,i=this._parents,r=this._groups;typeof e!="function"&&(e=Wd(e));for(var o=r.length,a=new Array(o),s=new Array(o),l=new Array(o),c=0;c<o;++c){var u=i[c],f=r[c],h=f.length,g=Gd(e.call(u,u&&u.__data__,c,i)),y=g.length,p=s[c]=new Array(y),N=a[c]=new Array(y),_=l[c]=new Array(h);n(u,f,p,N,_,g,t);for(var m=0,E=0,k,b;m<y;++m)if(k=p[m]){for(m>=E&&(E=m+1);!(b=N[E])&&++E<y;);k._next=b||null}}return a=new wt(a,i),a._enter=s,a._exit=l,a}function Gd(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Zd(){return new wt(this._exit||this._groups.map(Ml),this._parents)}function Ud(e,t,n){var i=this.enter(),r=this,o=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function $d(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,o=i.length,a=Math.min(r,o),s=new Array(r),l=0;l<a;++l)for(var c=n[l],u=i[l],f=c.length,h=s[l]=new Array(f),g,y=0;y<f;++y)(g=c[y]||u[y])&&(h[y]=g);for(;l<r;++l)s[l]=n[l];return new wt(s,this._parents)}function Jd(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,o=i[r],a;--r>=0;)(a=i[r])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function jd(e){e||(e=Qd);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var a=n[o],s=a.length,l=r[o]=new Array(s),c,u=0;u<s;++u)(c=a[u])&&(l[u]=c);l.sort(t)}return new wt(r,this._parents).order()}function Qd(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ef(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function tf(){return Array.from(this)}function nf(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null}function rf(){let e=0;for(const t of this)++e;return e}function of(){return!this.node()}function sf(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],o=0,a=r.length,s;o<a;++o)(s=r[o])&&e.call(s,s.__data__,o,r);return this}function af(e){return function(){this.removeAttribute(e)}}function lf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function cf(e,t){return function(){this.setAttribute(e,t)}}function uf(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function df(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function ff(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function hf(e,t){var n=eo(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?lf:af:typeof t=="function"?n.local?ff:df:n.local?uf:cf)(n,t))}function Pl(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function gf(e){return function(){this.style.removeProperty(e)}}function vf(e,t,n){return function(){this.style.setProperty(e,t,n)}}function mf(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function yf(e,t,n){return arguments.length>1?this.each((t==null?gf:typeof t=="function"?mf:vf)(e,t,n??"")):Fn(this.node(),e)}function Fn(e,t){return e.style.getPropertyValue(t)||Pl(e).getComputedStyle(e,null).getPropertyValue(t)}function pf(e){return function(){delete this[e]}}function _f(e,t){return function(){this[e]=t}}function wf(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function xf(e,t){return arguments.length>1?this.each((t==null?pf:typeof t=="function"?wf:_f)(e,t)):this.node()[e]}function zl(e){return e.trim().split(/^|\s+/)}function ms(e){return e.classList||new Al(e)}function Al(e){this._node=e,this._names=zl(e.getAttribute("class")||"")}Al.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Il(e,t){for(var n=ms(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function Tl(e,t){for(var n=ms(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function bf(e){return function(){Il(this,e)}}function Ef(e){return function(){Tl(this,e)}}function kf(e,t){return function(){(t.apply(this,arguments)?Il:Tl)(this,e)}}function Sf(e,t){var n=zl(e+"");if(arguments.length<2){for(var i=ms(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?kf:t?bf:Ef)(n,t))}function Cf(){this.textContent=""}function Nf(e){return function(){this.textContent=e}}function Mf(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Pf(e){return arguments.length?this.each(e==null?Cf:(typeof e=="function"?Mf:Nf)(e)):this.node().textContent}function zf(){this.innerHTML=""}function Af(e){return function(){this.innerHTML=e}}function If(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Tf(e){return arguments.length?this.each(e==null?zf:(typeof e=="function"?If:Af)(e)):this.node().innerHTML}function Of(){this.nextSibling&&this.parentNode.appendChild(this)}function Df(){return this.each(Of)}function Hf(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Rf(){return this.each(Hf)}function Lf(e){var t=typeof e=="function"?e:kl(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Vf(){return null}function Xf(e,t){var n=typeof e=="function"?e:kl(e),i=t==null?Vf:typeof t=="function"?t:vs(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Yf(){var e=this.parentNode;e&&e.removeChild(this)}function Wf(){return this.each(Yf)}function Bf(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Kf(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ff(e){return this.select(e?Kf:Bf)}function qf(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Gf(e){return function(t){e.call(this,t,this.__data__)}}function Zf(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function Uf(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,r=t.length,o;n<r;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++i]=o;++i?t.length=i:delete this.__on}}}function $f(e,t,n){return function(){var i=this.__on,r,o=Gf(t);if(i){for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=t;return}}this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Jf(e,t,n){var i=Zf(e+""),r,o=i.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,c=s.length,u;l<c;++l)for(r=0,u=s[l];r<o;++r)if((a=i[r]).type===u.type&&a.name===u.name)return u.value}return}for(s=t?$f:Uf,r=0;r<o;++r)this.each(s(i[r],t,n));return this}function Ol(e,t,n){var i=Pl(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function jf(e,t){return function(){return Ol(this,e,t)}}function Qf(e,t){return function(){return Ol(this,e,t.apply(this,arguments))}}function eh(e,t){return this.each((typeof t=="function"?Qf:jf)(e,t))}function*th(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length,a;r<o;++r)(a=i[r])&&(yield a)}var Dl=[null];function wt(e,t){this._groups=e,this._parents=t}function Qi(){return new wt([[document.documentElement]],Dl)}function nh(){return this}wt.prototype=Qi.prototype={constructor:wt,select:Nd,selectAll:Ad,selectChild:Dd,selectChildren:Vd,filter:Xd,data:qd,enter:Yd,exit:Zd,join:Ud,merge:$d,selection:nh,order:Jd,sort:jd,call:ef,nodes:tf,node:nf,size:rf,empty:of,each:sf,attr:hf,style:yf,property:xf,classed:Sf,text:Pf,html:Tf,raise:Df,lower:Rf,append:Lf,insert:Xf,remove:Wf,clone:Ff,datum:qf,on:Jf,dispatch:eh,[Symbol.iterator]:th};function _t(e){return typeof e=="string"?new wt([[document.querySelector(e)]],[document.documentElement]):new wt([[e]],Dl)}function ih(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Nt(e,t){if(e=ih(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const rh={passive:!1},Ei={capture:!0,passive:!1};function vo(e){e.stopImmediatePropagation()}function Ln(e){e.preventDefault(),e.stopImmediatePropagation()}function Hl(e){var t=e.document.documentElement,n=_t(e).on("dragstart.drag",Ln,Ei);"onselectstart"in t?n.on("selectstart.drag",Ln,Ei):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Rl(e,t){var n=e.document.documentElement,i=_t(e).on("dragstart.drag",null);t&&(i.on("click.drag",Ln,Ei),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const lr=e=>()=>e;function Vo(e,{sourceEvent:t,subject:n,target:i,identifier:r,active:o,x:a,y:s,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}Vo.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function oh(e){return!e.ctrlKey&&!e.button}function sh(){return this.parentNode}function ah(e,t){return t??{x:e.x,y:e.y}}function lh(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ll(){var e=oh,t=sh,n=ah,i=lh,r={},o=Qr("start","drag","end"),a=0,s,l,c,u,f=0;function h(k){k.on("mousedown.drag",g).filter(i).on("touchstart.drag",N).on("touchmove.drag",_,rh).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(k,b){if(!(u||!e.call(this,k,b))){var C=E(this,t.call(this,k,b),k,b,"mouse");C&&(_t(k.view).on("mousemove.drag",y,Ei).on("mouseup.drag",p,Ei),Hl(k.view),vo(k),c=!1,s=k.clientX,l=k.clientY,C("start",k))}}function y(k){if(Ln(k),!c){var b=k.clientX-s,C=k.clientY-l;c=b*b+C*C>f}r.mouse("drag",k)}function p(k){_t(k.view).on("mousemove.drag mouseup.drag",null),Rl(k.view,c),Ln(k),r.mouse("end",k)}function N(k,b){if(e.call(this,k,b)){var C=k.changedTouches,S=t.call(this,k,b),M=C.length,P,T;for(P=0;P<M;++P)(T=E(this,S,k,b,C[P].identifier,C[P]))&&(vo(k),T("start",k,C[P]))}}function _(k){var b=k.changedTouches,C=b.length,S,M;for(S=0;S<C;++S)(M=r[b[S].identifier])&&(Ln(k),M("drag",k,b[S]))}function m(k){var b=k.changedTouches,C=b.length,S,M;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),S=0;S<C;++S)(M=r[b[S].identifier])&&(vo(k),M("end",k,b[S]))}function E(k,b,C,S,M,P){var T=o.copy(),R=Nt(P||C,b),L,D,w;if((w=n.call(k,new Vo("beforestart",{sourceEvent:C,target:h,identifier:M,active:a,x:R[0],y:R[1],dx:0,dy:0,dispatch:T}),S))!=null)return L=w.x-R[0]||0,D=w.y-R[1]||0,function O(x,z,I){var A=R,X;switch(x){case"start":r[M]=O,X=a++;break;case"end":delete r[M],--a;case"drag":R=Nt(I||z,b),X=a;break}T.call(x,k,new Vo(x,{sourceEvent:z,subject:w,target:h,identifier:M,active:X,x:R[0]+L,y:R[1]+D,dx:R[0]-A[0],dy:R[1]-A[1],dispatch:T}),S)}}return h.filter=function(k){return arguments.length?(e=typeof k=="function"?k:lr(!!k),h):e},h.container=function(k){return arguments.length?(t=typeof k=="function"?k:lr(k),h):t},h.subject=function(k){return arguments.length?(n=typeof k=="function"?k:lr(k),h):n},h.touchable=function(k){return arguments.length?(i=typeof k=="function"?k:lr(!!k),h):i},h.on=function(){var k=o.on.apply(o,arguments);return k===o?h:k},h.clickDistance=function(k){return arguments.length?(f=(k=+k)*k,h):Math.sqrt(f)},h}function ys(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Vl(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function er(){}var ki=.7,Pr=1/ki,Vn="\\s*([+-]?\\d+)\\s*",Si="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ch=/^#([0-9a-f]{3,8})$/,uh=new RegExp(`^rgb\\(${Vn},${Vn},${Vn}\\)$`),dh=new RegExp(`^rgb\\(${Wt},${Wt},${Wt}\\)$`),fh=new RegExp(`^rgba\\(${Vn},${Vn},${Vn},${Si}\\)$`),hh=new RegExp(`^rgba\\(${Wt},${Wt},${Wt},${Si}\\)$`),gh=new RegExp(`^hsl\\(${Si},${Wt},${Wt}\\)$`),vh=new RegExp(`^hsla\\(${Si},${Wt},${Wt},${Si}\\)$`),js={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ys(er,Ci,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Qs,formatHex:Qs,formatHex8:mh,formatHsl:yh,formatRgb:ea,toString:ea});function Qs(){return this.rgb().formatHex()}function mh(){return this.rgb().formatHex8()}function yh(){return Xl(this).formatHsl()}function ea(){return this.rgb().formatRgb()}function Ci(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ch.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ta(t):n===3?new gt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?cr(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?cr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=uh.exec(e))?new gt(t[1],t[2],t[3],1):(t=dh.exec(e))?new gt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=fh.exec(e))?cr(t[1],t[2],t[3],t[4]):(t=hh.exec(e))?cr(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=gh.exec(e))?ra(t[1],t[2]/100,t[3]/100,1):(t=vh.exec(e))?ra(t[1],t[2]/100,t[3]/100,t[4]):js.hasOwnProperty(e)?ta(js[e]):e==="transparent"?new gt(NaN,NaN,NaN,0):null}function ta(e){return new gt(e>>16&255,e>>8&255,e&255,1)}function cr(e,t,n,i){return i<=0&&(e=t=n=NaN),new gt(e,t,n,i)}function ph(e){return e instanceof er||(e=Ci(e)),e?(e=e.rgb(),new gt(e.r,e.g,e.b,e.opacity)):new gt}function Xo(e,t,n,i){return arguments.length===1?ph(e):new gt(e,t,n,i??1)}function gt(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}ys(gt,Xo,Vl(er,{brighter(e){return e=e==null?Pr:Math.pow(Pr,e),new gt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ki:Math.pow(ki,e),new gt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new gt(Nn(this.r),Nn(this.g),Nn(this.b),zr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:na,formatHex:na,formatHex8:_h,formatRgb:ia,toString:ia}));function na(){return`#${kn(this.r)}${kn(this.g)}${kn(this.b)}`}function _h(){return`#${kn(this.r)}${kn(this.g)}${kn(this.b)}${kn((isNaN(this.opacity)?1:this.opacity)*255)}`}function ia(){const e=zr(this.opacity);return`${e===1?"rgb(":"rgba("}${Nn(this.r)}, ${Nn(this.g)}, ${Nn(this.b)}${e===1?")":`, ${e})`}`}function zr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Nn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function kn(e){return e=Nn(e),(e<16?"0":"")+e.toString(16)}function ra(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Mt(e,t,n,i)}function Xl(e){if(e instanceof Mt)return new Mt(e.h,e.s,e.l,e.opacity);if(e instanceof er||(e=Ci(e)),!e)return new Mt;if(e instanceof Mt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),o=Math.max(t,n,i),a=NaN,s=o-r,l=(o+r)/2;return s?(t===o?a=(n-i)/s+(n<i)*6:n===o?a=(i-t)/s+2:a=(t-n)/s+4,s/=l<.5?o+r:2-o-r,a*=60):s=l>0&&l<1?0:a,new Mt(a,s,l,e.opacity)}function wh(e,t,n,i){return arguments.length===1?Xl(e):new Mt(e,t,n,i??1)}function Mt(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}ys(Mt,wh,Vl(er,{brighter(e){return e=e==null?Pr:Math.pow(Pr,e),new Mt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ki:Math.pow(ki,e),new Mt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new gt(mo(e>=240?e-240:e+120,r,i),mo(e,r,i),mo(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new Mt(oa(this.h),ur(this.s),ur(this.l),zr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=zr(this.opacity);return`${e===1?"hsl(":"hsla("}${oa(this.h)}, ${ur(this.s)*100}%, ${ur(this.l)*100}%${e===1?")":`, ${e})`}`}}));function oa(e){return e=(e||0)%360,e<0?e+360:e}function ur(e){return Math.max(0,Math.min(1,e||0))}function mo(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Yl=e=>()=>e;function xh(e,t){return function(n){return e+n*t}}function bh(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function Eh(e){return(e=+e)==1?Wl:function(t,n){return n-t?bh(t,n,e):Yl(isNaN(t)?n:t)}}function Wl(e,t){var n=t-e;return n?xh(e,n):Yl(isNaN(e)?t:e)}const sa=function e(t){var n=Eh(t);function i(r,o){var a=n((r=Xo(r)).r,(o=Xo(o)).r),s=n(r.g,o.g),l=n(r.b,o.b),c=Wl(r.opacity,o.opacity);return function(u){return r.r=a(u),r.g=s(u),r.b=l(u),r.opacity=c(u),r+""}}return i.gamma=e,i}(1);function ln(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Yo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yo=new RegExp(Yo.source,"g");function kh(e){return function(){return e}}function Sh(e){return function(t){return e(t)+""}}function Ch(e,t){var n=Yo.lastIndex=yo.lastIndex=0,i,r,o,a=-1,s=[],l=[];for(e=e+"",t=t+"";(i=Yo.exec(e))&&(r=yo.exec(t));)(o=r.index)>n&&(o=t.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(i=i[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:ln(i,r)})),n=yo.lastIndex;return n<t.length&&(o=t.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?Sh(l[0].x):kh(t):(t=l.length,function(c){for(var u=0,f;u<t;++u)s[(f=l[u]).i]=f.x(c);return s.join("")})}var aa=180/Math.PI,Wo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Bl(e,t,n,i,r,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,l/=s),e*i<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(t,e)*aa,skewX:Math.atan(l)*aa,scaleX:a,scaleY:s}}var dr;function Nh(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Wo:Bl(t.a,t.b,t.c,t.d,t.e,t.f)}function Mh(e){return e==null||(dr||(dr=document.createElementNS("http://www.w3.org/2000/svg","g")),dr.setAttribute("transform",e),!(e=dr.transform.baseVal.consolidate()))?Wo:(e=e.matrix,Bl(e.a,e.b,e.c,e.d,e.e,e.f))}function Kl(e,t,n,i){function r(c){return c.length?c.pop()+" ":""}function o(c,u,f,h,g,y){if(c!==f||u!==h){var p=g.push("translate(",null,t,null,n);y.push({i:p-4,x:ln(c,f)},{i:p-2,x:ln(u,h)})}else(f||h)&&g.push("translate("+f+t+h+n)}function a(c,u,f,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:f.push(r(f)+"rotate(",null,i)-2,x:ln(c,u)})):u&&f.push(r(f)+"rotate("+u+i)}function s(c,u,f,h){c!==u?h.push({i:f.push(r(f)+"skewX(",null,i)-2,x:ln(c,u)}):u&&f.push(r(f)+"skewX("+u+i)}function l(c,u,f,h,g,y){if(c!==f||u!==h){var p=g.push(r(g)+"scale(",null,",",null,")");y.push({i:p-4,x:ln(c,f)},{i:p-2,x:ln(u,h)})}else(f!==1||h!==1)&&g.push(r(g)+"scale("+f+","+h+")")}return function(c,u){var f=[],h=[];return c=e(c),u=e(u),o(c.translateX,c.translateY,u.translateX,u.translateY,f,h),a(c.rotate,u.rotate,f,h),s(c.skewX,u.skewX,f,h),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,h),c=u=null,function(g){for(var y=-1,p=h.length,N;++y<p;)f[(N=h[y]).i]=N.x(g);return f.join("")}}}var Ph=Kl(Nh,"px, ","px)","deg)"),zh=Kl(Mh,", ",")",")"),Ah=1e-12;function la(e){return((e=Math.exp(e))+1/e)/2}function Ih(e){return((e=Math.exp(e))-1/e)/2}function Th(e){return((e=Math.exp(2*e))-1)/(e+1)}const Oh=function e(t,n,i){function r(o,a){var s=o[0],l=o[1],c=o[2],u=a[0],f=a[1],h=a[2],g=u-s,y=f-l,p=g*g+y*y,N,_;if(p<Ah)_=Math.log(h/c)/t,N=function(S){return[s+S*g,l+S*y,c*Math.exp(t*S*_)]};else{var m=Math.sqrt(p),E=(h*h-c*c+i*p)/(2*c*n*m),k=(h*h-c*c-i*p)/(2*h*n*m),b=Math.log(Math.sqrt(E*E+1)-E),C=Math.log(Math.sqrt(k*k+1)-k);_=(C-b)/t,N=function(S){var M=S*_,P=la(b),T=c/(n*m)*(P*Th(t*M+b)-Ih(b));return[s+T*g,l+T*y,c*P/la(t*M+b)]}}return N.duration=_*1e3*t/Math.SQRT2,N}return r.rho=function(o){var a=Math.max(.001,+o),s=a*a,l=s*s;return e(a,s,l)},r}(Math.SQRT2,2,4);var qn=0,hi=0,ci=0,Fl=1e3,Ar,gi,Ir=0,Mn=0,to=0,Ni=typeof performance=="object"&&performance.now?performance:Date,ql=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ps(){return Mn||(ql(Dh),Mn=Ni.now()+to)}function Dh(){Mn=0}function Tr(){this._call=this._time=this._next=null}Tr.prototype=Gl.prototype={constructor:Tr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ps():+n)+(t==null?0:+t),!this._next&&gi!==this&&(gi?gi._next=this:Ar=this,gi=this),this._call=e,this._time=n,Bo()},stop:function(){this._call&&(this._call=null,this._time=1/0,Bo())}};function Gl(e,t,n){var i=new Tr;return i.restart(e,t,n),i}function Hh(){ps(),++qn;for(var e=Ar,t;e;)(t=Mn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--qn}function ca(){Mn=(Ir=Ni.now())+to,qn=hi=0;try{Hh()}finally{qn=0,Lh(),Mn=0}}function Rh(){var e=Ni.now(),t=e-Ir;t>Fl&&(to-=t,Ir=e)}function Lh(){for(var e,t=Ar,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ar=n);gi=e,Bo(i)}function Bo(e){if(!qn){hi&&(hi=clearTimeout(hi));var t=e-Mn;t>24?(e<1/0&&(hi=setTimeout(ca,e-Ni.now()-to)),ci&&(ci=clearInterval(ci))):(ci||(Ir=Ni.now(),ci=setInterval(Rh,Fl)),qn=1,ql(ca))}}function ua(e,t,n){var i=new Tr;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var Vh=Qr("start","end","cancel","interrupt"),Xh=[],Zl=0,da=1,Ko=2,pr=3,fa=4,Fo=5,_r=6;function no(e,t,n,i,r,o){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;Yh(e,n,{name:t,index:i,group:r,on:Vh,tween:Xh,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Zl})}function _s(e,t){var n=Ht(e,t);if(n.state>Zl)throw new Error("too late; already scheduled");return n}function Gt(e,t){var n=Ht(e,t);if(n.state>pr)throw new Error("too late; already running");return n}function Ht(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Yh(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=Gl(o,0,n.time);function o(c){n.state=da,n.timer.restart(a,n.delay,n.time),n.delay<=c&&a(c-n.delay)}function a(c){var u,f,h,g;if(n.state!==da)return l();for(u in i)if(g=i[u],g.name===n.name){if(g.state===pr)return ua(a);g.state===fa?(g.state=_r,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete i[u]):+u<t&&(g.state=_r,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete i[u])}if(ua(function(){n.state===pr&&(n.state=fa,n.timer.restart(s,n.delay,n.time),s(c))}),n.state=Ko,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ko){for(n.state=pr,r=new Array(h=n.tween.length),u=0,f=-1;u<h;++u)(g=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++f]=g);r.length=f+1}}function s(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Fo,1),f=-1,h=r.length;++f<h;)r[f].call(e,u);n.state===Fo&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=_r,n.timer.stop(),delete i[t];for(var c in i)return;delete e.__transition}}function wr(e,t){var n=e.__transition,i,r,o=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((i=n[a]).name!==t){o=!1;continue}r=i.state>Ko&&i.state<Fo,i.state=_r,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[a]}o&&delete e.__transition}}function Wh(e){return this.each(function(){wr(this,e)})}function Bh(e,t){var n,i;return function(){var r=Gt(this,e),o=r.tween;if(o!==n){i=n=o;for(var a=0,s=i.length;a<s;++a)if(i[a].name===t){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function Kh(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var o=Gt(this,e),a=o.tween;if(a!==i){r=(i=a).slice();for(var s={name:t,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=s;break}l===c&&r.push(s)}o.tween=r}}function Fh(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=Ht(this.node(),n).tween,r=0,o=i.length,a;r<o;++r)if((a=i[r]).name===e)return a.value;return null}return this.each((t==null?Bh:Kh)(n,e,t))}function ws(e,t,n){var i=e._id;return e.each(function(){var r=Gt(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Ht(r,i).value[t]}}function Ul(e,t){var n;return(typeof t=="number"?ln:t instanceof Ci?sa:(n=Ci(t))?(t=n,sa):Ch)(e,t)}function qh(e){return function(){this.removeAttribute(e)}}function Gh(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Zh(e,t,n){var i,r=n+"",o;return function(){var a=this.getAttribute(e);return a===r?null:a===i?o:o=t(i=a,n)}}function Uh(e,t,n){var i,r=n+"",o;return function(){var a=this.getAttributeNS(e.space,e.local);return a===r?null:a===i?o:o=t(i=a,n)}}function $h(e,t,n){var i,r,o;return function(){var a,s=n(this),l;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=s+"",a===l?null:a===i&&l===r?o:(r=l,o=t(i=a,s)))}}function Jh(e,t,n){var i,r,o;return function(){var a,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=s+"",a===l?null:a===i&&l===r?o:(r=l,o=t(i=a,s)))}}function jh(e,t){var n=eo(e),i=n==="transform"?zh:Ul;return this.attrTween(e,typeof t=="function"?(n.local?Jh:$h)(n,i,ws(this,"attr."+e,t)):t==null?(n.local?Gh:qh)(n):(n.local?Uh:Zh)(n,i,t))}function Qh(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function eg(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function tg(e,t){var n,i;function r(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&eg(e,o)),n}return r._value=t,r}function ng(e,t){var n,i;function r(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&Qh(e,o)),n}return r._value=t,r}function ig(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=eo(e);return this.tween(n,(i.local?tg:ng)(i,t))}function rg(e,t){return function(){_s(this,e).delay=+t.apply(this,arguments)}}function og(e,t){return t=+t,function(){_s(this,e).delay=t}}function sg(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?rg:og)(t,e)):Ht(this.node(),t).delay}function ag(e,t){return function(){Gt(this,e).duration=+t.apply(this,arguments)}}function lg(e,t){return t=+t,function(){Gt(this,e).duration=t}}function cg(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ag:lg)(t,e)):Ht(this.node(),t).duration}function ug(e,t){if(typeof t!="function")throw new Error;return function(){Gt(this,e).ease=t}}function dg(e){var t=this._id;return arguments.length?this.each(ug(t,e)):Ht(this.node(),t).ease}function fg(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Gt(this,e).ease=n}}function hg(e){if(typeof e!="function")throw new Error;return this.each(fg(this._id,e))}function gg(e){typeof e!="function"&&(e=Cl(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],a=o.length,s=i[r]=[],l,c=0;c<a;++c)(l=o[c])&&e.call(l,l.__data__,c,o)&&s.push(l);return new tn(i,this._parents,this._name,this._id)}function vg(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,o=Math.min(i,r),a=new Array(i),s=0;s<o;++s)for(var l=t[s],c=n[s],u=l.length,f=a[s]=new Array(u),h,g=0;g<u;++g)(h=l[g]||c[g])&&(f[g]=h);for(;s<i;++s)a[s]=t[s];return new tn(a,this._parents,this._name,this._id)}function mg(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function yg(e,t,n){var i,r,o=mg(t)?_s:Gt;return function(){var a=o(this,e),s=a.on;s!==i&&(r=(i=s).copy()).on(t,n),a.on=r}}function pg(e,t){var n=this._id;return arguments.length<2?Ht(this.node(),n).on.on(e):this.each(yg(n,e,t))}function _g(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function wg(){return this.on("end.remove",_g(this._id))}function xg(e){var t=this._name,n=this._id;typeof e!="function"&&(e=vs(e));for(var i=this._groups,r=i.length,o=new Array(r),a=0;a<r;++a)for(var s=i[a],l=s.length,c=o[a]=new Array(l),u,f,h=0;h<l;++h)(u=s[h])&&(f=e.call(u,u.__data__,h,s))&&("__data__"in u&&(f.__data__=u.__data__),c[h]=f,no(c[h],t,n,h,c,Ht(u,n)));return new tn(o,this._parents,t,n)}function bg(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Sl(e));for(var i=this._groups,r=i.length,o=[],a=[],s=0;s<r;++s)for(var l=i[s],c=l.length,u,f=0;f<c;++f)if(u=l[f]){for(var h=e.call(u,u.__data__,f,l),g,y=Ht(u,n),p=0,N=h.length;p<N;++p)(g=h[p])&&no(g,t,n,p,h,y);o.push(h),a.push(u)}return new tn(o,a,t,n)}var Eg=Qi.prototype.constructor;function kg(){return new Eg(this._groups,this._parents)}function Sg(e,t){var n,i,r;return function(){var o=Fn(this,e),a=(this.style.removeProperty(e),Fn(this,e));return o===a?null:o===n&&a===i?r:r=t(n=o,i=a)}}function $l(e){return function(){this.style.removeProperty(e)}}function Cg(e,t,n){var i,r=n+"",o;return function(){var a=Fn(this,e);return a===r?null:a===i?o:o=t(i=a,n)}}function Ng(e,t,n){var i,r,o;return function(){var a=Fn(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),Fn(this,e))),a===l?null:a===i&&l===r?o:(r=l,o=t(i=a,s))}}function Mg(e,t){var n,i,r,o="style."+t,a="end."+o,s;return function(){var l=Gt(this,e),c=l.on,u=l.value[o]==null?s||(s=$l(t)):void 0;(c!==n||r!==u)&&(i=(n=c).copy()).on(a,r=u),l.on=i}}function Pg(e,t,n){var i=(e+="")=="transform"?Ph:Ul;return t==null?this.styleTween(e,Sg(e,i)).on("end.style."+e,$l(e)):typeof t=="function"?this.styleTween(e,Ng(e,i,ws(this,"style."+e,t))).each(Mg(this._id,e)):this.styleTween(e,Cg(e,i,t),n).on("end.style."+e,null)}function zg(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function Ag(e,t,n){var i,r;function o(){var a=t.apply(this,arguments);return a!==r&&(i=(r=a)&&zg(e,a,n)),i}return o._value=t,o}function Ig(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,Ag(e,t,n??""))}function Tg(e){return function(){this.textContent=e}}function Og(e){return function(){var t=e(this);this.textContent=t??""}}function Dg(e){return this.tween("text",typeof e=="function"?Og(ws(this,"text",e)):Tg(e==null?"":e+""))}function Hg(e){return function(t){this.textContent=e.call(this,t)}}function Rg(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Hg(r)),t}return i._value=e,i}function Lg(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Rg(e))}function Vg(){for(var e=this._name,t=this._id,n=Jl(),i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],s=a.length,l,c=0;c<s;++c)if(l=a[c]){var u=Ht(l,t);no(l,e,n,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new tn(i,this._parents,e,n)}function Xg(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(o,a){var s={value:a},l={value:function(){--r===0&&o()}};n.each(function(){var c=Gt(this,i),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),c.on=t}),r===0&&o()})}var Yg=0;function tn(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function Jl(){return++Yg}var Zt=Qi.prototype;tn.prototype={constructor:tn,select:xg,selectAll:bg,selectChild:Zt.selectChild,selectChildren:Zt.selectChildren,filter:gg,merge:vg,selection:kg,transition:Vg,call:Zt.call,nodes:Zt.nodes,node:Zt.node,size:Zt.size,empty:Zt.empty,each:Zt.each,on:pg,attr:jh,attrTween:ig,style:Pg,styleTween:Ig,text:Dg,textTween:Lg,remove:wg,tween:Fh,delay:sg,duration:cg,ease:dg,easeVarying:hg,end:Xg,[Symbol.iterator]:Zt[Symbol.iterator]};function Wg(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Bg={time:null,delay:0,duration:250,ease:Wg};function Kg(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Fg(e){var t,n;e instanceof tn?(t=e._id,e=e._name):(t=Jl(),(n=Bg).time=ps(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],s=a.length,l,c=0;c<s;++c)(l=a[c])&&no(l,e,t,c,a,n||Kg(l,t));return new tn(i,this._parents,e,t)}Qi.prototype.interrupt=Wh;Qi.prototype.transition=Fg;const fr=e=>()=>e;function qg(e,{sourceEvent:t,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function Ut(e,t,n){this.k=e,this.x=t,this.y=n}Ut.prototype={constructor:Ut,scale:function(e){return e===1?this:new Ut(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ut(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var io=new Ut(1,0,0);jl.prototype=Ut.prototype;function jl(e){for(;!e.__zoom;)if(!(e=e.parentNode))return io;return e.__zoom}function po(e){e.stopImmediatePropagation()}function ui(e){e.preventDefault(),e.stopImmediatePropagation()}function Gg(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Zg(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ha(){return this.__zoom||io}function Ug(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function $g(){return navigator.maxTouchPoints||"ontouchstart"in this}function Jg(e,t,n){var i=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function Ql(){var e=Gg,t=Zg,n=Jg,i=Ug,r=$g,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,l=Oh,c=Qr("start","zoom","end"),u,f,h,g=500,y=150,p=0,N=10;function _(w){w.property("__zoom",ha).on("wheel.zoom",M,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",T).filter(r).on("touchstart.zoom",R).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",D).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(w,O,x,z){var I=w.selection?w.selection():w;I.property("__zoom",ha),w!==I?b(w,O,x,z):I.interrupt().each(function(){C(this,arguments).event(z).start().zoom(null,typeof O=="function"?O.apply(this,arguments):O).end()})},_.scaleBy=function(w,O,x,z){_.scaleTo(w,function(){var I=this.__zoom.k,A=typeof O=="function"?O.apply(this,arguments):O;return I*A},x,z)},_.scaleTo=function(w,O,x,z){_.transform(w,function(){var I=t.apply(this,arguments),A=this.__zoom,X=x==null?k(I):typeof x=="function"?x.apply(this,arguments):x,K=A.invert(X),U=typeof O=="function"?O.apply(this,arguments):O;return n(E(m(A,U),X,K),I,a)},x,z)},_.translateBy=function(w,O,x,z){_.transform(w,function(){return n(this.__zoom.translate(typeof O=="function"?O.apply(this,arguments):O,typeof x=="function"?x.apply(this,arguments):x),t.apply(this,arguments),a)},null,z)},_.translateTo=function(w,O,x,z,I){_.transform(w,function(){var A=t.apply(this,arguments),X=this.__zoom,K=z==null?k(A):typeof z=="function"?z.apply(this,arguments):z;return n(io.translate(K[0],K[1]).scale(X.k).translate(typeof O=="function"?-O.apply(this,arguments):-O,typeof x=="function"?-x.apply(this,arguments):-x),A,a)},z,I)};function m(w,O){return O=Math.max(o[0],Math.min(o[1],O)),O===w.k?w:new Ut(O,w.x,w.y)}function E(w,O,x){var z=O[0]-x[0]*w.k,I=O[1]-x[1]*w.k;return z===w.x&&I===w.y?w:new Ut(w.k,z,I)}function k(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function b(w,O,x,z){w.on("start.zoom",function(){C(this,arguments).event(z).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(z).end()}).tween("zoom",function(){var I=this,A=arguments,X=C(I,A).event(z),K=t.apply(I,A),U=x==null?k(K):typeof x=="function"?x.apply(I,A):x,te=Math.max(K[1][0]-K[0][0],K[1][1]-K[0][1]),B=I.__zoom,J=typeof O=="function"?O.apply(I,A):O,ie=l(B.invert(U).concat(te/B.k),J.invert(U).concat(te/J.k));return function(ue){if(ue===1)ue=J;else{var de=ie(ue),Z=te/de[2];ue=new Ut(Z,U[0]-de[0]*Z,U[1]-de[1]*Z)}X.zoom(null,ue)}})}function C(w,O,x){return!x&&w.__zooming||new S(w,O)}function S(w,O){this.that=w,this.args=O,this.active=0,this.sourceEvent=null,this.extent=t.apply(w,O),this.taps=0}S.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,O){return this.mouse&&w!=="mouse"&&(this.mouse[1]=O.invert(this.mouse[0])),this.touch0&&w!=="touch"&&(this.touch0[1]=O.invert(this.touch0[0])),this.touch1&&w!=="touch"&&(this.touch1[1]=O.invert(this.touch1[0])),this.that.__zoom=O,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var O=_t(this.that).datum();c.call(w,this.that,new qg(w,{sourceEvent:this.sourceEvent,target:_,type:w,transform:this.that.__zoom,dispatch:c}),O)}};function M(w,...O){if(!e.apply(this,arguments))return;var x=C(this,O).event(w),z=this.__zoom,I=Math.max(o[0],Math.min(o[1],z.k*Math.pow(2,i.apply(this,arguments)))),A=Nt(w);if(x.wheel)(x.mouse[0][0]!==A[0]||x.mouse[0][1]!==A[1])&&(x.mouse[1]=z.invert(x.mouse[0]=A)),clearTimeout(x.wheel);else{if(z.k===I)return;x.mouse=[A,z.invert(A)],wr(this),x.start()}ui(w),x.wheel=setTimeout(X,y),x.zoom("mouse",n(E(m(z,I),x.mouse[0],x.mouse[1]),x.extent,a));function X(){x.wheel=null,x.end()}}function P(w,...O){if(h||!e.apply(this,arguments))return;var x=w.currentTarget,z=C(this,O,!0).event(w),I=_t(w.view).on("mousemove.zoom",U,!0).on("mouseup.zoom",te,!0),A=Nt(w,x),X=w.clientX,K=w.clientY;Hl(w.view),po(w),z.mouse=[A,this.__zoom.invert(A)],wr(this),z.start();function U(B){if(ui(B),!z.moved){var J=B.clientX-X,ie=B.clientY-K;z.moved=J*J+ie*ie>p}z.event(B).zoom("mouse",n(E(z.that.__zoom,z.mouse[0]=Nt(B,x),z.mouse[1]),z.extent,a))}function te(B){I.on("mousemove.zoom mouseup.zoom",null),Rl(B.view,z.moved),ui(B),z.event(B).end()}}function T(w,...O){if(e.apply(this,arguments)){var x=this.__zoom,z=Nt(w.changedTouches?w.changedTouches[0]:w,this),I=x.invert(z),A=x.k*(w.shiftKey?.5:2),X=n(E(m(x,A),z,I),t.apply(this,O),a);ui(w),s>0?_t(this).transition().duration(s).call(b,X,z,w):_t(this).call(_.transform,X,z,w)}}function R(w,...O){if(e.apply(this,arguments)){var x=w.touches,z=x.length,I=C(this,O,w.changedTouches.length===z).event(w),A,X,K,U;for(po(w),X=0;X<z;++X)K=x[X],U=Nt(K,this),U=[U,this.__zoom.invert(U),K.identifier],I.touch0?!I.touch1&&I.touch0[2]!==U[2]&&(I.touch1=U,I.taps=0):(I.touch0=U,A=!0,I.taps=1+!!u);u&&(u=clearTimeout(u)),A&&(I.taps<2&&(f=U[0],u=setTimeout(function(){u=null},g)),wr(this),I.start())}}function L(w,...O){if(this.__zooming){var x=C(this,O).event(w),z=w.changedTouches,I=z.length,A,X,K,U;for(ui(w),A=0;A<I;++A)X=z[A],K=Nt(X,this),x.touch0&&x.touch0[2]===X.identifier?x.touch0[0]=K:x.touch1&&x.touch1[2]===X.identifier&&(x.touch1[0]=K);if(X=x.that.__zoom,x.touch1){var te=x.touch0[0],B=x.touch0[1],J=x.touch1[0],ie=x.touch1[1],ue=(ue=J[0]-te[0])*ue+(ue=J[1]-te[1])*ue,de=(de=ie[0]-B[0])*de+(de=ie[1]-B[1])*de;X=m(X,Math.sqrt(ue/de)),K=[(te[0]+J[0])/2,(te[1]+J[1])/2],U=[(B[0]+ie[0])/2,(B[1]+ie[1])/2]}else if(x.touch0)K=x.touch0[0],U=x.touch0[1];else return;x.zoom("touch",n(E(X,K,U),x.extent,a))}}function D(w,...O){if(this.__zooming){var x=C(this,O).event(w),z=w.changedTouches,I=z.length,A,X;for(po(w),h&&clearTimeout(h),h=setTimeout(function(){h=null},g),A=0;A<I;++A)X=z[A],x.touch0&&x.touch0[2]===X.identifier?delete x.touch0:x.touch1&&x.touch1[2]===X.identifier&&delete x.touch1;if(x.touch1&&!x.touch0&&(x.touch0=x.touch1,delete x.touch1),x.touch0)x.touch0[1]=this.__zoom.invert(x.touch0[0]);else if(x.end(),x.taps===2&&(X=Nt(X,this),Math.hypot(f[0]-X[0],f[1]-X[1])<N)){var K=_t(this).on("dblclick.zoom");K&&K.apply(this,arguments)}}}return _.wheelDelta=function(w){return arguments.length?(i=typeof w=="function"?w:fr(+w),_):i},_.filter=function(w){return arguments.length?(e=typeof w=="function"?w:fr(!!w),_):e},_.touchable=function(w){return arguments.length?(r=typeof w=="function"?w:fr(!!w),_):r},_.extent=function(w){return arguments.length?(t=typeof w=="function"?w:fr([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),_):t},_.scaleExtent=function(w){return arguments.length?(o[0]=+w[0],o[1]=+w[1],_):[o[0],o[1]]},_.translateExtent=function(w){return arguments.length?(a[0][0]=+w[0][0],a[1][0]=+w[1][0],a[0][1]=+w[0][1],a[1][1]=+w[1][1],_):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},_.constrain=function(w){return arguments.length?(n=w,_):n},_.duration=function(w){return arguments.length?(s=+w,_):s},_.interpolate=function(w){return arguments.length?(l=w,_):l},_.on=function(){var w=c.on.apply(c,arguments);return w===c?_:w},_.clickDistance=function(w){return arguments.length?(p=(w=+w)*w,_):Math.sqrt(p)},_.tapDistance=function(w){return arguments.length?(N=+w,_):N},_}const tr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:i}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`},Or=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]];var Pn;(function(e){e.Strict="strict",e.Loose="loose"})(Pn||(Pn={}));var vn;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(vn||(vn={}));var Dr;(function(e){e.Partial="partial",e.Full="full"})(Dr||(Dr={}));const qo={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Xn;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Xn||(Xn={}));var Hr;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Hr||(Hr={}));var fe;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(fe||(fe={}));const ga={[fe.Left]:fe.Right,[fe.Right]:fe.Left,[fe.Top]:fe.Bottom,[fe.Bottom]:fe.Top};function ec(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function va(e,t,n){if(!n)return;const i=[];e.forEach((r,o)=>{t!=null&&t.has(o)||i.push(r)}),i.length&&n(i)}function jg(e){return e===null?null:e?"valid":"invalid"}const Qg=e=>"id"in e&&"source"in e&&"target"in e,ev=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),xs=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),nr=(e,t=[0,0])=>{const{width:n,height:i}=xn(e),r=e.origin??t,o=n*r[0],a=i*r[1];return{x:e.position.x-o,y:e.position.y-a}},tv=(e,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((i,r)=>{const o=typeof r=="string";let a=!t.nodeLookup&&!o?r:void 0;t.nodeLookup&&(a=o?t.nodeLookup.get(r):xs(r)?r:t.nodeLookup.get(r.id));const s=a?Rr(a,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return ro(i,s)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return oo(n)},ir=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(i=>{if(t.filter===void 0||t.filter(i)){const r=Rr(i);n=ro(n,r)}}),oo(n)},tc=(e,t,[n,i,r]=[0,0,1],o=!1,a=!1)=>{const s={...rr(t,[n,i,r]),width:t.width/r,height:t.height/r},l=[];for(const c of e.values()){const{measured:u,selectable:f=!0,hidden:h=!1}=c;if(a&&!f||h)continue;const g=u.width??c.width??c.initialWidth??null,y=u.height??c.height??c.initialHeight??null,p=Mi(s,Zn(c)),N=(g??0)*(y??0),_=o&&p>0;(!c.internals.handleBounds||_||p>=N||c.dragging)&&l.push(c)}return l},Go=(e,t)=>{const n=new Set;return e.forEach(i=>{n.add(i.id)}),t.filter(i=>n.has(i.source)||n.has(i.target))};function ma(e,t){const n=new Map,i=t!=null&&t.nodes?new Set(t.nodes.map(r=>r.id)):null;return e.forEach(r=>{r.measured.width&&r.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!r.hidden)&&(!i||i.has(r.id))&&n.set(r.id,r)}),n}async function ya({nodes:e,width:t,height:n,panZoom:i,minZoom:r,maxZoom:o},a){if(e.size===0)return Promise.resolve(!1);const s=ir(e),l=Es(s,t,n,(a==null?void 0:a.minZoom)??r,(a==null?void 0:a.maxZoom)??o,(a==null?void 0:a.padding)??.1);return await i.setViewport(l,{duration:a==null?void 0:a.duration}),Promise.resolve(!0)}function nv({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:r,onError:o}){const a=n.get(e),s=a.parentId?n.get(a.parentId):void 0,{x:l,y:c}=s?s.internals.positionAbsolute:{x:0,y:0},u=a.origin??i;let f=r;if(a.extent==="parent"&&!a.expandParent)if(!s)o==null||o("005",tr.error005());else{const g=s.measured.width,y=s.measured.height;g&&y&&(f=[[l,c],[l+g,c+y]])}else s&&Un(a.extent)&&(f=[[a.extent[0][0]+l,a.extent[0][1]+c],[a.extent[1][0]+l,a.extent[1][1]+c]]);const h=Un(f)?zn(t,f,a.measured):t;return{position:{x:h.x-l+a.measured.width*u[0],y:h.y-c+a.measured.height*u[1]},positionAbsolute:h}}async function nc({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:i,onBeforeDelete:r}){const o=new Set(e.map(h=>h.id)),a=[];for(const h of n){if(h.deletable===!1)continue;const g=o.has(h.id),y=!g&&h.parentId&&a.find(p=>p.id===h.parentId);(g||y)&&a.push(h)}const s=new Set(t.map(h=>h.id)),l=i.filter(h=>h.deletable!==!1),u=Go(a,l);for(const h of l)s.has(h.id)&&!u.find(y=>y.id===h.id)&&u.push(h);if(!r)return{edges:u,nodes:a};const f=await r({nodes:a,edges:u});return typeof f=="boolean"?f?{edges:u,nodes:a}:{edges:[],nodes:[]}:f}const Gn=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),zn=(e={x:0,y:0},t,n)=>({x:Gn(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Gn(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function ic(e,t,n){const{width:i,height:r}=xn(n),{x:o,y:a}=n.internals.positionAbsolute;return zn(e,[[o,a],[o+i,a+r]],t)}const pa=(e,t,n)=>e<t?Gn(Math.abs(e-t),1,t)/t:e>n?-Gn(Math.abs(e-n),1,t)/t:0,rc=(e,t,n=15,i=40)=>{const r=pa(e.x,i,t.width-i)*n,o=pa(e.y,i,t.height-i)*n;return[r,o]},ro=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Zo=({x:e,y:t,width:n,height:i})=>({x:e,y:t,x2:e+n,y2:t+i}),oo=({x:e,y:t,x2:n,y2:i})=>({x:e,y:t,width:n-e,height:i-t}),Zn=(e,t=[0,0])=>{var r,o;const{x:n,y:i}=xs(e)?e.internals.positionAbsolute:nr(e,t);return{x:n,y:i,width:((r=e.measured)==null?void 0:r.width)??e.width??e.initialWidth??0,height:((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0}},Rr=(e,t=[0,0])=>{var r,o;const{x:n,y:i}=xs(e)?e.internals.positionAbsolute:nr(e,t);return{x:n,y:i,x2:n+(((r=e.measured)==null?void 0:r.width)??e.width??e.initialWidth??0),y2:i+(((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0)}},oc=(e,t)=>oo(ro(Zo(e),Zo(t))),Mi=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),i=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*i)},_a=e=>$t(e.width)&&$t(e.height)&&$t(e.x)&&$t(e.y),$t=e=>!isNaN(e)&&isFinite(e),iv=(e,t)=>{},bs=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),rr=({x:e,y:t},[n,i,r],o=!1,a=[1,1])=>{const s={x:(e-n)/r,y:(t-i)/r};return o?bs(s,a):s},sc=({x:e,y:t},[n,i,r])=>({x:e*r+n,y:t*r+i}),Es=(e,t,n,i,r,o)=>{const a=t/(e.width*(1+o)),s=n/(e.height*(1+o)),l=Math.min(a,s),c=Gn(l,i,r),u=e.x+e.width/2,f=e.y+e.height/2,h=t/2-u*c,g=n/2-f*c;return{x:h,y:g,zoom:c}},Lr=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Un(e){return e!==void 0&&e!=="parent"}function xn(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function ac(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function rv(e,t={width:0,height:0},n,i,r){const o={...e},a=i.get(n);if(a){const s=a.origin||r;o.x+=a.internals.positionAbsolute.x-(t.width??0)*s[0],o.y+=a.internals.positionAbsolute.y-(t.height??0)*s[1]}return o}function pi(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:i,containerBounds:r}){const{x:o,y:a}=Qt(e),s=rr({x:o-((r==null?void 0:r.left)??0),y:a-((r==null?void 0:r.top)??0)},i),{x:l,y:c}=n?bs(s,t):s;return{xSnapped:l,ySnapped:c,...s}}const ks=e=>({width:e.offsetWidth,height:e.offsetHeight}),ov=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},sv=["INPUT","SELECT","TEXTAREA"];function av(e){var i,r,o;const t=((r=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:r[0])||e.target;return sv.includes(t==null?void 0:t.nodeName)||((o=t==null?void 0:t.hasAttribute)==null?void 0:o.call(t,"contenteditable"))||!!(t!=null&&t.closest(".nokey"))}const lc=e=>"clientX"in e,Qt=(e,t)=>{var o,a;const n=lc(e),i=n?e.clientX:(o=e.touches)==null?void 0:o[0].clientX,r=n?e.clientY:(a=e.touches)==null?void 0:a[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}},wa=(e,t,n,i,r)=>{const o=t.querySelectorAll(`.${e}`);return!o||!o.length?null:Array.from(o).map(a=>{const s=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),type:e,nodeId:r,position:a.getAttribute("data-handlepos"),x:(s.left-n.left)/i,y:(s.top-n.top)/i,...ks(a)}})};function lv({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:r,sourceControlY:o,targetControlX:a,targetControlY:s}){const l=e*.125+r*.375+a*.375+n*.125,c=t*.125+o*.375+s*.375+i*.125,u=Math.abs(l-e),f=Math.abs(c-t);return[l,c,u,f]}function hr(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function xa({pos:e,x1:t,y1:n,x2:i,y2:r,c:o}){switch(e){case fe.Left:return[t-hr(t-i,o),n];case fe.Right:return[t+hr(i-t,o),n];case fe.Top:return[t,n-hr(n-r,o)];case fe.Bottom:return[t,n+hr(r-n,o)]}}function cc({sourceX:e,sourceY:t,sourcePosition:n=fe.Bottom,targetX:i,targetY:r,targetPosition:o=fe.Top,curvature:a=.25}){const[s,l]=xa({pos:n,x1:e,y1:t,x2:i,y2:r,c:a}),[c,u]=xa({pos:o,x1:i,y1:r,x2:e,y2:t,c:a}),[f,h,g,y]=lv({sourceX:e,sourceY:t,targetX:i,targetY:r,sourceControlX:s,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${s},${l} ${c},${u} ${i},${r}`,f,h,g,y]}function uc({sourceX:e,sourceY:t,targetX:n,targetY:i}){const r=Math.abs(n-e)/2,o=n<e?n+r:n-r,a=Math.abs(i-t)/2,s=i<t?i+a:i-a;return[o,s,r,a]}function cv({sourceNode:e,targetNode:t,selected:n=!1,zIndex:i=0,elevateOnSelect:r=!1}){if(!r)return i;const o=n||t.selected||e.selected,a=Math.max(e.internals.z||0,t.internals.z||0,1e3);return i+(o?a:0)}function uv({sourceNode:e,targetNode:t,width:n,height:i,transform:r}){const o=ro(Rr(e),Rr(t));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const a={x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:i/r[2]};return Mi(a,oo(o))>0}const dv=({source:e,sourceHandle:t,target:n,targetHandle:i})=>`xy-edge__${e}${t||""}-${n}${i||""}`,fv=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),hv=(e,t)=>{if(!e.source||!e.target)return t;let n;return Qg(e)?n={...e}:n={...e,id:dv(e)},fv(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function Uo({sourceX:e,sourceY:t,targetX:n,targetY:i}){const[r,o,a,s]=uc({sourceX:e,sourceY:t,targetX:n,targetY:i});return[`M ${e},${t}L ${n},${i}`,r,o,a,s]}const ba={[fe.Left]:{x:-1,y:0},[fe.Right]:{x:1,y:0},[fe.Top]:{x:0,y:-1},[fe.Bottom]:{x:0,y:1}},gv=({source:e,sourcePosition:t=fe.Bottom,target:n})=>t===fe.Left||t===fe.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Ea=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function vv({source:e,sourcePosition:t=fe.Bottom,target:n,targetPosition:i=fe.Top,center:r,offset:o}){const a=ba[t],s=ba[i],l={x:e.x+a.x*o,y:e.y+a.y*o},c={x:n.x+s.x*o,y:n.y+s.y*o},u=gv({source:l,sourcePosition:t,target:c}),f=u.x!==0?"x":"y",h=u[f];let g=[],y,p;const N={x:0,y:0},_={x:0,y:0},[m,E,k,b]=uc({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[f]*s[f]===-1){y=r.x??m,p=r.y??E;const S=[{x:y,y:l.y},{x:y,y:c.y}],M=[{x:l.x,y:p},{x:c.x,y:p}];a[f]===h?g=f==="x"?S:M:g=f==="x"?M:S}else{const S=[{x:l.x,y:c.y}],M=[{x:c.x,y:l.y}];if(f==="x"?g=a.x===h?M:S:g=a.y===h?S:M,t===i){const D=Math.abs(e[f]-n[f]);if(D<=o){const w=Math.min(o-1,o-D);a[f]===h?N[f]=(l[f]>e[f]?-1:1)*w:_[f]=(c[f]>n[f]?-1:1)*w}}if(t!==i){const D=f==="x"?"y":"x",w=a[f]===s[D],O=l[D]>c[D],x=l[D]<c[D];(a[f]===1&&(!w&&O||w&&x)||a[f]!==1&&(!w&&x||w&&O))&&(g=f==="x"?S:M)}const P={x:l.x+N.x,y:l.y+N.y},T={x:c.x+_.x,y:c.y+_.y},R=Math.max(Math.abs(P.x-g[0].x),Math.abs(T.x-g[0].x)),L=Math.max(Math.abs(P.y-g[0].y),Math.abs(T.y-g[0].y));R>=L?(y=(P.x+T.x)/2,p=g[0].y):(y=g[0].x,p=(P.y+T.y)/2)}return[[e,{x:l.x+N.x,y:l.y+N.y},...g,{x:c.x+_.x,y:c.y+_.y},n],y,p,k,b]}function mv(e,t,n,i){const r=Math.min(Ea(e,t)/2,Ea(t,n)/2,i),{x:o,y:a}=t;if(e.x===o&&o===n.x||e.y===a&&a===n.y)return`L${o} ${a}`;if(e.y===a){const c=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${o+r*c},${a}Q ${o},${a} ${o},${a+r*u}`}const s=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${o},${a+r*l}Q ${o},${a} ${o+r*s},${a}`}function Vr({sourceX:e,sourceY:t,sourcePosition:n=fe.Bottom,targetX:i,targetY:r,targetPosition:o=fe.Top,borderRadius:a=5,centerX:s,centerY:l,offset:c=20}){const[u,f,h,g,y]=vv({source:{x:e,y:t},sourcePosition:n,target:{x:i,y:r},targetPosition:o,center:{x:s,y:l},offset:c});return[u.reduce((N,_,m)=>{let E="";return m>0&&m<u.length-1?E=mv(u[m-1],_,u[m+1],a):E=`${m===0?"M":"L"}${_.x} ${_.y}`,N+=E,N},""),f,h,g,y]}function ka(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function yv(e){var f;const{sourceNode:t,targetNode:n}=e;if(!ka(t)||!ka(n))return null;const i=t.internals.handleBounds||Sa(t.handles),r=n.internals.handleBounds||Sa(n.handles),o=Ca((i==null?void 0:i.source)??[],e.sourceHandle),a=Ca(e.connectionMode===Pn.Strict?(r==null?void 0:r.target)??[]:((r==null?void 0:r.target)??[]).concat((r==null?void 0:r.source)??[]),e.targetHandle);if(!o||!a)return(f=e.onError)==null||f.call(e,"008",tr.error008(o?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const s=(o==null?void 0:o.position)||fe.Bottom,l=(a==null?void 0:a.position)||fe.Top,c=Pi(t,o,s),u=Pi(n,a,l);return{sourceX:c.x,sourceY:c.y,targetX:u.x,targetY:u.y,sourcePosition:s,targetPosition:l}}function Sa(e){if(!e)return null;const t=[],n=[];for(const i of e)i.width=i.width??1,i.height=i.height??1,i.type==="source"?t.push(i):i.type==="target"&&n.push(i);return{source:t,target:n}}function Pi(e,t,n=fe.Left,i=!1){const r=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,o=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:a,height:s}=t??xn(e);if(i)return{x:r+a/2,y:o+s/2};switch((t==null?void 0:t.position)??n){case fe.Top:return{x:r+a/2,y:o};case fe.Right:return{x:r+a,y:o+s/2};case fe.Bottom:return{x:r+a/2,y:o+s};case fe.Left:return{x:r,y:o+s/2}}}function Ca(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function $o(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(i=>`${i}=${e[i]}`).join("&")}`:""}function pv(e,{id:t,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:r}){const o=new Set;return e.reduce((a,s)=>([s.markerStart||i,s.markerEnd||r].forEach(l=>{if(l&&typeof l=="object"){const c=$o(l,t);o.has(c)||(a.push({id:c,color:l.color||n,...l}),o.add(c))}}),a),[]).sort((a,s)=>a.id.localeCompare(s.id))}const Ss={nodeOrigin:[0,0],nodeExtent:Or,elevateNodesOnSelect:!0,defaults:{}},_v={...Ss,checkEquality:!0};function Cs(e,t){const n={...e};for(const i in t)t[i]!==void 0&&(n[i]=t[i]);return n}function wv(e,t,n){const i=Cs(Ss,n);for(const r of e.values())if(r.parentId)Ns(r,e,t,i);else{const o=nr(r,i.nodeOrigin),a=Un(r.extent)?r.extent:i.nodeExtent,s=zn(o,a,xn(r));r.internals.positionAbsolute=s}}function dc(e,t,n,i){var s,l;const r=Cs(_v,i),o=new Map(t),a=r!=null&&r.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const c of e){let u=o.get(c.id);if(r.checkEquality&&c===(u==null?void 0:u.internals.userNode))t.set(c.id,u);else{const f=nr(c,r.nodeOrigin),h=Un(c.extent)?c.extent:r.nodeExtent,g=zn(f,h,xn(c));u={...r.defaults,...c,measured:{width:(s=c.measured)==null?void 0:s.width,height:(l=c.measured)==null?void 0:l.height},internals:{positionAbsolute:g,handleBounds:c.measured?u==null?void 0:u.internals.handleBounds:void 0,z:fc(c,a),userNode:c}},t.set(c.id,u)}c.parentId&&Ns(u,t,n,i)}}function xv(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Ns(e,t,n,i){const{elevateNodesOnSelect:r,nodeOrigin:o,nodeExtent:a}=Cs(Ss,i),s=e.parentId,l=t.get(s);if(!l){console.warn(`Parent node ${s} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}xv(e,n);const c=r?1e3:0,{x:u,y:f,z:h}=bv(e,l,o,a,c),{positionAbsolute:g}=e.internals,y=u!==g.x||f!==g.y;(y||h!==e.internals.z)&&(e.internals={...e.internals,positionAbsolute:y?{x:u,y:f}:g,z:h})}function fc(e,t){return($t(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function bv(e,t,n,i,r){const{x:o,y:a}=t.internals.positionAbsolute,s=xn(e),l=nr(e,n),c=Un(e.extent)?zn(l,e.extent,s):l;let u=zn({x:o+c.x,y:a+c.y},i,s);e.extent==="parent"&&(u=ic(u,s,t));const f=fc(e,r),h=t.internals.z??0;return{x:u.x,y:u.y,z:h>f?h:f}}function Ev(e,t,n,i=[0,0]){var a;const r=[],o=new Map;for(const s of e){const l=t.get(s.parentId);if(!l)continue;const c=((a=o.get(s.parentId))==null?void 0:a.expandedRect)??Zn(l),u=oc(c,s.rect);o.set(s.parentId,{expandedRect:u,parent:l})}return o.size>0&&o.forEach(({expandedRect:s,parent:l},c)=>{var E;const u=l.internals.positionAbsolute,f=xn(l),h=l.origin??i,g=s.x<u.x?Math.round(Math.abs(u.x-s.x)):0,y=s.y<u.y?Math.round(Math.abs(u.y-s.y)):0,p=Math.max(f.width,Math.round(s.width)),N=Math.max(f.height,Math.round(s.height)),_=(p-f.width)*h[0],m=(N-f.height)*h[1];(g>0||y>0||_||m)&&(r.push({id:c,type:"position",position:{x:l.position.x-g+_,y:l.position.y-y+m}}),(E=n.get(c))==null||E.forEach(k=>{e.some(b=>b.id===k.id)||r.push({id:k.id,type:"position",position:{x:k.position.x+g,y:k.position.y+y}})})),(f.width<s.width||f.height<s.height||g||y)&&r.push({id:c,type:"dimensions",setAttributes:!0,dimensions:{width:p+(g?h[0]*g-_:0),height:N+(y?h[1]*y-m:0)}})}),r}function kv(e,t,n,i,r,o){const a=i==null?void 0:i.querySelector(".xyflow__viewport");let s=!1;if(!a)return{changes:[],updatedInternals:s};const l=[],c=window.getComputedStyle(a),{m22:u}=new window.DOMMatrixReadOnly(c.transform),f=[];for(const h of e.values()){const g=t.get(h.id);if(g)if(g.hidden)g.internals={...g.internals,handleBounds:void 0},s=!0;else{const y=ks(h.nodeElement),p=g.measured.width!==y.width||g.measured.height!==y.height;if(!!(y.width&&y.height&&(p||!g.internals.handleBounds||h.force))){const _=h.nodeElement.getBoundingClientRect(),m=Un(g.extent)?g.extent:o;let{positionAbsolute:E}=g.internals;g.parentId&&g.extent==="parent"?E=ic(E,y,t.get(g.parentId)):m&&(E=zn(E,m,y)),g.measured=y,g.internals={...g.internals,positionAbsolute:E,handleBounds:{source:wa("source",h.nodeElement,_,u,g.id),target:wa("target",h.nodeElement,_,u,g.id)}},g.parentId&&Ns(g,t,n,{nodeOrigin:r}),s=!0,p&&(l.push({id:g.id,type:"dimensions",dimensions:y}),g.expandParent&&g.parentId&&f.push({id:g.id,parentId:g.parentId,rect:Zn(g,r)}))}}}if(f.length>0){const h=Ev(f,t,n,r);l.push(...h)}return{changes:l,updatedInternals:s}}async function Sv({delta:e,panZoom:t,transform:n,translateExtent:i,width:r,height:o}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const a=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[r,o]],i),s=!!a&&(a.x!==n[0]||a.y!==n[1]||a.k!==n[2]);return Promise.resolve(s)}function hc(e,t,n){e.clear(),t.clear();for(const i of n){const{source:r,target:o,sourceHandle:a=null,targetHandle:s=null}=i,l=`${r}-source-${a}`,c=`${o}-target-${s}`,u=e.get(l)||new Map,f=e.get(c)||new Map,h={edgeId:i.id,source:r,target:o,sourceHandle:a,targetHandle:s};t.set(i.id,i),e.set(l,u.set(`${o}-${s}`,h)),e.set(c,f.set(`${r}-${a}`,h))}}function gc(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:gc(n,t):!1}function Na(e,t,n){let i=e;do{if(i!=null&&i.matches(t))return!0;if(i===n)return!1;i=i.parentElement}while(i);return!1}function Cv(e,t,n,i){const r=new Map;for(const[o,a]of e)if((a.selected||a.id===i)&&(!a.parentId||!gc(a,e))&&(a.draggable||t&&typeof a.draggable>"u")){const s=e.get(o);s&&r.set(o,{id:o,position:s.position||{x:0,y:0},distance:{x:n.x-s.internals.positionAbsolute.x,y:n.y-s.internals.positionAbsolute.y},extent:s.extent,parentId:s.parentId,origin:s.origin,expandParent:s.expandParent,internals:{positionAbsolute:s.internals.positionAbsolute||{x:0,y:0}},measured:{width:s.measured.width??0,height:s.measured.height??0}})}return r}function _o({nodeId:e,dragItems:t,nodeLookup:n,dragging:i=!0}){var a,s,l;const r=[];for(const[c,u]of t){const f=(a=n.get(c))==null?void 0:a.internals.userNode;f&&r.push({...f,position:u.position,dragging:i})}if(!e)return[r[0],r];const o=(s=n.get(e))==null?void 0:s.internals.userNode;return[o?{...o,position:((l=t.get(e))==null?void 0:l.position)||o.position,dragging:i}:r[0],r]}function Nv({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:i,onDragStop:r}){let o={x:null,y:null},a=0,s=new Map,l=!1,c={x:0,y:0},u=null,f=!1,h=null,g=!1;function y({noDragClassName:N,handleSelector:_,domNode:m,isSelectable:E,nodeId:k,nodeClickDistance:b=0}){h=_t(m);function C({x:T,y:R},L){const{nodeLookup:D,nodeExtent:w,snapGrid:O,snapToGrid:x,nodeOrigin:z,onNodeDrag:I,onSelectionDrag:A,onError:X,updateNodePositions:K}=t();o={x:T,y:R};let U=!1,te={x:0,y:0,x2:0,y2:0};if(s.size>1&&w){const B=ir(s);te=Zo(B)}for(const[B,J]of s){if(!D.has(B))continue;let ie={x:T-J.distance.x,y:R-J.distance.y};x&&(ie=bs(ie,O));let ue=[[w[0][0],w[0][1]],[w[1][0],w[1][1]]];if(s.size>1&&w&&!J.extent){const{positionAbsolute:$}=J.internals,j=$.x-te.x+w[0][0],ge=$.x+J.measured.width-te.x2+w[1][0],xe=$.y-te.y+w[0][1],ye=$.y+J.measured.height-te.y2+w[1][1];ue=[[j,xe],[ge,ye]]}const{position:de,positionAbsolute:Z}=nv({nodeId:B,nextPosition:ie,nodeLookup:D,nodeExtent:ue,nodeOrigin:z,onError:X});U=U||J.position.x!==de.x||J.position.y!==de.y,J.position=de,J.internals.positionAbsolute=Z}if(U&&(K(s,!0),L&&(i||I||!k&&A))){const[B,J]=_o({nodeId:k,dragItems:s,nodeLookup:D});i==null||i(L,s,B,J),I==null||I(L,B,J),k||A==null||A(L,J)}}async function S(){if(!u)return;const{transform:T,panBy:R,autoPanSpeed:L}=t(),[D,w]=rc(c,u,L);(D!==0||w!==0)&&(o.x=(o.x??0)-D/T[2],o.y=(o.y??0)-w/T[2],await R({x:D,y:w})&&C(o,null)),a=requestAnimationFrame(S)}function M(T){var U;const{nodeLookup:R,multiSelectionActive:L,nodesDraggable:D,transform:w,snapGrid:O,snapToGrid:x,selectNodesOnDrag:z,onNodeDragStart:I,onSelectionDragStart:A,unselectNodesAndEdges:X}=t();f=!0,(!z||!E)&&!L&&k&&((U=R.get(k))!=null&&U.selected||X()),E&&z&&k&&(e==null||e(k));const K=pi(T.sourceEvent,{transform:w,snapGrid:O,snapToGrid:x,containerBounds:u});if(o=K,s=Cv(R,D,K,k),s.size>0&&(n||I||!k&&A)){const[te,B]=_o({nodeId:k,dragItems:s,nodeLookup:R});n==null||n(T.sourceEvent,s,te,B),I==null||I(T.sourceEvent,te,B),k||A==null||A(T.sourceEvent,B)}}const P=Ll().clickDistance(b).on("start",T=>{const{domNode:R,nodeDragThreshold:L,transform:D,snapGrid:w,snapToGrid:O}=t();u=(R==null?void 0:R.getBoundingClientRect())||null,g=!1,L===0&&M(T),o=pi(T.sourceEvent,{transform:D,snapGrid:w,snapToGrid:O,containerBounds:u}),c=Qt(T.sourceEvent,u)}).on("drag",T=>{const{autoPanOnNodeDrag:R,transform:L,snapGrid:D,snapToGrid:w,nodeDragThreshold:O,nodeLookup:x}=t(),z=pi(T.sourceEvent,{transform:L,snapGrid:D,snapToGrid:w,containerBounds:u});if((T.sourceEvent.type==="touchmove"&&T.sourceEvent.touches.length>1||k&&!x.has(k))&&(g=!0),!g){if(!l&&R&&f&&(l=!0,S()),!f){const I=z.xSnapped-(o.x??0),A=z.ySnapped-(o.y??0);Math.sqrt(I*I+A*A)>O&&M(T)}(o.x!==z.xSnapped||o.y!==z.ySnapped)&&s&&f&&(c=Qt(T.sourceEvent,u),C(z,T.sourceEvent))}}).on("end",T=>{if(!(!f||g)&&(l=!1,f=!1,cancelAnimationFrame(a),s.size>0)){const{nodeLookup:R,updateNodePositions:L,onNodeDragStop:D,onSelectionDragStop:w}=t();if(L(s,!1),r||D||!k&&w){const[O,x]=_o({nodeId:k,dragItems:s,nodeLookup:R,dragging:!1});r==null||r(T.sourceEvent,s,O,x),D==null||D(T.sourceEvent,O,x),k||w==null||w(T.sourceEvent,x)}}}).filter(T=>{const R=T.target;return!T.button&&(!N||!Na(R,`.${N}`,m))&&(!_||Na(R,_,m))});h.call(P)}function p(){h==null||h.on(".drag",null)}return{update:y,destroy:p}}function Mv(e,t,n){const i=[],r={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const o of t.values())Mi(r,Zn(o))>0&&i.push(o);return i}const Pv=250;function zv(e,t,n,i){var s,l;let r=[],o=1/0;const a=Mv(e,n,t+Pv);for(const c of a){const u=[...((s=c.internals.handleBounds)==null?void 0:s.source)??[],...((l=c.internals.handleBounds)==null?void 0:l.target)??[]];for(const f of u){if(i.nodeId===f.nodeId&&i.type===f.type&&i.id===f.id)continue;const{x:h,y:g}=Pi(c,f,f.position,!0),y=Math.sqrt(Math.pow(h-e.x,2)+Math.pow(g-e.y,2));y>t||(y<o?(r=[{...f,x:h,y:g}],o=y):y===o&&r.push({...f,x:h,y:g}))}}if(!r.length)return null;if(r.length>1){const c=i.type==="source"?"target":"source";return r.find(u=>u.type===c)??r[0]}return r[0]}function vc(e,t,n,i,r,o=!1){var c,u,f;const a=i.get(e);if(!a)return null;const s=r==="strict"?(c=a.internals.handleBounds)==null?void 0:c[t]:[...((u=a.internals.handleBounds)==null?void 0:u.source)??[],...((f=a.internals.handleBounds)==null?void 0:f.target)??[]],l=(n?s==null?void 0:s.find(h=>h.id===n):s==null?void 0:s[0])??null;return l&&o?{...l,...Pi(a,l,l.position,!0)}:l}function mc(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Av(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const yc=()=>!0;function Iv(e,{connectionMode:t,connectionRadius:n,handleId:i,nodeId:r,edgeUpdaterType:o,isTarget:a,domNode:s,nodeLookup:l,lib:c,autoPanOnConnect:u,flowId:f,panBy:h,cancelConnection:g,onConnectStart:y,onConnect:p,onConnectEnd:N,isValidConnection:_=yc,onReconnectEnd:m,updateConnection:E,getTransform:k,getFromHandle:b,autoPanSpeed:C}){const S=ov(e.target);let M=0,P;const{x:T,y:R}=Qt(e),L=S==null?void 0:S.elementFromPoint(T,R),D=mc(o,L),w=s==null?void 0:s.getBoundingClientRect();if(!w||!D)return;const O=vc(r,D,i,l,t);if(!O)return;let x=Qt(e,w),z=!1,I=null,A=!1,X=null;function K(){if(!u||!w)return;const[Z,$]=rc(x,w,C);h({x:Z,y:$}),M=requestAnimationFrame(K)}const U={...O,nodeId:r,type:D,position:O.position},te=l.get(r),J={inProgress:!0,isValid:null,from:Pi(te,U,fe.Left,!0),fromHandle:U,fromPosition:U.position,fromNode:te,to:x,toHandle:null,toPosition:ga[U.position],toNode:null};E(J);let ie=J;y==null||y(e,{nodeId:r,handleId:i,handleType:D});function ue(Z){if(!b()||!U){de(Z);return}const $=k();x=Qt(Z,w),P=zv(rr(x,$,!1,[1,1]),n,l,U),z||(K(),z=!0);const j=pc(Z,{handle:P,connectionMode:t,fromNodeId:r,fromHandleId:i,fromType:a?"target":"source",isValidConnection:_,doc:S,lib:c,flowId:f,nodeLookup:l});X=j.handleDomNode,I=j.connection,A=Av(!!P,j.isValid);const ge={...ie,isValid:A,to:P&&A?sc({x:P.x,y:P.y},$):x,toHandle:j.toHandle,toPosition:A&&j.toHandle?j.toHandle.position:ga[U.position],toNode:j.toHandle?l.get(j.toHandle.nodeId):null};A&&P&&ie.toHandle&&ge.toHandle&&ie.toHandle.type===ge.toHandle.type&&ie.toHandle.nodeId===ge.toHandle.nodeId&&ie.toHandle.id===ge.toHandle.id&&ie.to.x===ge.to.x&&ie.to.y===ge.to.y||(E(ge),ie=ge)}function de(Z){(P||X)&&I&&A&&(p==null||p(I));const{inProgress:$,...j}=ie,ge={...j,toPosition:ie.toHandle?ie.toPosition:null};N==null||N(Z,ge),o&&(m==null||m(Z,ge)),g(),cancelAnimationFrame(M),z=!1,A=!1,I=null,X=null,S.removeEventListener("mousemove",ue),S.removeEventListener("mouseup",de),S.removeEventListener("touchmove",ue),S.removeEventListener("touchend",de)}S.addEventListener("mousemove",ue),S.addEventListener("mouseup",de),S.addEventListener("touchmove",ue),S.addEventListener("touchend",de)}function pc(e,{handle:t,connectionMode:n,fromNodeId:i,fromHandleId:r,fromType:o,doc:a,lib:s,flowId:l,isValidConnection:c=yc,nodeLookup:u}){const f=o==="target",h=t?a.querySelector(`.${s}-flow__handle[data-id="${l}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:g,y}=Qt(e),p=a.elementFromPoint(g,y),N=p!=null&&p.classList.contains(`${s}-flow__handle`)?p:h,_={handleDomNode:N,isValid:!1,connection:null,toHandle:null};if(N){const m=mc(void 0,N),E=N.getAttribute("data-nodeid"),k=N.getAttribute("data-handleid"),b=N.classList.contains("connectable"),C=N.classList.contains("connectableend");if(!E||!m)return _;const S={source:f?E:i,sourceHandle:f?k:r,target:f?i:E,targetHandle:f?r:k};_.connection=S;const P=b&&C&&(n===Pn.Strict?f&&m==="source"||!f&&m==="target":E!==i||k!==r);_.isValid=P&&c(S),_.toHandle=vc(E,m,k,u,n,!1)}return _}const Tv={onPointerDown:Iv,isValid:pc};function Ov({domNode:e,panZoom:t,getTransform:n,getViewScale:i}){const r=_t(e);function o({translateExtent:s,width:l,height:c,zoomStep:u=10,pannable:f=!0,zoomable:h=!0,inversePan:g=!1}){const y=E=>{const k=n();if(E.sourceEvent.type!=="wheel"||!t)return;const b=-E.sourceEvent.deltaY*(E.sourceEvent.deltaMode===1?.05:E.sourceEvent.deltaMode?1:.002)*u,C=k[2]*Math.pow(2,b);t.scaleTo(C)};let p=[0,0];const N=E=>{(E.sourceEvent.type==="mousedown"||E.sourceEvent.type==="touchstart")&&(p=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY])},_=E=>{const k=n();if(E.sourceEvent.type!=="mousemove"&&E.sourceEvent.type!=="touchmove"||!t)return;const b=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY],C=[b[0]-p[0],b[1]-p[1]];p=b;const S=i()*Math.max(k[2],Math.log(k[2]))*(g?-1:1),M={x:k[0]-C[0]*S,y:k[1]-C[1]*S},P=[[0,0],[l,c]];t.setViewportConstrained({x:M.x,y:M.y,zoom:k[2]},P,s)},m=Ql().on("start",N).on("zoom",f?_:null).on("zoom.wheel",h?y:null);r.call(m,{})}function a(){r.on("zoom",null)}return{update:o,destroy:a,pointer:Nt}}const Dv=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,so=e=>({x:e.x,y:e.y,zoom:e.k}),wo=({x:e,y:t,zoom:n})=>io.translate(e,t).scale(n),Hn=(e,t)=>e.target.closest(`.${t}`),_c=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),xo=(e,t=0,n=()=>{})=>{const i=typeof t=="number"&&t>0;return i||n(),i?e.transition().duration(t).on("end",n):e},wc=e=>{const t=e.ctrlKey&&Lr()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Hv({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:i,panOnScrollMode:r,panOnScrollSpeed:o,zoomOnPinch:a,onPanZoomStart:s,onPanZoom:l,onPanZoomEnd:c}){return u=>{if(Hn(u,t))return!1;u.preventDefault(),u.stopImmediatePropagation();const f=n.property("__zoom").k||1;if(u.ctrlKey&&a){const N=Nt(u),_=wc(u),m=f*Math.pow(2,_);i.scaleTo(n,m,N,u);return}const h=u.deltaMode===1?20:1;let g=r===vn.Vertical?0:u.deltaX*h,y=r===vn.Horizontal?0:u.deltaY*h;!Lr()&&u.shiftKey&&r!==vn.Vertical&&(g=u.deltaY*h,y=0),i.translateBy(n,-(g/f)*o,-(y/f)*o,{internal:!0});const p=so(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,s==null||s(u,p)),e.isPanScrolling&&(l==null||l(u,p),e.panScrollTimeout=setTimeout(()=>{c==null||c(u,p),e.isPanScrolling=!1},150))}}function Rv({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(i,r){if(!t&&i.type==="wheel"&&!i.ctrlKey||Hn(i,e))return null;i.preventDefault(),n.call(this,i,r)}}function Lv({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return i=>{var o,a,s;if((o=i.sourceEvent)!=null&&o.internal)return;const r=so(i.transform);e.mouseButton=((a=i.sourceEvent)==null?void 0:a.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=r,((s=i.sourceEvent)==null?void 0:s.type)==="mousedown"&&t(!0),n&&(n==null||n(i.sourceEvent,r))}}function Vv({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:i,onPanZoom:r}){return o=>{var a,s;e.usedRightMouseButton=!!(n&&_c(t,e.mouseButton??0)),(a=o.sourceEvent)!=null&&a.sync||i([o.transform.x,o.transform.y,o.transform.k]),r&&!((s=o.sourceEvent)!=null&&s.internal)&&(r==null||r(o.sourceEvent,so(o.transform)))}}function Xv({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:r,onPaneContextMenu:o}){return a=>{var s;if(!((s=a.sourceEvent)!=null&&s.internal)&&(e.isZoomingOrPanning=!1,o&&_c(t,e.mouseButton??0)&&!e.usedRightMouseButton&&a.sourceEvent&&o(a.sourceEvent),e.usedRightMouseButton=!1,i(!1),r&&Dv(e.prevViewport,a.transform))){const l=so(a.transform);e.prevViewport=l,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{r==null||r(a.sourceEvent,l)},n?150:0)}}}function Yv({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:i,panOnScroll:r,zoomOnDoubleClick:o,userSelectionActive:a,noWheelClassName:s,noPanClassName:l,lib:c}){return u=>{var y;const f=e||t,h=n&&u.ctrlKey;if(u.button===1&&u.type==="mousedown"&&(Hn(u,`${c}-flow__node`)||Hn(u,`${c}-flow__edge`)))return!0;if(!i&&!f&&!r&&!o&&!n||a||Hn(u,s)&&u.type==="wheel"||Hn(u,l)&&(u.type!=="wheel"||r&&u.type==="wheel"&&!e)||!n&&u.ctrlKey&&u.type==="wheel")return!1;if(!n&&u.type==="touchstart"&&((y=u.touches)==null?void 0:y.length)>1)return u.preventDefault(),!1;if(!f&&!r&&!h&&u.type==="wheel"||!i&&(u.type==="mousedown"||u.type==="touchstart")||Array.isArray(i)&&!i.includes(u.button)&&u.type==="mousedown")return!1;const g=Array.isArray(i)&&i.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||u.type==="wheel")&&g}}function Wv({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:i,translateExtent:r,viewport:o,onPanZoom:a,onPanZoomStart:s,onPanZoomEnd:l,onDraggingChange:c}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=e.getBoundingClientRect(),h=Ql().clickDistance(!$t(i)||i<0?0:i).scaleExtent([t,n]).translateExtent(r),g=_t(e).call(h);E({x:o.x,y:o.y,zoom:Gn(o.zoom,t,n)},[[0,0],[f.width,f.height]],r);const y=g.on("wheel.zoom"),p=g.on("dblclick.zoom");h.wheelDelta(wc);function N(L,D){return g?new Promise(w=>{h==null||h.transform(xo(g,D==null?void 0:D.duration,()=>w(!0)),L)}):Promise.resolve(!1)}function _({noWheelClassName:L,noPanClassName:D,onPaneContextMenu:w,userSelectionActive:O,panOnScroll:x,panOnDrag:z,panOnScrollMode:I,panOnScrollSpeed:A,preventScrolling:X,zoomOnPinch:K,zoomOnScroll:U,zoomOnDoubleClick:te,zoomActivationKeyPressed:B,lib:J,onTransformChange:ie}){O&&!u.isZoomingOrPanning&&m();const de=x&&!B&&!O?Hv({zoomPanValues:u,noWheelClassName:L,d3Selection:g,d3Zoom:h,panOnScrollMode:I,panOnScrollSpeed:A,zoomOnPinch:K,onPanZoomStart:s,onPanZoom:a,onPanZoomEnd:l}):Rv({noWheelClassName:L,preventScrolling:X,d3ZoomHandler:y});if(g.on("wheel.zoom",de,{passive:!1}),!O){const $=Lv({zoomPanValues:u,onDraggingChange:c,onPanZoomStart:s});h.on("start",$);const j=Vv({zoomPanValues:u,panOnDrag:z,onPaneContextMenu:!!w,onPanZoom:a,onTransformChange:ie});h.on("zoom",j);const ge=Xv({zoomPanValues:u,panOnDrag:z,panOnScroll:x,onPaneContextMenu:w,onPanZoomEnd:l,onDraggingChange:c});h.on("end",ge)}const Z=Yv({zoomActivationKeyPressed:B,panOnDrag:z,zoomOnScroll:U,panOnScroll:x,zoomOnDoubleClick:te,zoomOnPinch:K,userSelectionActive:O,noPanClassName:D,noWheelClassName:L,lib:J});h.filter(Z),te?g.on("dblclick.zoom",p):g.on("dblclick.zoom",null)}function m(){h.on("zoom",null)}async function E(L,D,w){const O=wo(L),x=h==null?void 0:h.constrain()(O,D,w);return x&&await N(x),new Promise(z=>z(x))}async function k(L,D){const w=wo(L);return await N(w,D),new Promise(O=>O(w))}function b(L){if(g){const D=wo(L),w=g.property("__zoom");(w.k!==L.zoom||w.x!==L.x||w.y!==L.y)&&(h==null||h.transform(g,D,null,{sync:!0}))}}function C(){const L=g?jl(g.node()):{x:0,y:0,k:1};return{x:L.x,y:L.y,zoom:L.k}}function S(L,D){return g?new Promise(w=>{h==null||h.scaleTo(xo(g,D==null?void 0:D.duration,()=>w(!0)),L)}):Promise.resolve(!1)}function M(L,D){return g?new Promise(w=>{h==null||h.scaleBy(xo(g,D==null?void 0:D.duration,()=>w(!0)),L)}):Promise.resolve(!1)}function P(L){h==null||h.scaleExtent(L)}function T(L){h==null||h.translateExtent(L)}function R(L){const D=!$t(L)||L<0?0:L;h==null||h.clickDistance(D)}return{update:_,destroy:m,setViewport:k,setViewportConstrained:E,getViewport:C,scaleTo:S,scaleBy:M,setScaleExtent:P,setTranslateExtent:T,syncViewport:b,setClickDistance:R}}var cn;(function(e){e.Line="line",e.Handle="handle"})(cn||(cn={}));const Bv=["top-left","top-right","bottom-left","bottom-right"],Kv=["top","right","bottom","left"];function Fv({width:e,prevWidth:t,height:n,prevHeight:i,affectsX:r,affectsY:o}){const a=e-t,s=n-i,l=[a>0?1:a<0?-1:0,s>0?1:s<0?-1:0];return a&&r&&(l[0]=l[0]*-1),s&&o&&(l[1]=l[1]*-1),l}function qv(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),i=e.includes("left"),r=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:i,affectsY:r}}function on(e,t){return Math.max(0,t-e)}function sn(e,t){return Math.max(0,e-t)}function gr(e,t,n){return Math.max(0,t-e,e-n)}function Ma(e,t){return e?!t:t}function Gv(e,t,n,i,r,o,a,s){let{affectsX:l,affectsY:c}=t;const{isHorizontal:u,isVertical:f}=t,h=u&&f,{xSnapped:g,ySnapped:y}=n,{minWidth:p,maxWidth:N,minHeight:_,maxHeight:m}=i,{x:E,y:k,width:b,height:C,aspectRatio:S}=e;let M=Math.floor(u?g-e.pointerX:0),P=Math.floor(f?y-e.pointerY:0);const T=b+(l?-M:M),R=C+(c?-P:P),L=-o[0]*b,D=-o[1]*C;let w=gr(T,p,N),O=gr(R,_,m);if(a){let I=0,A=0;l&&M<0?I=on(E+M+L,a[0][0]):!l&&M>0&&(I=sn(E+T+L,a[1][0])),c&&P<0?A=on(k+P+D,a[0][1]):!c&&P>0&&(A=sn(k+R+D,a[1][1])),w=Math.max(w,I),O=Math.max(O,A)}if(s){let I=0,A=0;l&&M>0?I=sn(E+M,s[0][0]):!l&&M<0&&(I=on(E+T,s[1][0])),c&&P>0?A=sn(k+P,s[0][1]):!c&&P<0&&(A=on(k+R,s[1][1])),w=Math.max(w,I),O=Math.max(O,A)}if(r){if(u){const I=gr(T/S,_,m)*S;if(w=Math.max(w,I),a){let A=0;!l&&!c||l&&!c&&h?A=sn(k+D+T/S,a[1][1])*S:A=on(k+D+(l?M:-M)/S,a[0][1])*S,w=Math.max(w,A)}if(s){let A=0;!l&&!c||l&&!c&&h?A=on(k+T/S,s[1][1])*S:A=sn(k+(l?M:-M)/S,s[0][1])*S,w=Math.max(w,A)}}if(f){const I=gr(R*S,p,N)/S;if(O=Math.max(O,I),a){let A=0;!l&&!c||c&&!l&&h?A=sn(E+R*S+L,a[1][0])/S:A=on(E+(c?P:-P)*S+L,a[0][0])/S,O=Math.max(O,A)}if(s){let A=0;!l&&!c||c&&!l&&h?A=on(E+R*S,s[1][0])/S:A=sn(E+(c?P:-P)*S,s[0][0])/S,O=Math.max(O,A)}}}P=P+(P<0?O:-O),M=M+(M<0?w:-w),r&&(h?T>R*S?P=(Ma(l,c)?-M:M)/S:M=(Ma(l,c)?-P:P)*S:u?(P=M/S,c=l):(M=P*S,l=c));const x=l?E+M:E,z=c?k+P:k;return{width:b+(l?-M:M),height:C+(c?-P:P),x:o[0]*M*(l?-1:1)+x,y:o[1]*P*(c?-1:1)+z}}const xc={width:0,height:0,x:0,y:0},Zv={...xc,pointerX:0,pointerY:0,aspectRatio:1};function Uv(e){return[[0,0],[e.measured.width,e.measured.height]]}function $v(e,t,n){const i=t.position.x+e.position.x,r=t.position.y+e.position.y,o=e.measured.width??0,a=e.measured.height??0,s=n[0]*o,l=n[1]*a;return[[i-s,r-l],[i+o-s,r+a-l]]}function Jv({domNode:e,nodeId:t,getStoreItems:n,onChange:i,onEnd:r}){const o=_t(e);function a({controlPosition:l,boundaries:c,keepAspectRatio:u,onResizeStart:f,onResize:h,onResizeEnd:g,shouldResize:y}){let p={...xc},N={...Zv};const _=qv(l);let m,E=null,k=[],b,C,S;const M=Ll().on("start",P=>{const{nodeLookup:T,transform:R,snapGrid:L,snapToGrid:D,nodeOrigin:w,paneDomNode:O}=n();if(m=T.get(t),!m)return;E=(O==null?void 0:O.getBoundingClientRect())??null;const{xSnapped:x,ySnapped:z}=pi(P.sourceEvent,{transform:R,snapGrid:L,snapToGrid:D,containerBounds:E});p={width:m.measured.width??0,height:m.measured.height??0,x:m.position.x??0,y:m.position.y??0},N={...p,pointerX:x,pointerY:z,aspectRatio:p.width/p.height},b=void 0,m.parentId&&(m.extent==="parent"||m.expandParent)&&(b=T.get(m.parentId),C=b&&m.extent==="parent"?Uv(b):void 0),k=[],S=void 0;for(const[I,A]of T)if(A.parentId===t&&(k.push({id:I,position:{...A.position},extent:A.extent}),A.extent==="parent"||A.expandParent)){const X=$v(A,m,A.origin??w);S?S=[[Math.min(X[0][0],S[0][0]),Math.min(X[0][1],S[0][1])],[Math.max(X[1][0],S[1][0]),Math.max(X[1][1],S[1][1])]]:S=X}f==null||f(P,{...p})}).on("drag",P=>{const{transform:T,snapGrid:R,snapToGrid:L,nodeOrigin:D}=n(),w=pi(P.sourceEvent,{transform:T,snapGrid:R,snapToGrid:L,containerBounds:E}),O=[];if(!m)return;const{x,y:z,width:I,height:A}=p,X={},K=m.origin??D,{width:U,height:te,x:B,y:J}=Gv(N,_,w,c,u,K,C,S),ie=U!==I,ue=te!==A,de=B!==x&&ie,Z=J!==z&&ue;if(!de&&!Z&&!ie&&!ue)return;if((de||Z||K[0]===1||K[1]===1)&&(X.x=de?B:p.x,X.y=Z?J:p.y,p.x=X.x,p.y=X.y,k.length>0)){const xe=B-x,ye=J-z;for(const ke of k)ke.position={x:ke.position.x-xe+K[0]*(U-I),y:ke.position.y-ye+K[1]*(te-A)},O.push(ke)}if((ie||ue)&&(X.width=ie?U:p.width,X.height=ue?te:p.height,p.width=X.width,p.height=X.height),b&&m.expandParent){const xe=K[0]*(X.width??0);X.x&&X.x<xe&&(p.x=xe,N.x=N.x-(X.x-xe));const ye=K[1]*(X.height??0);X.y&&X.y<ye&&(p.y=ye,N.y=N.y-(X.y-ye))}const $=Fv({width:p.width,prevWidth:I,height:p.height,prevHeight:A,affectsX:_.affectsX,affectsY:_.affectsY}),j={...p,direction:$};(y==null?void 0:y(P,j))!==!1&&(h==null||h(P,j),i(X,O))}).on("end",P=>{g==null||g(P,{...p}),r==null||r()});o.call(M)}function s(){o.on(".drag",null)}return{update:a,destroy:s}}var jv=se('<div role="button" tabindex="-1"><!></div>');function wn(e,t){le(t,!1);const n=Je(),i=()=>q(U,"$connectable",n),r=()=>q(ue,"$connectionRadius",n),o=()=>q(J,"$domNode",n),a=()=>q(ie,"$nodeLookup",n),s=()=>q(B,"$connectionMode",n),l=()=>q($,"$lib",n),c=()=>q(Ce,"$autoPanOnConnect",n),u=()=>q(Ge,"$flowId",n),f=()=>q(Z,"$isValidConnectionStore",n),h=()=>q(ge,"$onedgecreate",n),g=()=>q(qe,"$onConnectAction",n),y=()=>q(Me,"$onConnectStartAction",n),p=()=>q(we,"$onConnectEndAction",n),N=()=>q(de,"$viewport",n),_=()=>q(vt,"$connection",n),m=()=>q(Be,"$edges",n),E=()=>q(Le,"$connectionLookup",n),k=F(),b=F(),C=F(),S=F(),M=F(),P=F(),T=F(),R=F();let L=v(t,"id",8,void 0),D=v(t,"type",8,"source"),w=v(t,"position",24,()=>fe.Top),O=v(t,"style",8,void 0),x=v(t,"isValidConnection",8,void 0),z=v(t,"onconnect",8,void 0),I=v(t,"ondisconnect",8,void 0),A=v(t,"isConnectable",8,void 0),X=v(t,"class",8,void 0);const K=Kn("svelteflow__node_id"),U=Kn("svelteflow__node_connectable"),te=Fe(),{connectionMode:B,domNode:J,nodeLookup:ie,connectionRadius:ue,viewport:de,isValidConnection:Z,lib:$,addEdge:j,onedgecreate:ge,panBy:xe,cancelConnection:ye,updateConnection:ke,autoPanOnConnect:Ce,edges:Be,connectionLookup:Le,onconnect:qe,onconnectstart:Me,onconnectend:we,flowId:Ge,connection:vt}=te;function Ae(Ze){const et=lc(Ze);(et&&Ze.button===0||!et)&&Tv.onPointerDown(Ze,{handleId:d(C),nodeId:K,isTarget:d(k),connectionRadius:r(),domNode:o(),nodeLookup:a(),connectionMode:s(),lib:l(),autoPanOnConnect:c(),flowId:u(),isValidConnection:x()??f(),updateConnection:ke,cancelConnection:ye,panBy:xe,onConnect:Pe=>{var bt;const nt=h()?h()(Pe):Pe;nt&&(j(nt),(bt=g())==null||bt(Pe))},onConnectStart:(Pe,nt)=>{var bt;(bt=y())==null||bt(Pe,{nodeId:nt.nodeId,handleId:nt.handleId,handleType:nt.handleType})},onConnectEnd:(Pe,nt)=>{var bt;(bt=p())==null||bt(Pe,nt)},getTransform:()=>[N().x,N().y,N().zoom],getFromHandle:()=>_().fromHandle})}let je=F(null),Ke=F();G(()=>Y(D()),()=>{H(k,D()==="target")}),G(()=>(Y(A()),i()),()=>{H(b,A()!==void 0?A():i())}),G(()=>Y(L()),()=>{H(C,L()||null)}),G(()=>(Y(z()),Y(I()),m(),E(),Y(D()),Y(L())),()=>{(z()||I())&&(m(),H(Ke,E().get(`${K}-${D()}-${L()||null}`)))}),G(()=>(d(je),d(Ke),Y(I()),Y(z())),()=>{if(d(je)&&!ec(d(Ke),d(je))){const Ze=d(Ke)??new Map;va(d(je),Ze,I()),va(Ze,d(je),z())}H(je,d(Ke)??new Map)}),G(()=>_(),()=>{H(S,!!_().fromHandle)}),G(()=>(_(),Y(D()),d(C)),()=>{var Ze,et,Pe;H(M,((Ze=_().fromHandle)==null?void 0:Ze.nodeId)===K&&((et=_().fromHandle)==null?void 0:et.type)===D()&&((Pe=_().fromHandle)==null?void 0:Pe.id)===d(C))}),G(()=>(_(),Y(D()),d(C)),()=>{var Ze,et,Pe;H(P,((Ze=_().toHandle)==null?void 0:Ze.nodeId)===K&&((et=_().toHandle)==null?void 0:et.type)===D()&&((Pe=_().toHandle)==null?void 0:Pe.id)===d(C))}),G(()=>(s(),_(),Y(D()),d(C)),()=>{var Ze,et,Pe;H(T,s()===Pn.Strict?((Ze=_().fromHandle)==null?void 0:Ze.type)!==D():K!==((et=_().fromHandle)==null?void 0:et.nodeId)||d(C)!==((Pe=_().fromHandle)==null?void 0:Pe.id))}),G(()=>(d(P),_()),()=>{H(R,d(P)&&_().isValid)}),rt(),he();var Oe=jv();Q(Oe,"data-nodeid",K);const bn=oe(()=>Dt(at(["svelte-flow__handle",`svelte-flow__handle-${w()}`,"nodrag","nopan",w(),X()])));var Tn=ee(Oe);Re(Tn,t,"default",{}),me(()=>{Q(Oe,"data-handleid",d(C)),Q(Oe,"data-handlepos",w()),Q(Oe,"data-id",`${u()??""}-${K??""}-${(L()||null)??""}-${D()??""}`),hs(Oe,d(bn),""),Q(Oe,"style",O()),Ye(Oe,"valid",d(R)),Ye(Oe,"connectingto",d(P)),Ye(Oe,"connectingfrom",d(M)),Ye(Oe,"source",!d(k)),Ye(Oe,"target",d(k)),Ye(Oe,"connectablestart",d(b)),Ye(Oe,"connectableend",d(b)),Ye(Oe,"connectable",d(b)),Ye(Oe,"connectionindicator",d(b)&&(!d(S)||d(T)))}),ze("mousedown",Oe,Ae),ze("touchstart",Oe,Ae),W(e,Oe),ce()}var Qv=se("<!> <!>",1);function Jo(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);_e(n,["data","targetPosition","sourcePosition"]),le(t,!1);let i=v(t,"data",24,()=>({label:"Node"})),r=v(t,"targetPosition",8,void 0),o=v(t,"sourcePosition",8,void 0);he();var a=Qv(),s=ae(a),l=oe(()=>r()??fe.Top);wn(s,{type:"target",get position(){return d(l)}});var c=ne(s),u=ne(c),f=oe(()=>o()??fe.Bottom);wn(u,{type:"source",get position(){return d(f)}}),me(()=>{var h;return qt(c,` ${((h=i())==null?void 0:h.label)??""} `)}),W(e,a),ce()}var e0=se(" <!>",1);function t0(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);_e(n,["data","sourcePosition"]),le(t,!1);let i=v(t,"data",24,()=>({label:"Node"})),r=v(t,"sourcePosition",8,void 0);he();var o=e0(),a=ae(o),s=ne(a),l=oe(()=>r()??fe.Bottom);wn(s,{type:"source",get position(){return d(l)}}),me(()=>{var c;return qt(a,`${((c=i())==null?void 0:c.label)??""} `)}),W(e,o),ce()}var n0=se(" <!>",1);function i0(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);_e(n,["data","targetPosition"]),le(t,!1);let i=v(t,"data",24,()=>({label:"Node"})),r=v(t,"targetPosition",8,void 0);he();var o=n0(),a=ae(o),s=ne(a),l=oe(()=>r()??fe.Top);wn(s,{type:"target",get position(){return d(l)}}),me(()=>{var c;return qt(a,`${((c=i())==null?void 0:c.label)??""} `)}),W(e,o),ce()}function r0(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);_e(n,[])}function Pa(e,t,n){if(!t)return;const i=n?t.querySelector(n):t;i&&i.appendChild(e)}function bo(e,{target:t,domNode:n}){return Pa(e,n,t),{async update({target:i,domNode:r}){Pa(e,r,i)},destroy(){e.parentNode&&e.parentNode.removeChild(e)}}}var o0=se("<div><!></div>");function s0(e,t){le(t,!1);const n=Je(),i=()=>q(r,"$domNode",n),{domNode:r}=Fe();he();var o=o0(),a=ee(o);Re(a,t,"default",{}),ut(o,(s,l)=>bo==null?void 0:bo(s,l),()=>({target:".svelte-flow__edgelabel-renderer",domNode:i()})),W(e,o),ce()}function bc(){const{edgeLookup:e,selectionRect:t,selectionRectMode:n,multiselectionKeyPressed:i,addSelectedEdges:r,unselectNodesAndEdges:o,elementsSelectable:a}=Fe();return s=>{const l=V(e).get(s);if(!l){console.warn("012",tr.error012(s));return}(l.selectable||V(a)&&typeof l.selectable>"u")&&(t.set(null),n.set(null),l.selected?l.selected&&V(i)&&o({nodes:[],edges:[l]}):r([s]))}}var a0=se('<div class="svelte-flow__edge-label" role="button" tabindex="-1"><!></div>');function l0(e,t){le(t,!1);let n=v(t,"style",8,void 0),i=v(t,"x",8,void 0),r=v(t,"y",8,void 0);const o=bc(),a=Kn("svelteflow__edge_id");he(),s0(e,{children:(s,l)=>{var c=a0(),u=ee(c);Re(u,t,"default",{}),me(()=>{Q(c,"style","pointer-events: all;"+n()),We(c,"transform",`translate(-50%, -50%) translate(${i()??""}px,${r()??""}px)`)}),ze("keyup",c,()=>{}),ze("click",c,()=>{a&&o(a)}),W(s,c)},$$slots:{default:!0}}),ce()}var c0=$e('<path fill="none" class="svelte-flow__edge-interaction"></path>'),u0=$e('<path fill="none"></path><!><!>',1);function ao(e,t){le(t,!1);let n=v(t,"id",8,void 0),i=v(t,"path",8),r=v(t,"label",8,void 0),o=v(t,"labelX",8,void 0),a=v(t,"labelY",8,void 0),s=v(t,"labelStyle",8,void 0),l=v(t,"markerStart",8,void 0),c=v(t,"markerEnd",8,void 0),u=v(t,"style",8,void 0),f=v(t,"interactionWidth",8,20),h=v(t,"class",8,void 0),g=f()===void 0?20:f();he();var y=u0(),p=ae(y);const N=oe(()=>Dt(at(["svelte-flow__edge-path",h()])));var _=ne(p);{var m=b=>{var C=c0();Q(C,"stroke-opacity",0),Q(C,"stroke-width",g),me(()=>Q(C,"d",i())),W(b,C)};Ne(_,b=>{g&&b(m)})}var E=ne(_);{var k=b=>{l0(b,{get x(){return o()},get y(){return a()},get style(){return s()},children:(C,S)=>{var M=Do();me(()=>qt(M,r())),W(C,M)},$$slots:{default:!0}})};Ne(E,b=>{r()&&b(k)})}me(()=>{Q(p,"id",n()),Q(p,"d",i()),In(p,d(N),""),Q(p,"marker-start",l()),Q(p,"marker-end",c()),Q(p,"style",u())}),W(e,y),ce()}function jo(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);_e(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),le(t,!1);const i=F(),r=F(),o=F();let a=v(t,"label",8,void 0),s=v(t,"labelStyle",8,void 0),l=v(t,"style",8,void 0),c=v(t,"markerStart",8,void 0),u=v(t,"markerEnd",8,void 0),f=v(t,"interactionWidth",8,void 0),h=v(t,"sourceX",8),g=v(t,"sourceY",8),y=v(t,"sourcePosition",8),p=v(t,"targetX",8),N=v(t,"targetY",8),_=v(t,"targetPosition",8);G(()=>(d(i),d(r),d(o),Y(h()),Y(g()),Y(p()),Y(N()),Y(y()),Y(_())),()=>{(m=>(H(i,m[0]),H(r,m[1]),H(o,m[2])))(cc({sourceX:h(),sourceY:g(),targetX:p(),targetY:N(),sourcePosition:y(),targetPosition:_()}))}),rt(),he(),ao(e,{get path(){return d(i)},get labelX(){return d(r)},get labelY(){return d(o)},get label(){return a()},get labelStyle(){return s()},get markerStart(){return c()},get markerEnd(){return u()},get interactionWidth(){return f()},get style(){return l()}}),ce()}function d0(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);_e(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),le(t,!1);const i=F(),r=F(),o=F();let a=v(t,"label",8,void 0),s=v(t,"labelStyle",8,void 0),l=v(t,"style",8,void 0),c=v(t,"markerStart",8,void 0),u=v(t,"markerEnd",8,void 0),f=v(t,"interactionWidth",8,void 0),h=v(t,"sourceX",8),g=v(t,"sourceY",8),y=v(t,"sourcePosition",8),p=v(t,"targetX",8),N=v(t,"targetY",8),_=v(t,"targetPosition",8);G(()=>(d(i),d(r),d(o),Y(h()),Y(g()),Y(p()),Y(N()),Y(y()),Y(_())),()=>{(m=>(H(i,m[0]),H(r,m[1]),H(o,m[2])))(Vr({sourceX:h(),sourceY:g(),targetX:p(),targetY:N(),sourcePosition:y(),targetPosition:_()}))}),rt(),he(),ao(e,{get path(){return d(i)},get labelX(){return d(r)},get labelY(){return d(o)},get label(){return a()},get labelStyle(){return s()},get markerStart(){return c()},get markerEnd(){return u()},get interactionWidth(){return f()},get style(){return l()}}),ce()}function f0(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);_e(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","targetX","targetY"]),le(t,!1);const i=F(),r=F(),o=F();let a=v(t,"label",8,void 0),s=v(t,"labelStyle",8,void 0),l=v(t,"style",8,void 0),c=v(t,"markerStart",8,void 0),u=v(t,"markerEnd",8,void 0),f=v(t,"interactionWidth",8,void 0),h=v(t,"sourceX",8),g=v(t,"sourceY",8),y=v(t,"targetX",8),p=v(t,"targetY",8);G(()=>(d(i),d(r),d(o),Y(h()),Y(g()),Y(y()),Y(p())),()=>{(N=>(H(i,N[0]),H(r,N[1]),H(o,N[2])))(Uo({sourceX:h(),sourceY:g(),targetX:y(),targetY:p()}))}),rt(),he(),ao(e,{get path(){return d(i)},get labelX(){return d(r)},get labelY(){return d(o)},get label(){return a()},get labelStyle(){return s()},get markerStart(){return c()},get markerEnd(){return u()},get interactionWidth(){return f()},get style(){return l()}}),ce()}function h0(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);_e(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),le(t,!1);const i=F(),r=F(),o=F();let a=v(t,"label",8,void 0),s=v(t,"labelStyle",8,void 0),l=v(t,"style",8,void 0),c=v(t,"markerStart",8,void 0),u=v(t,"markerEnd",8,void 0),f=v(t,"interactionWidth",8,void 0),h=v(t,"sourceX",8),g=v(t,"sourceY",8),y=v(t,"sourcePosition",8),p=v(t,"targetX",8),N=v(t,"targetY",8),_=v(t,"targetPosition",8);G(()=>(d(i),d(r),d(o),Y(h()),Y(g()),Y(p()),Y(N()),Y(y()),Y(_())),()=>{(m=>(H(i,m[0]),H(r,m[1]),H(o,m[2])))(Vr({sourceX:h(),sourceY:g(),targetX:p(),targetY:N(),sourcePosition:y(),targetPosition:_(),borderRadius:0}))}),rt(),he(),ao(e,{get path(){return d(i)},get labelX(){return d(r)},get labelY(){return d(o)},get label(){return a()},get labelStyle(){return s()},get markerStart(){return c()},get markerEnd(){return u()},get interactionWidth(){return f()},get style(){return l()}}),ce()}function g0(e,t){const n=e.set,i=t.set,r=V(e),o=V(t);let s=r.length===0&&o.length>0?o:r;e.set(s);const l=c=>{const u=n(c);return s=u,i(s),u};e.set=t.set=l,e.update=t.update=c=>l(c(s))}function v0(e,t){const n=e.set,i=t.set;let r=V(t);e.set(r);const o=a=>{n(a),i(a),r=a};e.set=t.set=o,e.update=t.update=a=>o(a(r))}const m0=(e,t,n)=>{if(!n)return;const i=V(e),r=t.set,o=n.set;let a=n?V(n):{x:0,y:0,zoom:1};t.set(a),t.set=s=>(r(s),o(s),a=s,s),n.set=s=>(i==null||i.syncViewport(s),r(s),o(s),a=s,s),t.update=s=>{t.set(s(a))},n.update=s=>{n.set(s(a))}},y0=(e,t,n,i=[0,0],r=Or)=>{const{subscribe:o,set:a,update:s}=re([]);let l=e,c={},u=!0;const f=p=>(dc(p,t,n,{elevateNodesOnSelect:u,nodeOrigin:i,nodeExtent:r,defaults:c,checkEquality:!1}),l=p,a(l),l),h=p=>f(p(l)),g=p=>{c=p},y=p=>{u=p.elevateNodesOnSelect??u};return f(l),{subscribe:o,set:f,update:h,setDefaultOptions:g,setOptions:y}},p0=(e,t,n,i)=>{const{subscribe:r,set:o,update:a}=re([]);let s=e,l={};const c=h=>{const g=l?h.map(y=>({...l,...y})):h;hc(t,n,g),s=g,o(s)},u=h=>c(h(s)),f=h=>{l=h};return c(s),{subscribe:r,set:c,update:u,setDefaultOptions:f}},Ec={input:t0,output:i0,default:Jo,group:r0},kc={straight:f0,smoothstep:d0,default:jo,step:h0},_0=({nodes:e=[],edges:t=[],width:n,height:i,fitView:r,nodeOrigin:o,nodeExtent:a})=>{const s=new Map,l=new Map,c=new Map,u=new Map,f=o??[0,0],h=a??Or;dc(e,s,l,{nodeExtent:h,nodeOrigin:f,elevateNodesOnSelect:!1,checkEquality:!1}),hc(c,u,t);let g={x:0,y:0,zoom:1};if(r&&n&&i){const y=ir(s,{filter:p=>!!((p.width||p.initialWidth)&&(p.height||p.initialHeight))});g=Es(y,n,i,.5,2,.1)}return{flowId:re(null),nodes:y0(e,s,l,f,h),nodeLookup:Et(s),parentLookup:Et(l),edgeLookup:Et(u),visibleNodes:Et([]),edges:p0(t,c,u),visibleEdges:Et([]),connectionLookup:Et(c),height:re(500),width:re(500),minZoom:re(.5),maxZoom:re(2),nodeOrigin:re(f),nodeDragThreshold:re(1),nodeExtent:re(h),translateExtent:re(Or),autoPanOnNodeDrag:re(!0),autoPanOnConnect:re(!0),fitViewOnInit:re(!1),fitViewOnInitDone:re(!1),fitViewOptions:re(void 0),panZoom:re(null),snapGrid:re(null),dragging:re(!1),selectionRect:re(null),selectionKeyPressed:re(!1),multiselectionKeyPressed:re(!1),deleteKeyPressed:re(!1),panActivationKeyPressed:re(!1),zoomActivationKeyPressed:re(!1),selectionRectMode:re(null),selectionMode:re(Dr.Partial),nodeTypes:re(Ec),edgeTypes:re(kc),viewport:re(g),connectionMode:re(Pn.Strict),domNode:re(null),connection:Et(qo),connectionLineType:re(Xn.Bezier),connectionRadius:re(20),isValidConnection:re(()=>!0),nodesDraggable:re(!0),nodesConnectable:re(!0),elementsSelectable:re(!0),selectNodesOnDrag:re(!0),markers:Et([]),defaultMarkerColor:re("#b1b1b7"),lib:Et("svelte"),onlyRenderVisibleElements:re(!1),onerror:re(iv),ondelete:re(void 0),onedgecreate:re(void 0),onconnect:re(void 0),onconnectstart:re(void 0),onconnectend:re(void 0),onbeforedelete:re(void 0),nodesInitialized:re(!1),edgesInitialized:re(!1),viewportInitialized:re(!1),initialized:Et(!1)}};function w0(e){const t=Cn([e.edges,e.nodes,e.nodeLookup,e.onlyRenderVisibleElements,e.viewport,e.width,e.height],([n,,i,r,o,a,s])=>r&&a&&s?n.filter(c=>{const u=i.get(c.source),f=i.get(c.target);return u&&f&&uv({sourceNode:u,targetNode:f,width:a,height:s,transform:[o.x,o.y,o.zoom]})}):n);return Cn([t,e.nodes,e.nodeLookup,e.connectionMode,e.onerror],([n,,i,r,o])=>n.reduce((s,l)=>{const c=i.get(l.source),u=i.get(l.target);if(!c||!u)return s;const f=yv({id:l.id,sourceNode:c,targetNode:u,sourceHandle:l.sourceHandle||null,targetHandle:l.targetHandle||null,connectionMode:r,onError:o});return f&&s.push({...l,zIndex:cv({selected:l.selected,zIndex:l.zIndex,sourceNode:c,targetNode:u,elevateOnSelect:!1}),...f}),s},[]))}function x0(e){return Cn([e.nodeLookup,e.onlyRenderVisibleElements,e.width,e.height,e.viewport,e.nodes],([t,n,i,r,o])=>{const a=[o.x,o.y,o.zoom];return n?tc(t,{x:0,y:0,width:i,height:r},a,!0):Array.from(t.values())})}const Ms=Symbol();function b0({nodes:e,edges:t,width:n,height:i,fitView:r,nodeOrigin:o,nodeExtent:a}){const s=_0({nodes:e,edges:t,width:n,height:i,fitView:r,nodeOrigin:o,nodeExtent:a});function l(x){s.nodeTypes.set({...Ec,...x})}function c(x){s.edgeTypes.set({...kc,...x})}function u(x){const z=V(s.edges);s.edges.set(hv(x,z))}const f=(x,z=!1)=>{var A;const I=V(s.nodeLookup);for(const[X,K]of x){const U=(A=I.get(X))==null?void 0:A.internals.userNode;U&&(U.position=K.position,U.dragging=z)}s.nodes.update(X=>X)};function h(x){var K,U,te;const z=V(s.nodeLookup),I=V(s.parentLookup),{changes:A,updatedInternals:X}=kv(x,z,V(s.parentLookup),V(s.domNode),V(s.nodeOrigin));if(X){if(wv(z,I,{nodeOrigin:o,nodeExtent:a}),!V(s.fitViewOnInitDone)&&V(s.fitViewOnInit)){const B=V(s.fitViewOptions),J=y({...B,nodes:B==null?void 0:B.nodes});s.fitViewOnInitDone.set(J)}for(const B of A){const J=(K=z.get(B.id))==null?void 0:K.internals.userNode;if(J)switch(B.type){case"dimensions":{const ie={...J.measured,...B.dimensions};B.setAttributes&&(J.width=((U=B.dimensions)==null?void 0:U.width)??J.width,J.height=((te=B.dimensions)==null?void 0:te.height)??J.height),J.measured=ie;break}case"position":J.position=B.position??J.position;break}}s.nodes.update(B=>B),V(s.nodesInitialized)||s.nodesInitialized.set(!0)}}function g(x){const z=V(s.panZoom),I=V(s.domNode);if(!z||!I)return Promise.resolve(!1);const{width:A,height:X}=ks(I),K=ma(V(s.nodeLookup),x);return ya({nodes:K,width:A,height:X,minZoom:V(s.minZoom),maxZoom:V(s.maxZoom),panZoom:z},x)}function y(x){const z=V(s.panZoom);if(!z)return!1;const I=ma(V(s.nodeLookup),x);return ya({nodes:I,width:V(s.width),height:V(s.height),minZoom:V(s.minZoom),maxZoom:V(s.maxZoom),panZoom:z},x),I.size>0}function p(x,z){const I=V(s.panZoom);return I?I.scaleBy(x,z):Promise.resolve(!1)}function N(x){return p(1.2,x)}function _(x){return p(1/1.2,x)}function m(x){const z=V(s.panZoom);z&&(z.setScaleExtent([x,V(s.maxZoom)]),s.minZoom.set(x))}function E(x){const z=V(s.panZoom);z&&(z.setScaleExtent([V(s.minZoom),x]),s.maxZoom.set(x))}function k(x){const z=V(s.panZoom);z&&(z.setTranslateExtent(x),s.translateExtent.set(x))}function b(x){let z=!1;return x.forEach(I=>{I.selected&&(I.selected=!1,z=!0)}),z}function C(x){var z;(z=V(s.panZoom))==null||z.setClickDistance(x)}function S(x){b((x==null?void 0:x.nodes)||V(s.nodes))&&s.nodes.set(V(s.nodes)),b((x==null?void 0:x.edges)||V(s.edges))&&s.edges.set(V(s.edges))}s.deleteKeyPressed.subscribe(async x=>{var z;if(x){const I=V(s.nodes),A=V(s.edges),X=I.filter(B=>B.selected),K=A.filter(B=>B.selected),{nodes:U,edges:te}=await nc({nodesToRemove:X,edgesToRemove:K,nodes:I,edges:A,onBeforeDelete:V(s.onbeforedelete)});(U.length||te.length)&&(s.nodes.update(B=>B.filter(J=>!U.some(ie=>ie.id===J.id))),s.edges.update(B=>B.filter(J=>!te.some(ie=>ie.id===J.id))),(z=V(s.ondelete))==null||z({nodes:U,edges:te}))}});function M(x){const z=V(s.multiselectionKeyPressed);s.nodes.update(I=>I.map(A=>{const X=x.includes(A.id),K=z&&A.selected||X;return A.selected=K,A})),z||s.edges.update(I=>I.map(A=>(A.selected=!1,A)))}function P(x){const z=V(s.multiselectionKeyPressed);s.edges.update(I=>I.map(A=>{const X=x.includes(A.id),K=z&&A.selected||X;return A.selected=K,A})),z||s.nodes.update(I=>I.map(A=>(A.selected=!1,A)))}function T(x){var I;const z=(I=V(s.nodes))==null?void 0:I.find(A=>A.id===x);if(!z){console.warn("012",tr.error012(x));return}s.selectionRect.set(null),s.selectionRectMode.set(null),z.selected?z.selected&&V(s.multiselectionKeyPressed)&&S({nodes:[z],edges:[]}):M([x])}function R(x){const z=V(s.viewport);return Sv({delta:x,panZoom:V(s.panZoom),transform:[z.x,z.y,z.zoom],translateExtent:V(s.translateExtent),width:V(s.width),height:V(s.height)})}const L=re(qo),D=x=>{L.set({...x})};function w(){L.set(qo)}function O(){s.fitViewOnInitDone.set(!1),s.selectionRect.set(null),s.selectionRectMode.set(null),s.snapGrid.set(null),s.isValidConnection.set(()=>!0),S(),w()}return{...s,visibleEdges:w0(s),visibleNodes:x0(s),connection:Cn([L,s.viewport],([x,z])=>x.inProgress?{...x,to:rr(x.to,[z.x,z.y,z.zoom])}:{...x}),markers:Cn([s.edges,s.defaultMarkerColor,s.flowId],([x,z,I])=>pv(x,{defaultColor:z,id:I})),initialized:(()=>{let x=!1;const z=V(s.nodes).length,I=V(s.edges).length;return Cn([s.nodesInitialized,s.edgesInitialized,s.viewportInitialized],([A,X,K])=>x||(z===0?x=K:I===0?x=K&&A:x=K&&A&&X,x))})(),syncNodeStores:x=>g0(s.nodes,x),syncEdgeStores:x=>v0(s.edges,x),syncViewport:x=>m0(s.panZoom,s.viewport,x),setNodeTypes:l,setEdgeTypes:c,addEdge:u,updateNodePositions:f,updateNodeInternals:h,zoomIn:N,zoomOut:_,fitView:x=>g(x),setMinZoom:m,setMaxZoom:E,setTranslateExtent:k,setPaneClickDistance:C,unselectNodesAndEdges:S,addSelectedNodes:M,addSelectedEdges:P,handleNodeSelection:T,panBy:R,updateConnection:D,cancelConnection:w,reset:O}}function Fe(){const e=Kn(Ms);if(!e)throw new Error("In order to use useStore you need to wrap your component in a <SvelteFlowProvider />");return e.getStore()}function E0({nodes:e,edges:t,width:n,height:i,fitView:r,nodeOrigin:o,nodeExtent:a}){const s=b0({nodes:e,edges:t,width:n,height:i,fitView:r,nodeOrigin:o,nodeExtent:a});return Cr(Ms,{getStore:()=>s}),s}function Eo(e,t){const{panZoom:n,minZoom:i,maxZoom:r,initialViewport:o,viewport:a,dragging:s,translateExtent:l,paneClickDistance:c}=t,u=Wv({domNode:e,minZoom:i,maxZoom:r,translateExtent:l,viewport:o,paneClickDistance:c,onDraggingChange:s.set}),f=u.getViewport();return a.set(f),n.set(u),u.update(t),{update(h){u.update(h)}}}var k0=se('<div class="svelte-flow__zoom svelte-4xkw84"><!></div>');function S0(e,t){le(t,!1);const n=Je(),i=()=>q(z,"$panActivationKeyPressed",n),r=()=>q(L,"$minZoom",n),o=()=>q(D,"$maxZoom",n),a=()=>q(I,"$zoomActivationKeyPressed",n),s=()=>q(R,"$selectionRect",n),l=()=>q(O,"$translateExtent",n),c=()=>q(x,"$lib",n),u=F(),f=F(),h=F();let g=v(t,"initialViewport",8,void 0),y=v(t,"onMoveStart",8,void 0),p=v(t,"onMove",8,void 0),N=v(t,"onMoveEnd",8,void 0),_=v(t,"panOnScrollMode",8),m=v(t,"preventScrolling",8),E=v(t,"zoomOnScroll",8),k=v(t,"zoomOnDoubleClick",8),b=v(t,"zoomOnPinch",8),C=v(t,"panOnDrag",8),S=v(t,"panOnScroll",8),M=v(t,"paneClickDistance",8);const{viewport:P,panZoom:T,selectionRect:R,minZoom:L,maxZoom:D,dragging:w,translateExtent:O,lib:x,panActivationKeyPressed:z,zoomActivationKeyPressed:I,viewportInitialized:A}=Fe(),X=te=>P.set({x:te[0],y:te[1],zoom:te[2]});ii(()=>{bi(A,!0)}),G(()=>Y(g()),()=>{H(u,g()||{x:0,y:0,zoom:1})}),G(()=>(i(),Y(C())),()=>{H(f,i()||C())}),G(()=>(i(),Y(S())),()=>{H(h,i()||S())}),rt(),he();var K=k0(),U=ee(K);Re(U,t,"default",{}),ut(K,(te,B)=>Eo==null?void 0:Eo(te,B),()=>({viewport:P,minZoom:r(),maxZoom:o(),initialViewport:d(u),dragging:w,panZoom:T,onPanZoomStart:y(),onPanZoom:p(),onPanZoomEnd:N(),zoomOnScroll:E(),zoomOnDoubleClick:k(),zoomOnPinch:b(),panOnScroll:d(h),panOnDrag:d(f),panOnScrollSpeed:.5,panOnScrollMode:_()||vn.Free,zoomActivationKeyPressed:a(),preventScrolling:typeof m()=="boolean"?m():!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!s(),translateExtent:l(),lib:c(),paneClickDistance:M(),onTransformChange:X})),W(e,K),ce()}function za(e,t){return n=>{n.target===t&&(e==null||e(n))}}function Aa(e){return t=>{const n=e.includes(t.id);return t.selected!==n&&(t.selected=n),t}}var C0=se('<div class="svelte-flow__pane svelte-1esy7hx"><!></div>');function N0(e,t){le(t,!1);const n=Je(),i=()=>q(D,"$panActivationKeyPressed",n),r=()=>q(R,"$selectionKeyPressed",n),o=()=>q(P,"$selectionRect",n),a=()=>q(M,"$elementsSelectable",n),s=()=>q(T,"$selectionRectMode",n),l=()=>q(b,"$edges",n),c=()=>q(k,"$nodeLookup",n),u=()=>q(C,"$viewport",n),f=()=>q(L,"$selectionMode",n),h=()=>q(S,"$dragging",n),g=F(),y=F(),p=F();let N=v(t,"panOnDrag",8,void 0),_=v(t,"selectionOnDrag",8,void 0);const m=jr(),{nodes:E,nodeLookup:k,edges:b,viewport:C,dragging:S,elementsSelectable:M,selectionRect:P,selectionRectMode:T,selectionKeyPressed:R,selectionMode:L,panActivationKeyPressed:D,unselectNodesAndEdges:w}=Fe();let O=F(),x=null,z=[],I=!1;function A(Z){if(I){I=!1;return}m("paneclick",{event:Z}),w(),T.set(null)}function X(Z){var ge,xe;if(x=d(O).getBoundingClientRect(),!M||!d(y)||Z.button!==0||Z.target!==d(O)||!x)return;(xe=(ge=Z.target)==null?void 0:ge.setPointerCapture)==null||xe.call(ge,Z.pointerId);const{x:$,y:j}=Qt(Z,x);w(),P.set({width:0,height:0,startX:$,startY:j,x:$,y:j})}function K(Z){if(!d(y)||!x||!o())return;I=!0;const $=Qt(Z,x),j=o().startX??0,ge=o().startY??0,xe={...o(),x:$.x<j?$.x:j,y:$.y<ge?$.y:ge,width:Math.abs($.x-j),height:Math.abs($.y-ge)},ye=z.map(Le=>Le.id),ke=Go(z,l()).map(Le=>Le.id);z=tc(c(),xe,[u().x,u().y,u().zoom],f()===Dr.Partial,!0);const Ce=Go(z,l()).map(Le=>Le.id),Be=z.map(Le=>Le.id);(ye.length!==Be.length||Be.some(Le=>!ye.includes(Le)))&&E.update(Le=>Le.map(Aa(Be))),(ke.length!==Ce.length||Ce.some(Le=>!ke.includes(Le)))&&b.update(Le=>Le.map(Aa(Ce))),T.set("user"),P.set(xe)}function U(Z){var $,j;Z.button===0&&((j=($=Z.target)==null?void 0:$.releasePointerCapture)==null||j.call($,Z.pointerId),!d(y)&&s()==="user"&&Z.target===d(O)&&(A==null||A(Z)),P.set(null),z.length>0&&bi(T,"nodes"),r()&&(I=!1))}const te=Z=>{var $;if(Array.isArray(d(g))&&(($=d(g))!=null&&$.includes(2))){Z.preventDefault();return}m("panecontextmenu",{event:Z})};G(()=>(i(),Y(N())),()=>{H(g,i()||N())}),G(()=>(r(),o(),Y(_()),d(g)),()=>{H(y,r()||o()||_()&&d(g)!==!0)}),G(()=>(a(),d(y),s()),()=>{H(p,a()&&(d(y)||s()==="user"))}),rt(),he();var B=C0(),J=yn(()=>d(p)?void 0:za(A,d(O))),ie=yn(()=>za(te,d(O)));const ue=oe(()=>N()===!0||Array.isArray(N())&&N().includes(0));me(()=>Ye(B,"draggable",d(ue)));var de=ee(B);Re(de,t,"default",{}),ji(B,Z=>H(O,Z),()=>d(O)),me(()=>{Ye(B,"dragging",h()),Ye(B,"selection",d(y))}),ze("click",B,function(...Z){var $;($=d(J))==null||$.apply(this,Z)}),ze("pointerdown",B,function(...Z){var $;($=d(p)?X:void 0)==null||$.apply(this,Z)}),ze("pointermove",B,function(...Z){var $;($=d(p)?K:void 0)==null||$.apply(this,Z)}),ze("pointerup",B,function(...Z){var $;($=d(p)?U:void 0)==null||$.apply(this,Z)}),ze("contextmenu",B,function(...Z){var $;($=d(ie))==null||$.apply(this,Z)}),W(e,B),ce()}var M0=se('<div class="svelte-flow__viewport xyflow__viewport svelte-1floaup"><!></div>');function P0(e,t){le(t,!1);const n=Je(),i=()=>q(r,"$viewport",n),{viewport:r}=Fe();he();var o=M0(),a=ee(o);Re(a,t,"default",{}),me(()=>Q(o,"style",`transform: translate(${i().x??""}px, ${i().y??""}px) scale(${i().zoom??""})`)),W(e,o),ce()}function Yn(e,t){const{store:n,onDrag:i,onDragStart:r,onDragStop:o,onNodeMouseDown:a}=t,s=Nv({onDrag:i,onDragStart:r,onDragStop:o,onNodeMouseDown:a,getStoreItems:()=>{const c=V(n.snapGrid),u=V(n.viewport);return{nodes:V(n.nodes),nodeLookup:V(n.nodeLookup),edges:V(n.edges),nodeExtent:V(n.nodeExtent),snapGrid:c||[0,0],snapToGrid:!!c,nodeOrigin:V(n.nodeOrigin),multiSelectionActive:V(n.multiselectionKeyPressed),domNode:V(n.domNode),transform:[u.x,u.y,u.zoom],autoPanOnNodeDrag:V(n.autoPanOnNodeDrag),nodesDraggable:V(n.nodesDraggable),selectNodesOnDrag:V(n.selectNodesOnDrag),nodeDragThreshold:V(n.nodeDragThreshold),unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,panBy:n.panBy}}});function l(c,u){if(u.disabled){s.destroy();return}s.update({domNode:c,noDragClassName:u.noDragClass,handleSelector:u.handleSelector,nodeId:u.nodeId,isSelectable:u.isSelectable,nodeClickDistance:u.nodeClickDistance})}return l(e,t),{update(c){l(e,c)},destroy(){s.destroy()}}}function z0({width:e,height:t,initialWidth:n,initialHeight:i,measuredWidth:r,measuredHeight:o}){if(r===void 0&&o===void 0){const a=e??n,s=t??i;return{width:a?`width:${a}px;`:"",height:s?`height:${s}px;`:""}}return{width:e?`width:${e}px;`:"",height:t?`height:${t}px;`:""}}var A0=se("<div><!></div>");function I0(e,t){le(t,!1);const n=Je(),i=()=>q(B,"$nodeTypes",n),r=()=>q(ge,"$connectableStore",n),o=F(void 0,!0),a=F(void 0,!0),s=F(void 0,!0),l=F(void 0,!0);let c=v(t,"node",9),u=v(t,"id",9),f=v(t,"data",25,()=>({})),h=v(t,"selected",9,!1),g=v(t,"draggable",9,void 0),y=v(t,"selectable",9,void 0),p=v(t,"connectable",9,!0),N=v(t,"deletable",9,!0),_=v(t,"hidden",9,!1),m=v(t,"dragging",9,!1),E=v(t,"resizeObserver",9,null),k=v(t,"style",9,void 0),b=v(t,"type",9,"default"),C=v(t,"isParent",9,!1),S=v(t,"positionX",9),M=v(t,"positionY",9),P=v(t,"sourcePosition",9,void 0),T=v(t,"targetPosition",9,void 0),R=v(t,"zIndex",9),L=v(t,"measuredWidth",9,void 0),D=v(t,"measuredHeight",9,void 0),w=v(t,"initialWidth",9,void 0),O=v(t,"initialHeight",9,void 0),x=v(t,"width",9,void 0),z=v(t,"height",9,void 0),I=v(t,"dragHandle",9,void 0),A=v(t,"initialized",9,!1),X=v(t,"parentId",9,void 0),K=v(t,"nodeClickDistance",9,void 0),U=v(t,"class",9,"");const te=Fe(),{nodeTypes:B,nodeDragThreshold:J,selectNodesOnDrag:ie,handleNodeSelection:ue,updateNodeInternals:de}=te;let Z=F(void 0,!0),$=F(null,!0);const j=jr(),ge=re(p());let xe=F(void 0,!0),ye=F(void 0,!0),ke=F(void 0,!0);Cr("svelteflow__node_id",u()),Cr("svelteflow__node_connectable",ge),El(()=>{var Me;d($)&&((Me=E())==null||Me.unobserve(d($)))});function Ce(Me){y()&&(!V(ie)||!g()||V(J)>0)&&ue(u()),j("nodeclick",{node:c().internals.userNode,event:Me})}G(()=>Y(b()),()=>{H(o,b()||"default")}),G(()=>(i(),d(o)),()=>{H(a,!!i()[d(o)])}),G(()=>(i(),d(o),Jo),()=>{H(s,i()[d(o)]||Jo)}),G(()=>(d(a),Y(b())),()=>{d(a)||console.warn("003",tr.error003(b()))}),G(()=>(Y(x()),Y(z()),Y(w()),Y(O()),Y(L()),Y(D())),()=>{H(l,z0({width:x(),height:z(),initialWidth:w(),initialHeight:O(),measuredWidth:L(),measuredHeight:D()}))}),G(()=>Y(p()),()=>{ge.set(!!p())}),G(()=>(d(xe),d(o),d(ye),Y(P()),d(ke),Y(T()),Y(u()),d(Z)),()=>{(d(xe)&&d(o)!==d(xe)||d(ye)&&P()!==d(ye)||d(ke)&&T()!==d(ke))&&requestAnimationFrame(()=>de(new Map([[u(),{id:u(),nodeElement:d(Z),force:!0}]]))),H(xe,d(o)),H(ye,P()),H(ke,T())}),G(()=>(Y(E()),d(Z),d($),Y(A())),()=>{E()&&(d(Z)!==d($)||!A())&&(d($)&&E().unobserve(d($)),d(Z)&&E().observe(d(Z)),H($,d(Z)))}),rt(),he(!0);var Be=Te(),Le=ae(Be);{var qe=Me=>{var we=A0();const Ge=oe(()=>Dt(at(["svelte-flow__node",`svelte-flow__node-${d(o)}`,U()])));var vt=ee(we);ml(vt,()=>d(s),(Ae,je)=>{je(Ae,{get data(){return f()},get id(){return u()},get selected(){return h()},get selectable(){return y()},get deletable(){return N()},get sourcePosition(){return P()},get targetPosition(){return T()},get zIndex(){return R()},get dragging(){return m()},get draggable(){return g()},get dragHandle(){return I()},get parentId(){return X()},get type(){return d(o)},get isConnectable(){return r()},get positionAbsoluteX(){return S()},get positionAbsoluteY(){return M()},get width(){return x()},get height(){return z()}})}),ut(we,(Ae,je)=>Yn==null?void 0:Yn(Ae,je),()=>({nodeId:u(),isSelectable:y(),disabled:!1,handleSelector:I(),noDragClass:"nodrag",nodeClickDistance:K(),onNodeMouseDown:ue,onDrag:(Ae,je,Ke,Oe)=>{j("nodedrag",{event:Ae,targetNode:Ke,nodes:Oe})},onDragStart:(Ae,je,Ke,Oe)=>{j("nodedragstart",{event:Ae,targetNode:Ke,nodes:Oe})},onDragStop:(Ae,je,Ke,Oe)=>{j("nodedragstop",{event:Ae,targetNode:Ke,nodes:Oe})},store:te})),ji(we,Ae=>H(Z,Ae),()=>d(Z)),pt(()=>ze("click",we,Ce)),pt(()=>ze("mouseenter",we,Ae=>j("nodemouseenter",{node:c(),event:Ae}))),pt(()=>ze("mouseleave",we,Ae=>j("nodemouseleave",{node:c(),event:Ae}))),pt(()=>ze("mousemove",we,Ae=>j("nodemousemove",{node:c(),event:Ae}))),pt(()=>ze("contextmenu",we,Ae=>j("nodecontextmenu",{node:c(),event:Ae}))),me(()=>{Q(we,"data-id",u()),hs(we,d(Ge),""),Q(we,"style",`${k()??""??""};${d(l).width??""}${d(l).height??""}`),Ye(we,"dragging",m()),Ye(we,"selected",h()),Ye(we,"draggable",g()),Ye(we,"connectable",p()),Ye(we,"selectable",y()),Ye(we,"nopan",g()),Ye(we,"parent",C()),We(we,"z-index",R()),We(we,"transform",`translate(${S()??""}px, ${M()??""}px)`),We(we,"visibility",A()?"visible":"hidden")}),W(Me,we)};Ne(Le,Me=>{_()||Me(qe)})}W(e,Be),ce()}var T0=se('<div class="svelte-flow__nodes svelte-tf4uy4"></div>');function O0(e,t){le(t,!1);const n=Je(),i=()=>q(c,"$visibleNodes",n),r=()=>q(u,"$nodesDraggable",n),o=()=>q(h,"$elementsSelectable",n),a=()=>q(f,"$nodesConnectable",n),s=()=>q(y,"$parentLookup",n);let l=v(t,"nodeClickDistance",8,0);const{visibleNodes:c,nodesDraggable:u,nodesConnectable:f,elementsSelectable:h,updateNodeInternals:g,parentLookup:y}=Fe(),p=typeof ResizeObserver>"u"?null:new ResizeObserver(_=>{const m=new Map;_.forEach(E=>{const k=E.target.getAttribute("data-id");m.set(k,{id:k,nodeElement:E.target,force:!0})}),g(m)});El(()=>{p==null||p.disconnect()}),he();var N=T0();Pt(N,5,i,_=>_.id,(_,m)=>{var E=oe(()=>!!d(m).selected),k=oe(()=>!!d(m).hidden),b=oe(()=>!!(d(m).draggable||r()&&typeof d(m).draggable>"u")),C=oe(()=>!!(d(m).selectable||o()&&typeof d(m).selectable>"u")),S=oe(()=>!!(d(m).connectable||a()&&typeof d(m).connectable>"u")),M=oe(()=>d(m).deletable??!0),P=oe(()=>s().has(d(m).id)),T=oe(()=>d(m).type??"default"),R=oe(()=>d(m).internals.z??0),L=oe(()=>ac(d(m)));I0(_,{get node(){return d(m)},get id(){return d(m).id},get data(){return d(m).data},get selected(){return d(E)},get hidden(){return d(k)},get draggable(){return d(b)},get selectable(){return d(C)},get connectable(){return d(S)},get deletable(){return d(M)},get positionX(){return d(m).internals.positionAbsolute.x},get positionY(){return d(m).internals.positionAbsolute.y},get isParent(){return d(P)},get style(){return d(m).style},get class(){return d(m).class},get type(){return d(T)},get sourcePosition(){return d(m).sourcePosition},get targetPosition(){return d(m).targetPosition},get dragging(){return d(m).dragging},get zIndex(){return d(R)},get dragHandle(){return d(m).dragHandle},get initialized(){return d(L)},get width(){return d(m).width},get height(){return d(m).height},get initialWidth(){return d(m).initialWidth},get initialHeight(){return d(m).initialHeight},get measuredWidth(){return d(m).measured.width},get measuredHeight(){return d(m).measured.height},get parentId(){return d(m).parentId},resizeObserver:p,get nodeClickDistance(){return l()},$$events:{nodeclick(D){Ee.call(this,t,D)},nodemouseenter(D){Ee.call(this,t,D)},nodemousemove(D){Ee.call(this,t,D)},nodemouseleave(D){Ee.call(this,t,D)},nodedrag(D){Ee.call(this,t,D)},nodedragstart(D){Ee.call(this,t,D)},nodedragstop(D){Ee.call(this,t,D)},nodecontextmenu(D){Ee.call(this,t,D)}}})}),W(e,N),ce()}var D0=$e('<svg><g role="img"><!></g></svg>');function H0(e,t){le(t,!1);const n=Je(),i=()=>q(B,"$edgeTypes",n),r=()=>q(J,"$flowId",n),o=()=>q(ie,"$elementsSelectable",n),a=()=>q(te,"$edgeLookup",n),s=F(void 0,!0),l=F(void 0,!0),c=F(void 0,!0),u=F(void 0,!0),f=F(void 0,!0);let h=v(t,"id",9),g=v(t,"type",9,"default"),y=v(t,"source",9,""),p=v(t,"target",9,""),N=v(t,"data",25,()=>({})),_=v(t,"style",9,void 0),m=v(t,"zIndex",9,void 0),E=v(t,"animated",9,!1),k=v(t,"selected",9,!1),b=v(t,"selectable",9,void 0),C=v(t,"deletable",9,void 0),S=v(t,"hidden",9,!1),M=v(t,"label",9,void 0),P=v(t,"labelStyle",9,void 0),T=v(t,"markerStart",9,void 0),R=v(t,"markerEnd",9,void 0),L=v(t,"sourceHandle",9,void 0),D=v(t,"targetHandle",9,void 0),w=v(t,"sourceX",9),O=v(t,"sourceY",9),x=v(t,"targetX",9),z=v(t,"targetY",9),I=v(t,"sourcePosition",9),A=v(t,"targetPosition",9),X=v(t,"ariaLabel",9,void 0),K=v(t,"interactionWidth",9,void 0),U=v(t,"class",9,"");Cr("svelteflow__edge_id",h());const{edgeLookup:te,edgeTypes:B,flowId:J,elementsSelectable:ie}=Fe(),ue=jr(),de=bc();function Z(ye){const ke=a().get(h());ke&&(de(h()),ue("edgeclick",{event:ye,edge:ke}))}function $(ye,ke){const Ce=a().get(h());Ce&&ue(ke,{event:ye,edge:Ce})}G(()=>Y(g()),()=>{H(s,g()||"default")}),G(()=>(i(),d(s),jo),()=>{H(l,i()[d(s)]||jo)}),G(()=>(Y(T()),r()),()=>{H(c,T()?`url('#${$o(T(),r())}')`:void 0)}),G(()=>(Y(R()),r()),()=>{H(u,R()?`url('#${$o(R(),r())}')`:void 0)}),G(()=>(Y(b()),o()),()=>{H(f,b()??o())}),rt(),he(!0);var j=Te(),ge=ae(j);{var xe=ye=>{var ke=D0(),Ce=ee(ke);const Be=oe(()=>Dt(at(["svelte-flow__edge",U()])));var Le=ee(Ce),qe=oe(()=>C()??!0);ml(Le,()=>d(l),(Me,we)=>{we(Me,{get id(){return h()},get source(){return y()},get target(){return p()},get sourceX(){return w()},get sourceY(){return O()},get targetX(){return x()},get targetY(){return z()},get sourcePosition(){return I()},get targetPosition(){return A()},get animated(){return E()},get selected(){return k()},get label(){return M()},get labelStyle(){return P()},get data(){return N()},get style(){return _()},get interactionWidth(){return K()},get selectable(){return d(f)},get deletable(){return d(qe)},get type(){return d(s)},get sourceHandleId(){return L()},get targetHandleId(){return D()},get markerStart(){return d(c)},get markerEnd(){return d(u)}})}),me(()=>{We(ke,"z-index",m()),In(Ce,d(Be),""),Q(Ce,"data-id",h()),Q(Ce,"aria-label",X()===null?void 0:X()?X():`Edge from ${y()} to ${p()}`),Ye(Ce,"animated",E()),Ye(Ce,"selected",k()),Ye(Ce,"selectable",d(f))}),ze("click",Ce,Z),ze("contextmenu",Ce,Me=>{$(Me,"edgecontextmenu")}),ze("mouseenter",Ce,Me=>{$(Me,"edgemouseenter")}),ze("mouseleave",Ce,Me=>{$(Me,"edgemouseleave")}),W(ye,ke)};Ne(ge,ye=>{S()||ye(xe)})}W(e,j),ce()}function R0(e,t){le(t,!1);let n=v(t,"onMount",8,void 0),i=v(t,"onDestroy",8,void 0);ii(()=>{var r;return(r=n())==null||r(),i()}),he(),ce()}var L0=$e("<defs></defs>");function V0(e,t){le(t,!1);const n=Je(),i=()=>q(r,"$markers",n),{markers:r}=Fe();he();var o=L0();Pt(o,5,i,a=>a.id,(a,s)=>{B0(a,Qe(()=>d(s)))}),W(e,o),ce()}var X0=$e('<polyline stroke-linecap="round" stroke-linejoin="round" fill="none" points="-5,-4 0,0 -5,4"></polyline>'),Y0=$e('<polyline stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),W0=$e('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');function B0(e,t){le(t,!1);let n=v(t,"id",8),i=v(t,"type",8),r=v(t,"width",8,12.5),o=v(t,"height",8,12.5),a=v(t,"markerUnits",8,"strokeWidth"),s=v(t,"orient",8,"auto-start-reverse"),l=v(t,"color",8,void 0),c=v(t,"strokeWidth",8,void 0);he();var u=W0(),f=ee(u);{var h=y=>{var p=X0();me(()=>{Q(p,"stroke",l()),Q(p,"stroke-width",c())}),W(y,p)},g=y=>{var p=Te(),N=ae(p);{var _=m=>{var E=Y0();me(()=>{Q(E,"stroke",l()),Q(E,"stroke-width",c()),Q(E,"fill",l())}),W(m,E)};Ne(N,m=>{i()===Hr.ArrowClosed&&m(_)},!0)}W(y,p)};Ne(f,y=>{i()===Hr.Arrow?y(h):y(g,!1)})}me(()=>{Q(u,"id",n()),Q(u,"markerWidth",`${r()}`),Q(u,"markerHeight",`${o()}`),Q(u,"markerUnits",a()),Q(u,"orient",s())}),W(e,u),ce()}var K0=se('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!> <!></div>');function F0(e,t){le(t,!1);const n=Je(),i=()=>q(a,"$visibleEdges",n),r=()=>q(c,"$elementsSelectable",n);let o=v(t,"defaultEdgeOptions",8);const{visibleEdges:a,edgesInitialized:s,edges:{setDefaultOptions:l},elementsSelectable:c}=Fe();ii(()=>{o()&&l(o())}),he();var u=K0(),f=ee(u),h=ee(f);V0(h,{});var g=ne(f,2);Pt(g,1,i,N=>N.id,(N,_)=>{var m=oe(()=>d(_).selectable??r()),E=oe(()=>d(_).type||"default");H0(N,{get id(){return d(_).id},get source(){return d(_).source},get target(){return d(_).target},get data(){return d(_).data},get style(){return d(_).style},get animated(){return d(_).animated},get selected(){return d(_).selected},get selectable(){return d(m)},get deletable(){return d(_).deletable},get hidden(){return d(_).hidden},get label(){return d(_).label},get labelStyle(){return d(_).labelStyle},get markerStart(){return d(_).markerStart},get markerEnd(){return d(_).markerEnd},get sourceHandle(){return d(_).sourceHandle},get targetHandle(){return d(_).targetHandle},get sourceX(){return d(_).sourceX},get sourceY(){return d(_).sourceY},get targetX(){return d(_).targetX},get targetY(){return d(_).targetY},get sourcePosition(){return d(_).sourcePosition},get targetPosition(){return d(_).targetPosition},get ariaLabel(){return d(_).ariaLabel},get interactionWidth(){return d(_).interactionWidth},get class(){return d(_).class},get type(){return d(E)},get zIndex(){return d(_).zIndex},$$events:{edgeclick(k){Ee.call(this,t,k)},edgecontextmenu(k){Ee.call(this,t,k)},edgemouseenter(k){Ee.call(this,t,k)},edgemouseleave(k){Ee.call(this,t,k)}}})});var y=ne(g,2);{var p=N=>{R0(N,{onMount:()=>{bi(s,!0)},onDestroy:()=>{bi(s,!1)}})};Ne(y,N=>{i().length>0&&N(p)})}W(e,u),ce()}var q0=se('<div class="svelte-flow__selection svelte-1iugwpu"></div>');function Sc(e,t){let n=v(t,"x",8,0),i=v(t,"y",8,0),r=v(t,"width",8,0),o=v(t,"height",8,0),a=v(t,"isVisible",8,!0);var s=Te(),l=ae(s);{var c=u=>{var f=q0();me(()=>{We(f,"width",typeof r()=="string"?r():`${r()}px`),We(f,"height",typeof o()=="string"?o():`${o()}px`),We(f,"transform",`translate(${n()}px, ${i()}px)`)}),W(u,f)};Ne(l,u=>{a()&&u(c)})}W(e,s)}function G0(e,t){le(t,!1);const n=Je(),i=()=>q(o,"$selectionRect",n),r=()=>q(a,"$selectionRectMode",n),{selectionRect:o,selectionRectMode:a}=Fe();he();var s=oe(()=>!!(i()&&r()==="user")),l=oe(()=>{var h;return(h=i())==null?void 0:h.width}),c=oe(()=>{var h;return(h=i())==null?void 0:h.height}),u=oe(()=>{var h;return(h=i())==null?void 0:h.x}),f=oe(()=>{var h;return(h=i())==null?void 0:h.y});Sc(e,{get isVisible(){return d(s)},get width(){return d(l)},get height(){return d(c)},get x(){return d(u)},get y(){return d(f)}}),ce()}var Z0=se('<div class="selection-wrapper nopan svelte-5pxri" role="button" tabindex="-1"><!></div>');function U0(e,t){le(t,!1);const n=Je(),i=()=>q(s,"$selectionRectMode",n),r=()=>q(c,"$nodeLookup",n),o=()=>q(l,"$nodes",n),a=Fe(),{selectionRectMode:s,nodes:l,nodeLookup:c}=a,u=jr();let f=F(null);function h(_){const m=o().filter(E=>E.selected);u("selectioncontextmenu",{nodes:m,event:_})}function g(_){const m=o().filter(E=>E.selected);u("selectionclick",{nodes:m,event:_})}G(()=>(i(),r(),o()),()=>{i()==="nodes"&&(H(f,ir(r(),{filter:_=>!!_.selected})),o())}),rt(),he();var y=Te(),p=ae(y);{var N=_=>{var m=Z0(),E=ee(m);Sc(E,{width:"100%",height:"100%",x:0,y:0}),ut(m,(k,b)=>Yn==null?void 0:Yn(k,b),()=>({disabled:!1,store:a,onDrag:(k,b,C,S)=>{u("nodedrag",{event:k,targetNode:null,nodes:S})},onDragStart:(k,b,C,S)=>{u("nodedragstart",{event:k,targetNode:null,nodes:S})},onDragStop:(k,b,C,S)=>{u("nodedragstop",{event:k,targetNode:null,nodes:S})}})),pt(()=>ze("contextmenu",m,h)),pt(()=>ze("click",m,g)),pt(()=>ze("keyup",m,()=>{})),me(()=>Q(m,"style",`width: ${d(f).width??""}px; height: ${d(f).height??""}px; transform: translate(${d(f).x??""}px, ${d(f).y??""}px)`)),W(_,m)};Ne(p,_=>{i()==="nodes"&&d(f)&&$t(d(f).x)&&$t(d(f).y)&&_(N)})}W(e,y),ce()}function Ie(e,t){let{enabled:n=!0,trigger:i,type:r="keydown"}=t;function o(a){const s=Array.isArray(i)?i:[i],l={alt:a.altKey,ctrl:a.ctrlKey,shift:a.shiftKey,meta:a.metaKey};for(const c of s){const u={modifier:[],preventDefault:!1,enabled:!0,...c},{modifier:f,key:h,callback:g,preventDefault:y,enabled:p}=u;if(p){if(f.length&&!(Array.isArray(f)?f:[f]).map(m=>typeof m=="string"?[m]:m).some(m=>m.every(E=>l[E])))continue;if(a.key===h){y&&a.preventDefault();const N={node:e,trigger:u,originalEvent:a};e.dispatchEvent(new CustomEvent("shortcut",{detail:N})),g==null||g(N)}}}}return n&&e.addEventListener(r,o),{update:a=>{const{enabled:s=!0,type:l="keydown"}=a;n&&(!s||r!==l)?e.removeEventListener(r,o):!n&&s&&e.addEventListener(l,o),n=s,r=l,i=a.trigger},destroy:()=>{e.removeEventListener(r,o)}}}function $0(e,t){le(t,!1);let n=v(t,"selectionKey",8,"Shift"),i=v(t,"multiSelectionKey",24,()=>Lr()?"Meta":"Control"),r=v(t,"deleteKey",8,"Backspace"),o=v(t,"panActivationKey",8," "),a=v(t,"zoomActivationKey",24,()=>Lr()?"Meta":"Control");const{selectionKeyPressed:s,multiselectionKeyPressed:l,deleteKeyPressed:c,panActivationKeyPressed:u,zoomActivationKeyPressed:f,selectionRect:h}=Fe();function g(m){return m!==null&&typeof m=="object"}function y(m){return g(m)?m.modifier||[]:[]}function p(m){return m==null?"":g(m)?m.key:m}function N(m,E){return(Array.isArray(m)?m:[m]).map(b=>{const C=p(b);return{key:C,modifier:y(b),enabled:C!==null,callback:E}})}function _(){h.set(null),s.set(!1),l.set(!1),c.set(!1),u.set(!1),f.set(!1)}he(),ze("blur",ct,_),ze("contextmenu",ct,_),ut(ct,(m,E)=>Ie==null?void 0:Ie(m,E),()=>({trigger:N(n(),()=>s.set(!0)),type:"keydown"})),ut(ct,(m,E)=>Ie==null?void 0:Ie(m,E),()=>({trigger:N(n(),()=>s.set(!1)),type:"keyup"})),ut(ct,(m,E)=>Ie==null?void 0:Ie(m,E),()=>({trigger:N(i(),()=>l.set(!0)),type:"keydown"})),ut(ct,(m,E)=>Ie==null?void 0:Ie(m,E),()=>({trigger:N(i(),()=>l.set(!1)),type:"keyup"})),ut(ct,(m,E)=>Ie==null?void 0:Ie(m,E),()=>({trigger:N(r(),m=>{!(m.originalEvent.ctrlKey||m.originalEvent.metaKey||m.originalEvent.shiftKey)&&!av(m.originalEvent)&&c.set(!0)}),type:"keydown"})),ut(ct,(m,E)=>Ie==null?void 0:Ie(m,E),()=>({trigger:N(r(),()=>c.set(!1)),type:"keyup"})),ut(ct,(m,E)=>Ie==null?void 0:Ie(m,E),()=>({trigger:N(o(),()=>u.set(!0)),type:"keydown"})),ut(ct,(m,E)=>Ie==null?void 0:Ie(m,E),()=>({trigger:N(o(),()=>u.set(!1)),type:"keyup"})),ut(ct,(m,E)=>Ie==null?void 0:Ie(m,E),()=>({trigger:N(a(),()=>f.set(!0)),type:"keydown"})),ut(ct,(m,E)=>Ie==null?void 0:Ie(m,E),()=>({trigger:N(a(),()=>f.set(!1)),type:"keyup"})),ce()}var J0=$e('<path fill="none" class="svelte-flow__connection-path"></path>'),j0=$e('<svg class="svelte-flow__connectionline"><g><!><!></g></svg>');function Q0(e,t){le(t,!1);const n=Je(),i=()=>q(h,"$connection",n),r=()=>q(g,"$connectionLineType",n),o=()=>q(u,"$width",n),a=()=>q(f,"$height",n);let s=v(t,"containerStyle",8,""),l=v(t,"style",8,""),c=v(t,"isCustomComponent",8,!1);const{width:u,height:f,connection:h,connectionLineType:g}=Fe();let y=F(null);G(()=>(i(),Y(c()),r(),d(y),Uo),()=>{if(i().inProgress&&!c()){const{from:m,to:E,fromPosition:k,toPosition:b}=i(),C={sourceX:m.x,sourceY:m.y,sourcePosition:k,targetX:E.x,targetY:E.y,targetPosition:b};switch(r()){case Xn.Bezier:(S=>H(y,S[0]))(cc(C));break;case Xn.Step:(S=>H(y,S[0]))(Vr({...C,borderRadius:0}));break;case Xn.SmoothStep:(S=>H(y,S[0]))(Vr(C));break;default:(S=>H(y,S[0]))(Uo(C))}}}),rt(),he();var p=Te(),N=ae(p);{var _=m=>{var E=j0(),k=ee(E);const b=oe(()=>Dt(at(["svelte-flow__connection",jg(i().isValid)])));var C=ee(k);Re(C,t,"connectionLine",{});var S=ne(C);{var M=P=>{var T=J0();me(()=>{Q(T,"d",d(y)),Q(T,"style",l())}),W(P,T)};Ne(S,P=>{c()||P(M)})}me(()=>{Q(E,"width",o()),Q(E,"height",a()),Q(E,"style",s()),In(k,d(b),"")}),W(m,E)};Ne(N,m=>{i().inProgress&&m(_)})}W(e,p),ce()}var em=se("<div><!></div>");function Ps(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]),i=_e(n,["position","style","class"]);le(t,!1);const r=Je(),o=()=>q(u,"$selectionRectMode",r),a=F();let s=v(t,"position",8,"top-right"),l=v(t,"style",8,void 0),c=v(t,"class",8,void 0);const{selectionRectMode:u}=Fe();G(()=>Y(s()),()=>{H(a,`${s()}`.split("-"))}),rt(),he();var f=em();let h;var g=ee(f);Re(g,t,"default",{}),me(()=>{h=xi(f,h,{class:at(["svelte-flow__panel",c(),...d(a)]),style:l(),...i}),We(f,"pointer-events",o()?"none":"")}),W(e,f),ce()}var tm=se('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');function nm(e,t){le(t,!1);let n=v(t,"proOptions",8,void 0),i=v(t,"position",8,"bottom-right");he();var r=Te(),o=ae(r);{var a=s=>{Ps(s,{get position(){return i()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(l,c)=>{var u=tm();W(l,u)},$$slots:{default:!0}})};Ne(o,s=>{var l;(l=n())!=null&&l.hideAttribution||s(a)})}W(e,r),ce()}function Ia(e,{nodeTypes:t,edgeTypes:n,minZoom:i,maxZoom:r,translateExtent:o,paneClickDistance:a}){t!==void 0&&e.setNodeTypes(t),n!==void 0&&e.setEdgeTypes(n),i!==void 0&&e.setMinZoom(i),r!==void 0&&e.setMaxZoom(r),o!==void 0&&e.setTranslateExtent(o),a!==void 0&&e.setPaneClickDistance(a)}const im=e=>Object.keys(e);function Ta(e,t){im(t).forEach(n=>{const i=t[n];i!==void 0&&e[n].set(i)})}function rm(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function om(e="light"){return Et("light",n=>{if(e!=="system"){n(e);return}const i=rm(),r=()=>n(i!=null&&i.matches?"dark":"light");return n(i!=null&&i.matches?"dark":"light"),i==null||i.addEventListener("change",r),()=>{i==null||i.removeEventListener("change",r)}})}var sm=se('<!> <!> <div class="svelte-flow__edgelabel-renderer"></div> <div class="svelte-flow__viewport-portal"></div> <!> <!>',1),am=se("<!> <!>",1),lm=se("<div><!> <!> <!> <!></div>");function cm(e,t){const n=ld(t),i=_e(t,["children","$$slots","$$events","$$legacy"]),r=_e(i,["id","nodes","edges","fitView","fitViewOptions","minZoom","maxZoom","initialViewport","viewport","nodeTypes","edgeTypes","selectionKey","selectionMode","panActivationKey","multiSelectionKey","zoomActivationKey","nodesDraggable","nodesConnectable","nodeDragThreshold","elementsSelectable","snapGrid","deleteKey","connectionRadius","connectionLineType","connectionMode","connectionLineStyle","connectionLineContainerStyle","onMoveStart","onMove","onMoveEnd","isValidConnection","translateExtent","nodeExtent","onlyRenderVisibleElements","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","autoPanOnConnect","autoPanOnNodeDrag","onerror","ondelete","onedgecreate","attributionPosition","proOptions","defaultEdgeOptions","width","height","colorMode","onconnect","onconnectstart","onconnectend","onbeforedelete","oninit","nodeOrigin","paneClickDistance","nodeClickDistance","defaultMarkerColor","style","class"]);le(t,!1);const o=Je(),a=()=>q(m(),"$viewport",o),s=()=>q(oi,"$initialized",o),l=()=>q(d(c),"$colorModeClass",o),c=F();let u=v(t,"id",8,"1"),f=v(t,"nodes",8),h=v(t,"edges",8),g=v(t,"fitView",8,void 0),y=v(t,"fitViewOptions",8,void 0),p=v(t,"minZoom",8,void 0),N=v(t,"maxZoom",8,void 0),_=v(t,"initialViewport",8,void 0),m=v(t,"viewport",8,void 0),E=v(t,"nodeTypes",8,void 0),k=v(t,"edgeTypes",8,void 0),b=v(t,"selectionKey",8,void 0),C=v(t,"selectionMode",8,void 0),S=v(t,"panActivationKey",8,void 0),M=v(t,"multiSelectionKey",8,void 0),P=v(t,"zoomActivationKey",8,void 0),T=v(t,"nodesDraggable",8,void 0),R=v(t,"nodesConnectable",8,void 0),L=v(t,"nodeDragThreshold",8,void 0),D=v(t,"elementsSelectable",8,void 0),w=v(t,"snapGrid",8,void 0),O=v(t,"deleteKey",8,void 0),x=v(t,"connectionRadius",8,void 0),z=v(t,"connectionLineType",8,void 0),I=v(t,"connectionMode",24,()=>Pn.Strict),A=v(t,"connectionLineStyle",8,""),X=v(t,"connectionLineContainerStyle",8,""),K=v(t,"onMoveStart",8,void 0),U=v(t,"onMove",8,void 0),te=v(t,"onMoveEnd",8,void 0),B=v(t,"isValidConnection",8,void 0),J=v(t,"translateExtent",8,void 0),ie=v(t,"nodeExtent",8,void 0),ue=v(t,"onlyRenderVisibleElements",8,void 0),de=v(t,"panOnScrollMode",24,()=>vn.Free),Z=v(t,"preventScrolling",8,!0),$=v(t,"zoomOnScroll",8,!0),j=v(t,"zoomOnDoubleClick",8,!0),ge=v(t,"zoomOnPinch",8,!0),xe=v(t,"panOnScroll",8,!1),ye=v(t,"panOnDrag",8,!0),ke=v(t,"selectionOnDrag",8,void 0),Ce=v(t,"autoPanOnConnect",8,!0),Be=v(t,"autoPanOnNodeDrag",8,!0),Le=v(t,"onerror",8,void 0),qe=v(t,"ondelete",8,void 0),Me=v(t,"onedgecreate",8,void 0),we=v(t,"attributionPosition",8,void 0),Ge=v(t,"proOptions",8,void 0),vt=v(t,"defaultEdgeOptions",8,void 0),Ae=v(t,"width",8,void 0),je=v(t,"height",8,void 0),Ke=v(t,"colorMode",8,"light"),Oe=v(t,"onconnect",8,void 0),bn=v(t,"onconnectstart",8,void 0),Tn=v(t,"onconnectend",8,void 0),Ze=v(t,"onbeforedelete",8,void 0),et=v(t,"oninit",8,void 0),Pe=v(t,"nodeOrigin",8,void 0),nt=v(t,"paneClickDistance",8,0),bt=v(t,"nodeClickDistance",8,0),ri=v(t,"defaultMarkerColor",8,"#b1b1b7"),lo=v(t,"style",8,void 0),St=v(t,"class",8,void 0),Ct=F(),Rt=F(),lt=F();const co=a()||_(),it=Wu(Ms)?Fe():E0({nodes:V(f()),edges:V(h()),width:Ae(),height:je(),fitView:g(),nodeOrigin:Pe(),nodeExtent:ie()});ii(()=>(it.width.set(d(Rt)),it.height.set(d(lt)),it.domNode.set(d(Ct)),it.syncNodeStores(f()),it.syncEdgeStores(h()),it.syncViewport(m()),g()!==void 0&&it.fitViewOnInit.set(g()),y()&&it.fitViewOptions.set(y()),Ia(it,{nodeTypes:E(),edgeTypes:k(),minZoom:p(),maxZoom:N(),translateExtent:J(),paneClickDistance:nt()}),()=>{it.reset()}));const{initialized:oi}=it;let si=F(!1);G(()=>(d(Rt),d(lt)),()=>{d(Rt)!==void 0&&d(lt)!==void 0&&(it.width.set(d(Rt)),it.height.set(d(lt)))}),G(()=>(d(si),s(),Y(et())),()=>{var ot;!d(si)&&s()&&((ot=et())==null||ot(),H(si,!0))}),G(()=>(Y(u()),Y(z()),Y(x()),Y(C()),Y(w()),Y(ri()),Y(T()),Y(R()),Y(D()),Y(ue()),Y(B()),Y(Ce()),Y(Be()),Y(Le()),Y(qe()),Y(Me()),Y(I()),Y(L()),Y(Oe()),Y(bn()),Y(Tn()),Y(Ze()),Y(Pe()),Ta),()=>{const ot={flowId:u(),connectionLineType:z(),connectionRadius:x(),selectionMode:C(),snapGrid:w(),defaultMarkerColor:ri(),nodesDraggable:T(),nodesConnectable:R(),elementsSelectable:D(),onlyRenderVisibleElements:ue(),isValidConnection:B(),autoPanOnConnect:Ce(),autoPanOnNodeDrag:Be(),onerror:Le(),ondelete:qe(),onedgecreate:Me(),connectionMode:I(),nodeDragThreshold:L(),onconnect:Oe(),onconnectstart:bn(),onconnectend:Tn(),onbeforedelete:Ze(),nodeOrigin:Pe()};Ta(it,ot)}),G(()=>(Y(E()),Y(k()),Y(p()),Y(N()),Y(J()),Y(nt())),()=>{Ia(it,{nodeTypes:E(),edgeTypes:k(),minZoom:p(),maxZoom:N(),translateExtent:J(),paneClickDistance:nt()})}),G(()=>Y(Ke()),()=>{gd(H(c,om(Ke())),"$colorModeClass",o)}),rt(),he();var Lt=lm();let or;var sr=ee(Lt);$0(sr,{get selectionKey(){return b()},get deleteKey(){return O()},get panActivationKey(){return S()},get multiSelectionKey(){return M()},get zoomActivationKey(){return P()}});var zs=ne(sr,2),Hc=oe(()=>de()===void 0?vn.Free:de()),Rc=oe(()=>Z()===void 0?!0:Z()),Lc=oe(()=>$()===void 0?!0:$()),Vc=oe(()=>j()===void 0?!0:j()),Xc=oe(()=>ge()===void 0?!0:ge()),Yc=oe(()=>xe()===void 0?!1:xe()),Wc=oe(()=>ye()===void 0?!0:ye()),Bc=oe(()=>nt()===void 0?0:nt());S0(zs,{initialViewport:co,get onMoveStart(){return K()},get onMove(){return U()},get onMoveEnd(){return te()},get panOnScrollMode(){return d(Hc)},get preventScrolling(){return d(Rc)},get zoomOnScroll(){return d(Lc)},get zoomOnDoubleClick(){return d(Vc)},get zoomOnPinch(){return d(Xc)},get panOnScroll(){return d(Yc)},get panOnDrag(){return d(Wc)},get paneClickDistance(){return d(Bc)},children:(ot,Uy)=>{var Fc=oe(()=>ye()===void 0?!0:ye());N0(ot,{get panOnDrag(){return d(Fc)},get selectionOnDrag(){return ke()},$$events:{paneclick(ai){Ee.call(this,t,ai)},panecontextmenu(ai){Ee.call(this,t,ai)}},children:(ai,$y)=>{var Is=am(),Ts=ae(Is);P0(Ts,{children:(Gc,Jy)=>{var Os=sm(),Ds=ae(Os);F0(Ds,{get defaultEdgeOptions(){return vt()},$$events:{edgeclick(be){Ee.call(this,t,be)},edgecontextmenu(be){Ee.call(this,t,be)},edgemouseenter(be){Ee.call(this,t,be)},edgemouseleave(be){Ee.call(this,t,be)}}});var Hs=ne(Ds,2);Q0(Hs,{get containerStyle(){return X()},get style(){return A()},isCustomComponent:n.connectionLine,$$slots:{connectionLine:(be,jy)=>{var Ls=Te(),Uc=ae(Ls);Re(Uc,t,"connectionLine",{}),W(be,Ls)}}});var Rs=ne(Hs,6);O0(Rs,{get nodeClickDistance(){return bt()},$$events:{nodeclick(be){Ee.call(this,t,be)},nodemouseenter(be){Ee.call(this,t,be)},nodemousemove(be){Ee.call(this,t,be)},nodemouseleave(be){Ee.call(this,t,be)},nodedragstart(be){Ee.call(this,t,be)},nodedrag(be){Ee.call(this,t,be)},nodedragstop(be){Ee.call(this,t,be)},nodecontextmenu(be){Ee.call(this,t,be)}}});var Zc=ne(Rs,2);U0(Zc,{$$events:{selectionclick(be){Ee.call(this,t,be)},selectioncontextmenu(be){Ee.call(this,t,be)},nodedragstart(be){Ee.call(this,t,be)},nodedrag(be){Ee.call(this,t,be)},nodedragstop(be){Ee.call(this,t,be)}}}),W(Gc,Os)},$$slots:{default:!0}});var qc=ne(Ts,2);G0(qc,{}),W(ai,Is)},$$slots:{default:!0}})},$$slots:{default:!0}});var As=ne(zs,2);nm(As,{get proOptions(){return Ge()},get position(){return we()}});var Kc=ne(As,2);Re(Kc,t,"default",{}),ji(Lt,ot=>H(Ct,ot),()=>d(Ct)),me(()=>or=xi(Lt,or,{style:lo(),class:at(["svelte-flow",St(),l()]),"data-testid":"svelte-flow__wrapper",...r,role:"application"},"svelte-12wlba6")),Nr(Lt,"clientWidth",ot=>H(Rt,ot)),Nr(Lt,"clientHeight",ot=>H(lt,ot)),ze("dragover",Lt,function(ot){Ee.call(this,t,ot)}),ze("drop",Lt,function(ot){Ee.call(this,t,ot)}),W(e,Lt),ce()}var um=se("<button><!></button>");function dn(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]),i=_e(n,["class"]);le(t,!1);let r=v(t,"class",8,void 0),o,a,s,l,c;he();var u=um();let f;var h=ee(u);Re(h,t,"default",{class:"button-svg"}),me(()=>{f=xi(u,f,{type:"button",class:at(["svelte-flow__controls-button",r()]),...i}),We(u,"--xy-controls-button-background-color-props",o),We(u,"--xy-controls-button-background-color-hover-props",a),We(u,"--xy-controls-button-color-props",s),We(u,"--xy-controls-button-color-hover-props",l),We(u,"--xy-controls-button-border-color-props",c)}),ze("click",u,function(g){Ee.call(this,t,g)}),W(e,u),ce()}var dm=$e('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"></path></svg>');function fm(e){var t=dm();W(e,t)}var hm=$e('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 5"><path d="M0 0h32v4.2H0z"></path></svg>');function gm(e){var t=hm();W(e,t)}var vm=$e('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 30"><path d="M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"></path></svg>');function mm(e){var t=vm();W(e,t)}var ym=$e('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"></path></svg>');function pm(e){var t=ym();W(e,t)}var _m=$e('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"></path></svg>');function wm(e){var t=_m();W(e,t)}var xm=se("<!> <!>",1),bm=se("<!> <!> <!> <!> <!> <!>",1);function Cc(e,t){le(t,!1);const n=Je(),i=()=>q(z,"$nodesDraggable",n),r=()=>q(I,"$nodesConnectable",n),o=()=>q(A,"$elementsSelectable",n),a=()=>q(w,"$viewport",n),s=()=>q(O,"$minZoom",n),l=()=>q(x,"$maxZoom",n),c=F(),u=F(),f=F(),h=F();let g=v(t,"position",8,"bottom-left"),y=v(t,"showZoom",8,!0),p=v(t,"showFitView",8,!0),N=v(t,"showLock",8,!0),_=v(t,"buttonBgColor",8,void 0),m=v(t,"buttonBgColorHover",8,void 0),E=v(t,"buttonColor",8,void 0),k=v(t,"buttonColorHover",8,void 0),b=v(t,"buttonBorderColor",8,void 0),C=v(t,"ariaLabel",8,void 0),S=v(t,"style",8,void 0),M=v(t,"orientation",8,"vertical"),P=v(t,"fitViewOptions",8,void 0),T=v(t,"class",8,"");const{zoomIn:R,zoomOut:L,fitView:D,viewport:w,minZoom:O,maxZoom:x,nodesDraggable:z,nodesConnectable:I,elementsSelectable:A}=Fe(),X={bgColor:_(),bgColorHover:m(),color:E(),colorHover:k(),borderColor:b()},K=()=>{R()},U=()=>{L()},te=()=>{D(P())},B=()=>{H(c,!d(c)),z.set(d(c)),I.set(d(c)),A.set(d(c))};G(()=>(i(),r(),o()),()=>{H(c,i()||r()||o())}),G(()=>(a(),s()),()=>{H(u,a().zoom<=s())}),G(()=>(a(),l()),()=>{H(f,a().zoom>=l())}),G(()=>Y(M()),()=>{H(h,M()==="horizontal"?"horizontal":"vertical")}),rt(),he();var J=oe(()=>at(["svelte-flow__controls",d(h),T()])),ie=oe(()=>C()??"Svelte Flow controls");Ps(e,{get class(){return d(J)},get position(){return g()},"data-testid":"svelte-flow__controls",get"aria-label"(){return d(ie)},get style(){return S()},children:(ue,de)=>{var Z=bm(),$=ae(Z);Re($,t,"before",{});var j=ne($,2);{var ge=qe=>{var Me=xm(),we=ae(Me);dn(we,Qe({class:"svelte-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",get disabled(){return d(f)}},X,{$$events:{click:K},children:(vt,Ae)=>{fm(vt)},$$slots:{default:!0}}));var Ge=ne(we,2);dn(Ge,Qe({class:"svelte-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",get disabled(){return d(u)}},X,{$$events:{click:U},children:(vt,Ae)=>{gm(vt)},$$slots:{default:!0}})),W(qe,Me)};Ne(j,qe=>{y()&&qe(ge)})}var xe=ne(j,2);{var ye=qe=>{dn(qe,Qe({class:"svelte-flow__controls-fitview",title:"fit view","aria-label":"fit view"},X,{$$events:{click:te},children:(Me,we)=>{mm(Me)},$$slots:{default:!0}}))};Ne(xe,qe=>{p()&&qe(ye)})}var ke=ne(xe,2);{var Ce=qe=>{dn(qe,Qe({class:"svelte-flow__controls-interactive",title:"toggle interactivity","aria-label":"toggle interactivity"},X,{$$events:{click:B},children:(Me,we)=>{var Ge=Te(),vt=ae(Ge);{var Ae=Ke=>{wm(Ke)},je=Ke=>{pm(Ke)};Ne(vt,Ke=>{d(c)?Ke(Ae):Ke(je,!1)})}W(Me,Ge)},$$slots:{default:!0}}))};Ne(ke,qe=>{N()&&qe(Ce)})}var Be=ne(ke,2);Re(Be,t,"default",{});var Le=ne(Be,2);Re(Le,t,"after",{}),W(ue,Z)},$$slots:{default:!0}}),ce()}var en;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(en||(en={}));var Em=$e("<circle></circle>");function km(e,t){le(t,!1);let n=v(t,"radius",8,5),i=v(t,"class",8,"");he();var r=Em();const o=oe(()=>Dt(at(["svelte-flow__background-pattern","dots",i()])));me(()=>{Q(r,"cx",n()),Q(r,"cy",n()),Q(r,"r",n()),In(r,d(o),"")}),W(e,r),ce()}var Sm=$e("<path></path>");function Cm(e,t){le(t,!1);let n=v(t,"lineWidth",8,1),i=v(t,"dimensions",8),r=v(t,"variant",8,void 0),o=v(t,"class",8,"");he();var a=Sm();const s=oe(()=>Dt(at(["svelte-flow__background-pattern",r(),o()])));me(()=>{Q(a,"stroke-width",n()),Q(a,"d",`M${i()[0]/2} 0 V${i()[1]} M0 ${i()[1]/2} H${i()[0]}`),In(a,d(s),"")}),W(e,a),ce()}const Nm={[en.Dots]:1,[en.Lines]:1,[en.Cross]:6};var Mm=$e('<svg data-testid="svelte-flow__background"><pattern patternUnits="userSpaceOnUse"><!></pattern><rect x="0" y="0" width="100%" height="100%"></rect></svg>');function Pm(e,t){le(t,!1);const n=Je(),i=()=>q(k,"$flowId",n),r=()=>q(E,"$viewport",n),o=F(),a=F(),s=F(),l=F(),c=F();let u=v(t,"id",8,void 0),f=v(t,"variant",24,()=>en.Dots),h=v(t,"gap",8,20),g=v(t,"size",8,1),y=v(t,"lineWidth",8,1),p=v(t,"bgColor",8,void 0),N=v(t,"patternColor",8,void 0),_=v(t,"patternClass",8,void 0),m=v(t,"class",8,"");const{viewport:E,flowId:k}=Fe(),b=g()||Nm[f()],C=f()===en.Dots,S=f()===en.Cross,M=Array.isArray(h())?h():[h(),h()];G(()=>(i(),Y(u())),()=>{H(o,`background-pattern-${i()}-${u()?u():""}`)}),G(()=>r(),()=>{H(a,[M[0]*r().zoom||1,M[1]*r().zoom||1])}),G(()=>r(),()=>{H(s,b*r().zoom)}),G(()=>(d(s),d(a)),()=>{H(l,S?[d(s),d(s)]:d(a))}),G(()=>(d(s),d(l)),()=>{H(c,C?[d(s)/2,d(s)/2]:[d(l)[0]/2,d(l)[1]/2])}),rt(),he();var P=Mm();const T=oe(()=>Dt(at(["svelte-flow__background",m()])));var R=ee(P),L=ee(R);{var D=x=>{var z=oe(()=>d(s)/2);km(x,{get radius(){return d(z)},get class(){return _()}})},w=x=>{Cm(x,{get dimensions(){return d(l)},get variant(){return f()},get lineWidth(){return y()},get class(){return _()}})};Ne(L,x=>{C?x(D):x(w,!1)})}var O=ne(R);me(()=>{In(P,d(T),"svelte-1r7pe8d"),We(P,"--xy-background-color-props",p()),We(P,"--xy-background-pattern-color-props",N()),Q(R,"id",d(o)),Q(R,"x",r().x%d(a)[0]),Q(R,"y",r().y%d(a)[1]),Q(R,"width",d(a)[0]),Q(R,"height",d(a)[1]),Q(R,"patternTransform",`translate(-${d(c)[0]},-${d(c)[1]})`),Q(O,"fill",`url(#${d(o)})`)}),W(e,P),ce()}var zm=$e("<rect></rect>");function Am(e,t){le(t,!1);let n=v(t,"x",8),i=v(t,"y",8),r=v(t,"width",8,0),o=v(t,"height",8,0),a=v(t,"borderRadius",8,5),s=v(t,"color",8,void 0),l=v(t,"shapeRendering",8),c=v(t,"strokeColor",8,void 0),u=v(t,"strokeWidth",8,2),f=v(t,"selected",8,!1),h=v(t,"class",8,"");he();var g=zm();const y=oe(()=>Dt(at(["svelte-flow__minimap-node",h()])));me(()=>{In(g,d(y),""),Q(g,"x",n()),Q(g,"y",i()),Q(g,"rx",a()),Q(g,"ry",a()),Q(g,"width",r()),Q(g,"height",o()),Q(g,"style",`${s()?`fill: ${s()};`:""}${c()?`stroke: ${c()};`:""}${u()?`stroke-width: ${u()};`:""}`),Q(g,"shape-rendering",l()),Ye(g,"selected",f())}),W(e,g),ce()}function ko(e,t){const n=Ov({domNode:e,panZoom:t.panZoom,getTransform:()=>{const r=V(t.viewport);return[r.x,r.y,r.zoom]},getViewScale:t.getViewScale});function i(r){n.update({translateExtent:r.translateExtent,width:r.width,height:r.height,inversePan:r.inversePan,zoomStep:r.zoomStep,pannable:r.pannable,zoomable:r.zoomable})}return{update:i,destroy(){n.destroy()}}}const So=e=>e instanceof Function?e:()=>e;var Im=se("<title> </title>"),Tm=$e('<svg class="svelte-flow__minimap-svg" role="img"><!><!><path class="svelte-flow__minimap-mask" fill-rule="evenodd" pointer-events="none"></path></svg>');function Om(e,t){le(t,!1);const n=Je(),i=()=>q(ye,"$flowId",n),r=()=>q(j,"$viewport",n),o=()=>q(ge,"$containerWidth",n),a=()=>q(xe,"$containerHeight",n),s=()=>q($,"$nodeLookup",n),l=()=>q(Z,"$nodes",n),c=()=>q(ke,"$panZoom",n),u=()=>q(Ce,"$translateExtent",n),f=F(),h=F(),g=F(),y=F(),p=F(),N=F(),_=F(),m=F(),E=F(),k=F(),b=F(),C=F(),S=F();let M=v(t,"position",8,"bottom-right"),P=v(t,"ariaLabel",8,"Mini map"),T=v(t,"nodeStrokeColor",8,"transparent"),R=v(t,"nodeColor",8,void 0),L=v(t,"nodeClass",8,""),D=v(t,"nodeBorderRadius",8,5),w=v(t,"nodeStrokeWidth",8,2),O=v(t,"bgColor",8,void 0),x=v(t,"maskColor",8,void 0),z=v(t,"maskStrokeColor",8,void 0),I=v(t,"maskStrokeWidth",8,void 0),A=v(t,"width",8,void 0),X=v(t,"height",8,void 0),K=v(t,"pannable",8,!0),U=v(t,"zoomable",8,!0),te=v(t,"inversePan",8,void 0),B=v(t,"zoomStep",8,void 0),J=v(t,"style",8,""),ie=v(t,"class",8,"");const ue=200,de=150,{nodes:Z,nodeLookup:$,viewport:j,width:ge,height:xe,flowId:ye,panZoom:ke,translateExtent:Ce}=Fe(),Be=R()===void 0?void 0:So(R()),Le=So(T()),qe=So(L()),Me=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",we=`svelte-flow__minimap-desc-${i()}`;let Ge=F(d(f));const vt=()=>d(N);G(()=>(r(),o(),a()),()=>{H(f,{x:-r().x/r().zoom,y:-r().y/r().zoom,width:o()/r().zoom,height:a()/r().zoom})}),G(()=>(s(),d(f),l()),()=>{H(Ge,s().size>0?oc(ir(s()),d(f)):d(f)),l()}),G(()=>Y(A()),()=>{H(h,A()??ue)}),G(()=>Y(X()),()=>{H(g,X()??de)}),G(()=>(d(Ge),d(h)),()=>{H(y,d(Ge).width/d(h))}),G(()=>(d(Ge),d(g)),()=>{H(p,d(Ge).height/d(g))}),G(()=>(d(y),d(p)),()=>{H(N,Math.max(d(y),d(p)))}),G(()=>(d(N),d(h)),()=>{H(_,d(N)*d(h))}),G(()=>(d(N),d(g)),()=>{H(m,d(N)*d(g))}),G(()=>d(N),()=>{H(E,5*d(N))}),G(()=>(d(Ge),d(_),d(E)),()=>{H(k,d(Ge).x-(d(_)-d(Ge).width)/2-d(E))}),G(()=>(d(Ge),d(m),d(E)),()=>{H(b,d(Ge).y-(d(m)-d(Ge).height)/2-d(E))}),G(()=>(d(_),d(E)),()=>{H(C,d(_)+d(E)*2)}),G(()=>(d(m),d(E)),()=>{H(S,d(m)+d(E)*2)}),rt(),he();var Ae=oe(()=>J()+(O()?`;--xy-minimap-background-color-props:${O()}`:"")),je=oe(()=>at(["svelte-flow__minimap",ie()]));Ps(e,{get position(){return M()},get style(){return d(Ae)},get class(){return d(je)},"data-testid":"svelte-flow__minimap",children:(Ke,Oe)=>{var bn=Te(),Tn=ae(bn);{var Ze=et=>{var Pe=Tm();Q(Pe,"aria-labelledby",we);var nt=ee(Pe);{var bt=St=>{var Ct=Im();Q(Ct,"id",we);var Rt=ee(Ct);me(()=>qt(Rt,P())),W(St,Ct)};Ne(nt,St=>{P()&&St(bt)})}var ri=ne(nt);Pt(ri,1,l,St=>St.id,(St,Ct)=>{var Rt=Te();const lt=oe(()=>s().get(d(Ct).id));var co=ae(Rt);{var it=oi=>{const si=oe(()=>xn(d(lt)));var Lt=oe(()=>Be==null?void 0:Be(d(lt))),or=oe(()=>Le(d(lt))),sr=oe(()=>qe(d(lt)));Am(oi,Qe({get x(){return d(lt).internals.positionAbsolute.x},get y(){return d(lt).internals.positionAbsolute.y}},()=>d(si),{get selected(){return d(lt).selected},get color(){return d(Lt)},get borderRadius(){return D()},get strokeColor(){return d(or)},get strokeWidth(){return w()},shapeRendering:Me,get class(){return d(sr)}}))};Ne(co,oi=>{d(lt)&&ac(d(lt))&&oi(it)})}W(St,Rt)});var lo=ne(ri);ut(Pe,(St,Ct)=>ko==null?void 0:ko(St,Ct),()=>({panZoom:c(),viewport:j,getViewScale:vt,translateExtent:u(),width:o(),height:a(),inversePan:te(),zoomStep:B(),pannable:K(),zoomable:U()})),me(()=>{Q(Pe,"width",d(h)),Q(Pe,"height",d(g)),Q(Pe,"viewBox",`${d(k)??""} ${d(b)??""} ${d(C)??""} ${d(S)??""}`),We(Pe,"--xy-minimap-mask-background-color-props",x()),We(Pe,"--xy-minimap-mask-stroke-color-props",z()),We(Pe,"--xy-minimap-mask-stroke-width-props",I()?I()*d(N):void 0),Q(lo,"d",`M${d(k)-d(E)},${d(b)-d(E)}h${d(C)+d(E)*2}v${d(S)+d(E)*2}h${-d(C)-d(E)*2}z
      M${d(f).x??""},${d(f).y??""}h${d(f).width??""}v${d(f).height??""}h${-d(f).width}z`)}),W(et,Pe)};Ne(Tn,et=>{c()&&et(Ze)})}W(Ke,bn)},$$slots:{default:!0}}),ce()}const Oa=e=>ev(e);function Dm(){const{zoomIn:e,zoomOut:t,fitView:n,onbeforedelete:i,snapGrid:r,viewport:o,width:a,height:s,minZoom:l,maxZoom:c,panZoom:u,nodes:f,edges:h,domNode:g,nodeLookup:y,nodeOrigin:p,edgeLookup:N,connectionLookup:_}=Fe(),m=b=>{var T,R;const C=V(y),S=Oa(b)?b:C.get(b.id),M=S.parentId?rv(S.position,S.measured,S.parentId,C,V(p)):S.position,P={...S,position:M,width:((T=S.measured)==null?void 0:T.width)??S.width,height:((R=S.measured)==null?void 0:R.height)??S.height};return Zn(P)},E=(b,C,S={replace:!1})=>{var T;const M=(T=V(y).get(b))==null?void 0:T.internals.userNode;if(!M)return;const P=typeof C=="function"?C(M):C;S.replace?f.update(R=>R.map(L=>L.id===b?Oa(P)?P:{...L,...P}:L)):(Object.assign(M,P),f.update(R=>R))},k=b=>V(y).get(b);return{zoomIn:e,zoomOut:t,getInternalNode:k,getNode:b=>{var C;return(C=k(b))==null?void 0:C.internals.userNode},getNodes:b=>b===void 0?V(f):Da(V(y),b),getEdge:b=>V(N).get(b),getEdges:b=>b===void 0?V(h):Da(V(N),b),setZoom:(b,C)=>{const S=V(u);return S?S.scaleTo(b,{duration:C==null?void 0:C.duration}):Promise.resolve(!1)},getZoom:()=>V(o).zoom,setViewport:async(b,C)=>{const S=V(o),M=V(u);return M?(await M.setViewport({x:b.x??S.x,y:b.y??S.y,zoom:b.zoom??S.zoom},{duration:C==null?void 0:C.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>V(o),setCenter:async(b,C,S)=>{const M=typeof(S==null?void 0:S.zoom)<"u"?S.zoom:V(c),P=V(u);return P?(await P.setViewport({x:V(a)/2-b*M,y:V(s)/2-C*M,zoom:M},{duration:S==null?void 0:S.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:n,fitBounds:async(b,C)=>{const S=V(u);if(!S)return Promise.resolve(!1);const M=Es(b,V(a),V(s),V(l),V(c),(C==null?void 0:C.padding)??.1);return await S.setViewport(M,{duration:C==null?void 0:C.duration}),Promise.resolve(!0)},getIntersectingNodes:(b,C=!0,S)=>{const M=_a(b),P=M?b:m(b);return P?(S||V(f)).filter(T=>{const R=V(y).get(T.id);if(!R||!M&&T.id===b.id)return!1;const L=Zn(R),D=Mi(L,P);return C&&D>0||D>=P.width*P.height}):[]},isNodeIntersecting:(b,C,S=!0)=>{const P=_a(b)?b:m(b);if(!P)return!1;const T=Mi(P,C);return S&&T>0||T>=P.width*P.height},deleteElements:async({nodes:b=[],edges:C=[]})=>{const{nodes:S,edges:M}=await nc({nodesToRemove:b,edgesToRemove:C,nodes:V(f),edges:V(h),onBeforeDelete:V(i)});return S&&f.update(P=>P.filter(T=>!S.some(({id:R})=>R===T.id))),M&&h.update(P=>P.filter(T=>!M.some(({id:R})=>R===T.id))),{deletedNodes:S,deletedEdges:M}},screenToFlowPosition:(b,C={snapToGrid:!0})=>{const S=V(g);if(!S)return b;const M=C.snapToGrid?V(r):!1,{x:P,y:T,zoom:R}=V(o),{x:L,y:D}=S.getBoundingClientRect(),w={x:b.x-L,y:b.y-D};return rr(w,[P,T,R],M!==null,M||[1,1])},flowToScreenPosition:b=>{const C=V(g);if(!C)return b;const{x:S,y:M,zoom:P}=V(o),{x:T,y:R}=C.getBoundingClientRect(),L=sc(b,[S,M,P]);return{x:L.x+T,y:L.y+R}},toObject:()=>({nodes:V(f).map(b=>({...b,position:{...b.position},data:{...b.data}})),edges:V(h).map(b=>({...b})),viewport:{...V(o)}}),updateNode:E,updateNodeData:(b,C,S)=>{var T;const M=(T=V(y).get(b))==null?void 0:T.internals.userNode;if(!M)return;const P=typeof C=="function"?C(M):C;M.data=S!=null&&S.replace?P:{...M.data,...P},f.update(R=>R)},getNodesBounds:b=>{const C=V(y),S=V(p);return tv(b,{nodeLookup:C,nodeOrigin:S})},getHandleConnections:({type:b,id:C,nodeId:S})=>{var M;return Array.from(((M=V(_).get(`${S}-${b}-${C??null}`))==null?void 0:M.values())??[])},viewport:o}}function Da(e,t){var i;const n=[];for(const r of t){const o=e.get(r);if(o){const a="internals"in o?(i=o.internals)==null?void 0:i.userNode:o;n.push(a)}}return n}var Hm=se("<div><!></div>");function Ha(e,t){le(t,!1);const n=Je(),i=()=>q(A,"$nodeLookup",n),r=()=>q(K,"$viewport",n),o=()=>q(X,"$snapGrid",n),a=()=>q(te,"$nodeOrigin",n),s=()=>q(B,"$domNode",n),l=()=>q(U,"$nodes",n),c=F(),u=F(),f=F(),h=F(),g=F(),y=F(),p=F(),N=F(),_=F(),m=F(),E=F();let k=v(t,"nodeId",8,void 0),b=v(t,"position",8,void 0),C=v(t,"variant",24,()=>cn.Handle),S=v(t,"color",8,void 0),M=v(t,"minWidth",8,10),P=v(t,"minHeight",8,10),T=v(t,"maxWidth",24,()=>Number.MAX_VALUE),R=v(t,"maxHeight",24,()=>Number.MAX_VALUE),L=v(t,"keepAspectRatio",8,!1),D=v(t,"shouldResize",8,void 0),w=v(t,"onResizeStart",8,void 0),O=v(t,"onResize",8,void 0),x=v(t,"onResizeEnd",8,void 0),z=v(t,"style",8,""),I=v(t,"class",8,"");const{nodeLookup:A,snapGrid:X,viewport:K,nodes:U,nodeOrigin:te,domNode:B}=Fe(),J=Kn("svelteflow__node_id");let ie=F(),ue=F(null);ii(()=>(d(ie)&&H(ue,Jv({domNode:d(ie),nodeId:d(g),getStoreItems:()=>({nodeLookup:i(),transform:[r().x,r().y,r().zoom],snapGrid:o()??void 0,snapToGrid:!!o(),nodeOrigin:a(),paneDomNode:s()}),onChange:(j,ge)=>{var ye,ke;const xe=(ye=i().get(d(g)))==null?void 0:ye.internals.userNode;if(xe){j.x!==void 0&&j.y!==void 0&&(xe.position={x:j.x,y:j.y}),j.width!==void 0&&j.height!==void 0&&(xe.width=j.width,xe.height=j.height);for(const Ce of ge){const Be=(ke=i().get(Ce.id))==null?void 0:ke.internals.userNode;Be&&(Be.position=Ce.position)}bi(U,l())}}})),()=>{var j;(j=d(ue))==null||j.destroy()})),G(()=>Y(M()),()=>{H(c,M()??10)}),G(()=>Y(P()),()=>{H(u,P()??10)}),G(()=>Y(T()),()=>{H(f,T()??Number.MAX_VALUE)}),G(()=>Y(R()),()=>{H(h,R()??Number.MAX_VALUE)}),G(()=>Y(k()),()=>{H(g,typeof k()=="string"?k():J)}),G(()=>(Y(C()),cn),()=>{H(y,C()===cn.Line?"right":"bottom-right")}),G(()=>(Y(b()),d(y)),()=>{H(p,b()??d(y))}),G(()=>d(p),()=>{H(N,d(p).split("-"))}),G(()=>(Y(C()),cn),()=>{H(_,C()===cn.Line?"border-color":"background-color")}),G(()=>Y(z()),()=>{H(m,z()??"")}),G(()=>(Y(S()),d(m),d(_)),()=>{H(E,S()?`${d(m)} ${d(_)}: ${S()};`:d(m))}),G(()=>(d(ue),d(p),d(c),d(u),d(f),d(h),Y(L()),Y(w()),Y(O()),Y(x()),Y(D())),()=>{var j;(j=d(ue))==null||j.update({controlPosition:d(p),boundaries:{minWidth:d(c),minHeight:d(u),maxWidth:d(f),maxHeight:d(h)},keepAspectRatio:!!L(),onResizeStart:w(),onResize:O(),onResizeEnd:x(),shouldResize:D()})}),rt(),he();var de=Hm();const Z=oe(()=>Dt(at(["svelte-flow__resize-control","nodrag",...d(N),C(),I()])));var $=ee(de);Re($,t,"default",{}),ji(de,j=>H(ie,j),()=>d(ie)),me(()=>{hs(de,d(Z),""),Q(de,"style",d(E))}),W(e,de),ce()}var Rm=se("<!> <!>",1);function Nc(e,t){le(t,!1);let n=v(t,"nodeId",8,void 0),i=v(t,"isVisible",8,!0),r=v(t,"handleClass",8,void 0),o=v(t,"handleStyle",8,void 0),a=v(t,"lineClass",8,void 0),s=v(t,"lineStyle",8,void 0),l=v(t,"color",8,void 0),c=v(t,"minWidth",8,10),u=v(t,"minHeight",8,10),f=v(t,"maxWidth",24,()=>Number.MAX_VALUE),h=v(t,"maxHeight",24,()=>Number.MAX_VALUE),g=v(t,"keepAspectRatio",8,!1),y=v(t,"shouldResize",8,void 0),p=v(t,"onResizeStart",8,void 0),N=v(t,"onResize",8,void 0),_=v(t,"onResizeEnd",8,void 0),m=c()||10,E=u()||10,k=f()||Number.MAX_VALUE,b=h()||Number.MAX_VALUE;he();var C=Te(),S=ae(C);{var M=P=>{var T=Rm(),R=ae(T);Pt(R,1,()=>Kv,D=>D,(D,w)=>{Ha(D,{get class(){return a()},get style(){return s()},get nodeId(){return n()},get position(){return d(w)},get variant(){return cn.Line},get color(){return l()},minWidth:m,minHeight:E,maxWidth:k,maxHeight:b,get onResizeStart(){return p()},get keepAspectRatio(){return g()},get shouldResize(){return y()},get onResize(){return N()},get onResizeEnd(){return _()}})});var L=ne(R,2);Pt(L,1,()=>Bv,D=>D,(D,w)=>{Ha(D,{get class(){return r()},get style(){return o()},get nodeId(){return n()},get position(){return d(w)},get color(){return l()},minWidth:m,minHeight:E,maxWidth:k,maxHeight:b,get onResizeStart(){return p()},get keepAspectRatio(){return g()},get shouldResize(){return y()},get onResize(){return N()},get onResizeEnd(){return _()}})}),W(P,T)};Ne(S,P=>{i()&&P(M)})}W(e,C),ce()}const Lm=[];function Vm({type:e,nodeId:t,id:n=null}){const{edges:i,connectionLookup:r}=Fe(),o=Kn("svelteflow__node_id"),a=t??o;let s;return Cn([i,r],([,l],c)=>{const u=l.get(`${a}-${e}-${n||null}`);ec(u,s)||(s=u,c(Array.from((s==null?void 0:s.values())||[])))},Lm)}/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xm={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var Ym=$e("<svg><!><!></svg>");function xt(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]),i=_e(n,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);le(t,!1);let r=v(t,"name",8,void 0),o=v(t,"color",8,"currentColor"),a=v(t,"size",8,24),s=v(t,"strokeWidth",8,2),l=v(t,"absoluteStrokeWidth",8,!1),c=v(t,"iconNode",24,()=>[]);const u=(...p)=>p.filter((N,_,m)=>!!N&&m.indexOf(N)===_).join(" ");he();var f=Ym();let h;var g=ee(f);Pt(g,1,c,yi,(p,N)=>{let _=()=>d(N)[0],m=()=>d(N)[1];var E=Te(),k=ae(E);cd(k,_,!0,(b,C)=>{let S;me(()=>S=xi(b,S,{...m()},void 0,b.namespaceURI===Ga,b.nodeName.includes("-")))}),W(p,E)});var y=ne(g);Re(y,t,"default",{}),me(()=>h=xi(f,h,{...Xm,...i,width:a(),height:a(),stroke:o(),"stroke-width":l()?Number(s())*24/Number(a()):s(),class:u("lucide-icon","lucide",r()?`lucide-${r()}`:"",n.class)},void 0,!0)),W(e,f),ce()}function Wm(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);xt(e,Qe({name:"copy"},()=>n,{iconNode:[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"}]],children:(r,o)=>{var a=Te(),s=ae(a);Re(s,t,"default",{}),W(r,a)},$$slots:{default:!0}}))}function Bm(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);xt(e,Qe({name:"download"},()=>n,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"7 10 12 15 17 10"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3"}]],children:(r,o)=>{var a=Te(),s=ae(a);Re(s,t,"default",{}),W(r,a)},$$slots:{default:!0}}))}function Km(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);xt(e,Qe({name:"ellipsis-vertical"},()=>n,{iconNode:[["circle",{cx:"12",cy:"12",r:"1"}],["circle",{cx:"12",cy:"5",r:"1"}],["circle",{cx:"12",cy:"19",r:"1"}]],children:(r,o)=>{var a=Te(),s=ae(a);Re(s,t,"default",{}),W(r,a)},$$slots:{default:!0}}))}function Mc(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);xt(e,Qe({name:"loader"},()=>n,{iconNode:[["path",{d:"M12 2v4"}],["path",{d:"m16.2 7.8 2.9-2.9"}],["path",{d:"M18 12h4"}],["path",{d:"m16.2 16.2 2.9 2.9"}],["path",{d:"M12 18v4"}],["path",{d:"m4.9 19.1 2.9-2.9"}],["path",{d:"M2 12h4"}],["path",{d:"m4.9 4.9 2.9 2.9"}]],children:(r,o)=>{var a=Te(),s=ae(a);Re(s,t,"default",{}),W(r,a)},$$slots:{default:!0}}))}function Fm(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);xt(e,Qe({name:"map"},()=>n,{iconNode:[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z"}],["path",{d:"M15 5.764v15"}],["path",{d:"M9 3.236v15"}]],children:(r,o)=>{var a=Te(),s=ae(a);Re(s,t,"default",{}),W(r,a)},$$slots:{default:!0}}))}function qm(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);xt(e,Qe({name:"play"},()=>n,{iconNode:[["polygon",{points:"6 3 20 12 6 21 6 3"}]],children:(r,o)=>{var a=Te(),s=ae(a);Re(s,t,"default",{}),W(r,a)},$$slots:{default:!0}}))}function Gm(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);xt(e,Qe({name:"settings"},()=>n,{iconNode:[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}],["circle",{cx:"12",cy:"12",r:"3"}]],children:(r,o)=>{var a=Te(),s=ae(a);Re(s,t,"default",{}),W(r,a)},$$slots:{default:!0}}))}function Zm(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);xt(e,Qe({name:"square-arrow-out-up-right"},()=>n,{iconNode:[["path",{d:"M21 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h6"}],["path",{d:"m21 3-9 9"}],["path",{d:"M15 3h6v6"}]],children:(r,o)=>{var a=Te(),s=ae(a);Re(s,t,"default",{}),W(r,a)},$$slots:{default:!0}}))}function Um(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);xt(e,Qe({name:"square-play"},()=>n,{iconNode:[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}],["path",{d:"m9 8 6 4-6 4Z"}]],children:(r,o)=>{var a=Te(),s=ae(a);Re(s,t,"default",{}),W(r,a)},$$slots:{default:!0}}))}function Ra(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);xt(e,Qe({name:"square-x"},()=>n,{iconNode:[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}],["path",{d:"m15 9-6 6"}],["path",{d:"m9 9 6 6"}]],children:(r,o)=>{var a=Te(),s=ae(a);Re(s,t,"default",{}),W(r,a)},$$slots:{default:!0}}))}function $m(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);xt(e,Qe({name:"text-cursor-input"},()=>n,{iconNode:[["path",{d:"M5 4h1a3 3 0 0 1 3 3 3 3 0 0 1 3-3h1"}],["path",{d:"M13 20h-1a3 3 0 0 1-3-3 3 3 0 0 1-3 3H5"}],["path",{d:"M5 16H4a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h1"}],["path",{d:"M13 8h7a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-7"}],["path",{d:"M9 7v10"}]],children:(r,o)=>{var a=Te(),s=ae(a);Re(s,t,"default",{}),W(r,a)},$$slots:{default:!0}}))}function Jm(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);xt(e,Qe({name:"upload"},()=>n,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"17 8 12 3 7 8"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15"}]],children:(r,o)=>{var a=Te(),s=ae(a);Re(s,t,"default",{}),W(r,a)},$$slots:{default:!0}}))}function Pc(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);xt(e,Qe({name:"x"},()=>n,{iconNode:[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]],children:(r,o)=>{var a=Te(),s=ae(a);Re(s,t,"default",{}),W(r,a)},$$slots:{default:!0}}))}const jm={nodes:[{id:"1",type:"textInput",position:{x:-20,y:0},data:{value:"What is AGI?"},width:180,height:100},{id:"2",type:"generate",position:{x:240,y:0},width:460,height:340,data:{markdown:"",html:"",model:"gemini-2.0-flash-exp"}}],edges:[{source:"1",target:"2"}]};var Wr,zc;class Qm{constructor(){Xe(this,Wr);const t=mt(this,Wr,zc).call(this);this.nodes=re(t.nodes),this.edges=re(t.edges)}LoadFromFile(t){this.nodes.set(t.nodes),this.edges.set(t.edges),this.Save()}AddNode(t){this.nodes.update(n=>(n.push(t),n)),this.Save()}AddEdge(t,n){this.edges.update(i=>(i.push({source:t,target:n,id:new Date().getTime().toString()}),i)),this.Save()}RemoveNode(t){this.nodes.update(n=>n.filter(i=>i.id!=t.id)),this.Save()}RemoveEdge(t){this.edges.update(n=>n.filter(i=>i.source!=t.source||i.target!=t.target)),this.Save()}RemovePrevEdge(t){const n={};n[t.fromHandle.type]=t.fromHandle.nodeId,n[t.toHandle.type]=t.toHandle.nodeId,this.edges.update(i=>{for(let r=i.length-1;r>=0;r--){let o=i[r];n.id?o.target==n.target&&o.id!=n.id&&i.splice(r,1):o.source==n.source&&o.target==n.target&&(n.id=o.id)}return i}),this.Save()}UpdateNode(t,n){this.nodes.update(i=>{const r=i.find(o=>o.id===t);return r&&(r.data={...r.data,...n}),i}),this.Save()}Dump(){return{nodes:V(this.nodes),edges:V(this.edges)}}Save(){const t=this.Dump();localStorage.graph=JSON.stringify(t)}GetPrompt(t){const i=V(this.edges).find(s=>s.target===t);if(!i)return"";const o=V(this.nodes).find(s=>s.id===i.source);let a;switch(o.type){case"textInput":a={role:"user",content:o.data.value};break;case"generate":a={role:"model",content:o.data.markdown};break}return[...this.GetPrompt(o.id),a]}}Wr=new WeakSet,zc=function(){return localStorage.graph?JSON.parse(localStorage.graph):jm};const tt=new Qm;var Ai,Ii,Ti,Oi,Di,Hi,Ri,Li,Vi,Sn,vi;class ey{constructor(){Xe(this,Sn);Xe(this,Ai,Ue(!1));Xe(this,Ii,Ue(null));Xe(this,Ti,Ue(null));Xe(this,Oi,Ue(void 0));Xe(this,Di,Ue(void 0));Xe(this,Hi,Ue(void 0));Xe(this,Ri,Ue(void 0));Xe(this,Li,Ue(0));Xe(this,Vi,Ue(0))}get IsVisible(){return d(ve(this,Ai))}set IsVisible(t){H(ve(this,Ai),Ve(t))}get Node(){return d(ve(this,Ii))}set Node(t){H(ve(this,Ii),Ve(t))}get Edge(){return d(ve(this,Ti))}set Edge(t){H(ve(this,Ti),Ve(t))}get Top(){return d(ve(this,Oi))}set Top(t){H(ve(this,Oi),Ve(t))}get Left(){return d(ve(this,Di))}set Left(t){H(ve(this,Di),Ve(t))}get Right(){return d(ve(this,Hi))}set Right(t){H(ve(this,Hi),Ve(t))}get Bottom(){return d(ve(this,Ri))}set Bottom(t){H(ve(this,Ri),Ve(t))}get CanvasWidth(){return d(ve(this,Li))}set CanvasWidth(t){H(ve(this,Li),Ve(t))}get CanvasHeight(){return d(ve(this,Vi))}set CanvasHeight(t){H(ve(this,Vi),Ve(t))}ShowPane(t){mt(this,Sn,vi).call(this,t)}ShowNode(t,n){mt(this,Sn,vi).call(this,t,n)}ShowEdge(t,n){mt(this,Sn,vi).call(this,t,null,n)}ShowConnect(t,n){mt(this,Sn,vi).call(this,t,null,null,n)}Hide(){this.IsVisible&&(this.Event=null,this.Node=null,this.Edge=null,this.IsVisible=!1)}}Ai=new WeakMap,Ii=new WeakMap,Ti=new WeakMap,Oi=new WeakMap,Di=new WeakMap,Hi=new WeakMap,Ri=new WeakMap,Li=new WeakMap,Vi=new WeakMap,Sn=new WeakSet,vi=function(t,n,i,r){if(t.target.closest(".nomenu")){this.Hide();return}this.Event=t,this.Node=n,this.Edge=i,this.Connection=r,t.preventDefault(),this.Top=t.clientY<this.CanvasHeight-200?t.clientY+"px":void 0,this.Left=t.clientX<this.CanvasWidth-200?t.clientX+"px":void 0,this.Right=t.clientX>=this.CanvasWidth-200?this.CanvasWidth-t.clientX+"px":void 0,this.Bottom=t.clientY>=this.CanvasHeight-200?this.CanvasHeight-t.clientY+"px":void 0,this.IsVisible=!0};const De=new ey,ty={models:[{id:"openai",name:"OpenAI",link:"https://platform.openai.com/api-keys",models:[{id:"gpt-4o"},{id:"gpt-4o-mini"},{id:"chatgpt-4o-latest"},{id:"o1"},{id:"o1-mini"},{id:"o1-preview"}]},{id:"anthropic",name:"Anthropic",link:"https://console.anthropic.com/account/keys",models:[{id:"claude-3-5-sonnet-latest"},{id:"claude-3-5-haiku-latest"},{id:"claude-3-opus-latest"},{id:"claude-3-sonnet-20240229"},{id:"claude-3-haiku-20240307"}]},{id:"google",name:"Google",link:"https://aistudio.google.com/app/apikey",models:[{id:"gemini-2.0-flash-exp"},{id:"gemini-2.0-flash-thinking-exp-1219"},{id:"gemini-exp-1206"},{id:"gemini-1.5-pro"},{id:"gemini-1.5-flash"},{id:"gemini-1.5-flash-8b"},{id:"learnlm-1.5-pro-experimental"}]}]};var Xi,Yi,Bt,Ac,Ic,xr;class ny{constructor(){Xe(this,Bt);Xe(this,Xi,Ue(Ve([])));Xe(this,Yi,Ue(Ve({})));mt(this,Bt,Ac).call(this),mt(this,Bt,Ic).call(this)}get providers(){return d(ve(this,Xi))}set providers(t){H(ve(this,Xi),Ve(t))}get models(){return d(ve(this,Yi))}set models(t){H(ve(this,Yi),Ve(t))}}Xi=new WeakMap,Yi=new WeakMap,Bt=new WeakSet,Ac=function(){if(!localStorage.info){mt(this,Bt,xr).call(this,ty);return}try{const t=JSON.parse(localStorage.info);mt(this,Bt,xr).call(this,t)}catch(t){console.log("[AppInfo > readLocal]",t,localStorage.info)}},Ic=async function(){const t="https://script.google.com/macros/s/AKfycbzt9TaEx3_lNwYDXiWk1SOvcdsq4c4THAX85Mc-5-yYH4AQ9fuJ3G3TTuUK1fMC9k9dMQ/exec?app="+window.location,n=await fetch(t);if(!n.ok)throw new Error(`[AppInfo > readRemote] ${n.status}: ${n.statusText}`);const i=await n.json();localStorage.info=JSON.stringify(i),mt(this,Bt,xr).call(this,i)},xr=function(t){const n={};for(let i=0;i<t.models.length;i++){let r=t.models[i];for(let o=0;o<r.models.length;o++){let a=r.models[o];n[a.id]=r.id}}this.models=n,this.providers=t.models};const nn=new ny;var Wi,Bi,Br,Tc;class iy{constructor(){Xe(this,Br);Xe(this,Wi,Ue(!1));Xe(this,Bi,Ue(Ve({defaultModel:"gemini-2.0-flash-exp"})));if(localStorage.settings){const t=JSON.parse(localStorage.settings);t.geminiKey&&(t.googleKey=t.geminiKey,delete t.geminiKey,localStorage.settings=JSON.stringify(t)),this.Data=t}mt(this,Br,Tc).call(this)}get IsVisible(){return d(ve(this,Wi))}set IsVisible(t){H(ve(this,Wi),Ve(t))}get Data(){return d(ve(this,Bi))}set Data(t){H(ve(this,Bi),Ve(t))}Save(){localStorage.settings=JSON.stringify(this.Data)}Show(){this.IsVisible=!0}Hide(){this.IsVisible=!1}}Wi=new WeakMap,Bi=new WeakMap,Br=new WeakSet,Tc=async function(){for(let t=0;t<nn.providers.length;t++){let n=nn.providers[t];if(this.Data[n.id+"Key"])return}this.Show()};const zt=new iy;var ry=se("<!> <!> <!>",1),oy=se('<input type="file" id="fileInput" style="display: none;" accept=".json"> <!>',1);function sy(e,t){le(t,!1);let n=F();function i(l){const c=l.target.files[0];if(!c||c.type!="application/json")throw"Invalid file";const u=new FileReader;u.onload=f=>{const h=f.target.result.toString(),g=JSON.parse(h);if(!Array.isArray(g.nodes)||!Array.isArray(g.edges))throw"Invalid file";tt.LoadFromFile(g)},u.readAsText(c)}function r(){const l=tt.Dump(),c=JSON.stringify(l,null,2),u=new Blob([c],{type:"application/json"}),f=URL.createObjectURL(u),h=document.createElement("a");h.href=f,h.download="llm-graph.json",h.click(),URL.revokeObjectURL(f)}he();var o=oy(),a=ae(o);a.__change=i,ji(a,l=>H(n,l),()=>d(n));var s=ne(a,2);Cc(s,{position:"top-left",showFitView:!1,showLock:!1,showZoom:!1,children:(l,c)=>{var u=ry(),f=ae(u);dn(f,{title:"Import",class:"canvas-llm-controll-button",$$events:{click:()=>d(n).click()},children:(y,p)=>{Jm(y,{size:24})},$$slots:{default:!0}});var h=ne(f,2);dn(h,{title:"Export",class:"canvas-llm-controll-button",$$events:{click:r},children:(y,p)=>{Bm(y,{size:24})},$$slots:{default:!0}});var g=ne(h,2);dn(g,{title:"Settings",class:"canvas-llm-controll-button",$$events:{click:()=>zt.Show()},children:(y,p)=>{Gm(y,{size:24})},$$slots:{default:!0}}),W(l,u)},$$slots:{default:!0}}),W(e,o),ce()}rn(["change"]);var ay=se('<button class="context-menu-item svelte-1llxoho"><!> Delete node</button>'),ly=se('<button class="context-menu-item svelte-1llxoho"><!> Delete edge</button>'),cy=se('<div class="context-menu-item svelte-1llxoho" style="padding: 0.5em;background: #ddd; color: #666;">Add node:</div> <button class="context-menu-item svelte-1llxoho"><!> TextInput</button> <button class="context-menu-item svelte-1llxoho"><!> Generate</button>',1),uy=se('<div class="context-menu svelte-1llxoho"><!></div>');function dy(e,t){le(t,!1);const{screenToFlowPosition:n}=Dm();function i(f){f.id=new Date().getTime().toString(),f.origin=[0,0],f.position=n({x:De.Event.clientX,y:De.Event.clientY}),tt.AddNode(f),De.Connection&&(De.Connection.fromHandle.type=="source"?tt.AddEdge(De.Connection.fromNode.id,f.id):tt.AddEdge(f.id,De.Connection.fromNode.id)),De.Hide()}function r(){i({type:"textInput",width:260,height:120,data:{value:""}})}function o(){i({type:"generate",width:460,height:340,data:{markdown:"",html:"",model:zt.Data.defaultModel}})}function a(){tt.RemoveNode(De.Node),De.Hide()}function s(){tt.RemoveEdge(De.Edge),De.Hide()}he();var l=Te(),c=ae(l);{var u=f=>{var h=uy(),g=ee(h);{var y=N=>{var _=ay(),m=ee(_);Ra(m,{size:24,color:"red"}),ze("click",_,a),W(N,_)},p=N=>{var _=Te(),m=ae(_);{var E=b=>{var C=ly(),S=ee(C);Ra(S,{size:24,color:"red"}),ze("click",C,s),W(b,C)},k=b=>{var C=cy(),S=ne(ae(C),2),M=ee(S);$m(M,{size:24,color:"#00abff"});var P=ne(S,2),T=ee(P);Um(T,{size:24,color:"#00abff"}),ze("click",S,r),ze("click",P,o),W(b,C)};Ne(m,b=>{De.Edge?b(E):b(k,!1)},!0)}W(N,_)};Ne(g,N=>{De.Node?N(y):N(p,!1)})}me(()=>{We(h,"top",De.Top),We(h,"left",De.Left),We(h,"right",De.Right),We(h,"bottom",De.Bottom)}),W(f,h)};Ne(c,f=>{De.IsVisible&&f(u)})}W(e,l),ce()}function fy(e,t){t.text&&navigator.clipboard.writeText(t.text)}var hy=se('<button class="btn-dark svelte-1fizegg" title="Copy text" aria-label="Copy text"><!></button>');function Oc(e,t){var n=hy();n.__click=[fy,t];var i=ee(n);Wm(i,{size:16}),W(e,n)}rn(["click"]);function gy(e,t,n){tt.UpdateNode(t.id,{value:d(n)})}var vy=se('<!> <!> <!> <node-content><node-header><node-header-left>Input</node-header-left> <node-header-right><!></node-header-right></node-header> <node-body><textarea class="nodrag nozoom node-text"></textarea></node-body></node-content>',3);function my(e,t){le(t,!0),Je();let n=Ue(Ve(t.data.value));Vm({nodeId:t.id,type:"target"});var i=vy(),r=ae(i);Nc(r,{minWidth:100,minHeight:30,onResizeEnd:()=>tt.Save()});var o=ne(r,2);wn(o,{type:"target",get position(){return fe.Left}});var a=ne(o,2);wn(a,{type:"source",get position(){return fe.Right}});var s=ne(a,2),l=ee(s),c=ee(l),u=ne(c,2),f=ee(u);Oc(f,{get text(){return d(n)}});var h=ne(l,2);pl(h,"class","nomenu");var g=ee(h);g.__change=[gy,t,n],wl(g,()=>d(n),y=>H(n,y)),W(e,i),ce()}rn(["change"]);var yy=se('<button type="button" class="btn-dark svelte-1fizegg"><!></button>');function py(e,t){var n=yy();n.__click=function(...r){var o;(o=t.onclick)==null||o.apply(this,r)};var i=ee(n);Km(i,{size:16}),W(e,n)}rn(["click"]);const Co=`

---

`;class _y{async Call(t,n){const i=nn.models[t];let r;switch(i){case"openai":r=await this.CallOpenAI(t,n);break;case"google":r=await this.CallGoogle(t,n);break;case"anthropic":r=await this.CallAnthropic(t,n);break;default:throw`[AiClient > Call] Invalid LLM: ${i} / ${t}`}const o=marked.parse(r);return{markdown:r,html:o}}async CallOpenAI(t,n){var a;const i="https://api.openai.com/v1/chat/completions",r=[];for(var o=0;o<n.length;o++){let s=n[o],l={content:s.content};switch(s.role){case"system":l.role="system";break;case"user":l.role="user";break;case"model":l.role="assistant";break}r.push(l)}try{const s=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+zt.Data.openaiKey},body:JSON.stringify({model:t,messages:r})}),l=await s.json();if((a=l==null?void 0:l.error)!=null&&a.message)throw l.error.message;if(!s.ok)throw`${s.status}: ${s.statusText}`;let c="";return l.choices.forEach(u=>{c&&(c+=Co),c+=u.message.content}),c}catch(s){throw console.error("[AiClient > CallOpenAI]",s),s}}async CallGoogle(t,n){var a;const i=`https://generativelanguage.googleapis.com/v1beta/models/${t}:generateContent?key=${zt.Data.googleKey}`,r=[];for(var o=0;o<n.length;o++){let s=n[o],l={parts:[{text:s.content}]};switch(s.role){case"user":l.role="user";break;case"model":l.role="model";break;case"system":l.role="user",l.parts[0].text=`*${s.content}*`;break}r.push(l)}try{const s=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:r,safetySettings:[{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"BLOCK_NONE"}]})}),l=await s.json();if((a=l==null?void 0:l.error)!=null&&a.message)throw l.error.message;if(!s.ok)throw`${s.status}: ${s.statusText}`;let c="";return l.candidates.forEach(u=>{u.content.parts.forEach(f=>{c&&(c+=Co),c+=f.text})}),c}catch(s){throw console.error("[AiClient > CallGoogle]",s),s}}async CallAnthropic(t,n){var a;const i="https://api.anthropic.com/v1/messages",r=[];for(var o=0;o<n.length;o++){let s=n[o],l={content:s.content};switch(s.role){case"system":l.role="user";break;case"user":l.role="user";break;case"model":l.role="assistant";break}r.push(l)}try{const s=await fetch(i,{method:"POST",headers:{"x-api-key":zt.Data.anthropicKey,"anthropic-version":"2023-06-01","content-type":"application/json","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:t,messages:r,max_tokens:2048})}),l=await s.json();if((a=l==null?void 0:l.error)!=null&&a.message)throw l.error.message;if(!s.ok)throw`${s.status}: ${s.statusText}`;let c="";return l.content.forEach(u=>{c&&(c+=Co),c+=u.text}),c}catch(s){throw console.error("[AiClient > CallAnthropic]",s),s}}}const wy=new _y;var Ki,Fi,Kr,La;let xy=(La=class{constructor(){Xe(this,Ki,Ue(0));Xe(this,Fi,Ue(""));Xe(this,Kr,yn(()=>this.NodeID>0))}get NodeID(){return d(ve(this,Ki))}set NodeID(t){H(ve(this,Ki),Ve(t))}get ModelID(){return d(ve(this,Fi))}set ModelID(t){H(ve(this,Fi),Ve(t))}get IsVisible(){return d(ve(this,Kr))}Show(t,n){this.NodeID=t,this.ModelID=n}Hide(){this.NodeID=0}},Ki=new WeakMap,Fi=new WeakMap,Kr=new WeakMap,La);const Jt=new xy;async function by(e,t,n,i){if(H(t,""),!n.data.model){Jt.Show(n.id);return}if(!nn.models[n.data.model]){Jt.Show(n.id);return}const r=nn.models[n.data.model];if(!zt.Data[r+"Key"]){zt.Show();return}H(i,!0);try{const o=tt.GetPrompt(n.id),{markdown:a,html:s}=await wy.Call(n.data.model,o);tt.UpdateNode(n.id,{markdown:a,html:s})}catch(o){console.error("[GenerateNode > Exec]",n.data.model,o),H(t,Ve(o))}H(i,!1)}var Ey=se('<button class="btn-main" title="Call LLM" aria-label="Call LLM"><!></button>'),ky=se('<button class="btn-main" title="In progress..." aria-label="In progress..." disabled><!></button>'),Sy=(e,t)=>{H(t,"")},Cy=se('<error class="svelte-15jxjnv"> <button type="button" class="btn-dark svelte-15jxjnv"><!></button></error>'),Ny=se("<!> <!> <!> <node-content><node-header><node-header-left><!> <!></node-header-left> <node-header-right><!> <!></node-header-right></node-header> <node-body><!> <!></node-body></node-content>",3);function My(e,t){le(t,!0);let n=Ue(!1),i=Ue("");var r=Ny(),o=ae(r);Nc(o,{minWidth:100,minHeight:30,onResizeEnd:()=>tt.Save()});var a=ne(o,2);wn(a,{type:"target",get position(){return fe.Left}});var s=ne(a,2);wn(s,{type:"source",get position(){return fe.Right}});var l=ne(s,2),c=ee(l),u=ee(c),f=ee(u);{var h=M=>{var P=Do();me(()=>qt(P,t.data.model)),W(M,P)},g=M=>{var P=Do("Generate");W(M,P)};Ne(f,M=>{t.data.model?M(h):M(g,!1)})}var y=ne(f,2);{var p=M=>{var P=Ey();P.__click=[by,i,t,n];var T=ee(P);qm(T,{size:16}),W(M,P)},N=M=>{var P=ky(),T=ee(P);Mc(T,{size:16,class:"rotate"}),W(M,P)};Ne(y,M=>{d(n)?M(N,!1):M(p)})}var _=ne(u,2),m=ee(_);Oc(m,{get text(){return t.data.markdown}});var E=ne(m,2);py(E,{onclick:()=>Jt.Show(t.id,t.data.model)});var k=ne(c,2);pl(k,"class","nodrag nozoom nomenu node-text");var b=ee(k);ad(b,()=>t.data.html);var C=ne(b,2);{var S=M=>{var P=Cy(),T=ee(P),R=ne(T);R.__click=[Sy,i];var L=ee(R);Pc(L,{size:24,strokeWidth:2}),me(()=>qt(T,`${d(i)??""} `)),W(M,P)};Ne(C,M=>{d(i)&&M(S)})}W(e,r),ce()}rn(["click"]);var Py=se("<!> <!> <!> <!> <!>",1),zy=se("<div><!></div>");function Ay(e,t){le(t,!0);const n={textInput:my,generate:My};let i=Ue(!1),r=Ue(!0),o=yn(()=>d(r));async function a(c,u){if(u.isValid){tt.RemovePrevEdge(u);return}console.log(u),await new Promise(f=>setTimeout(f,100)),De.ShowConnect(c,u)}var s=zy();We(s,"height","100%");var l=ee(s);cm(l,{get nodes(){return tt.nodes},get edges(){return tt.edges},nodeTypes:n,get zoomOnScroll(){return d(r)},get preventScrolling(){return d(o)},fitView:!0,fitViewOptions:{maxZoom:1,minZoom:1},proOptions:{hideAttribution:!0},colorMode:"dark",snapGrid:[20,20],onconnectstart:()=>De.Hide(),onconnectend:a,ondelete:c=>tt.Save(),$$events:{paneclick:()=>De.Hide(),nodeclick:()=>De.Hide(),edgeclick:()=>De.Hide(),nodedragstart:()=>De.Hide(),nodedragstop:()=>tt.Save(),panecontextmenu:({detail:{event:c}})=>De.ShowPane(c),nodecontextmenu:({detail:{event:c,node:u}})=>De.ShowNode(c,u),edgecontextmenu:({detail:{event:c,edge:u}})=>De.ShowEdge(c,u),nodemousemove:({detail:{event:c}})=>{H(r,c.target.closest(".nozoom")==null)},nodemouseleave:()=>{H(r,!0)}},children:(c,u)=>{var f=Py(),h=ae(f);Cc(h,{children:(m,E)=>{dn(m,{title:"MiniMap",class:"canvas-llm-controll-button",$$events:{click:()=>H(i,!d(i))},children:(k,b)=>{Fm(k,{size:24})},$$slots:{default:!0}})},$$slots:{default:!0}});var g=ne(h,2);dy(g,{});var y=ne(g,2);sy(y,{});var p=ne(y,2);{var N=m=>{Om(m,{})};Ne(p,m=>{d(i)&&m(N)})}var _=ne(p,2);Pm(_,{get variant(){return en.Dots},patternColor:"rgba(255,255,255,0.5)",gap:20}),W(c,f)},$$slots:{default:!0}}),Nr(s,"clientWidth",c=>De.CanvasWidth=c),Nr(s,"clientHeight",c=>De.CanvasHeight=c),W(e,s),ce()}var Iy=se('<button type="button" class="btn-dark svelte-1sun3k7"><!> Close</button>');function Dc(e,t){le(t,!0);function n(o){o.key==="Escape"&&t.onclick()}var i=Iy();ze("keydown",ct,n),i.__click=function(...o){var a;(a=t.onclick)==null||a.apply(this,o)};var r=ee(i);Pc(r,{size:48,strokeWidth:1}),W(e,i),ce()}rn(["click"]);var vr=bl(()=>zt),Ty=se('<th class="svelte-1lfplf3"><h1 class="svelte-1lfplf3"> </h1></th>'),Oy=(e,t,n)=>{t(d(n).id)},Dy=(e,t,n)=>{t(e,d(n).id)},Hy=se('<button class="svelte-1lfplf3"> <input type="radio" name="defaultModel" title="Default Model" class="svelte-1lfplf3"></button>'),Ry=se('<td class="svelte-1lfplf3"></td>'),Ly=se('<!> <table class="form"><thead><tr></tr></thead><tbody><tr></tr></tbody></table>',1);function Vy(e,t){le(t,!1);function n(f){tt.UpdateNode(Jt.NodeID,{model:f}),Jt.Hide()}function i(f,h){vr(vr().Data.defaultModel=h),vr().Save(),f.stopPropagation()}he();var r=Ly(),o=ae(r);Dc(o,{onclick:()=>Jt.Hide()});var a=ne(o,2),s=ee(a),l=ee(s);Pt(l,5,()=>nn.providers,yi,(f,h)=>{var g=Ty(),y=ee(g),p=ee(y);me(()=>qt(p,d(h).name)),W(f,g)});var c=ne(s),u=ee(c);Pt(u,5,()=>nn.providers,yi,(f,h)=>{var g=Ry();Pt(g,5,()=>d(h).models,yi,(y,p)=>{var N=Hy();N.__click=[Oy,n,p];var _=ee(N),m=ne(_);m.__click=[Dy,i,p],me(()=>{Ye(N,"selected",Jt.ModelID==d(p).id),qt(_,`${d(p).id??""} `),dd(m,d(p).id==vr().Data.defaultModel)}),W(y,N)}),W(f,g)}),W(e,r),ce()}rn(["click"]);var di=bl(()=>zt),Xy=se('<div style="animation: rotate 3s infinite linear, blink 1s infinite linear"><!></div>'),Yy=se('<tr><td class="svelte-1xsv1sz"><div class="provider svelte-1xsv1sz"> <a target="_blank" title="Get API Key" class="svelte-1xsv1sz"><!></a></div></td><td class="key svelte-1xsv1sz"><input type="text" class="svelte-1xsv1sz"></td></tr>'),Wy=se('<div class="settings svelte-1xsv1sz"><h3 class="text-lg font-bold">API Keys</h3> <table class="form svelte-1xsv1sz"><tbody></tbody></table></div>'),By=se("<!> <!>",1);function Ky(e,t){le(t,!1),he();var n=By(),i=ae(n);Dc(i,{onclick:()=>di().Hide()});var r=ne(i,2);{var o=s=>{var l=Xy(),c=ee(l);Mc(c,{size:32}),W(s,l)},a=s=>{var l=Wy(),c=ne(ee(l),2),u=ee(c);Pt(u,5,()=>nn.providers,yi,(f,h)=>{var g=Yy(),y=ee(g),p=ee(y),N=ee(p),_=ne(N),m=ee(_);Zm(m,{size:16});var E=ne(y),k=ee(E);k.__change=()=>di().Save(),me(()=>{qt(N,`${d(h).name??""} `),Q(_,"href",d(h).link)}),wl(k,()=>di().Data[d(h).id+"Key"],b=>di(di().Data[d(h).id+"Key"]=b)),W(f,g)}),W(s,l)};Ne(r,s=>{nn.providers.length==0?s(o):s(a,!1)})}W(e,n),ce()}rn(["change"]);var Fy=se('<div class="full-screen center-h svelte-uz21qr"><div class="relative max-size center-v"><!></div></div>');function qy(e,t){le(t,!1),he();var n=Te(),i=ae(n);{var r=o=>{var a=Fy(),s=ee(a),l=ee(s);{var c=f=>{Ky(f,{})},u=f=>{var h=Te(),g=ae(h);{var y=p=>{Vy(p,{})};Ne(g,p=>{Jt.IsVisible&&p(y)},!0)}W(f,h)};Ne(l,f=>{zt.IsVisible?f(c):f(u,!1)})}W(o,a)};Ne(i,o=>{(zt.IsVisible||Jt.IsVisible)&&o(r)})}W(e,n),ce()}var Gy=se("<!> <!>",1);function Zy(e){var t=Gy(),n=ae(t);Ay(n,{});var i=ne(n,2);qy(i,{}),W(e,t)}ed(Zy,{target:document.getElementById("app")});
