var jc=Object.defineProperty;var Ws=e=>{throw TypeError(e)};var Qc=(e,t,n)=>t in e?jc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Bs=(e,t,n)=>Qc(e,typeof t!="symbol"?t+"":t,n),ho=(e,t,n)=>t.has(e)||Ws("Cannot "+n);var de=(e,t,n)=>(ho(e,t,"read from private field"),n?n.call(e):t.get(e)),Ve=(e,t,n)=>t.has(e)?Ws("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),go=(e,t,n,i)=>(ho(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),Nt=(e,t,n)=>(ho(e,t,"access private method"),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();const eu=!1;var Ui=Array.isArray,ns=Array.from,tu=Object.defineProperty,fn=Object.getOwnPropertyDescriptor,Wa=Object.getOwnPropertyDescriptors,nu=Object.prototype,iu=Array.prototype,is=Object.getPrototypeOf;function li(e){return typeof e=="function"}const $t=()=>{};function ru(e){return e()}function kr(e){for(var t=0;t<e.length;t++)e[t]()}const At=2,Ba=4,$i=8,rs=16,Tt=32,Ji=64,Po=128,An=256,Sr=512,ht=1024,mn=2048,$n=4096,Xt=8192,Jn=16384,ou=32768,ji=65536,su=1<<17,au=1<<19,Ka=1<<20,hn=Symbol("$state"),Fa=Symbol("legacy props"),lu=Symbol("");function qa(e){return e===this.v}function os(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function ss(e){return!os(e,this.v)}function cu(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function uu(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function du(e){throw new Error("https://svelte.dev/e/effect_orphan")}function fu(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function hu(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function gu(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function vu(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function mu(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function yu(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let jn=!1;function pu(){jn=!0}const as=1,ls=2,Ga=4,_u=8,wu=16,xu=1,bu=2,Za=4,Eu=8,ku=16,Ua=1,Su=2,gt=Symbol(),$a="http://www.w3.org/2000/svg";function dt(e,t){var n={f:0,v:e,reactions:null,equals:qa,version:0};return n}function Ze(e){return Ja(dt(e))}function Gr(e,t=!1){var i;const n=dt(e);return t||(n.equals=ss),jn&&Se!==null&&Se.l!==null&&((i=Se.l).s??(i.s=[])).push(n),n}function F(e,t=!1){return Ja(Gr(e,t))}function Ja(e){return De!==null&&De.f&At&&(Yt===null?Ou([e]):Yt.push(e)),e}function D(e,t){return De!==null&&Jr()&&De.f&(At|rs)&&(Yt===null||!Yt.includes(e))&&yu(),zo(e,t)}function zo(e,t){return e.equals(t)||(e.v=t,e.version=hl(),ja(e,mn),Jr()&&ye!==null&&ye.f&ht&&!(ye.f&Tt)&&(st!==null&&st.includes(e)?(Ot(ye,mn),Qr(ye)):gn===null?Hu([e]):gn.push(e))),t}function ja(e,t){var n=e.reactions;if(n!==null)for(var i=Jr(),r=n.length,o=0;o<r;o++){var s=n[o],a=s.f;a&mn||!i&&s===ye||(Ot(s,t),a&(ht|An)&&(a&At?ja(s,$n):Qr(s)))}}let cs=!1;function Xe(e,t=null,n){if(typeof e!="object"||e===null||hn in e)return e;const i=is(e);if(i!==nu&&i!==iu)return e;var r=new Map,o=Ui(e),s=dt(0);o&&r.set("length",dt(e.length));var a;return new Proxy(e,{defineProperty(c,l,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&gu();var f=r.get(l);return f===void 0?(f=dt(u.value),r.set(l,f)):D(f,Xe(u.value,a)),!0},deleteProperty(c,l){var u=r.get(l);if(u===void 0)l in c&&r.set(l,dt(gt));else{if(o&&typeof l=="string"){var f=r.get("length"),h=Number(l);Number.isInteger(h)&&h<f.v&&D(f,h)}D(u,gt),Ks(s)}return!0},get(c,l,u){var y;if(l===hn)return e;var f=r.get(l),h=l in c;if(f===void 0&&(!h||(y=fn(c,l))!=null&&y.writable)&&(f=dt(Xe(h?c[l]:gt,a)),r.set(l,f)),f!==void 0){var g=d(f);return g===gt?void 0:g}return Reflect.get(c,l,u)},getOwnPropertyDescriptor(c,l){var u=Reflect.getOwnPropertyDescriptor(c,l);if(u&&"value"in u){var f=r.get(l);f&&(u.value=d(f))}else if(u===void 0){var h=r.get(l),g=h==null?void 0:h.v;if(h!==void 0&&g!==gt)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return u},has(c,l){var g;if(l===hn)return!0;var u=r.get(l),f=u!==void 0&&u.v!==gt||Reflect.has(c,l);if(u!==void 0||ye!==null&&(!f||(g=fn(c,l))!=null&&g.writable)){u===void 0&&(u=dt(f?Xe(c[l],a):gt),r.set(l,u));var h=d(u);if(h===gt)return!1}return f},set(c,l,u,f){var E;var h=r.get(l),g=l in c;if(o&&l==="length")for(var y=u;y<h.v;y+=1){var p=r.get(y+"");p!==void 0?D(p,gt):y in c&&(p=dt(gt),r.set(y+"",p))}h===void 0?(!g||(E=fn(c,l))!=null&&E.writable)&&(h=dt(void 0),D(h,Xe(u,a)),r.set(l,h)):(g=h.v!==gt,D(h,Xe(u,a)));var N=Reflect.getOwnPropertyDescriptor(c,l);if(N!=null&&N.set&&N.set.call(f,u),!g){if(o&&typeof l=="string"){var w=r.get("length"),m=Number(l);Number.isInteger(m)&&m>=w.v&&D(w,m+1)}Ks(s)}return!0},ownKeys(c){d(s);var l=Reflect.ownKeys(c).filter(h=>{var g=r.get(h);return g===void 0||g.v!==gt});for(var[u,f]of r)f.v!==gt&&!(u in c)&&l.push(u);return l},setPrototypeOf(){vu()}})}function Ks(e,t=1){D(e,e.v+t)}var ct,Qa,el;function Cu(){if(ct===void 0){ct=window;var e=Element.prototype,t=Node.prototype;Qa=fn(t,"firstChild").get,el=fn(t,"nextSibling").get,e.__click=void 0,e.__className="",e.__attributes=null,e.__styles=null,e.__e=void 0,Text.prototype.__t=void 0}}function Qi(e=""){return document.createTextNode(e)}function Vt(e){return Qa.call(e)}function Zr(e){return el.call(e)}function ee(e,t){return Vt(e)}function ae(e,t){{var n=Vt(e);return n instanceof Comment&&n.data===""?Zr(n):n}}function re(e,t=1,n=!1){let i=e;for(;t--;)i=Zr(i);return i}function Nu(e){e.textContent=""}function Qt(e){var t=At|mn;ye===null?t|=An:ye.f|=Ka;var n=De!==null&&De.f&At?De:null;const i={children:null,ctx:Se,deps:null,equals:qa,f:t,fn:e,reactions:null,v:null,version:0,parent:n??ye};return n!==null&&(n.children??(n.children=[])).push(i),i}function oe(e){const t=Qt(e);return t.equals=ss,t}function tl(e){var t=e.children;if(t!==null){e.children=null;for(var n=0;n<t.length;n+=1){var i=t[n];i.f&At?us(i):Bt(i)}}}function Mu(e){for(var t=e.parent;t!==null;){if(!(t.f&At))return t;t=t.parent}return null}function nl(e){var t,n=ye;kt(Mu(e));try{tl(e),t=gl(e)}finally{kt(n)}return t}function il(e){var t=nl(e),n=(bn||e.f&An)&&e.deps!==null?$n:ht;Ot(e,n),e.equals(t)||(e.v=t,e.version=hl())}function us(e){tl(e),wi(e,0),Ot(e,Jn),e.v=e.children=e.deps=e.ctx=e.reactions=null}function rl(e){ye===null&&De===null&&du(),De!==null&&De.f&An&&uu(),fs&&cu()}function Pu(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Qn(e,t,n,i=!0){var r=(e&Ji)!==0,o=ye,s={ctx:Se,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:e|mn,first:null,fn:t,last:null,next:null,parent:r?null:o,prev:null,teardown:null,transitions:null,version:0};if(n){var a=Rn;try{Fs(!0),er(s),s.f|=ou}catch(u){throw Bt(s),u}finally{Fs(a)}}else t!==null&&Qr(s);var c=n&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&Ka)===0;if(!c&&!r&&i&&(o!==null&&Pu(s,o),De!==null&&De.f&At)){var l=De;(l.children??(l.children=[])).push(s)}return s}function ol(e){const t=Qn($i,null,!1);return Ot(t,ht),t.teardown=e,t}function Ao(e){rl();var t=ye!==null&&(ye.f&Tt)!==0&&Se!==null&&!Se.m;if(t){var n=Se;(n.e??(n.e=[])).push({fn:e,effect:ye,reaction:De})}else{var i=pt(e);return i}}function zu(e){return rl(),ei(e)}function Au(e){const t=Qn(Ji,e,!0);return(n={})=>new Promise(i=>{n.outro?Bn(t,()=>{Bt(t),i(void 0)}):(Bt(t),i(void 0))})}function pt(e){return Qn(Ba,e,!1)}function G(e,t){var n=Se,i={effect:null,ran:!1};n.l.r1.push(i),i.effect=ei(()=>{e(),!i.ran&&(i.ran=!0,D(n.l.r2,!0),It(t))})}function rt(){var e=Se;ei(()=>{if(d(e.l.r2)){for(var t of e.l.r1){var n=t.effect;n.f&ht&&Ot(n,$n),ni(n)&&er(n),t.ran=!1}e.l.r2.v=!1}})}function ei(e){return Qn($i,e,!0)}function pe(e){return ti(e)}function ti(e,t=0){return Qn($i|rs|t,e,!0)}function yn(e,t=!0){return Qn($i|Tt,e,!0,t)}function sl(e){var t=e.teardown;if(t!==null){const n=fs,i=De;qs(!0),Kt(null);try{t.call(null)}finally{qs(n),Kt(i)}}}function al(e){var t=e.deriveds;if(t!==null){e.deriveds=null;for(var n=0;n<t.length;n+=1)us(t[n])}}function ll(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){var i=n.next;Bt(n,t),n=i}}function Iu(e){for(var t=e.first;t!==null;){var n=t.next;t.f&Tt||Bt(t),t=n}}function Bt(e,t=!0){var n=!1;if((t||e.f&au)&&e.nodes_start!==null){for(var i=e.nodes_start,r=e.nodes_end;i!==null;){var o=i===r?null:Zr(i);i.remove(),i=o}n=!0}ll(e,t&&!n),al(e),wi(e,0),Ot(e,Jn);var s=e.transitions;if(s!==null)for(const c of s)c.stop();sl(e);var a=e.parent;a!==null&&a.first!==null&&cl(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function cl(e){var t=e.parent,n=e.prev,i=e.next;n!==null&&(n.next=i),i!==null&&(i.prev=n),t!==null&&(t.first===e&&(t.first=i),t.last===e&&(t.last=n))}function Bn(e,t){var n=[];ds(e,n,!0),ul(n,()=>{Bt(e),t&&t()})}function ul(e,t){var n=e.length;if(n>0){var i=()=>--n||t();for(var r of e)r.out(i)}else t()}function ds(e,t,n){if(!(e.f&Xt)){if(e.f^=Xt,e.transitions!==null)for(const s of e.transitions)(s.is_global||n)&&t.push(s);for(var i=e.first;i!==null;){var r=i.next,o=(i.f&ji)!==0||(i.f&Tt)!==0;ds(i,t,o?n:!1),i=r}}}function _i(e){dl(e,!0)}function dl(e,t){if(e.f&Xt){ni(e)&&er(e),e.f^=Xt;for(var n=e.first;n!==null;){var i=n.next,r=(n.f&ji)!==0||(n.f&Tt)!==0;dl(n,r?t:!1),n=i}if(e.transitions!==null)for(const o of e.transitions)(o.is_global||t)&&o.in()}}let Io=!1,To=[];function Tu(){Io=!1;const e=To.slice();To=[],kr(e)}function Ur(e){Io||(Io=!0,queueMicrotask(Tu)),To.push(e)}function $r(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let _r=!1,Cr=!1,Nr=null,Rn=!1,fs=!1;function Fs(e){Rn=e}function qs(e){fs=e}let Oo=[],mi=0;let De=null;function Kt(e){De=e}let ye=null;function kt(e){ye=e}let Yt=null;function Ou(e){Yt=e}let st=null,yt=0,gn=null;function Hu(e){gn=e}let fl=1,bn=!1,Se=null;function hl(){return++fl}function Jr(){return!jn||Se!==null&&Se.l===null}function ni(e){var s,a;var t=e.f;if(t&mn)return!0;if(t&$n){var n=e.deps,i=(t&An)!==0;if(n!==null){var r;if(t&Sr){for(r=0;r<n.length;r++)((s=n[r]).reactions??(s.reactions=[])).push(e);e.f^=Sr}for(r=0;r<n.length;r++){var o=n[r];if(ni(o)&&il(o),i&&ye!==null&&!bn&&!((a=o==null?void 0:o.reactions)!=null&&a.includes(e))&&(o.reactions??(o.reactions=[])).push(e),o.version>e.version)return!0}}(!i||ye!==null&&!bn)&&Ot(e,ht)}return!1}function Du(e,t){for(var n=t;n!==null;){if(n.f&Po)try{n.fn(e);return}catch{n.f^=Po}n=n.parent}throw _r=!1,e}function Ru(e){return(e.f&Jn)===0&&(e.parent===null||(e.parent.f&Po)===0)}function jr(e,t,n,i){if(_r){if(n===null&&(_r=!1),Ru(t))throw e;return}n!==null&&(_r=!0);{Du(e,t);return}}function gl(e){var h;var t=st,n=yt,i=gn,r=De,o=bn,s=Yt,a=Se,c=e.f;st=null,yt=0,gn=null,De=c&(Tt|Ji)?null:e,bn=!Rn&&(c&An)!==0,Yt=null,Se=e.ctx;try{var l=(0,e.fn)(),u=e.deps;if(st!==null){var f;if(wi(e,yt),u!==null&&yt>0)for(u.length=yt+st.length,f=0;f<st.length;f++)u[yt+f]=st[f];else e.deps=u=st;if(!bn)for(f=yt;f<u.length;f++)((h=u[f]).reactions??(h.reactions=[])).push(e)}else u!==null&&yt<u.length&&(wi(e,yt),u.length=yt);return l}finally{st=t,yt=n,gn=i,De=r,bn=o,Yt=s,Se=a}}function Lu(e,t){let n=t.reactions;if(n!==null){var i=n.indexOf(e);if(i!==-1){var r=n.length-1;r===0?n=t.reactions=null:(n[i]=n[r],n.pop())}}n===null&&t.f&At&&(st===null||!st.includes(t))&&(Ot(t,$n),t.f&(An|Sr)||(t.f^=Sr),wi(t,0))}function wi(e,t){var n=e.deps;if(n!==null)for(var i=t;i<n.length;i++)Lu(e,n[i])}function er(e){var t=e.f;if(!(t&Jn)){Ot(e,ht);var n=ye,i=Se;ye=e;try{t&rs?Iu(e):ll(e),al(e),sl(e);var r=gl(e);e.teardown=typeof r=="function"?r:null,e.version=fl}catch(o){jr(o,e,n,i||e.ctx)}finally{ye=n}}}function Vu(){if(mi>1e3){mi=0;try{fu()}catch(e){if(Nr!==null)jr(e,Nr,null);else throw e}}mi++}function Xu(e){var t=e.length;if(t!==0){Vu();var n=Rn;Rn=!0;try{for(var i=0;i<t;i++){var r=e[i];r.f&ht||(r.f^=ht);var o=[];vl(r,o),Yu(o)}}finally{Rn=n}}}function Yu(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var i=e[n];if(!(i.f&(Jn|Xt)))try{ni(i)&&(er(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?cl(i):i.fn=null))}catch(r){jr(r,i,null,i.ctx)}}}function Wu(){if(Cr=!1,mi>1001)return;const e=Oo;Oo=[],Xu(e),Cr||(mi=0,Nr=null)}function Qr(e){Cr||(Cr=!0,queueMicrotask(Wu)),Nr=e;for(var t=e;t.parent!==null;){t=t.parent;var n=t.f;if(n&(Ji|Tt)){if(!(n&ht))return;t.f^=ht}}Oo.push(t)}function vl(e,t){var n=e.first,i=[];e:for(;n!==null;){var r=n.f,o=(r&Tt)!==0,s=o&&(r&ht)!==0,a=n.next;if(!s&&!(r&Xt))if(r&$i){if(o)n.f^=ht;else try{ni(n)&&er(n)}catch(f){jr(f,n,null,n.ctx)}var c=n.first;if(c!==null){n=c;continue}}else r&Ba&&i.push(n);if(a===null){let f=n.parent;for(;f!==null;){if(e===f)break e;var l=f.next;if(l!==null){n=l;continue e}f=f.parent}}n=a}for(var u=0;u<i.length;u++)c=i[u],t.push(c),vl(c,t)}function d(e){var u;var t=e.f,n=(t&At)!==0;if(n&&t&Jn){var i=nl(e);return us(e),i}if(De!==null){Yt!==null&&Yt.includes(e)&&mu();var r=De.deps;st===null&&r!==null&&r[yt]===e?yt++:st===null?st=[e]:st.push(e),gn!==null&&ye!==null&&ye.f&ht&&!(ye.f&Tt)&&gn.includes(e)&&(Ot(ye,mn),Qr(ye))}else if(n&&e.deps===null)for(var o=e,s=o.parent,a=o;s!==null;)if(s.f&At){var c=s;a=c,s=c.parent}else{var l=s;(u=l.deriveds)!=null&&u.includes(a)||(l.deriveds??(l.deriveds=[])).push(a);break}return n&&(o=e,ni(o)&&il(o)),e.v}function It(e){const t=De;try{return De=null,e()}finally{De=t}}const Bu=~(mn|$n|ht);function Ot(e,t){e.f=e.f&Bu|t}function Kn(e){return hs().get(e)}function Mr(e,t){return hs().set(e,t),t}function Ku(e){return hs().has(e)}function hs(e){return Se===null&&$r(),Se.c??(Se.c=new Map(Fu(Se)||void 0))}function Fu(e){let t=e.p;for(;t!==null;){const n=t.c;if(n!==null)return n;t=t.p}return null}function Gs(e,t=1){var n=d(e),i=t===1?n++:n--;return D(e,n),i}function le(e,t=!1,n){Se={p:Se,c:null,e:null,m:!1,s:e,x:null,l:null},jn&&!t&&(Se.l={s:null,u:null,r1:[],r2:dt(!1)})}function ce(e){const t=Se;if(t!==null){const s=t.e;if(s!==null){var n=ye,i=De;t.e=null;try{for(var r=0;r<s.length;r++){var o=s[r];kt(o.effect),Kt(o.reaction),pt(o.fn)}}finally{kt(n),Kt(i)}}Se=t.p,t.m=!0}return{}}function Y(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(hn in e)Ho(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&hn in n&&Ho(n)}}}function Ho(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let i in e)try{Ho(e[i],t)}catch{}const n=is(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const i=Wa(n);for(let r in i){const o=i[r].get;if(o)try{o.call(e)}catch{}}}}}function qu(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const Gu=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Zu(e){return Gu.includes(e)}const Uu={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject"};function $u(e){return e=e.toLowerCase(),Uu[e]??e}const Ju=["touchstart","touchmove"];function ju(e){return Ju.includes(e)}function Qu(e,t){if(t){const n=document.body;e.autofocus=!0,Ur(()=>{document.activeElement===n&&e.focus()})}}let Zs=!1;function ed(){Zs||(Zs=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function ml(e){var t=De,n=ye;Kt(null),kt(null);try{return e()}finally{Kt(t),kt(n)}}function td(e,t,n,i=n){e.addEventListener(t,()=>ml(n));const r=e.__on_r;r?e.__on_r=()=>{r(),i(!0)}:e.__on_r=()=>i(!0),ed()}const yl=new Set,Do=new Set;function pl(e,t,n,i){function r(o){if(i.capture||fi.call(t,o),!o.cancelBubble)return ml(()=>n.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Ur(()=>{t.addEventListener(e,r,i)}):t.addEventListener(e,r,i),r}function Pe(e,t,n,i,r){var o={capture:i,passive:r},s=pl(e,t,n,o);(t===document.body||t===window||t===document)&&ol(()=>{t.removeEventListener(e,s,o)})}function rn(e){for(var t=0;t<e.length;t++)yl.add(e[t]);for(var n of Do)n(e)}function fi(e){var m;var t=this,n=t.ownerDocument,i=e.type,r=((m=e.composedPath)==null?void 0:m.call(e))||[],o=r[0]||e.target,s=0,a=e.__root;if(a){var c=r.indexOf(a);if(c!==-1&&(t===document||t===window)){e.__root=t;return}var l=r.indexOf(t);if(l===-1)return;c<=l&&(s=c)}if(o=r[s]||e.target,o!==t){tu(e,"currentTarget",{configurable:!0,get(){return o||n}});var u=De,f=ye;Kt(null),kt(null);try{for(var h,g=[];o!==null;){var y=o.assignedSlot||o.parentNode||o.host||null;try{var p=o["__"+i];if(p!==void 0&&!o.disabled)if(Ui(p)){var[N,...w]=p;N.apply(o,[e,...w])}else p.call(o,e)}catch(E){h?g.push(E):h=E}if(e.cancelBubble||y===t||y===null)break;o=y}if(h){for(let E of g)queueMicrotask(()=>{throw E});throw h}}finally{e.__root=t,delete e.currentTarget,Kt(u),kt(f)}}}function gs(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function pn(e,t){var n=ye;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function se(e,t){var n=(t&Ua)!==0,i=(t&Su)!==0,r,o=!e.startsWith("<!>");return()=>{r===void 0&&(r=gs(o?e:"<!>"+e),n||(r=Vt(r)));var s=i?document.importNode(r,!0):r.cloneNode(!0);if(n){var a=Vt(s),c=s.lastChild;pn(a,c)}else pn(s,s);return s}}function Je(e,t,n="svg"){var i=!e.startsWith("<!>"),r=(t&Ua)!==0,o=`<${n}>${i?e:"<!>"+e}</${n}>`,s;return()=>{if(!s){var a=gs(o),c=Vt(a);if(r)for(s=document.createDocumentFragment();Vt(c);)s.appendChild(Vt(c));else s=Vt(c)}var l=s.cloneNode(!0);if(r){var u=Vt(l),f=l.lastChild;pn(u,f)}else pn(l,l);return l}}function Ro(e=""){{var t=Qi(e+"");return pn(t,t),t}}function Te(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Qi();return e.append(t,n),pn(t,n),e}function W(e,t){e!==null&&e.before(t)}function en(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n==null?"":n+"")}function nd(e,t){return id(e,t)}const On=new Map;function id(e,{target:t,anchor:n,props:i={},events:r,context:o,intro:s=!0}){Cu();var a=new Set,c=f=>{for(var h=0;h<f.length;h++){var g=f[h];if(!a.has(g)){a.add(g);var y=ju(g);t.addEventListener(g,fi,{passive:y});var p=On.get(g);p===void 0?(document.addEventListener(g,fi,{passive:y}),On.set(g,1)):On.set(g,p+1)}}};c(ns(yl)),Do.add(c);var l=void 0,u=Au(()=>{var f=n??t.appendChild(Qi());return yn(()=>{if(o){le({});var h=Se;h.c=o}r&&(i.$$events=r),l=e(f,i)||{},o&&ce()}),()=>{var y;for(var h of a){t.removeEventListener(h,fi);var g=On.get(h);--g===0?(document.removeEventListener(h,fi),On.delete(h)):On.set(h,g)}Do.delete(c),f!==n&&((y=f.parentNode)==null||y.removeChild(f))}});return rd.set(l,u),l}let rd=new WeakMap;function ze(e,t,n=!1){var i=e,r=null,o=null,s=gt,a=n?ji:0,c=!1;const l=(f,h=!0)=>{c=!0,u(h,f)},u=(f,h)=>{s!==(s=f)&&(s?(r?_i(r):h&&(r=yn(()=>h(i))),o&&Bn(o,()=>{o=null})):(o?_i(o):h&&(o=yn(()=>h(i))),r&&Bn(r,()=>{r=null})))};ti(()=>{c=!1,t(l),c||u(null,null)},a)}function yi(e,t){return t}function od(e,t,n,i){for(var r=[],o=t.length,s=0;s<o;s++)ds(t[s].e,r,!0);var a=o>0&&r.length===0&&n!==null;if(a){var c=n.parentNode;Nu(c),c.append(n),i.clear(),an(e,t[0].prev,t[o-1].next)}ul(r,()=>{for(var l=0;l<o;l++){var u=t[l];a||(i.delete(u.k),an(e,u.prev,u.next)),Bt(u.e,!a)}})}function zt(e,t,n,i,r,o=null){var s=e,a={flags:t,items:new Map,first:null},c=(t&Ga)!==0;if(c){var l=e;s=l.appendChild(Qi())}var u=null,f=!1;ti(()=>{var h=n(),g=Ui(h)?h:h==null?[]:ns(h),y=g.length;if(!(f&&y===0)){f=y===0;{var p=De;sd(g,a,s,r,t,(p.f&Xt)!==0,i)}o!==null&&(y===0?u?_i(u):u=yn(()=>o(s)):u!==null&&Bn(u,()=>{u=null})),n()}})}function sd(e,t,n,i,r,o,s,a){var T,b,M,I;var c=(r&_u)!==0,l=(r&(as|ls))!==0,u=e.length,f=t.items,h=t.first,g=h,y,p=null,N,w=[],m=[],E,k,_,S;if(c)for(S=0;S<u;S+=1)E=e[S],k=s(E,S),_=f.get(k),_!==void 0&&((T=_.a)==null||T.measure(),(N??(N=new Set)).add(_));for(S=0;S<u;S+=1){if(E=e[S],k=s(E,S),_=f.get(k),_===void 0){var C=g?g.e.nodes_start:n;p=ld(C,t,p,p===null?t.first:p.next,E,k,S,i,r),f.set(k,p),w=[],m=[],g=p.next;continue}if(l&&ad(_,E,S,r),_.e.f&Xt&&(_i(_.e),c&&((b=_.a)==null||b.unfix(),(N??(N=new Set)).delete(_))),_!==g){if(y!==void 0&&y.has(_)){if(w.length<m.length){var z=m[0],P;p=z.prev;var O=w[0],L=w[w.length-1];for(P=0;P<w.length;P+=1)Us(w[P],z,n);for(P=0;P<m.length;P+=1)y.delete(m[P]);an(t,O.prev,L.next),an(t,p,O),an(t,L,z),g=z,p=L,S-=1,w=[],m=[]}else y.delete(_),Us(_,g,n),an(t,_.prev,_.next),an(t,_,p===null?t.first:p.next),an(t,p,_),p=_;continue}for(w=[],m=[];g!==null&&g.k!==k;)(o||!(g.e.f&Xt))&&(y??(y=new Set)).add(g),m.push(g),g=g.next;if(g===null)continue;_=g}w.push(_),p=_,g=_.next}if(g!==null||y!==void 0){for(var V=y===void 0?[]:ns(y);g!==null;)(o||!(g.e.f&Xt))&&V.push(g),g=g.next;var H=V.length;if(H>0){var x=r&Ga&&u===0?n:null;if(c){for(S=0;S<H;S+=1)(M=V[S].a)==null||M.measure();for(S=0;S<H;S+=1)(I=V[S].a)==null||I.fix()}od(t,V,x,f)}}c&&Ur(()=>{var A;if(N!==void 0)for(_ of N)(A=_.a)==null||A.apply()}),ye.first=t.first&&t.first.e,ye.last=p&&p.e}function ad(e,t,n,i){i&as&&zo(e.v,t),i&ls?zo(e.i,n):e.i=n}function ld(e,t,n,i,r,o,s,a,c,l){var u=(c&as)!==0,f=(c&wu)===0,h=u?f?Gr(r):dt(r):r,g=c&ls?dt(s):s,y={i:g,v:h,k:o,a:null,e:null,prev:n,next:i};try{return y.e=yn(()=>a(e,h,g),cs),y.e.prev=n&&n.e,y.e.next=i&&i.e,n===null?t.first=y:(n.next=y,n.e.next=y.e),i!==null&&(i.prev=y,i.e.prev=y.e),y}finally{}}function Us(e,t,n){for(var i=e.next?e.next.e.nodes_start:n,r=t?t.e.nodes_start:n,o=e.e.nodes_start;o!==i;){var s=Zr(o);r.before(o),o=s}}function an(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function cd(e,t,n,i,r){var o=e,s="",a;ti(()=>{s!==(s=t()??"")&&(a!==void 0&&(Bt(a),a=void 0),s!==""&&(a=yn(()=>{var c=s+"",l=gs(c);pn(Vt(l),l.lastChild),o.before(l)})))})}function Re(e,t,n,i,r){var a;var o=(a=t.$$slots)==null?void 0:a[n],s=!1;o===!0&&(o=t[n==="default"?"children":n],s=!0),o===void 0||o(e,s?()=>i:i)}function ud(e){const t={};e.children&&(t.default=!0);for(const n in e.$$slots)t[n]=!0;return t}function _l(e,t,n){var i=e,r,o;ti(()=>{r!==(r=t())&&(o&&(Bn(o),o=null),r&&(o=yn(()=>n(i,r))))},ji)}function dd(e,t,n,i,r,o){var s,a,c=null,l=e,u;ti(()=>{const f=t()||null;var h=$a;f!==s&&(u&&(f===null?Bn(u,()=>{u=null,a=null}):f===a?_i(u):Bt(u)),f&&f!==a&&(u=yn(()=>{if(c=document.createElementNS(h,f),pn(c,c),i){var g=c.appendChild(Qi());i(c,g)}ye.nodes_end=c,l.before(c)})),s=f,s&&(a=s))},ji)}function ut(e,t,n){pt(()=>{var i=It(()=>t(e,n==null?void 0:n())||{});if(n&&(i!=null&&i.update)){var r=!1,o={};ei(()=>{var s=n();Y(s),r&&os(o,s)&&(o=s,i.update(s))}),r=!0}if(i!=null&&i.destroy)return()=>i.destroy()})}function wl(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=wl(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function fd(){for(var e,t,n=0,i="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=wl(e))&&(i&&(i+=" "),i+=t);return i}function Ht(e){return typeof e=="object"?fd(e):e??""}function hd(e,t){var n=e.__attributes??(e.__attributes={});n.checked!==(n.checked=t??void 0)&&(e.checked=t)}function gd(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function Q(e,t,n,i){var r=e.__attributes??(e.__attributes={});r[t]!==(r[t]=n)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[lu]=n),n==null?e.removeAttribute(t):typeof n!="string"&&vs(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function xl(e,t,n){var i=De,r=ye;Kt(null),kt(null);try{(Lo.has(e.nodeName)||customElements.get(e.tagName.toLowerCase())?vs(e).includes(t):n&&typeof n=="object")?e[t]=n:Q(e,t,n==null?n:String(n))}finally{Kt(i),kt(r)}}function xi(e,t,n,i,r=!1,o=!1,s=!1){var a=t||{},c=e.tagName==="OPTION";for(var l in t)l in n||(n[l]=null);n.class&&(n.class=Ht(n.class)),i!==void 0&&(n.class=n.class?n.class+" "+i:i);var u=vs(e),f=e.__attributes??(e.__attributes={});for(const m in n){let E=n[m];if(c&&m==="value"&&E==null){e.value=e.__value="",a[m]=E;continue}var h=a[m];if(E!==h){a[m]=E;var g=m[0]+m[1];if(g!=="$$"){if(g==="on"){const k={},_="$$"+m;let S=m.slice(2);var y=Zu(S);if(qu(S)&&(S=S.slice(0,-7),k.capture=!0),!y&&h){if(E!=null)continue;e.removeEventListener(S,a[_],k),a[_]=null}if(E!=null)if(y)e[`__${S}`]=E,rn([S]);else{let C=function(z){a[m].call(this,z)};var w=C;a[_]=pl(S,e,C,k)}else y&&(e[`__${S}`]=void 0)}else if(m==="style"&&E!=null)e.style.cssText=E+"";else if(m==="autofocus")Qu(e,!!E);else if(m==="__value"||m==="value"&&E!=null)e.value=e[m]=e.__value=E;else if(m==="selected"&&c)gd(e,E);else{var p=m;r||(p=$u(p));var N=p==="defaultValue"||p==="defaultChecked";if(E==null&&!o&&!N)if(f[m]=null,p==="value"||p==="checked"){let k=e;if(p==="value"){let _=k.defaultValue;k.removeAttribute(p),k.defaultValue=_}else{let _=k.defaultChecked;k.removeAttribute(p),k.defaultChecked=_}}else e.removeAttribute(m);else N||u.includes(p)&&(o||typeof E!="string")?e[p]=E:typeof E!="function"&&Q(e,p,E)}m==="style"&&"__styles"in e&&(e.__styles={})}}}return a}var Lo=new Map;function vs(e){var t=Lo.get(e.nodeName);if(t)return t;Lo.set(e.nodeName,t=[]);for(var n,i=e,r=Element.prototype;r!==i;){n=Wa(i);for(var o in n)n[o].set&&t.push(o);i=is(i)}return t}function In(e,t,n){var i=e.__className,r=bl(t,n);(i!==r||cs)&&(r===""?e.removeAttribute("class"):e.setAttribute("class",r),e.__className=r)}function ms(e,t,n){var i=e.__className,r=bl(t,n);(i!==r||cs)&&(t==null&&!n?e.removeAttribute("class"):e.className=r,e.__className=r)}function bl(e,t){return(e??"")+(t?" "+t:"")}function Ye(e,t,n){if(n){if(e.classList.contains(t))return;e.classList.add(t)}else{if(!e.classList.contains(t))return;e.classList.remove(t)}}function We(e,t,n,i){var r=e.__styles??(e.__styles={});r[t]!==n&&(r[t]=n,n==null?e.style.removeProperty(t):e.style.setProperty(t,n,""))}function El(e,t,n=t){var i=Jr();td(e,"input",r=>{var o=r?e.defaultValue:e.value;if(o=vo(e)?mo(o):o,n(o),i&&o!==(o=t())){var s=e.selectionStart,a=e.selectionEnd;e.value=o??"",a!==null&&(e.selectionStart=s,e.selectionEnd=Math.min(a,e.value.length))}}),It(t)==null&&e.value&&n(vo(e)?mo(e.value):e.value),ei(()=>{var r=t();vo(e)&&r===mo(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function vo(e){var t=e.type;return t==="number"||t==="range"}function mo(e){return e===""?null:+e}var un,Wn,zi,Wr,kl;const Br=class Br{constructor(t){Ve(this,Wr);Ve(this,un,new WeakMap);Ve(this,Wn);Ve(this,zi);go(this,zi,t)}observe(t,n){var i=de(this,un).get(t)||new Set;return i.add(n),de(this,un).set(t,i),Nt(this,Wr,kl).call(this).observe(t,de(this,zi)),()=>{var r=de(this,un).get(t);r.delete(n),r.size===0&&(de(this,un).delete(t),de(this,Wn).unobserve(t))}}};un=new WeakMap,Wn=new WeakMap,zi=new WeakMap,Wr=new WeakSet,kl=function(){return de(this,Wn)??go(this,Wn,new ResizeObserver(t=>{for(var n of t){Br.entries.set(n.target,n);for(var i of de(this,un).get(n.target)||[])i(n)}}))},Bs(Br,"entries",new WeakMap);let Vo=Br;var vd=new Vo({box:"border-box"});function Pr(e,t,n){var i=vd.observe(e,()=>n(e[t]));pt(()=>(It(()=>n(e[t])),i))}function $s(e,t){return e===t||(e==null?void 0:e[hn])===t}function tr(e={},t,n,i){return pt(()=>{var r,o;return ei(()=>{r=o,o=[],It(()=>{e!==n(...o)&&(t(e,...o),r&&$s(n(...r),e)&&t(null,...r))})}),()=>{Ur(()=>{o&&$s(n(...o),e)&&t(null,...o)})}}),e}function ge(e=!1){const t=Se,n=t.l.u;if(!n)return;let i=()=>Y(t.s);if(e){let r=0,o={};const s=Qt(()=>{let a=!1;const c=t.s;for(const l in c)c[l]!==o[l]&&(o[l]=c[l],a=!0);return a&&r++,r});i=()=>d(s)}n.b.length&&zu(()=>{Js(t,i),kr(n.b)}),Ao(()=>{const r=It(()=>n.m.map(ru));return()=>{for(const o of r)typeof o=="function"&&o()}}),n.a.length&&Ao(()=>{Js(t,i),kr(n.a)})}function Js(e,t){if(e.l.s)for(const n of e.l.s)d(n);t()}function Sl(e){var t=dt(0);return function(){return arguments.length===1?(D(t,d(t)+1),arguments[0]):(d(t),e())}}function Ee(e,t){var o;var n=(o=e.$$events)==null?void 0:o[t.type],i=Ui(n)?n.slice():n==null?[]:[n];for(var r of i)r.call(this,t)}function ys(e,t,n){if(e==null)return t(void 0),n&&n(void 0),$t;const i=It(()=>e.subscribe(t,n));return i.unsubscribe?()=>i.unsubscribe():i}let ur=!1;function q(e,t,n){const i=n[t]??(n[t]={store:null,source:Gr(void 0),unsubscribe:$t});if(i.store!==e)if(i.unsubscribe(),i.store=e??null,e==null)i.source.v=void 0,i.unsubscribe=$t;else{var r=!0;i.unsubscribe=ys(e,o=>{r?i.source.v=o:D(i.source,o)}),r=!1}return d(i.source)}function md(e,t,n){let i=n[t];return i&&i.store!==e&&(i.unsubscribe(),i.unsubscribe=$t),e}function bi(e,t){return e.set(t),t}function Ue(){const e={};return ol(()=>{for(var t in e)e[t].unsubscribe()}),e}function yd(e){var t=ur;try{return ur=!1,[e(),ur]}finally{ur=t}}const pd={get(e,t){if(!e.exclude.includes(t))return d(e.version),t in e.special?e.special[t]():e.props[t]},set(e,t,n){return t in e.special||(e.special[t]=v({get[t](){return e.props[t]}},t,Za)),e.special[t](n),Gs(e.version),!0},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},deleteProperty(e,t){return e.exclude.includes(t)||(e.exclude.push(t),Gs(e.version)),!0},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function _e(e,t){return new Proxy({props:e,exclude:t,special:{},version:dt(0)},pd)}const _d={get(e,t){let n=e.props.length;for(;n--;){let i=e.props[n];if(li(i)&&(i=i()),typeof i=="object"&&i!==null&&t in i)return i[t]}},set(e,t,n){let i=e.props.length;for(;i--;){let r=e.props[i];li(r)&&(r=r());const o=fn(r,t);if(o&&o.set)return o.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let i=e.props[n];if(li(i)&&(i=i()),typeof i=="object"&&i!==null&&t in i){const r=fn(i,t);return r&&!r.configurable&&(r.configurable=!0),r}}},has(e,t){if(t===hn||t===Fa)return!1;for(let n of e.props)if(li(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props){li(n)&&(n=n());for(const i in n)t.includes(i)||t.push(i)}return t}};function Qe(...e){return new Proxy({props:e},_d)}function js(e){for(var t=ye,n=ye;t!==null&&!(t.f&(Tt|Ji));)t=t.parent;try{return kt(t),e()}finally{kt(n)}}function v(e,t,n,i){var C;var r=(n&xu)!==0,o=!jn||(n&bu)!==0,s=(n&Eu)!==0,a=(n&ku)!==0,c=!1,l;s?[l,c]=yd(()=>e[t]):l=e[t];var u=hn in e||Fa in e,f=((C=fn(e,t))==null?void 0:C.set)??(u&&s&&t in e?z=>e[t]=z:void 0),h=i,g=!0,y=!1,p=()=>(y=!0,g&&(g=!1,a?h=It(i):h=i),h);l===void 0&&i!==void 0&&(f&&o&&hu(),l=p(),f&&f(l));var N;if(o)N=()=>{var z=e[t];return z===void 0?p():(g=!0,y=!1,z)};else{var w=js(()=>(r?Qt:oe)(()=>e[t]));w.f|=su,N=()=>{var z=d(w);return z!==void 0&&(h=void 0),z===void 0?h:z}}if(!(n&Za))return N;if(f){var m=e.$$legacy;return function(z,P){return arguments.length>0?((!o||!P||m||c)&&f(P?N():z),z):N()}}var E=!1,k=!1,_=Gr(l),S=js(()=>Qt(()=>{var z=N(),P=d(_);return E?(E=!1,k=!0,P):(k=!1,_.v=z)}));return r||(S.equals=ss),function(z,P){if(arguments.length>0){const O=P?d(S):o&&s?Xe(z):z;return S.equals(O)||(E=!0,D(_,O),y&&h!==void 0&&(h=O),It(()=>d(S))),z}return d(S)}}function ii(e){Se===null&&$r(),jn&&Se.l!==null?xd(Se).m.push(e):Ao(()=>{const t=It(e);if(typeof t=="function")return t})}function Cl(e){Se===null&&$r(),ii(()=>()=>It(e))}function wd(e,t,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:i})}function eo(){const e=Se;return e===null&&$r(),(t,n,i)=>{var o;const r=(o=e.s.$$events)==null?void 0:o[t];if(r){const s=Ui(r)?r.slice():[r],a=wd(t,n,i);for(const c of s)c.call(e.x,a);return!a.defaultPrevented}return!0}}function xd(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const bd="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(bd);pu();const Hn=[];function Et(e,t){return{subscribe:ie(e,t).subscribe}}function ie(e,t=$t){let n=null;const i=new Set;function r(a){if(os(e,a)&&(e=a,n)){const c=!Hn.length;for(const l of i)l[1](),Hn.push(l,e);if(c){for(let l=0;l<Hn.length;l+=2)Hn[l][0](Hn[l+1]);Hn.length=0}}}function o(a){r(a(e))}function s(a,c=$t){const l=[a,c];return i.add(l),i.size===1&&(n=t(r,o)||$t),a(e),()=>{i.delete(l),i.size===0&&n&&(n(),n=null)}}return{set:r,update:o,subscribe:s}}function Sn(e,t,n){const i=!Array.isArray(e),r=i?[e]:e;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=t.length<2;return Et(n,(s,a)=>{let c=!1;const l=[];let u=0,f=$t;const h=()=>{if(u)return;f();const y=t(i?l[0]:l,s,a);o?s(y):f=typeof y=="function"?y:$t},g=r.map((y,p)=>ys(y,N=>{l[p]=N,u&=~(1<<p),c&&h()},()=>{u|=1<<p}));return c=!0,h(),function(){kr(g),f(),c=!1}})}function R(e){let t;return ys(e,n=>t=n)(),t}function at(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,i;n<e.length;n++)(i=at(e[n]))!==""&&(t+=(t&&" ")+i);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Ed={value:()=>{}};function to(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new wr(n)}function wr(e){this._=e}function kd(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}wr.prototype=to.prototype={constructor:wr,on:function(e,t){var n=this._,i=kd(e+"",n),r,o=-1,s=i.length;if(arguments.length<2){for(;++o<s;)if((r=(e=i[o]).type)&&(r=Sd(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(r=(e=i[o]).type)n[r]=Qs(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Qs(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new wr(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)}};function Sd(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function Qs(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=Ed,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Xo="http://www.w3.org/1999/xhtml";const ea={svg:"http://www.w3.org/2000/svg",xhtml:Xo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function no(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ea.hasOwnProperty(t)?{space:ea[t],local:e}:e}function Cd(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Xo&&t.documentElement.namespaceURI===Xo?t.createElement(e):t.createElementNS(n,e)}}function Nd(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Nl(e){var t=no(e);return(t.local?Nd:Cd)(t)}function Md(){}function ps(e){return e==null?Md:function(){return this.querySelector(e)}}function Pd(e){typeof e!="function"&&(e=ps(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],s=o.length,a=i[r]=new Array(s),c,l,u=0;u<s;++u)(c=o[u])&&(l=e.call(c,c.__data__,u,o))&&("__data__"in c&&(l.__data__=c.__data__),a[u]=l);return new wt(i,this._parents)}function zd(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Ad(){return[]}function Ml(e){return e==null?Ad:function(){return this.querySelectorAll(e)}}function Id(e){return function(){return zd(e.apply(this,arguments))}}function Td(e){typeof e=="function"?e=Id(e):e=Ml(e);for(var t=this._groups,n=t.length,i=[],r=[],o=0;o<n;++o)for(var s=t[o],a=s.length,c,l=0;l<a;++l)(c=s[l])&&(i.push(e.call(c,c.__data__,l,s)),r.push(c));return new wt(i,r)}function Pl(e){return function(){return this.matches(e)}}function zl(e){return function(t){return t.matches(e)}}var Od=Array.prototype.find;function Hd(e){return function(){return Od.call(this.children,e)}}function Dd(){return this.firstElementChild}function Rd(e){return this.select(e==null?Dd:Hd(typeof e=="function"?e:zl(e)))}var Ld=Array.prototype.filter;function Vd(){return Array.from(this.children)}function Xd(e){return function(){return Ld.call(this.children,e)}}function Yd(e){return this.selectAll(e==null?Vd:Xd(typeof e=="function"?e:zl(e)))}function Wd(e){typeof e!="function"&&(e=Pl(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],s=o.length,a=i[r]=[],c,l=0;l<s;++l)(c=o[l])&&e.call(c,c.__data__,l,o)&&a.push(c);return new wt(i,this._parents)}function Al(e){return new Array(e.length)}function Bd(){return new wt(this._enter||this._groups.map(Al),this._parents)}function zr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}zr.prototype={constructor:zr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Kd(e){return function(){return e}}function Fd(e,t,n,i,r,o){for(var s=0,a,c=t.length,l=o.length;s<l;++s)(a=t[s])?(a.__data__=o[s],i[s]=a):n[s]=new zr(e,o[s]);for(;s<c;++s)(a=t[s])&&(r[s]=a)}function qd(e,t,n,i,r,o,s){var a,c,l=new Map,u=t.length,f=o.length,h=new Array(u),g;for(a=0;a<u;++a)(c=t[a])&&(h[a]=g=s.call(c,c.__data__,a,t)+"",l.has(g)?r[a]=c:l.set(g,c));for(a=0;a<f;++a)g=s.call(e,o[a],a,o)+"",(c=l.get(g))?(i[a]=c,c.__data__=o[a],l.delete(g)):n[a]=new zr(e,o[a]);for(a=0;a<u;++a)(c=t[a])&&l.get(h[a])===c&&(r[a]=c)}function Gd(e){return e.__data__}function Zd(e,t){if(!arguments.length)return Array.from(this,Gd);var n=t?qd:Fd,i=this._parents,r=this._groups;typeof e!="function"&&(e=Kd(e));for(var o=r.length,s=new Array(o),a=new Array(o),c=new Array(o),l=0;l<o;++l){var u=i[l],f=r[l],h=f.length,g=Ud(e.call(u,u&&u.__data__,l,i)),y=g.length,p=a[l]=new Array(y),N=s[l]=new Array(y),w=c[l]=new Array(h);n(u,f,p,N,w,g,t);for(var m=0,E=0,k,_;m<y;++m)if(k=p[m]){for(m>=E&&(E=m+1);!(_=N[E])&&++E<y;);k._next=_||null}}return s=new wt(s,i),s._enter=a,s._exit=c,s}function Ud(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function $d(){return new wt(this._exit||this._groups.map(Al),this._parents)}function Jd(e,t,n){var i=this.enter(),r=this,o=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function jd(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,o=i.length,s=Math.min(r,o),a=new Array(r),c=0;c<s;++c)for(var l=n[c],u=i[c],f=l.length,h=a[c]=new Array(f),g,y=0;y<f;++y)(g=l[y]||u[y])&&(h[y]=g);for(;c<r;++c)a[c]=n[c];return new wt(a,this._parents)}function Qd(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,o=i[r],s;--r>=0;)(s=i[r])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function ef(e){e||(e=tf);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var s=n[o],a=s.length,c=r[o]=new Array(a),l,u=0;u<a;++u)(l=s[u])&&(c[u]=l);c.sort(t)}return new wt(r,this._parents).order()}function tf(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function nf(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function rf(){return Array.from(this)}function of(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null}function sf(){let e=0;for(const t of this)++e;return e}function af(){return!this.node()}function lf(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],o=0,s=r.length,a;o<s;++o)(a=r[o])&&e.call(a,a.__data__,o,r);return this}function cf(e){return function(){this.removeAttribute(e)}}function uf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function df(e,t){return function(){this.setAttribute(e,t)}}function ff(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function hf(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function gf(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function vf(e,t){var n=no(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?uf:cf:typeof t=="function"?n.local?gf:hf:n.local?ff:df)(n,t))}function Il(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function mf(e){return function(){this.style.removeProperty(e)}}function yf(e,t,n){return function(){this.style.setProperty(e,t,n)}}function pf(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function _f(e,t,n){return arguments.length>1?this.each((t==null?mf:typeof t=="function"?pf:yf)(e,t,n??"")):Fn(this.node(),e)}function Fn(e,t){return e.style.getPropertyValue(t)||Il(e).getComputedStyle(e,null).getPropertyValue(t)}function wf(e){return function(){delete this[e]}}function xf(e,t){return function(){this[e]=t}}function bf(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ef(e,t){return arguments.length>1?this.each((t==null?wf:typeof t=="function"?bf:xf)(e,t)):this.node()[e]}function Tl(e){return e.trim().split(/^|\s+/)}function _s(e){return e.classList||new Ol(e)}function Ol(e){this._node=e,this._names=Tl(e.getAttribute("class")||"")}Ol.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Hl(e,t){for(var n=_s(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function Dl(e,t){for(var n=_s(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function kf(e){return function(){Hl(this,e)}}function Sf(e){return function(){Dl(this,e)}}function Cf(e,t){return function(){(t.apply(this,arguments)?Hl:Dl)(this,e)}}function Nf(e,t){var n=Tl(e+"");if(arguments.length<2){for(var i=_s(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Cf:t?kf:Sf)(n,t))}function Mf(){this.textContent=""}function Pf(e){return function(){this.textContent=e}}function zf(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Af(e){return arguments.length?this.each(e==null?Mf:(typeof e=="function"?zf:Pf)(e)):this.node().textContent}function If(){this.innerHTML=""}function Tf(e){return function(){this.innerHTML=e}}function Of(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Hf(e){return arguments.length?this.each(e==null?If:(typeof e=="function"?Of:Tf)(e)):this.node().innerHTML}function Df(){this.nextSibling&&this.parentNode.appendChild(this)}function Rf(){return this.each(Df)}function Lf(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Vf(){return this.each(Lf)}function Xf(e){var t=typeof e=="function"?e:Nl(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Yf(){return null}function Wf(e,t){var n=typeof e=="function"?e:Nl(e),i=t==null?Yf:typeof t=="function"?t:ps(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Bf(){var e=this.parentNode;e&&e.removeChild(this)}function Kf(){return this.each(Bf)}function Ff(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function qf(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Gf(e){return this.select(e?qf:Ff)}function Zf(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Uf(e){return function(t){e.call(this,t,this.__data__)}}function $f(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function Jf(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,r=t.length,o;n<r;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++i]=o;++i?t.length=i:delete this.__on}}}function jf(e,t,n){return function(){var i=this.__on,r,o=Uf(t);if(i){for(var s=0,a=i.length;s<a;++s)if((r=i[s]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=t;return}}this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Qf(e,t,n){var i=$f(e+""),r,o=i.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,l=a.length,u;c<l;++c)for(r=0,u=a[c];r<o;++r)if((s=i[r]).type===u.type&&s.name===u.name)return u.value}return}for(a=t?jf:Jf,r=0;r<o;++r)this.each(a(i[r],t,n));return this}function Rl(e,t,n){var i=Il(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function eh(e,t){return function(){return Rl(this,e,t)}}function th(e,t){return function(){return Rl(this,e,t.apply(this,arguments))}}function nh(e,t){return this.each((typeof t=="function"?th:eh)(e,t))}function*ih(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length,s;r<o;++r)(s=i[r])&&(yield s)}var Ll=[null];function wt(e,t){this._groups=e,this._parents=t}function nr(){return new wt([[document.documentElement]],Ll)}function rh(){return this}wt.prototype=nr.prototype={constructor:wt,select:Pd,selectAll:Td,selectChild:Rd,selectChildren:Yd,filter:Wd,data:Zd,enter:Bd,exit:$d,join:Jd,merge:jd,selection:rh,order:Qd,sort:ef,call:nf,nodes:rf,node:of,size:sf,empty:af,each:lf,attr:vf,style:_f,property:Ef,classed:Nf,text:Af,html:Hf,raise:Rf,lower:Vf,append:Xf,insert:Wf,remove:Kf,clone:Gf,datum:Zf,on:Qf,dispatch:nh,[Symbol.iterator]:ih};function _t(e){return typeof e=="string"?new wt([[document.querySelector(e)]],[document.documentElement]):new wt([[e]],Ll)}function oh(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Mt(e,t){if(e=oh(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const sh={passive:!1},Ei={capture:!0,passive:!1};function yo(e){e.stopImmediatePropagation()}function Ln(e){e.preventDefault(),e.stopImmediatePropagation()}function Vl(e){var t=e.document.documentElement,n=_t(e).on("dragstart.drag",Ln,Ei);"onselectstart"in t?n.on("selectstart.drag",Ln,Ei):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Xl(e,t){var n=e.document.documentElement,i=_t(e).on("dragstart.drag",null);t&&(i.on("click.drag",Ln,Ei),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const dr=e=>()=>e;function Yo(e,{sourceEvent:t,subject:n,target:i,identifier:r,active:o,x:s,y:a,dx:c,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}Yo.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function ah(e){return!e.ctrlKey&&!e.button}function lh(){return this.parentNode}function ch(e,t){return t??{x:e.x,y:e.y}}function uh(){return navigator.maxTouchPoints||"ontouchstart"in this}function Yl(){var e=ah,t=lh,n=ch,i=uh,r={},o=to("start","drag","end"),s=0,a,c,l,u,f=0;function h(k){k.on("mousedown.drag",g).filter(i).on("touchstart.drag",N).on("touchmove.drag",w,sh).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(k,_){if(!(u||!e.call(this,k,_))){var S=E(this,t.call(this,k,_),k,_,"mouse");S&&(_t(k.view).on("mousemove.drag",y,Ei).on("mouseup.drag",p,Ei),Vl(k.view),yo(k),l=!1,a=k.clientX,c=k.clientY,S("start",k))}}function y(k){if(Ln(k),!l){var _=k.clientX-a,S=k.clientY-c;l=_*_+S*S>f}r.mouse("drag",k)}function p(k){_t(k.view).on("mousemove.drag mouseup.drag",null),Xl(k.view,l),Ln(k),r.mouse("end",k)}function N(k,_){if(e.call(this,k,_)){var S=k.changedTouches,C=t.call(this,k,_),z=S.length,P,O;for(P=0;P<z;++P)(O=E(this,C,k,_,S[P].identifier,S[P]))&&(yo(k),O("start",k,S[P]))}}function w(k){var _=k.changedTouches,S=_.length,C,z;for(C=0;C<S;++C)(z=r[_[C].identifier])&&(Ln(k),z("drag",k,_[C]))}function m(k){var _=k.changedTouches,S=_.length,C,z;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),C=0;C<S;++C)(z=r[_[C].identifier])&&(yo(k),z("end",k,_[C]))}function E(k,_,S,C,z,P){var O=o.copy(),L=Mt(P||S,_),V,H,x;if((x=n.call(k,new Yo("beforestart",{sourceEvent:S,target:h,identifier:z,active:s,x:L[0],y:L[1],dx:0,dy:0,dispatch:O}),C))!=null)return V=x.x-L[0]||0,H=x.y-L[1]||0,function T(b,M,I){var A=L,X;switch(b){case"start":r[z]=T,X=s++;break;case"end":delete r[z],--s;case"drag":L=Mt(I||M,_),X=s;break}O.call(b,k,new Yo(b,{sourceEvent:M,subject:x,target:h,identifier:z,active:X,x:L[0]+V,y:L[1]+H,dx:L[0]-A[0],dy:L[1]-A[1],dispatch:O}),C)}}return h.filter=function(k){return arguments.length?(e=typeof k=="function"?k:dr(!!k),h):e},h.container=function(k){return arguments.length?(t=typeof k=="function"?k:dr(k),h):t},h.subject=function(k){return arguments.length?(n=typeof k=="function"?k:dr(k),h):n},h.touchable=function(k){return arguments.length?(i=typeof k=="function"?k:dr(!!k),h):i},h.on=function(){var k=o.on.apply(o,arguments);return k===o?h:k},h.clickDistance=function(k){return arguments.length?(f=(k=+k)*k,h):Math.sqrt(f)},h}function ws(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Wl(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function ir(){}var ki=.7,Ar=1/ki,Vn="\\s*([+-]?\\d+)\\s*",Si="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dh=/^#([0-9a-f]{3,8})$/,fh=new RegExp(`^rgb\\(${Vn},${Vn},${Vn}\\)$`),hh=new RegExp(`^rgb\\(${Wt},${Wt},${Wt}\\)$`),gh=new RegExp(`^rgba\\(${Vn},${Vn},${Vn},${Si}\\)$`),vh=new RegExp(`^rgba\\(${Wt},${Wt},${Wt},${Si}\\)$`),mh=new RegExp(`^hsl\\(${Si},${Wt},${Wt}\\)$`),yh=new RegExp(`^hsla\\(${Si},${Wt},${Wt},${Si}\\)$`),ta={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ws(ir,Ci,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:na,formatHex:na,formatHex8:ph,formatHsl:_h,formatRgb:ia,toString:ia});function na(){return this.rgb().formatHex()}function ph(){return this.rgb().formatHex8()}function _h(){return Bl(this).formatHsl()}function ia(){return this.rgb().formatRgb()}function Ci(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=dh.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ra(t):n===3?new vt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?fr(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?fr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=fh.exec(e))?new vt(t[1],t[2],t[3],1):(t=hh.exec(e))?new vt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=gh.exec(e))?fr(t[1],t[2],t[3],t[4]):(t=vh.exec(e))?fr(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=mh.exec(e))?aa(t[1],t[2]/100,t[3]/100,1):(t=yh.exec(e))?aa(t[1],t[2]/100,t[3]/100,t[4]):ta.hasOwnProperty(e)?ra(ta[e]):e==="transparent"?new vt(NaN,NaN,NaN,0):null}function ra(e){return new vt(e>>16&255,e>>8&255,e&255,1)}function fr(e,t,n,i){return i<=0&&(e=t=n=NaN),new vt(e,t,n,i)}function wh(e){return e instanceof ir||(e=Ci(e)),e?(e=e.rgb(),new vt(e.r,e.g,e.b,e.opacity)):new vt}function Wo(e,t,n,i){return arguments.length===1?wh(e):new vt(e,t,n,i??1)}function vt(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}ws(vt,Wo,Wl(ir,{brighter(e){return e=e==null?Ar:Math.pow(Ar,e),new vt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ki:Math.pow(ki,e),new vt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new vt(Cn(this.r),Cn(this.g),Cn(this.b),Ir(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:oa,formatHex:oa,formatHex8:xh,formatRgb:sa,toString:sa}));function oa(){return`#${En(this.r)}${En(this.g)}${En(this.b)}`}function xh(){return`#${En(this.r)}${En(this.g)}${En(this.b)}${En((isNaN(this.opacity)?1:this.opacity)*255)}`}function sa(){const e=Ir(this.opacity);return`${e===1?"rgb(":"rgba("}${Cn(this.r)}, ${Cn(this.g)}, ${Cn(this.b)}${e===1?")":`, ${e})`}`}function Ir(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Cn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function En(e){return e=Cn(e),(e<16?"0":"")+e.toString(16)}function aa(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Pt(e,t,n,i)}function Bl(e){if(e instanceof Pt)return new Pt(e.h,e.s,e.l,e.opacity);if(e instanceof ir||(e=Ci(e)),!e)return new Pt;if(e instanceof Pt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),o=Math.max(t,n,i),s=NaN,a=o-r,c=(o+r)/2;return a?(t===o?s=(n-i)/a+(n<i)*6:n===o?s=(i-t)/a+2:s=(t-n)/a+4,a/=c<.5?o+r:2-o-r,s*=60):a=c>0&&c<1?0:s,new Pt(s,a,c,e.opacity)}function bh(e,t,n,i){return arguments.length===1?Bl(e):new Pt(e,t,n,i??1)}function Pt(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}ws(Pt,bh,Wl(ir,{brighter(e){return e=e==null?Ar:Math.pow(Ar,e),new Pt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ki:Math.pow(ki,e),new Pt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new vt(po(e>=240?e-240:e+120,r,i),po(e,r,i),po(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new Pt(la(this.h),hr(this.s),hr(this.l),Ir(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ir(this.opacity);return`${e===1?"hsl(":"hsla("}${la(this.h)}, ${hr(this.s)*100}%, ${hr(this.l)*100}%${e===1?")":`, ${e})`}`}}));function la(e){return e=(e||0)%360,e<0?e+360:e}function hr(e){return Math.max(0,Math.min(1,e||0))}function po(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Kl=e=>()=>e;function Eh(e,t){return function(n){return e+n*t}}function kh(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function Sh(e){return(e=+e)==1?Fl:function(t,n){return n-t?kh(t,n,e):Kl(isNaN(t)?n:t)}}function Fl(e,t){var n=t-e;return n?Eh(e,n):Kl(isNaN(e)?t:e)}const ca=function e(t){var n=Sh(t);function i(r,o){var s=n((r=Wo(r)).r,(o=Wo(o)).r),a=n(r.g,o.g),c=n(r.b,o.b),l=Fl(r.opacity,o.opacity);return function(u){return r.r=s(u),r.g=a(u),r.b=c(u),r.opacity=l(u),r+""}}return i.gamma=e,i}(1);function ln(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Bo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_o=new RegExp(Bo.source,"g");function Ch(e){return function(){return e}}function Nh(e){return function(t){return e(t)+""}}function Mh(e,t){var n=Bo.lastIndex=_o.lastIndex=0,i,r,o,s=-1,a=[],c=[];for(e=e+"",t=t+"";(i=Bo.exec(e))&&(r=_o.exec(t));)(o=r.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(i=i[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,c.push({i:s,x:ln(i,r)})),n=_o.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?c[0]?Nh(c[0].x):Ch(t):(t=c.length,function(l){for(var u=0,f;u<t;++u)a[(f=c[u]).i]=f.x(l);return a.join("")})}var ua=180/Math.PI,Ko={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ql(e,t,n,i,r,o){var s,a,c;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(c=e*n+t*i)&&(n-=e*c,i-=t*c),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,c/=a),e*i<t*n&&(e=-e,t=-t,c=-c,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(t,e)*ua,skewX:Math.atan(c)*ua,scaleX:s,scaleY:a}}var gr;function Ph(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ko:ql(t.a,t.b,t.c,t.d,t.e,t.f)}function zh(e){return e==null||(gr||(gr=document.createElementNS("http://www.w3.org/2000/svg","g")),gr.setAttribute("transform",e),!(e=gr.transform.baseVal.consolidate()))?Ko:(e=e.matrix,ql(e.a,e.b,e.c,e.d,e.e,e.f))}function Gl(e,t,n,i){function r(l){return l.length?l.pop()+" ":""}function o(l,u,f,h,g,y){if(l!==f||u!==h){var p=g.push("translate(",null,t,null,n);y.push({i:p-4,x:ln(l,f)},{i:p-2,x:ln(u,h)})}else(f||h)&&g.push("translate("+f+t+h+n)}function s(l,u,f,h){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),h.push({i:f.push(r(f)+"rotate(",null,i)-2,x:ln(l,u)})):u&&f.push(r(f)+"rotate("+u+i)}function a(l,u,f,h){l!==u?h.push({i:f.push(r(f)+"skewX(",null,i)-2,x:ln(l,u)}):u&&f.push(r(f)+"skewX("+u+i)}function c(l,u,f,h,g,y){if(l!==f||u!==h){var p=g.push(r(g)+"scale(",null,",",null,")");y.push({i:p-4,x:ln(l,f)},{i:p-2,x:ln(u,h)})}else(f!==1||h!==1)&&g.push(r(g)+"scale("+f+","+h+")")}return function(l,u){var f=[],h=[];return l=e(l),u=e(u),o(l.translateX,l.translateY,u.translateX,u.translateY,f,h),s(l.rotate,u.rotate,f,h),a(l.skewX,u.skewX,f,h),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,h),l=u=null,function(g){for(var y=-1,p=h.length,N;++y<p;)f[(N=h[y]).i]=N.x(g);return f.join("")}}}var Ah=Gl(Ph,"px, ","px)","deg)"),Ih=Gl(zh,", ",")",")"),Th=1e-12;function da(e){return((e=Math.exp(e))+1/e)/2}function Oh(e){return((e=Math.exp(e))-1/e)/2}function Hh(e){return((e=Math.exp(2*e))-1)/(e+1)}const Dh=function e(t,n,i){function r(o,s){var a=o[0],c=o[1],l=o[2],u=s[0],f=s[1],h=s[2],g=u-a,y=f-c,p=g*g+y*y,N,w;if(p<Th)w=Math.log(h/l)/t,N=function(C){return[a+C*g,c+C*y,l*Math.exp(t*C*w)]};else{var m=Math.sqrt(p),E=(h*h-l*l+i*p)/(2*l*n*m),k=(h*h-l*l-i*p)/(2*h*n*m),_=Math.log(Math.sqrt(E*E+1)-E),S=Math.log(Math.sqrt(k*k+1)-k);w=(S-_)/t,N=function(C){var z=C*w,P=da(_),O=l/(n*m)*(P*Hh(t*z+_)-Oh(_));return[a+O*g,c+O*y,l*P/da(t*z+_)]}}return N.duration=w*1e3*t/Math.SQRT2,N}return r.rho=function(o){var s=Math.max(.001,+o),a=s*s,c=a*a;return e(s,a,c)},r}(Math.SQRT2,2,4);var qn=0,hi=0,ci=0,Zl=1e3,Tr,gi,Or=0,Nn=0,io=0,Ni=typeof performance=="object"&&performance.now?performance:Date,Ul=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function xs(){return Nn||(Ul(Rh),Nn=Ni.now()+io)}function Rh(){Nn=0}function Hr(){this._call=this._time=this._next=null}Hr.prototype=$l.prototype={constructor:Hr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?xs():+n)+(t==null?0:+t),!this._next&&gi!==this&&(gi?gi._next=this:Tr=this,gi=this),this._call=e,this._time=n,Fo()},stop:function(){this._call&&(this._call=null,this._time=1/0,Fo())}};function $l(e,t,n){var i=new Hr;return i.restart(e,t,n),i}function Lh(){xs(),++qn;for(var e=Tr,t;e;)(t=Nn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--qn}function fa(){Nn=(Or=Ni.now())+io,qn=hi=0;try{Lh()}finally{qn=0,Xh(),Nn=0}}function Vh(){var e=Ni.now(),t=e-Or;t>Zl&&(io-=t,Or=e)}function Xh(){for(var e,t=Tr,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Tr=n);gi=e,Fo(i)}function Fo(e){if(!qn){hi&&(hi=clearTimeout(hi));var t=e-Nn;t>24?(e<1/0&&(hi=setTimeout(fa,e-Ni.now()-io)),ci&&(ci=clearInterval(ci))):(ci||(Or=Ni.now(),ci=setInterval(Vh,Zl)),qn=1,Ul(fa))}}function ha(e,t,n){var i=new Hr;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var Yh=to("start","end","cancel","interrupt"),Wh=[],Jl=0,ga=1,qo=2,xr=3,va=4,Go=5,br=6;function ro(e,t,n,i,r,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Bh(e,n,{name:t,index:i,group:r,on:Yh,tween:Wh,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Jl})}function bs(e,t){var n=Dt(e,t);if(n.state>Jl)throw new Error("too late; already scheduled");return n}function Ft(e,t){var n=Dt(e,t);if(n.state>xr)throw new Error("too late; already running");return n}function Dt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Bh(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=$l(o,0,n.time);function o(l){n.state=ga,n.timer.restart(s,n.delay,n.time),n.delay<=l&&s(l-n.delay)}function s(l){var u,f,h,g;if(n.state!==ga)return c();for(u in i)if(g=i[u],g.name===n.name){if(g.state===xr)return ha(s);g.state===va?(g.state=br,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete i[u]):+u<t&&(g.state=br,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete i[u])}if(ha(function(){n.state===xr&&(n.state=va,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=qo,n.on.call("start",e,e.__data__,n.index,n.group),n.state===qo){for(n.state=xr,r=new Array(h=n.tween.length),u=0,f=-1;u<h;++u)(g=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++f]=g);r.length=f+1}}function a(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=Go,1),f=-1,h=r.length;++f<h;)r[f].call(e,u);n.state===Go&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=br,n.timer.stop(),delete i[t];for(var l in i)return;delete e.__transition}}function Er(e,t){var n=e.__transition,i,r,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((i=n[s]).name!==t){o=!1;continue}r=i.state>qo&&i.state<Go,i.state=br,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[s]}o&&delete e.__transition}}function Kh(e){return this.each(function(){Er(this,e)})}function Fh(e,t){var n,i;return function(){var r=Ft(this,e),o=r.tween;if(o!==n){i=n=o;for(var s=0,a=i.length;s<a;++s)if(i[s].name===t){i=i.slice(),i.splice(s,1);break}}r.tween=i}}function qh(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var o=Ft(this,e),s=o.tween;if(s!==i){r=(i=s).slice();for(var a={name:t,value:n},c=0,l=r.length;c<l;++c)if(r[c].name===t){r[c]=a;break}c===l&&r.push(a)}o.tween=r}}function Gh(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=Dt(this.node(),n).tween,r=0,o=i.length,s;r<o;++r)if((s=i[r]).name===e)return s.value;return null}return this.each((t==null?Fh:qh)(n,e,t))}function Es(e,t,n){var i=e._id;return e.each(function(){var r=Ft(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Dt(r,i).value[t]}}function jl(e,t){var n;return(typeof t=="number"?ln:t instanceof Ci?ca:(n=Ci(t))?(t=n,ca):Mh)(e,t)}function Zh(e){return function(){this.removeAttribute(e)}}function Uh(e){return function(){this.removeAttributeNS(e.space,e.local)}}function $h(e,t,n){var i,r=n+"",o;return function(){var s=this.getAttribute(e);return s===r?null:s===i?o:o=t(i=s,n)}}function Jh(e,t,n){var i,r=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===r?null:s===i?o:o=t(i=s,n)}}function jh(e,t,n){var i,r,o;return function(){var s,a=n(this),c;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),c=a+"",s===c?null:s===i&&c===r?o:(r=c,o=t(i=s,a)))}}function Qh(e,t,n){var i,r,o;return function(){var s,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),c=a+"",s===c?null:s===i&&c===r?o:(r=c,o=t(i=s,a)))}}function eg(e,t){var n=no(e),i=n==="transform"?Ih:jl;return this.attrTween(e,typeof t=="function"?(n.local?Qh:jh)(n,i,Es(this,"attr."+e,t)):t==null?(n.local?Uh:Zh)(n):(n.local?Jh:$h)(n,i,t))}function tg(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ng(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ig(e,t){var n,i;function r(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&ng(e,o)),n}return r._value=t,r}function rg(e,t){var n,i;function r(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&tg(e,o)),n}return r._value=t,r}function og(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=no(e);return this.tween(n,(i.local?ig:rg)(i,t))}function sg(e,t){return function(){bs(this,e).delay=+t.apply(this,arguments)}}function ag(e,t){return t=+t,function(){bs(this,e).delay=t}}function lg(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?sg:ag)(t,e)):Dt(this.node(),t).delay}function cg(e,t){return function(){Ft(this,e).duration=+t.apply(this,arguments)}}function ug(e,t){return t=+t,function(){Ft(this,e).duration=t}}function dg(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?cg:ug)(t,e)):Dt(this.node(),t).duration}function fg(e,t){if(typeof t!="function")throw new Error;return function(){Ft(this,e).ease=t}}function hg(e){var t=this._id;return arguments.length?this.each(fg(t,e)):Dt(this.node(),t).ease}function gg(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ft(this,e).ease=n}}function vg(e){if(typeof e!="function")throw new Error;return this.each(gg(this._id,e))}function mg(e){typeof e!="function"&&(e=Pl(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],s=o.length,a=i[r]=[],c,l=0;l<s;++l)(c=o[l])&&e.call(c,c.__data__,l,o)&&a.push(c);return new tn(i,this._parents,this._name,this._id)}function yg(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,o=Math.min(i,r),s=new Array(i),a=0;a<o;++a)for(var c=t[a],l=n[a],u=c.length,f=s[a]=new Array(u),h,g=0;g<u;++g)(h=c[g]||l[g])&&(f[g]=h);for(;a<i;++a)s[a]=t[a];return new tn(s,this._parents,this._name,this._id)}function pg(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function _g(e,t,n){var i,r,o=pg(t)?bs:Ft;return function(){var s=o(this,e),a=s.on;a!==i&&(r=(i=a).copy()).on(t,n),s.on=r}}function wg(e,t){var n=this._id;return arguments.length<2?Dt(this.node(),n).on.on(e):this.each(_g(n,e,t))}function xg(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function bg(){return this.on("end.remove",xg(this._id))}function Eg(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ps(e));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var a=i[s],c=a.length,l=o[s]=new Array(c),u,f,h=0;h<c;++h)(u=a[h])&&(f=e.call(u,u.__data__,h,a))&&("__data__"in u&&(f.__data__=u.__data__),l[h]=f,ro(l[h],t,n,h,l,Dt(u,n)));return new tn(o,this._parents,t,n)}function kg(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ml(e));for(var i=this._groups,r=i.length,o=[],s=[],a=0;a<r;++a)for(var c=i[a],l=c.length,u,f=0;f<l;++f)if(u=c[f]){for(var h=e.call(u,u.__data__,f,c),g,y=Dt(u,n),p=0,N=h.length;p<N;++p)(g=h[p])&&ro(g,t,n,p,h,y);o.push(h),s.push(u)}return new tn(o,s,t,n)}var Sg=nr.prototype.constructor;function Cg(){return new Sg(this._groups,this._parents)}function Ng(e,t){var n,i,r;return function(){var o=Fn(this,e),s=(this.style.removeProperty(e),Fn(this,e));return o===s?null:o===n&&s===i?r:r=t(n=o,i=s)}}function Ql(e){return function(){this.style.removeProperty(e)}}function Mg(e,t,n){var i,r=n+"",o;return function(){var s=Fn(this,e);return s===r?null:s===i?o:o=t(i=s,n)}}function Pg(e,t,n){var i,r,o;return function(){var s=Fn(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),Fn(this,e))),s===c?null:s===i&&c===r?o:(r=c,o=t(i=s,a))}}function zg(e,t){var n,i,r,o="style."+t,s="end."+o,a;return function(){var c=Ft(this,e),l=c.on,u=c.value[o]==null?a||(a=Ql(t)):void 0;(l!==n||r!==u)&&(i=(n=l).copy()).on(s,r=u),c.on=i}}function Ag(e,t,n){var i=(e+="")=="transform"?Ah:jl;return t==null?this.styleTween(e,Ng(e,i)).on("end.style."+e,Ql(e)):typeof t=="function"?this.styleTween(e,Pg(e,i,Es(this,"style."+e,t))).each(zg(this._id,e)):this.styleTween(e,Mg(e,i,t),n).on("end.style."+e,null)}function Ig(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function Tg(e,t,n){var i,r;function o(){var s=t.apply(this,arguments);return s!==r&&(i=(r=s)&&Ig(e,s,n)),i}return o._value=t,o}function Og(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,Tg(e,t,n??""))}function Hg(e){return function(){this.textContent=e}}function Dg(e){return function(){var t=e(this);this.textContent=t??""}}function Rg(e){return this.tween("text",typeof e=="function"?Dg(Es(this,"text",e)):Hg(e==null?"":e+""))}function Lg(e){return function(t){this.textContent=e.call(this,t)}}function Vg(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Lg(r)),t}return i._value=e,i}function Xg(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Vg(e))}function Yg(){for(var e=this._name,t=this._id,n=ec(),i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],a=s.length,c,l=0;l<a;++l)if(c=s[l]){var u=Dt(c,t);ro(c,e,n,l,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new tn(i,this._parents,e,n)}function Wg(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(o,s){var a={value:s},c={value:function(){--r===0&&o()}};n.each(function(){var l=Ft(this,i),u=l.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),l.on=t}),r===0&&o()})}var Bg=0;function tn(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function ec(){return++Bg}var qt=nr.prototype;tn.prototype={constructor:tn,select:Eg,selectAll:kg,selectChild:qt.selectChild,selectChildren:qt.selectChildren,filter:mg,merge:yg,selection:Cg,transition:Yg,call:qt.call,nodes:qt.nodes,node:qt.node,size:qt.size,empty:qt.empty,each:qt.each,on:wg,attr:eg,attrTween:og,style:Ag,styleTween:Og,text:Rg,textTween:Xg,remove:bg,tween:Gh,delay:lg,duration:dg,ease:hg,easeVarying:vg,end:Wg,[Symbol.iterator]:qt[Symbol.iterator]};function Kg(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Fg={time:null,delay:0,duration:250,ease:Kg};function qg(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Gg(e){var t,n;e instanceof tn?(t=e._id,e=e._name):(t=ec(),(n=Fg).time=xs(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],a=s.length,c,l=0;l<a;++l)(c=s[l])&&ro(c,e,t,l,s,n||qg(c,t));return new tn(i,this._parents,e,t)}nr.prototype.interrupt=Kh;nr.prototype.transition=Gg;const vr=e=>()=>e;function Zg(e,{sourceEvent:t,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function Gt(e,t,n){this.k=e,this.x=t,this.y=n}Gt.prototype={constructor:Gt,scale:function(e){return e===1?this:new Gt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Gt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var oo=new Gt(1,0,0);tc.prototype=Gt.prototype;function tc(e){for(;!e.__zoom;)if(!(e=e.parentNode))return oo;return e.__zoom}function wo(e){e.stopImmediatePropagation()}function ui(e){e.preventDefault(),e.stopImmediatePropagation()}function Ug(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function $g(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ma(){return this.__zoom||oo}function Jg(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function jg(){return navigator.maxTouchPoints||"ontouchstart"in this}function Qg(e,t,n){var i=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function nc(){var e=Ug,t=$g,n=Qg,i=Jg,r=jg,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,c=Dh,l=to("start","zoom","end"),u,f,h,g=500,y=150,p=0,N=10;function w(x){x.property("__zoom",ma).on("wheel.zoom",z,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",O).filter(r).on("touchstart.zoom",L).on("touchmove.zoom",V).on("touchend.zoom touchcancel.zoom",H).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}w.transform=function(x,T,b,M){var I=x.selection?x.selection():x;I.property("__zoom",ma),x!==I?_(x,T,b,M):I.interrupt().each(function(){S(this,arguments).event(M).start().zoom(null,typeof T=="function"?T.apply(this,arguments):T).end()})},w.scaleBy=function(x,T,b,M){w.scaleTo(x,function(){var I=this.__zoom.k,A=typeof T=="function"?T.apply(this,arguments):T;return I*A},b,M)},w.scaleTo=function(x,T,b,M){w.transform(x,function(){var I=t.apply(this,arguments),A=this.__zoom,X=b==null?k(I):typeof b=="function"?b.apply(this,arguments):b,K=A.invert(X),U=typeof T=="function"?T.apply(this,arguments):T;return n(E(m(A,U),X,K),I,s)},b,M)},w.translateBy=function(x,T,b,M){w.transform(x,function(){return n(this.__zoom.translate(typeof T=="function"?T.apply(this,arguments):T,typeof b=="function"?b.apply(this,arguments):b),t.apply(this,arguments),s)},null,M)},w.translateTo=function(x,T,b,M,I){w.transform(x,function(){var A=t.apply(this,arguments),X=this.__zoom,K=M==null?k(A):typeof M=="function"?M.apply(this,arguments):M;return n(oo.translate(K[0],K[1]).scale(X.k).translate(typeof T=="function"?-T.apply(this,arguments):-T,typeof b=="function"?-b.apply(this,arguments):-b),A,s)},M,I)};function m(x,T){return T=Math.max(o[0],Math.min(o[1],T)),T===x.k?x:new Gt(T,x.x,x.y)}function E(x,T,b){var M=T[0]-b[0]*x.k,I=T[1]-b[1]*x.k;return M===x.x&&I===x.y?x:new Gt(x.k,M,I)}function k(x){return[(+x[0][0]+ +x[1][0])/2,(+x[0][1]+ +x[1][1])/2]}function _(x,T,b,M){x.on("start.zoom",function(){S(this,arguments).event(M).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event(M).end()}).tween("zoom",function(){var I=this,A=arguments,X=S(I,A).event(M),K=t.apply(I,A),U=b==null?k(K):typeof b=="function"?b.apply(I,A):b,te=Math.max(K[1][0]-K[0][0],K[1][1]-K[0][1]),B=I.__zoom,J=typeof T=="function"?T.apply(I,A):T,ne=c(B.invert(U).concat(te/B.k),J.invert(U).concat(te/J.k));return function(ue){if(ue===1)ue=J;else{var fe=ne(ue),Z=te/fe[2];ue=new Gt(Z,U[0]-fe[0]*Z,U[1]-fe[1]*Z)}X.zoom(null,ue)}})}function S(x,T,b){return!b&&x.__zooming||new C(x,T)}function C(x,T){this.that=x,this.args=T,this.active=0,this.sourceEvent=null,this.extent=t.apply(x,T),this.taps=0}C.prototype={event:function(x){return x&&(this.sourceEvent=x),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(x,T){return this.mouse&&x!=="mouse"&&(this.mouse[1]=T.invert(this.mouse[0])),this.touch0&&x!=="touch"&&(this.touch0[1]=T.invert(this.touch0[0])),this.touch1&&x!=="touch"&&(this.touch1[1]=T.invert(this.touch1[0])),this.that.__zoom=T,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(x){var T=_t(this.that).datum();l.call(x,this.that,new Zg(x,{sourceEvent:this.sourceEvent,target:w,type:x,transform:this.that.__zoom,dispatch:l}),T)}};function z(x,...T){if(!e.apply(this,arguments))return;var b=S(this,T).event(x),M=this.__zoom,I=Math.max(o[0],Math.min(o[1],M.k*Math.pow(2,i.apply(this,arguments)))),A=Mt(x);if(b.wheel)(b.mouse[0][0]!==A[0]||b.mouse[0][1]!==A[1])&&(b.mouse[1]=M.invert(b.mouse[0]=A)),clearTimeout(b.wheel);else{if(M.k===I)return;b.mouse=[A,M.invert(A)],Er(this),b.start()}ui(x),b.wheel=setTimeout(X,y),b.zoom("mouse",n(E(m(M,I),b.mouse[0],b.mouse[1]),b.extent,s));function X(){b.wheel=null,b.end()}}function P(x,...T){if(h||!e.apply(this,arguments))return;var b=x.currentTarget,M=S(this,T,!0).event(x),I=_t(x.view).on("mousemove.zoom",U,!0).on("mouseup.zoom",te,!0),A=Mt(x,b),X=x.clientX,K=x.clientY;Vl(x.view),wo(x),M.mouse=[A,this.__zoom.invert(A)],Er(this),M.start();function U(B){if(ui(B),!M.moved){var J=B.clientX-X,ne=B.clientY-K;M.moved=J*J+ne*ne>p}M.event(B).zoom("mouse",n(E(M.that.__zoom,M.mouse[0]=Mt(B,b),M.mouse[1]),M.extent,s))}function te(B){I.on("mousemove.zoom mouseup.zoom",null),Xl(B.view,M.moved),ui(B),M.event(B).end()}}function O(x,...T){if(e.apply(this,arguments)){var b=this.__zoom,M=Mt(x.changedTouches?x.changedTouches[0]:x,this),I=b.invert(M),A=b.k*(x.shiftKey?.5:2),X=n(E(m(b,A),M,I),t.apply(this,T),s);ui(x),a>0?_t(this).transition().duration(a).call(_,X,M,x):_t(this).call(w.transform,X,M,x)}}function L(x,...T){if(e.apply(this,arguments)){var b=x.touches,M=b.length,I=S(this,T,x.changedTouches.length===M).event(x),A,X,K,U;for(wo(x),X=0;X<M;++X)K=b[X],U=Mt(K,this),U=[U,this.__zoom.invert(U),K.identifier],I.touch0?!I.touch1&&I.touch0[2]!==U[2]&&(I.touch1=U,I.taps=0):(I.touch0=U,A=!0,I.taps=1+!!u);u&&(u=clearTimeout(u)),A&&(I.taps<2&&(f=U[0],u=setTimeout(function(){u=null},g)),Er(this),I.start())}}function V(x,...T){if(this.__zooming){var b=S(this,T).event(x),M=x.changedTouches,I=M.length,A,X,K,U;for(ui(x),A=0;A<I;++A)X=M[A],K=Mt(X,this),b.touch0&&b.touch0[2]===X.identifier?b.touch0[0]=K:b.touch1&&b.touch1[2]===X.identifier&&(b.touch1[0]=K);if(X=b.that.__zoom,b.touch1){var te=b.touch0[0],B=b.touch0[1],J=b.touch1[0],ne=b.touch1[1],ue=(ue=J[0]-te[0])*ue+(ue=J[1]-te[1])*ue,fe=(fe=ne[0]-B[0])*fe+(fe=ne[1]-B[1])*fe;X=m(X,Math.sqrt(ue/fe)),K=[(te[0]+J[0])/2,(te[1]+J[1])/2],U=[(B[0]+ne[0])/2,(B[1]+ne[1])/2]}else if(b.touch0)K=b.touch0[0],U=b.touch0[1];else return;b.zoom("touch",n(E(X,K,U),b.extent,s))}}function H(x,...T){if(this.__zooming){var b=S(this,T).event(x),M=x.changedTouches,I=M.length,A,X;for(wo(x),h&&clearTimeout(h),h=setTimeout(function(){h=null},g),A=0;A<I;++A)X=M[A],b.touch0&&b.touch0[2]===X.identifier?delete b.touch0:b.touch1&&b.touch1[2]===X.identifier&&delete b.touch1;if(b.touch1&&!b.touch0&&(b.touch0=b.touch1,delete b.touch1),b.touch0)b.touch0[1]=this.__zoom.invert(b.touch0[0]);else if(b.end(),b.taps===2&&(X=Mt(X,this),Math.hypot(f[0]-X[0],f[1]-X[1])<N)){var K=_t(this).on("dblclick.zoom");K&&K.apply(this,arguments)}}}return w.wheelDelta=function(x){return arguments.length?(i=typeof x=="function"?x:vr(+x),w):i},w.filter=function(x){return arguments.length?(e=typeof x=="function"?x:vr(!!x),w):e},w.touchable=function(x){return arguments.length?(r=typeof x=="function"?x:vr(!!x),w):r},w.extent=function(x){return arguments.length?(t=typeof x=="function"?x:vr([[+x[0][0],+x[0][1]],[+x[1][0],+x[1][1]]]),w):t},w.scaleExtent=function(x){return arguments.length?(o[0]=+x[0],o[1]=+x[1],w):[o[0],o[1]]},w.translateExtent=function(x){return arguments.length?(s[0][0]=+x[0][0],s[1][0]=+x[1][0],s[0][1]=+x[0][1],s[1][1]=+x[1][1],w):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},w.constrain=function(x){return arguments.length?(n=x,w):n},w.duration=function(x){return arguments.length?(a=+x,w):a},w.interpolate=function(x){return arguments.length?(c=x,w):c},w.on=function(){var x=l.on.apply(l,arguments);return x===l?w:x},w.clickDistance=function(x){return arguments.length?(p=(x=+x)*x,w):Math.sqrt(p)},w.tapDistance=function(x){return arguments.length?(N=+x,w):N},w}const rr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:i}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`},Dr=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]];var Mn;(function(e){e.Strict="strict",e.Loose="loose"})(Mn||(Mn={}));var vn;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(vn||(vn={}));var Rr;(function(e){e.Partial="partial",e.Full="full"})(Rr||(Rr={}));const Zo={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Xn;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Xn||(Xn={}));var Lr;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Lr||(Lr={}));var he;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(he||(he={}));const ya={[he.Left]:he.Right,[he.Right]:he.Left,[he.Top]:he.Bottom,[he.Bottom]:he.Top};function ic(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function pa(e,t,n){if(!n)return;const i=[];e.forEach((r,o)=>{t!=null&&t.has(o)||i.push(r)}),i.length&&n(i)}function ev(e){return e===null?null:e?"valid":"invalid"}const tv=e=>"id"in e&&"source"in e&&"target"in e,nv=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),ks=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),or=(e,t=[0,0])=>{const{width:n,height:i}=wn(e),r=e.origin??t,o=n*r[0],s=i*r[1];return{x:e.position.x-o,y:e.position.y-s}},iv=(e,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((i,r)=>{const o=typeof r=="string";let s=!t.nodeLookup&&!o?r:void 0;t.nodeLookup&&(s=o?t.nodeLookup.get(r):ks(r)?r:t.nodeLookup.get(r.id));const a=s?Vr(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return so(i,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return ao(n)},sr=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(i=>{if(t.filter===void 0||t.filter(i)){const r=Vr(i);n=so(n,r)}}),ao(n)},rc=(e,t,[n,i,r]=[0,0,1],o=!1,s=!1)=>{const a={...ar(t,[n,i,r]),width:t.width/r,height:t.height/r},c=[];for(const l of e.values()){const{measured:u,selectable:f=!0,hidden:h=!1}=l;if(s&&!f||h)continue;const g=u.width??l.width??l.initialWidth??null,y=u.height??l.height??l.initialHeight??null,p=Mi(a,Zn(l)),N=(g??0)*(y??0),w=o&&p>0;(!l.internals.handleBounds||w||p>=N||l.dragging)&&c.push(l)}return c},Uo=(e,t)=>{const n=new Set;return e.forEach(i=>{n.add(i.id)}),t.filter(i=>n.has(i.source)||n.has(i.target))};function _a(e,t){const n=new Map,i=t!=null&&t.nodes?new Set(t.nodes.map(r=>r.id)):null;return e.forEach(r=>{r.measured.width&&r.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!r.hidden)&&(!i||i.has(r.id))&&n.set(r.id,r)}),n}async function wa({nodes:e,width:t,height:n,panZoom:i,minZoom:r,maxZoom:o},s){if(e.size===0)return Promise.resolve(!1);const a=sr(e),c=Cs(a,t,n,(s==null?void 0:s.minZoom)??r,(s==null?void 0:s.maxZoom)??o,(s==null?void 0:s.padding)??.1);return await i.setViewport(c,{duration:s==null?void 0:s.duration}),Promise.resolve(!0)}function rv({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:r,onError:o}){const s=n.get(e),a=s.parentId?n.get(s.parentId):void 0,{x:c,y:l}=a?a.internals.positionAbsolute:{x:0,y:0},u=s.origin??i;let f=r;if(s.extent==="parent"&&!s.expandParent)if(!a)o==null||o("005",rr.error005());else{const g=a.measured.width,y=a.measured.height;g&&y&&(f=[[c,l],[c+g,l+y]])}else a&&Un(s.extent)&&(f=[[s.extent[0][0]+c,s.extent[0][1]+l],[s.extent[1][0]+c,s.extent[1][1]+l]]);const h=Un(f)?Pn(t,f,s.measured):t;return{position:{x:h.x-c+s.measured.width*u[0],y:h.y-l+s.measured.height*u[1]},positionAbsolute:h}}async function oc({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:i,onBeforeDelete:r}){const o=new Set(e.map(h=>h.id)),s=[];for(const h of n){if(h.deletable===!1)continue;const g=o.has(h.id),y=!g&&h.parentId&&s.find(p=>p.id===h.parentId);(g||y)&&s.push(h)}const a=new Set(t.map(h=>h.id)),c=i.filter(h=>h.deletable!==!1),u=Uo(s,c);for(const h of c)a.has(h.id)&&!u.find(y=>y.id===h.id)&&u.push(h);if(!r)return{edges:u,nodes:s};const f=await r({nodes:s,edges:u});return typeof f=="boolean"?f?{edges:u,nodes:s}:{edges:[],nodes:[]}:f}const Gn=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Pn=(e={x:0,y:0},t,n)=>({x:Gn(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Gn(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function sc(e,t,n){const{width:i,height:r}=wn(n),{x:o,y:s}=n.internals.positionAbsolute;return Pn(e,[[o,s],[o+i,s+r]],t)}const xa=(e,t,n)=>e<t?Gn(Math.abs(e-t),1,t)/t:e>n?-Gn(Math.abs(e-n),1,t)/t:0,ac=(e,t,n=15,i=40)=>{const r=xa(e.x,i,t.width-i)*n,o=xa(e.y,i,t.height-i)*n;return[r,o]},so=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),$o=({x:e,y:t,width:n,height:i})=>({x:e,y:t,x2:e+n,y2:t+i}),ao=({x:e,y:t,x2:n,y2:i})=>({x:e,y:t,width:n-e,height:i-t}),Zn=(e,t=[0,0])=>{var r,o;const{x:n,y:i}=ks(e)?e.internals.positionAbsolute:or(e,t);return{x:n,y:i,width:((r=e.measured)==null?void 0:r.width)??e.width??e.initialWidth??0,height:((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0}},Vr=(e,t=[0,0])=>{var r,o;const{x:n,y:i}=ks(e)?e.internals.positionAbsolute:or(e,t);return{x:n,y:i,x2:n+(((r=e.measured)==null?void 0:r.width)??e.width??e.initialWidth??0),y2:i+(((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0)}},lc=(e,t)=>ao(so($o(e),$o(t))),Mi=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),i=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*i)},ba=e=>Zt(e.width)&&Zt(e.height)&&Zt(e.x)&&Zt(e.y),Zt=e=>!isNaN(e)&&isFinite(e),ov=(e,t)=>{},Ss=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),ar=({x:e,y:t},[n,i,r],o=!1,s=[1,1])=>{const a={x:(e-n)/r,y:(t-i)/r};return o?Ss(a,s):a},cc=({x:e,y:t},[n,i,r])=>({x:e*r+n,y:t*r+i}),Cs=(e,t,n,i,r,o)=>{const s=t/(e.width*(1+o)),a=n/(e.height*(1+o)),c=Math.min(s,a),l=Gn(c,i,r),u=e.x+e.width/2,f=e.y+e.height/2,h=t/2-u*l,g=n/2-f*l;return{x:h,y:g,zoom:l}},Xr=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Un(e){return e!==void 0&&e!=="parent"}function wn(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function uc(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function sv(e,t={width:0,height:0},n,i,r){const o={...e},s=i.get(n);if(s){const a=s.origin||r;o.x+=s.internals.positionAbsolute.x-(t.width??0)*a[0],o.y+=s.internals.positionAbsolute.y-(t.height??0)*a[1]}return o}function pi(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:i,containerBounds:r}){const{x:o,y:s}=Jt(e),a=ar({x:o-((r==null?void 0:r.left)??0),y:s-((r==null?void 0:r.top)??0)},i),{x:c,y:l}=n?Ss(a,t):a;return{xSnapped:c,ySnapped:l,...a}}const Ns=e=>({width:e.offsetWidth,height:e.offsetHeight}),av=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},lv=["INPUT","SELECT","TEXTAREA"];function cv(e){var i,r,o;const t=((r=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:r[0])||e.target;return lv.includes(t==null?void 0:t.nodeName)||((o=t==null?void 0:t.hasAttribute)==null?void 0:o.call(t,"contenteditable"))||!!(t!=null&&t.closest(".nokey"))}const dc=e=>"clientX"in e,Jt=(e,t)=>{var o,s;const n=dc(e),i=n?e.clientX:(o=e.touches)==null?void 0:o[0].clientX,r=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}},Ea=(e,t,n,i,r)=>{const o=t.querySelectorAll(`.${e}`);return!o||!o.length?null:Array.from(o).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:r,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/i,y:(a.top-n.top)/i,...Ns(s)}})};function uv({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:r,sourceControlY:o,targetControlX:s,targetControlY:a}){const c=e*.125+r*.375+s*.375+n*.125,l=t*.125+o*.375+a*.375+i*.125,u=Math.abs(c-e),f=Math.abs(l-t);return[c,l,u,f]}function mr(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function ka({pos:e,x1:t,y1:n,x2:i,y2:r,c:o}){switch(e){case he.Left:return[t-mr(t-i,o),n];case he.Right:return[t+mr(i-t,o),n];case he.Top:return[t,n-mr(n-r,o)];case he.Bottom:return[t,n+mr(r-n,o)]}}function fc({sourceX:e,sourceY:t,sourcePosition:n=he.Bottom,targetX:i,targetY:r,targetPosition:o=he.Top,curvature:s=.25}){const[a,c]=ka({pos:n,x1:e,y1:t,x2:i,y2:r,c:s}),[l,u]=ka({pos:o,x1:i,y1:r,x2:e,y2:t,c:s}),[f,h,g,y]=uv({sourceX:e,sourceY:t,targetX:i,targetY:r,sourceControlX:a,sourceControlY:c,targetControlX:l,targetControlY:u});return[`M${e},${t} C${a},${c} ${l},${u} ${i},${r}`,f,h,g,y]}function hc({sourceX:e,sourceY:t,targetX:n,targetY:i}){const r=Math.abs(n-e)/2,o=n<e?n+r:n-r,s=Math.abs(i-t)/2,a=i<t?i+s:i-s;return[o,a,r,s]}function dv({sourceNode:e,targetNode:t,selected:n=!1,zIndex:i=0,elevateOnSelect:r=!1}){if(!r)return i;const o=n||t.selected||e.selected,s=Math.max(e.internals.z||0,t.internals.z||0,1e3);return i+(o?s:0)}function fv({sourceNode:e,targetNode:t,width:n,height:i,transform:r}){const o=so(Vr(e),Vr(t));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const s={x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:i/r[2]};return Mi(s,ao(o))>0}const hv=({source:e,sourceHandle:t,target:n,targetHandle:i})=>`xy-edge__${e}${t||""}-${n}${i||""}`,gv=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),vv=(e,t)=>{if(!e.source||!e.target)return t;let n;return tv(e)?n={...e}:n={...e,id:hv(e)},gv(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function Jo({sourceX:e,sourceY:t,targetX:n,targetY:i}){const[r,o,s,a]=hc({sourceX:e,sourceY:t,targetX:n,targetY:i});return[`M ${e},${t}L ${n},${i}`,r,o,s,a]}const Sa={[he.Left]:{x:-1,y:0},[he.Right]:{x:1,y:0},[he.Top]:{x:0,y:-1},[he.Bottom]:{x:0,y:1}},mv=({source:e,sourcePosition:t=he.Bottom,target:n})=>t===he.Left||t===he.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Ca=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function yv({source:e,sourcePosition:t=he.Bottom,target:n,targetPosition:i=he.Top,center:r,offset:o}){const s=Sa[t],a=Sa[i],c={x:e.x+s.x*o,y:e.y+s.y*o},l={x:n.x+a.x*o,y:n.y+a.y*o},u=mv({source:c,sourcePosition:t,target:l}),f=u.x!==0?"x":"y",h=u[f];let g=[],y,p;const N={x:0,y:0},w={x:0,y:0},[m,E,k,_]=hc({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[f]*a[f]===-1){y=r.x??m,p=r.y??E;const C=[{x:y,y:c.y},{x:y,y:l.y}],z=[{x:c.x,y:p},{x:l.x,y:p}];s[f]===h?g=f==="x"?C:z:g=f==="x"?z:C}else{const C=[{x:c.x,y:l.y}],z=[{x:l.x,y:c.y}];if(f==="x"?g=s.x===h?z:C:g=s.y===h?C:z,t===i){const H=Math.abs(e[f]-n[f]);if(H<=o){const x=Math.min(o-1,o-H);s[f]===h?N[f]=(c[f]>e[f]?-1:1)*x:w[f]=(l[f]>n[f]?-1:1)*x}}if(t!==i){const H=f==="x"?"y":"x",x=s[f]===a[H],T=c[H]>l[H],b=c[H]<l[H];(s[f]===1&&(!x&&T||x&&b)||s[f]!==1&&(!x&&b||x&&T))&&(g=f==="x"?C:z)}const P={x:c.x+N.x,y:c.y+N.y},O={x:l.x+w.x,y:l.y+w.y},L=Math.max(Math.abs(P.x-g[0].x),Math.abs(O.x-g[0].x)),V=Math.max(Math.abs(P.y-g[0].y),Math.abs(O.y-g[0].y));L>=V?(y=(P.x+O.x)/2,p=g[0].y):(y=g[0].x,p=(P.y+O.y)/2)}return[[e,{x:c.x+N.x,y:c.y+N.y},...g,{x:l.x+w.x,y:l.y+w.y},n],y,p,k,_]}function pv(e,t,n,i){const r=Math.min(Ca(e,t)/2,Ca(t,n)/2,i),{x:o,y:s}=t;if(e.x===o&&o===n.x||e.y===s&&s===n.y)return`L${o} ${s}`;if(e.y===s){const l=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${o+r*l},${s}Q ${o},${s} ${o},${s+r*u}`}const a=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${o},${s+r*c}Q ${o},${s} ${o+r*a},${s}`}function Yr({sourceX:e,sourceY:t,sourcePosition:n=he.Bottom,targetX:i,targetY:r,targetPosition:o=he.Top,borderRadius:s=5,centerX:a,centerY:c,offset:l=20}){const[u,f,h,g,y]=yv({source:{x:e,y:t},sourcePosition:n,target:{x:i,y:r},targetPosition:o,center:{x:a,y:c},offset:l});return[u.reduce((N,w,m)=>{let E="";return m>0&&m<u.length-1?E=pv(u[m-1],w,u[m+1],s):E=`${m===0?"M":"L"}${w.x} ${w.y}`,N+=E,N},""),f,h,g,y]}function Na(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function _v(e){var f;const{sourceNode:t,targetNode:n}=e;if(!Na(t)||!Na(n))return null;const i=t.internals.handleBounds||Ma(t.handles),r=n.internals.handleBounds||Ma(n.handles),o=Pa((i==null?void 0:i.source)??[],e.sourceHandle),s=Pa(e.connectionMode===Mn.Strict?(r==null?void 0:r.target)??[]:((r==null?void 0:r.target)??[]).concat((r==null?void 0:r.source)??[]),e.targetHandle);if(!o||!s)return(f=e.onError)==null||f.call(e,"008",rr.error008(o?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(o==null?void 0:o.position)||he.Bottom,c=(s==null?void 0:s.position)||he.Top,l=Pi(t,o,a),u=Pi(n,s,c);return{sourceX:l.x,sourceY:l.y,targetX:u.x,targetY:u.y,sourcePosition:a,targetPosition:c}}function Ma(e){if(!e)return null;const t=[],n=[];for(const i of e)i.width=i.width??1,i.height=i.height??1,i.type==="source"?t.push(i):i.type==="target"&&n.push(i);return{source:t,target:n}}function Pi(e,t,n=he.Left,i=!1){const r=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,o=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:s,height:a}=t??wn(e);if(i)return{x:r+s/2,y:o+a/2};switch((t==null?void 0:t.position)??n){case he.Top:return{x:r+s/2,y:o};case he.Right:return{x:r+s,y:o+a/2};case he.Bottom:return{x:r+s/2,y:o+a};case he.Left:return{x:r,y:o+a/2}}}function Pa(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function jo(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(i=>`${i}=${e[i]}`).join("&")}`:""}function wv(e,{id:t,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:r}){const o=new Set;return e.reduce((s,a)=>([a.markerStart||i,a.markerEnd||r].forEach(c=>{if(c&&typeof c=="object"){const l=jo(c,t);o.has(l)||(s.push({id:l,color:c.color||n,...c}),o.add(l))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))}const Ms={nodeOrigin:[0,0],nodeExtent:Dr,elevateNodesOnSelect:!0,defaults:{}},xv={...Ms,checkEquality:!0};function Ps(e,t){const n={...e};for(const i in t)t[i]!==void 0&&(n[i]=t[i]);return n}function bv(e,t,n){const i=Ps(Ms,n);for(const r of e.values())if(r.parentId)zs(r,e,t,i);else{const o=or(r,i.nodeOrigin),s=Un(r.extent)?r.extent:i.nodeExtent,a=Pn(o,s,wn(r));r.internals.positionAbsolute=a}}function gc(e,t,n,i){var a,c;const r=Ps(xv,i),o=new Map(t),s=r!=null&&r.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const l of e){let u=o.get(l.id);if(r.checkEquality&&l===(u==null?void 0:u.internals.userNode))t.set(l.id,u);else{const f=or(l,r.nodeOrigin),h=Un(l.extent)?l.extent:r.nodeExtent,g=Pn(f,h,wn(l));u={...r.defaults,...l,measured:{width:(a=l.measured)==null?void 0:a.width,height:(c=l.measured)==null?void 0:c.height},internals:{positionAbsolute:g,handleBounds:l.measured?u==null?void 0:u.internals.handleBounds:void 0,z:vc(l,s),userNode:l}},t.set(l.id,u)}l.parentId&&zs(u,t,n,i)}}function Ev(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function zs(e,t,n,i){const{elevateNodesOnSelect:r,nodeOrigin:o,nodeExtent:s}=Ps(Ms,i),a=e.parentId,c=t.get(a);if(!c){console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Ev(e,n);const l=r?1e3:0,{x:u,y:f,z:h}=kv(e,c,o,s,l),{positionAbsolute:g}=e.internals,y=u!==g.x||f!==g.y;(y||h!==e.internals.z)&&(e.internals={...e.internals,positionAbsolute:y?{x:u,y:f}:g,z:h})}function vc(e,t){return(Zt(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function kv(e,t,n,i,r){const{x:o,y:s}=t.internals.positionAbsolute,a=wn(e),c=or(e,n),l=Un(e.extent)?Pn(c,e.extent,a):c;let u=Pn({x:o+l.x,y:s+l.y},i,a);e.extent==="parent"&&(u=sc(u,a,t));const f=vc(e,r),h=t.internals.z??0;return{x:u.x,y:u.y,z:h>f?h:f}}function Sv(e,t,n,i=[0,0]){var s;const r=[],o=new Map;for(const a of e){const c=t.get(a.parentId);if(!c)continue;const l=((s=o.get(a.parentId))==null?void 0:s.expandedRect)??Zn(c),u=lc(l,a.rect);o.set(a.parentId,{expandedRect:u,parent:c})}return o.size>0&&o.forEach(({expandedRect:a,parent:c},l)=>{var E;const u=c.internals.positionAbsolute,f=wn(c),h=c.origin??i,g=a.x<u.x?Math.round(Math.abs(u.x-a.x)):0,y=a.y<u.y?Math.round(Math.abs(u.y-a.y)):0,p=Math.max(f.width,Math.round(a.width)),N=Math.max(f.height,Math.round(a.height)),w=(p-f.width)*h[0],m=(N-f.height)*h[1];(g>0||y>0||w||m)&&(r.push({id:l,type:"position",position:{x:c.position.x-g+w,y:c.position.y-y+m}}),(E=n.get(l))==null||E.forEach(k=>{e.some(_=>_.id===k.id)||r.push({id:k.id,type:"position",position:{x:k.position.x+g,y:k.position.y+y}})})),(f.width<a.width||f.height<a.height||g||y)&&r.push({id:l,type:"dimensions",setAttributes:!0,dimensions:{width:p+(g?h[0]*g-w:0),height:N+(y?h[1]*y-m:0)}})}),r}function Cv(e,t,n,i,r,o){const s=i==null?void 0:i.querySelector(".xyflow__viewport");let a=!1;if(!s)return{changes:[],updatedInternals:a};const c=[],l=window.getComputedStyle(s),{m22:u}=new window.DOMMatrixReadOnly(l.transform),f=[];for(const h of e.values()){const g=t.get(h.id);if(g)if(g.hidden)g.internals={...g.internals,handleBounds:void 0},a=!0;else{const y=Ns(h.nodeElement),p=g.measured.width!==y.width||g.measured.height!==y.height;if(!!(y.width&&y.height&&(p||!g.internals.handleBounds||h.force))){const w=h.nodeElement.getBoundingClientRect(),m=Un(g.extent)?g.extent:o;let{positionAbsolute:E}=g.internals;g.parentId&&g.extent==="parent"?E=sc(E,y,t.get(g.parentId)):m&&(E=Pn(E,m,y)),g.measured=y,g.internals={...g.internals,positionAbsolute:E,handleBounds:{source:Ea("source",h.nodeElement,w,u,g.id),target:Ea("target",h.nodeElement,w,u,g.id)}},g.parentId&&zs(g,t,n,{nodeOrigin:r}),a=!0,p&&(c.push({id:g.id,type:"dimensions",dimensions:y}),g.expandParent&&g.parentId&&f.push({id:g.id,parentId:g.parentId,rect:Zn(g,r)}))}}}if(f.length>0){const h=Sv(f,t,n,r);c.push(...h)}return{changes:c,updatedInternals:a}}async function Nv({delta:e,panZoom:t,transform:n,translateExtent:i,width:r,height:o}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[r,o]],i),a=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(a)}function mc(e,t,n){e.clear(),t.clear();for(const i of n){const{source:r,target:o,sourceHandle:s=null,targetHandle:a=null}=i,c=`${r}-source-${s}`,l=`${o}-target-${a}`,u=e.get(c)||new Map,f=e.get(l)||new Map,h={edgeId:i.id,source:r,target:o,sourceHandle:s,targetHandle:a};t.set(i.id,i),e.set(c,u.set(`${o}-${a}`,h)),e.set(l,f.set(`${r}-${s}`,h))}}function yc(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:yc(n,t):!1}function za(e,t,n){let i=e;do{if(i!=null&&i.matches(t))return!0;if(i===n)return!1;i=i.parentElement}while(i);return!1}function Mv(e,t,n,i){const r=new Map;for(const[o,s]of e)if((s.selected||s.id===i)&&(!s.parentId||!yc(s,e))&&(s.draggable||t&&typeof s.draggable>"u")){const a=e.get(o);a&&r.set(o,{id:o,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return r}function xo({nodeId:e,dragItems:t,nodeLookup:n,dragging:i=!0}){var s,a,c;const r=[];for(const[l,u]of t){const f=(s=n.get(l))==null?void 0:s.internals.userNode;f&&r.push({...f,position:u.position,dragging:i})}if(!e)return[r[0],r];const o=(a=n.get(e))==null?void 0:a.internals.userNode;return[o?{...o,position:((c=t.get(e))==null?void 0:c.position)||o.position,dragging:i}:r[0],r]}function Pv({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:i,onDragStop:r}){let o={x:null,y:null},s=0,a=new Map,c=!1,l={x:0,y:0},u=null,f=!1,h=null,g=!1;function y({noDragClassName:N,handleSelector:w,domNode:m,isSelectable:E,nodeId:k,nodeClickDistance:_=0}){h=_t(m);function S({x:O,y:L},V){const{nodeLookup:H,nodeExtent:x,snapGrid:T,snapToGrid:b,nodeOrigin:M,onNodeDrag:I,onSelectionDrag:A,onError:X,updateNodePositions:K}=t();o={x:O,y:L};let U=!1,te={x:0,y:0,x2:0,y2:0};if(a.size>1&&x){const B=sr(a);te=$o(B)}for(const[B,J]of a){if(!H.has(B))continue;let ne={x:O-J.distance.x,y:L-J.distance.y};b&&(ne=Ss(ne,T));let ue=[[x[0][0],x[0][1]],[x[1][0],x[1][1]]];if(a.size>1&&x&&!J.extent){const{positionAbsolute:$}=J.internals,j=$.x-te.x+x[0][0],ve=$.x+J.measured.width-te.x2+x[1][0],xe=$.y-te.y+x[0][1],me=$.y+J.measured.height-te.y2+x[1][1];ue=[[j,xe],[ve,me]]}const{position:fe,positionAbsolute:Z}=rv({nodeId:B,nextPosition:ne,nodeLookup:H,nodeExtent:ue,nodeOrigin:M,onError:X});U=U||J.position.x!==fe.x||J.position.y!==fe.y,J.position=fe,J.internals.positionAbsolute=Z}if(U&&(K(a,!0),V&&(i||I||!k&&A))){const[B,J]=xo({nodeId:k,dragItems:a,nodeLookup:H});i==null||i(V,a,B,J),I==null||I(V,B,J),k||A==null||A(V,J)}}async function C(){if(!u)return;const{transform:O,panBy:L,autoPanSpeed:V}=t(),[H,x]=ac(l,u,V);(H!==0||x!==0)&&(o.x=(o.x??0)-H/O[2],o.y=(o.y??0)-x/O[2],await L({x:H,y:x})&&S(o,null)),s=requestAnimationFrame(C)}function z(O){var U;const{nodeLookup:L,multiSelectionActive:V,nodesDraggable:H,transform:x,snapGrid:T,snapToGrid:b,selectNodesOnDrag:M,onNodeDragStart:I,onSelectionDragStart:A,unselectNodesAndEdges:X}=t();f=!0,(!M||!E)&&!V&&k&&((U=L.get(k))!=null&&U.selected||X()),E&&M&&k&&(e==null||e(k));const K=pi(O.sourceEvent,{transform:x,snapGrid:T,snapToGrid:b,containerBounds:u});if(o=K,a=Mv(L,H,K,k),a.size>0&&(n||I||!k&&A)){const[te,B]=xo({nodeId:k,dragItems:a,nodeLookup:L});n==null||n(O.sourceEvent,a,te,B),I==null||I(O.sourceEvent,te,B),k||A==null||A(O.sourceEvent,B)}}const P=Yl().clickDistance(_).on("start",O=>{const{domNode:L,nodeDragThreshold:V,transform:H,snapGrid:x,snapToGrid:T}=t();u=(L==null?void 0:L.getBoundingClientRect())||null,g=!1,V===0&&z(O),o=pi(O.sourceEvent,{transform:H,snapGrid:x,snapToGrid:T,containerBounds:u}),l=Jt(O.sourceEvent,u)}).on("drag",O=>{const{autoPanOnNodeDrag:L,transform:V,snapGrid:H,snapToGrid:x,nodeDragThreshold:T,nodeLookup:b}=t(),M=pi(O.sourceEvent,{transform:V,snapGrid:H,snapToGrid:x,containerBounds:u});if((O.sourceEvent.type==="touchmove"&&O.sourceEvent.touches.length>1||k&&!b.has(k))&&(g=!0),!g){if(!c&&L&&f&&(c=!0,C()),!f){const I=M.xSnapped-(o.x??0),A=M.ySnapped-(o.y??0);Math.sqrt(I*I+A*A)>T&&z(O)}(o.x!==M.xSnapped||o.y!==M.ySnapped)&&a&&f&&(l=Jt(O.sourceEvent,u),S(M,O.sourceEvent))}}).on("end",O=>{if(!(!f||g)&&(c=!1,f=!1,cancelAnimationFrame(s),a.size>0)){const{nodeLookup:L,updateNodePositions:V,onNodeDragStop:H,onSelectionDragStop:x}=t();if(V(a,!1),r||H||!k&&x){const[T,b]=xo({nodeId:k,dragItems:a,nodeLookup:L,dragging:!1});r==null||r(O.sourceEvent,a,T,b),H==null||H(O.sourceEvent,T,b),k||x==null||x(O.sourceEvent,b)}}}).filter(O=>{const L=O.target;return!O.button&&(!N||!za(L,`.${N}`,m))&&(!w||za(L,w,m))});h.call(P)}function p(){h==null||h.on(".drag",null)}return{update:y,destroy:p}}function zv(e,t,n){const i=[],r={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const o of t.values())Mi(r,Zn(o))>0&&i.push(o);return i}const Av=250;function Iv(e,t,n,i){var a,c;let r=[],o=1/0;const s=zv(e,n,t+Av);for(const l of s){const u=[...((a=l.internals.handleBounds)==null?void 0:a.source)??[],...((c=l.internals.handleBounds)==null?void 0:c.target)??[]];for(const f of u){if(i.nodeId===f.nodeId&&i.type===f.type&&i.id===f.id)continue;const{x:h,y:g}=Pi(l,f,f.position,!0),y=Math.sqrt(Math.pow(h-e.x,2)+Math.pow(g-e.y,2));y>t||(y<o?(r=[{...f,x:h,y:g}],o=y):y===o&&r.push({...f,x:h,y:g}))}}if(!r.length)return null;if(r.length>1){const l=i.type==="source"?"target":"source";return r.find(u=>u.type===l)??r[0]}return r[0]}function pc(e,t,n,i,r,o=!1){var l,u,f;const s=i.get(e);if(!s)return null;const a=r==="strict"?(l=s.internals.handleBounds)==null?void 0:l[t]:[...((u=s.internals.handleBounds)==null?void 0:u.source)??[],...((f=s.internals.handleBounds)==null?void 0:f.target)??[]],c=(n?a==null?void 0:a.find(h=>h.id===n):a==null?void 0:a[0])??null;return c&&o?{...c,...Pi(s,c,c.position,!0)}:c}function _c(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Tv(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const wc=()=>!0;function Ov(e,{connectionMode:t,connectionRadius:n,handleId:i,nodeId:r,edgeUpdaterType:o,isTarget:s,domNode:a,nodeLookup:c,lib:l,autoPanOnConnect:u,flowId:f,panBy:h,cancelConnection:g,onConnectStart:y,onConnect:p,onConnectEnd:N,isValidConnection:w=wc,onReconnectEnd:m,updateConnection:E,getTransform:k,getFromHandle:_,autoPanSpeed:S}){const C=av(e.target);let z=0,P;const{x:O,y:L}=Jt(e),V=C==null?void 0:C.elementFromPoint(O,L),H=_c(o,V),x=a==null?void 0:a.getBoundingClientRect();if(!x||!H)return;const T=pc(r,H,i,c,t);if(!T)return;let b=Jt(e,x),M=!1,I=null,A=!1,X=null;function K(){if(!u||!x)return;const[Z,$]=ac(b,x,S);h({x:Z,y:$}),z=requestAnimationFrame(K)}const U={...T,nodeId:r,type:H,position:T.position},te=c.get(r),J={inProgress:!0,isValid:null,from:Pi(te,U,he.Left,!0),fromHandle:U,fromPosition:U.position,fromNode:te,to:b,toHandle:null,toPosition:ya[U.position],toNode:null};E(J);let ne=J;y==null||y(e,{nodeId:r,handleId:i,handleType:H});function ue(Z){if(!_()||!U){fe(Z);return}const $=k();b=Jt(Z,x),P=Iv(ar(b,$,!1,[1,1]),n,c,U),M||(K(),M=!0);const j=xc(Z,{handle:P,connectionMode:t,fromNodeId:r,fromHandleId:i,fromType:s?"target":"source",isValidConnection:w,doc:C,lib:l,flowId:f,nodeLookup:c});X=j.handleDomNode,I=j.connection,A=Tv(!!P,j.isValid);const ve={...ne,isValid:A,to:P&&A?cc({x:P.x,y:P.y},$):b,toHandle:j.toHandle,toPosition:A&&j.toHandle?j.toHandle.position:ya[U.position],toNode:j.toHandle?c.get(j.toHandle.nodeId):null};A&&P&&ne.toHandle&&ve.toHandle&&ne.toHandle.type===ve.toHandle.type&&ne.toHandle.nodeId===ve.toHandle.nodeId&&ne.toHandle.id===ve.toHandle.id&&ne.to.x===ve.to.x&&ne.to.y===ve.to.y||(E(ve),ne=ve)}function fe(Z){(P||X)&&I&&A&&(p==null||p(I));const{inProgress:$,...j}=ne,ve={...j,toPosition:ne.toHandle?ne.toPosition:null};N==null||N(Z,ve),o&&(m==null||m(Z,ve)),g(),cancelAnimationFrame(z),M=!1,A=!1,I=null,X=null,C.removeEventListener("mousemove",ue),C.removeEventListener("mouseup",fe),C.removeEventListener("touchmove",ue),C.removeEventListener("touchend",fe)}C.addEventListener("mousemove",ue),C.addEventListener("mouseup",fe),C.addEventListener("touchmove",ue),C.addEventListener("touchend",fe)}function xc(e,{handle:t,connectionMode:n,fromNodeId:i,fromHandleId:r,fromType:o,doc:s,lib:a,flowId:c,isValidConnection:l=wc,nodeLookup:u}){const f=o==="target",h=t?s.querySelector(`.${a}-flow__handle[data-id="${c}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:g,y}=Jt(e),p=s.elementFromPoint(g,y),N=p!=null&&p.classList.contains(`${a}-flow__handle`)?p:h,w={handleDomNode:N,isValid:!1,connection:null,toHandle:null};if(N){const m=_c(void 0,N),E=N.getAttribute("data-nodeid"),k=N.getAttribute("data-handleid"),_=N.classList.contains("connectable"),S=N.classList.contains("connectableend");if(!E||!m)return w;const C={source:f?E:i,sourceHandle:f?k:r,target:f?i:E,targetHandle:f?r:k};w.connection=C;const P=_&&S&&(n===Mn.Strict?f&&m==="source"||!f&&m==="target":E!==i||k!==r);w.isValid=P&&l(C),w.toHandle=pc(E,m,k,u,n,!1)}return w}const Hv={onPointerDown:Ov,isValid:xc};function Dv({domNode:e,panZoom:t,getTransform:n,getViewScale:i}){const r=_t(e);function o({translateExtent:a,width:c,height:l,zoomStep:u=10,pannable:f=!0,zoomable:h=!0,inversePan:g=!1}){const y=E=>{const k=n();if(E.sourceEvent.type!=="wheel"||!t)return;const _=-E.sourceEvent.deltaY*(E.sourceEvent.deltaMode===1?.05:E.sourceEvent.deltaMode?1:.002)*u,S=k[2]*Math.pow(2,_);t.scaleTo(S)};let p=[0,0];const N=E=>{(E.sourceEvent.type==="mousedown"||E.sourceEvent.type==="touchstart")&&(p=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY])},w=E=>{const k=n();if(E.sourceEvent.type!=="mousemove"&&E.sourceEvent.type!=="touchmove"||!t)return;const _=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY],S=[_[0]-p[0],_[1]-p[1]];p=_;const C=i()*Math.max(k[2],Math.log(k[2]))*(g?-1:1),z={x:k[0]-S[0]*C,y:k[1]-S[1]*C},P=[[0,0],[c,l]];t.setViewportConstrained({x:z.x,y:z.y,zoom:k[2]},P,a)},m=nc().on("start",N).on("zoom",f?w:null).on("zoom.wheel",h?y:null);r.call(m,{})}function s(){r.on("zoom",null)}return{update:o,destroy:s,pointer:Mt}}const Rv=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,lo=e=>({x:e.x,y:e.y,zoom:e.k}),bo=({x:e,y:t,zoom:n})=>oo.translate(e,t).scale(n),Dn=(e,t)=>e.target.closest(`.${t}`),bc=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Eo=(e,t=0,n=()=>{})=>{const i=typeof t=="number"&&t>0;return i||n(),i?e.transition().duration(t).on("end",n):e},Ec=e=>{const t=e.ctrlKey&&Xr()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Lv({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:i,panOnScrollMode:r,panOnScrollSpeed:o,zoomOnPinch:s,onPanZoomStart:a,onPanZoom:c,onPanZoomEnd:l}){return u=>{if(Dn(u,t))return!1;u.preventDefault(),u.stopImmediatePropagation();const f=n.property("__zoom").k||1;if(u.ctrlKey&&s){const N=Mt(u),w=Ec(u),m=f*Math.pow(2,w);i.scaleTo(n,m,N,u);return}const h=u.deltaMode===1?20:1;let g=r===vn.Vertical?0:u.deltaX*h,y=r===vn.Horizontal?0:u.deltaY*h;!Xr()&&u.shiftKey&&r!==vn.Vertical&&(g=u.deltaY*h,y=0),i.translateBy(n,-(g/f)*o,-(y/f)*o,{internal:!0});const p=lo(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,a==null||a(u,p)),e.isPanScrolling&&(c==null||c(u,p),e.panScrollTimeout=setTimeout(()=>{l==null||l(u,p),e.isPanScrolling=!1},150))}}function Vv({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(i,r){if(!t&&i.type==="wheel"&&!i.ctrlKey||Dn(i,e))return null;i.preventDefault(),n.call(this,i,r)}}function Xv({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return i=>{var o,s,a;if((o=i.sourceEvent)!=null&&o.internal)return;const r=lo(i.transform);e.mouseButton=((s=i.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=r,((a=i.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(i.sourceEvent,r))}}function Yv({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:i,onPanZoom:r}){return o=>{var s,a;e.usedRightMouseButton=!!(n&&bc(t,e.mouseButton??0)),(s=o.sourceEvent)!=null&&s.sync||i([o.transform.x,o.transform.y,o.transform.k]),r&&!((a=o.sourceEvent)!=null&&a.internal)&&(r==null||r(o.sourceEvent,lo(o.transform)))}}function Wv({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:r,onPaneContextMenu:o}){return s=>{var a;if(!((a=s.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,o&&bc(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&o(s.sourceEvent),e.usedRightMouseButton=!1,i(!1),r&&Rv(e.prevViewport,s.transform))){const c=lo(s.transform);e.prevViewport=c,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{r==null||r(s.sourceEvent,c)},n?150:0)}}}function Bv({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:i,panOnScroll:r,zoomOnDoubleClick:o,userSelectionActive:s,noWheelClassName:a,noPanClassName:c,lib:l}){return u=>{var y;const f=e||t,h=n&&u.ctrlKey;if(u.button===1&&u.type==="mousedown"&&(Dn(u,`${l}-flow__node`)||Dn(u,`${l}-flow__edge`)))return!0;if(!i&&!f&&!r&&!o&&!n||s||Dn(u,a)&&u.type==="wheel"||Dn(u,c)&&(u.type!=="wheel"||r&&u.type==="wheel"&&!e)||!n&&u.ctrlKey&&u.type==="wheel")return!1;if(!n&&u.type==="touchstart"&&((y=u.touches)==null?void 0:y.length)>1)return u.preventDefault(),!1;if(!f&&!r&&!h&&u.type==="wheel"||!i&&(u.type==="mousedown"||u.type==="touchstart")||Array.isArray(i)&&!i.includes(u.button)&&u.type==="mousedown")return!1;const g=Array.isArray(i)&&i.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||u.type==="wheel")&&g}}function Kv({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:i,translateExtent:r,viewport:o,onPanZoom:s,onPanZoomStart:a,onPanZoomEnd:c,onDraggingChange:l}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=e.getBoundingClientRect(),h=nc().clickDistance(!Zt(i)||i<0?0:i).scaleExtent([t,n]).translateExtent(r),g=_t(e).call(h);E({x:o.x,y:o.y,zoom:Gn(o.zoom,t,n)},[[0,0],[f.width,f.height]],r);const y=g.on("wheel.zoom"),p=g.on("dblclick.zoom");h.wheelDelta(Ec);function N(V,H){return g?new Promise(x=>{h==null||h.transform(Eo(g,H==null?void 0:H.duration,()=>x(!0)),V)}):Promise.resolve(!1)}function w({noWheelClassName:V,noPanClassName:H,onPaneContextMenu:x,userSelectionActive:T,panOnScroll:b,panOnDrag:M,panOnScrollMode:I,panOnScrollSpeed:A,preventScrolling:X,zoomOnPinch:K,zoomOnScroll:U,zoomOnDoubleClick:te,zoomActivationKeyPressed:B,lib:J,onTransformChange:ne}){T&&!u.isZoomingOrPanning&&m();const fe=b&&!B&&!T?Lv({zoomPanValues:u,noWheelClassName:V,d3Selection:g,d3Zoom:h,panOnScrollMode:I,panOnScrollSpeed:A,zoomOnPinch:K,onPanZoomStart:a,onPanZoom:s,onPanZoomEnd:c}):Vv({noWheelClassName:V,preventScrolling:X,d3ZoomHandler:y});if(g.on("wheel.zoom",fe,{passive:!1}),!T){const $=Xv({zoomPanValues:u,onDraggingChange:l,onPanZoomStart:a});h.on("start",$);const j=Yv({zoomPanValues:u,panOnDrag:M,onPaneContextMenu:!!x,onPanZoom:s,onTransformChange:ne});h.on("zoom",j);const ve=Wv({zoomPanValues:u,panOnDrag:M,panOnScroll:b,onPaneContextMenu:x,onPanZoomEnd:c,onDraggingChange:l});h.on("end",ve)}const Z=Bv({zoomActivationKeyPressed:B,panOnDrag:M,zoomOnScroll:U,panOnScroll:b,zoomOnDoubleClick:te,zoomOnPinch:K,userSelectionActive:T,noPanClassName:H,noWheelClassName:V,lib:J});h.filter(Z),te?g.on("dblclick.zoom",p):g.on("dblclick.zoom",null)}function m(){h.on("zoom",null)}async function E(V,H,x){const T=bo(V),b=h==null?void 0:h.constrain()(T,H,x);return b&&await N(b),new Promise(M=>M(b))}async function k(V,H){const x=bo(V);return await N(x,H),new Promise(T=>T(x))}function _(V){if(g){const H=bo(V),x=g.property("__zoom");(x.k!==V.zoom||x.x!==V.x||x.y!==V.y)&&(h==null||h.transform(g,H,null,{sync:!0}))}}function S(){const V=g?tc(g.node()):{x:0,y:0,k:1};return{x:V.x,y:V.y,zoom:V.k}}function C(V,H){return g?new Promise(x=>{h==null||h.scaleTo(Eo(g,H==null?void 0:H.duration,()=>x(!0)),V)}):Promise.resolve(!1)}function z(V,H){return g?new Promise(x=>{h==null||h.scaleBy(Eo(g,H==null?void 0:H.duration,()=>x(!0)),V)}):Promise.resolve(!1)}function P(V){h==null||h.scaleExtent(V)}function O(V){h==null||h.translateExtent(V)}function L(V){const H=!Zt(V)||V<0?0:V;h==null||h.clickDistance(H)}return{update:w,destroy:m,setViewport:k,setViewportConstrained:E,getViewport:S,scaleTo:C,scaleBy:z,setScaleExtent:P,setTranslateExtent:O,syncViewport:_,setClickDistance:L}}var cn;(function(e){e.Line="line",e.Handle="handle"})(cn||(cn={}));const Fv=["top-left","top-right","bottom-left","bottom-right"],qv=["top","right","bottom","left"];function Gv({width:e,prevWidth:t,height:n,prevHeight:i,affectsX:r,affectsY:o}){const s=e-t,a=n-i,c=[s>0?1:s<0?-1:0,a>0?1:a<0?-1:0];return s&&r&&(c[0]=c[0]*-1),a&&o&&(c[1]=c[1]*-1),c}function Zv(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),i=e.includes("left"),r=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:i,affectsY:r}}function on(e,t){return Math.max(0,t-e)}function sn(e,t){return Math.max(0,e-t)}function yr(e,t,n){return Math.max(0,t-e,e-n)}function Aa(e,t){return e?!t:t}function Uv(e,t,n,i,r,o,s,a){let{affectsX:c,affectsY:l}=t;const{isHorizontal:u,isVertical:f}=t,h=u&&f,{xSnapped:g,ySnapped:y}=n,{minWidth:p,maxWidth:N,minHeight:w,maxHeight:m}=i,{x:E,y:k,width:_,height:S,aspectRatio:C}=e;let z=Math.floor(u?g-e.pointerX:0),P=Math.floor(f?y-e.pointerY:0);const O=_+(c?-z:z),L=S+(l?-P:P),V=-o[0]*_,H=-o[1]*S;let x=yr(O,p,N),T=yr(L,w,m);if(s){let I=0,A=0;c&&z<0?I=on(E+z+V,s[0][0]):!c&&z>0&&(I=sn(E+O+V,s[1][0])),l&&P<0?A=on(k+P+H,s[0][1]):!l&&P>0&&(A=sn(k+L+H,s[1][1])),x=Math.max(x,I),T=Math.max(T,A)}if(a){let I=0,A=0;c&&z>0?I=sn(E+z,a[0][0]):!c&&z<0&&(I=on(E+O,a[1][0])),l&&P>0?A=sn(k+P,a[0][1]):!l&&P<0&&(A=on(k+L,a[1][1])),x=Math.max(x,I),T=Math.max(T,A)}if(r){if(u){const I=yr(O/C,w,m)*C;if(x=Math.max(x,I),s){let A=0;!c&&!l||c&&!l&&h?A=sn(k+H+O/C,s[1][1])*C:A=on(k+H+(c?z:-z)/C,s[0][1])*C,x=Math.max(x,A)}if(a){let A=0;!c&&!l||c&&!l&&h?A=on(k+O/C,a[1][1])*C:A=sn(k+(c?z:-z)/C,a[0][1])*C,x=Math.max(x,A)}}if(f){const I=yr(L*C,p,N)/C;if(T=Math.max(T,I),s){let A=0;!c&&!l||l&&!c&&h?A=sn(E+L*C+V,s[1][0])/C:A=on(E+(l?P:-P)*C+V,s[0][0])/C,T=Math.max(T,A)}if(a){let A=0;!c&&!l||l&&!c&&h?A=on(E+L*C,a[1][0])/C:A=sn(E+(l?P:-P)*C,a[0][0])/C,T=Math.max(T,A)}}}P=P+(P<0?T:-T),z=z+(z<0?x:-x),r&&(h?O>L*C?P=(Aa(c,l)?-z:z)/C:z=(Aa(c,l)?-P:P)*C:u?(P=z/C,l=c):(z=P*C,c=l));const b=c?E+z:E,M=l?k+P:k;return{width:_+(c?-z:z),height:S+(l?-P:P),x:o[0]*z*(c?-1:1)+b,y:o[1]*P*(l?-1:1)+M}}const kc={width:0,height:0,x:0,y:0},$v={...kc,pointerX:0,pointerY:0,aspectRatio:1};function Jv(e){return[[0,0],[e.measured.width,e.measured.height]]}function jv(e,t,n){const i=t.position.x+e.position.x,r=t.position.y+e.position.y,o=e.measured.width??0,s=e.measured.height??0,a=n[0]*o,c=n[1]*s;return[[i-a,r-c],[i+o-a,r+s-c]]}function Qv({domNode:e,nodeId:t,getStoreItems:n,onChange:i,onEnd:r}){const o=_t(e);function s({controlPosition:c,boundaries:l,keepAspectRatio:u,onResizeStart:f,onResize:h,onResizeEnd:g,shouldResize:y}){let p={...kc},N={...$v};const w=Zv(c);let m,E=null,k=[],_,S,C;const z=Yl().on("start",P=>{const{nodeLookup:O,transform:L,snapGrid:V,snapToGrid:H,nodeOrigin:x,paneDomNode:T}=n();if(m=O.get(t),!m)return;E=(T==null?void 0:T.getBoundingClientRect())??null;const{xSnapped:b,ySnapped:M}=pi(P.sourceEvent,{transform:L,snapGrid:V,snapToGrid:H,containerBounds:E});p={width:m.measured.width??0,height:m.measured.height??0,x:m.position.x??0,y:m.position.y??0},N={...p,pointerX:b,pointerY:M,aspectRatio:p.width/p.height},_=void 0,m.parentId&&(m.extent==="parent"||m.expandParent)&&(_=O.get(m.parentId),S=_&&m.extent==="parent"?Jv(_):void 0),k=[],C=void 0;for(const[I,A]of O)if(A.parentId===t&&(k.push({id:I,position:{...A.position},extent:A.extent}),A.extent==="parent"||A.expandParent)){const X=jv(A,m,A.origin??x);C?C=[[Math.min(X[0][0],C[0][0]),Math.min(X[0][1],C[0][1])],[Math.max(X[1][0],C[1][0]),Math.max(X[1][1],C[1][1])]]:C=X}f==null||f(P,{...p})}).on("drag",P=>{const{transform:O,snapGrid:L,snapToGrid:V,nodeOrigin:H}=n(),x=pi(P.sourceEvent,{transform:O,snapGrid:L,snapToGrid:V,containerBounds:E}),T=[];if(!m)return;const{x:b,y:M,width:I,height:A}=p,X={},K=m.origin??H,{width:U,height:te,x:B,y:J}=Uv(N,w,x,l,u,K,S,C),ne=U!==I,ue=te!==A,fe=B!==b&&ne,Z=J!==M&&ue;if(!fe&&!Z&&!ne&&!ue)return;if((fe||Z||K[0]===1||K[1]===1)&&(X.x=fe?B:p.x,X.y=Z?J:p.y,p.x=X.x,p.y=X.y,k.length>0)){const xe=B-b,me=J-M;for(const ke of k)ke.position={x:ke.position.x-xe+K[0]*(U-I),y:ke.position.y-me+K[1]*(te-A)},T.push(ke)}if((ne||ue)&&(X.width=ne?U:p.width,X.height=ue?te:p.height,p.width=X.width,p.height=X.height),_&&m.expandParent){const xe=K[0]*(X.width??0);X.x&&X.x<xe&&(p.x=xe,N.x=N.x-(X.x-xe));const me=K[1]*(X.height??0);X.y&&X.y<me&&(p.y=me,N.y=N.y-(X.y-me))}const $=Gv({width:p.width,prevWidth:I,height:p.height,prevHeight:A,affectsX:w.affectsX,affectsY:w.affectsY}),j={...p,direction:$};(y==null?void 0:y(P,j))!==!1&&(h==null||h(P,j),i(X,T))}).on("end",P=>{g==null||g(P,{...p}),r==null||r()});o.call(z)}function a(){o.on(".drag",null)}return{update:s,destroy:a}}var e0=se('<div role="button" tabindex="-1"><!></div>');function _n(e,t){le(t,!1);const n=Ue(),i=()=>q(U,"$connectable",n),r=()=>q(ue,"$connectionRadius",n),o=()=>q(J,"$domNode",n),s=()=>q(ne,"$nodeLookup",n),a=()=>q(B,"$connectionMode",n),c=()=>q($,"$lib",n),l=()=>q(Ce,"$autoPanOnConnect",n),u=()=>q(Ge,"$flowId",n),f=()=>q(Z,"$isValidConnectionStore",n),h=()=>q(ve,"$onedgecreate",n),g=()=>q(qe,"$onConnectAction",n),y=()=>q(Ne,"$onConnectStartAction",n),p=()=>q(we,"$onConnectEndAction",n),N=()=>q(fe,"$viewport",n),w=()=>q(mt,"$connection",n),m=()=>q(Be,"$edges",n),E=()=>q(Le,"$connectionLookup",n),k=F(),_=F(),S=F(),C=F(),z=F(),P=F(),O=F(),L=F();let V=v(t,"id",8,void 0),H=v(t,"type",8,"source"),x=v(t,"position",24,()=>he.Top),T=v(t,"style",8,void 0),b=v(t,"isValidConnection",8,void 0),M=v(t,"onconnect",8,void 0),I=v(t,"ondisconnect",8,void 0),A=v(t,"isConnectable",8,void 0),X=v(t,"class",8,void 0);const K=Kn("svelteflow__node_id"),U=Kn("svelteflow__node_connectable"),te=Fe(),{connectionMode:B,domNode:J,nodeLookup:ne,connectionRadius:ue,viewport:fe,isValidConnection:Z,lib:$,addEdge:j,onedgecreate:ve,panBy:xe,cancelConnection:me,updateConnection:ke,autoPanOnConnect:Ce,edges:Be,connectionLookup:Le,onconnect:qe,onconnectstart:Ne,onconnectend:we,flowId:Ge,connection:mt}=te;function Ae($e){const et=dc($e);(et&&$e.button===0||!et)&&Hv.onPointerDown($e,{handleId:d(S),nodeId:K,isTarget:d(k),connectionRadius:r(),domNode:o(),nodeLookup:s(),connectionMode:a(),lib:c(),autoPanOnConnect:l(),flowId:u(),isValidConnection:b()??f(),updateConnection:ke,cancelConnection:me,panBy:xe,onConnect:Me=>{var bt;const nt=h()?h()(Me):Me;nt&&(j(nt),(bt=g())==null||bt(Me))},onConnectStart:(Me,nt)=>{var bt;(bt=y())==null||bt(Me,{nodeId:nt.nodeId,handleId:nt.handleId,handleType:nt.handleType})},onConnectEnd:(Me,nt)=>{var bt;(bt=p())==null||bt(Me,nt)},getTransform:()=>[N().x,N().y,N().zoom],getFromHandle:()=>w().fromHandle})}let je=F(null),Ke=F();G(()=>Y(H()),()=>{D(k,H()==="target")}),G(()=>(Y(A()),i()),()=>{D(_,A()!==void 0?A():i())}),G(()=>Y(V()),()=>{D(S,V()||null)}),G(()=>(Y(M()),Y(I()),m(),E(),Y(H()),Y(V())),()=>{(M()||I())&&(m(),D(Ke,E().get(`${K}-${H()}-${V()||null}`)))}),G(()=>(d(je),d(Ke),Y(I()),Y(M())),()=>{if(d(je)&&!ic(d(Ke),d(je))){const $e=d(Ke)??new Map;pa(d(je),$e,I()),pa($e,d(je),M())}D(je,d(Ke)??new Map)}),G(()=>w(),()=>{D(C,!!w().fromHandle)}),G(()=>(w(),Y(H()),d(S)),()=>{var $e,et,Me;D(z,(($e=w().fromHandle)==null?void 0:$e.nodeId)===K&&((et=w().fromHandle)==null?void 0:et.type)===H()&&((Me=w().fromHandle)==null?void 0:Me.id)===d(S))}),G(()=>(w(),Y(H()),d(S)),()=>{var $e,et,Me;D(P,(($e=w().toHandle)==null?void 0:$e.nodeId)===K&&((et=w().toHandle)==null?void 0:et.type)===H()&&((Me=w().toHandle)==null?void 0:Me.id)===d(S))}),G(()=>(a(),w(),Y(H()),d(S)),()=>{var $e,et,Me;D(O,a()===Mn.Strict?(($e=w().fromHandle)==null?void 0:$e.type)!==H():K!==((et=w().fromHandle)==null?void 0:et.nodeId)||d(S)!==((Me=w().fromHandle)==null?void 0:Me.id))}),G(()=>(d(P),w()),()=>{D(L,d(P)&&w().isValid)}),rt(),ge();var Oe=e0();Q(Oe,"data-nodeid",K);const xn=oe(()=>Ht(at(["svelte-flow__handle",`svelte-flow__handle-${x()}`,"nodrag","nopan",x(),X()])));var Tn=ee(Oe);Re(Tn,t,"default",{}),pe(()=>{Q(Oe,"data-handleid",d(S)),Q(Oe,"data-handlepos",x()),Q(Oe,"data-id",`${u()??""}-${K??""}-${(V()||null)??""}-${H()??""}`),ms(Oe,d(xn),""),Q(Oe,"style",T()),Ye(Oe,"valid",d(L)),Ye(Oe,"connectingto",d(P)),Ye(Oe,"connectingfrom",d(z)),Ye(Oe,"source",!d(k)),Ye(Oe,"target",d(k)),Ye(Oe,"connectablestart",d(_)),Ye(Oe,"connectableend",d(_)),Ye(Oe,"connectable",d(_)),Ye(Oe,"connectionindicator",d(_)&&(!d(C)||d(O)))}),Pe("mousedown",Oe,Ae),Pe("touchstart",Oe,Ae),W(e,Oe),ce()}var t0=se("<!> <!>",1);function Qo(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);_e(n,["data","targetPosition","sourcePosition"]),le(t,!1);let i=v(t,"data",24,()=>({label:"Node"})),r=v(t,"targetPosition",8,void 0),o=v(t,"sourcePosition",8,void 0);ge();var s=t0(),a=ae(s),c=oe(()=>r()??he.Top);_n(a,{type:"target",get position(){return d(c)}});var l=re(a),u=re(l),f=oe(()=>o()??he.Bottom);_n(u,{type:"source",get position(){return d(f)}}),pe(()=>{var h;return en(l,` ${((h=i())==null?void 0:h.label)??""} `)}),W(e,s),ce()}var n0=se(" <!>",1);function i0(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);_e(n,["data","sourcePosition"]),le(t,!1);let i=v(t,"data",24,()=>({label:"Node"})),r=v(t,"sourcePosition",8,void 0);ge();var o=n0(),s=ae(o),a=re(s),c=oe(()=>r()??he.Bottom);_n(a,{type:"source",get position(){return d(c)}}),pe(()=>{var l;return en(s,`${((l=i())==null?void 0:l.label)??""} `)}),W(e,o),ce()}var r0=se(" <!>",1);function o0(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);_e(n,["data","targetPosition"]),le(t,!1);let i=v(t,"data",24,()=>({label:"Node"})),r=v(t,"targetPosition",8,void 0);ge();var o=r0(),s=ae(o),a=re(s),c=oe(()=>r()??he.Top);_n(a,{type:"target",get position(){return d(c)}}),pe(()=>{var l;return en(s,`${((l=i())==null?void 0:l.label)??""} `)}),W(e,o),ce()}function s0(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);_e(n,[])}function Ia(e,t,n){if(!t)return;const i=n?t.querySelector(n):t;i&&i.appendChild(e)}function ko(e,{target:t,domNode:n}){return Ia(e,n,t),{async update({target:i,domNode:r}){Ia(e,r,i)},destroy(){e.parentNode&&e.parentNode.removeChild(e)}}}var a0=se("<div><!></div>");function l0(e,t){le(t,!1);const n=Ue(),i=()=>q(r,"$domNode",n),{domNode:r}=Fe();ge();var o=a0(),s=ee(o);Re(s,t,"default",{}),ut(o,(a,c)=>ko==null?void 0:ko(a,c),()=>({target:".svelte-flow__edgelabel-renderer",domNode:i()})),W(e,o),ce()}function Sc(){const{edgeLookup:e,selectionRect:t,selectionRectMode:n,multiselectionKeyPressed:i,addSelectedEdges:r,unselectNodesAndEdges:o,elementsSelectable:s}=Fe();return a=>{const c=R(e).get(a);if(!c){console.warn("012",rr.error012(a));return}(c.selectable||R(s)&&typeof c.selectable>"u")&&(t.set(null),n.set(null),c.selected?c.selected&&R(i)&&o({nodes:[],edges:[c]}):r([a]))}}var c0=se('<div class="svelte-flow__edge-label" role="button" tabindex="-1"><!></div>');function u0(e,t){le(t,!1);let n=v(t,"style",8,void 0),i=v(t,"x",8,void 0),r=v(t,"y",8,void 0);const o=Sc(),s=Kn("svelteflow__edge_id");ge(),l0(e,{children:(a,c)=>{var l=c0(),u=ee(l);Re(u,t,"default",{}),pe(()=>{Q(l,"style","pointer-events: all;"+n()),We(l,"transform",`translate(-50%, -50%) translate(${i()??""}px,${r()??""}px)`)}),Pe("keyup",l,()=>{}),Pe("click",l,()=>{s&&o(s)}),W(a,l)},$$slots:{default:!0}}),ce()}var d0=Je('<path fill="none" class="svelte-flow__edge-interaction"></path>'),f0=Je('<path fill="none"></path><!><!>',1);function co(e,t){le(t,!1);let n=v(t,"id",8,void 0),i=v(t,"path",8),r=v(t,"label",8,void 0),o=v(t,"labelX",8,void 0),s=v(t,"labelY",8,void 0),a=v(t,"labelStyle",8,void 0),c=v(t,"markerStart",8,void 0),l=v(t,"markerEnd",8,void 0),u=v(t,"style",8,void 0),f=v(t,"interactionWidth",8,20),h=v(t,"class",8,void 0),g=f()===void 0?20:f();ge();var y=f0(),p=ae(y);const N=oe(()=>Ht(at(["svelte-flow__edge-path",h()])));var w=re(p);{var m=_=>{var S=d0();Q(S,"stroke-opacity",0),Q(S,"stroke-width",g),pe(()=>Q(S,"d",i())),W(_,S)};ze(w,_=>{g&&_(m)})}var E=re(w);{var k=_=>{u0(_,{get x(){return o()},get y(){return s()},get style(){return a()},children:(S,C)=>{var z=Ro();pe(()=>en(z,r())),W(S,z)},$$slots:{default:!0}})};ze(E,_=>{r()&&_(k)})}pe(()=>{Q(p,"id",n()),Q(p,"d",i()),In(p,d(N),""),Q(p,"marker-start",c()),Q(p,"marker-end",l()),Q(p,"style",u())}),W(e,y),ce()}function es(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);_e(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),le(t,!1);const i=F(),r=F(),o=F();let s=v(t,"label",8,void 0),a=v(t,"labelStyle",8,void 0),c=v(t,"style",8,void 0),l=v(t,"markerStart",8,void 0),u=v(t,"markerEnd",8,void 0),f=v(t,"interactionWidth",8,void 0),h=v(t,"sourceX",8),g=v(t,"sourceY",8),y=v(t,"sourcePosition",8),p=v(t,"targetX",8),N=v(t,"targetY",8),w=v(t,"targetPosition",8);G(()=>(d(i),d(r),d(o),Y(h()),Y(g()),Y(p()),Y(N()),Y(y()),Y(w())),()=>{(m=>(D(i,m[0]),D(r,m[1]),D(o,m[2])))(fc({sourceX:h(),sourceY:g(),targetX:p(),targetY:N(),sourcePosition:y(),targetPosition:w()}))}),rt(),ge(),co(e,{get path(){return d(i)},get labelX(){return d(r)},get labelY(){return d(o)},get label(){return s()},get labelStyle(){return a()},get markerStart(){return l()},get markerEnd(){return u()},get interactionWidth(){return f()},get style(){return c()}}),ce()}function h0(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);_e(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),le(t,!1);const i=F(),r=F(),o=F();let s=v(t,"label",8,void 0),a=v(t,"labelStyle",8,void 0),c=v(t,"style",8,void 0),l=v(t,"markerStart",8,void 0),u=v(t,"markerEnd",8,void 0),f=v(t,"interactionWidth",8,void 0),h=v(t,"sourceX",8),g=v(t,"sourceY",8),y=v(t,"sourcePosition",8),p=v(t,"targetX",8),N=v(t,"targetY",8),w=v(t,"targetPosition",8);G(()=>(d(i),d(r),d(o),Y(h()),Y(g()),Y(p()),Y(N()),Y(y()),Y(w())),()=>{(m=>(D(i,m[0]),D(r,m[1]),D(o,m[2])))(Yr({sourceX:h(),sourceY:g(),targetX:p(),targetY:N(),sourcePosition:y(),targetPosition:w()}))}),rt(),ge(),co(e,{get path(){return d(i)},get labelX(){return d(r)},get labelY(){return d(o)},get label(){return s()},get labelStyle(){return a()},get markerStart(){return l()},get markerEnd(){return u()},get interactionWidth(){return f()},get style(){return c()}}),ce()}function g0(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);_e(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","targetX","targetY"]),le(t,!1);const i=F(),r=F(),o=F();let s=v(t,"label",8,void 0),a=v(t,"labelStyle",8,void 0),c=v(t,"style",8,void 0),l=v(t,"markerStart",8,void 0),u=v(t,"markerEnd",8,void 0),f=v(t,"interactionWidth",8,void 0),h=v(t,"sourceX",8),g=v(t,"sourceY",8),y=v(t,"targetX",8),p=v(t,"targetY",8);G(()=>(d(i),d(r),d(o),Y(h()),Y(g()),Y(y()),Y(p())),()=>{(N=>(D(i,N[0]),D(r,N[1]),D(o,N[2])))(Jo({sourceX:h(),sourceY:g(),targetX:y(),targetY:p()}))}),rt(),ge(),co(e,{get path(){return d(i)},get labelX(){return d(r)},get labelY(){return d(o)},get label(){return s()},get labelStyle(){return a()},get markerStart(){return l()},get markerEnd(){return u()},get interactionWidth(){return f()},get style(){return c()}}),ce()}function v0(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);_e(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),le(t,!1);const i=F(),r=F(),o=F();let s=v(t,"label",8,void 0),a=v(t,"labelStyle",8,void 0),c=v(t,"style",8,void 0),l=v(t,"markerStart",8,void 0),u=v(t,"markerEnd",8,void 0),f=v(t,"interactionWidth",8,void 0),h=v(t,"sourceX",8),g=v(t,"sourceY",8),y=v(t,"sourcePosition",8),p=v(t,"targetX",8),N=v(t,"targetY",8),w=v(t,"targetPosition",8);G(()=>(d(i),d(r),d(o),Y(h()),Y(g()),Y(p()),Y(N()),Y(y()),Y(w())),()=>{(m=>(D(i,m[0]),D(r,m[1]),D(o,m[2])))(Yr({sourceX:h(),sourceY:g(),targetX:p(),targetY:N(),sourcePosition:y(),targetPosition:w(),borderRadius:0}))}),rt(),ge(),co(e,{get path(){return d(i)},get labelX(){return d(r)},get labelY(){return d(o)},get label(){return s()},get labelStyle(){return a()},get markerStart(){return l()},get markerEnd(){return u()},get interactionWidth(){return f()},get style(){return c()}}),ce()}function m0(e,t){const n=e.set,i=t.set,r=R(e),o=R(t);let a=r.length===0&&o.length>0?o:r;e.set(a);const c=l=>{const u=n(l);return a=u,i(a),u};e.set=t.set=c,e.update=t.update=l=>c(l(a))}function y0(e,t){const n=e.set,i=t.set;let r=R(t);e.set(r);const o=s=>{n(s),i(s),r=s};e.set=t.set=o,e.update=t.update=s=>o(s(r))}const p0=(e,t,n)=>{if(!n)return;const i=R(e),r=t.set,o=n.set;let s=n?R(n):{x:0,y:0,zoom:1};t.set(s),t.set=a=>(r(a),o(a),s=a,a),n.set=a=>(i==null||i.syncViewport(a),r(a),o(a),s=a,a),t.update=a=>{t.set(a(s))},n.update=a=>{n.set(a(s))}},_0=(e,t,n,i=[0,0],r=Dr)=>{const{subscribe:o,set:s,update:a}=ie([]);let c=e,l={},u=!0;const f=p=>(gc(p,t,n,{elevateNodesOnSelect:u,nodeOrigin:i,nodeExtent:r,defaults:l,checkEquality:!1}),c=p,s(c),c),h=p=>f(p(c)),g=p=>{l=p},y=p=>{u=p.elevateNodesOnSelect??u};return f(c),{subscribe:o,set:f,update:h,setDefaultOptions:g,setOptions:y}},w0=(e,t,n,i)=>{const{subscribe:r,set:o,update:s}=ie([]);let a=e,c={};const l=h=>{const g=c?h.map(y=>({...c,...y})):h;mc(t,n,g),a=g,o(a)},u=h=>l(h(a)),f=h=>{c=h};return l(a),{subscribe:r,set:l,update:u,setDefaultOptions:f}},Cc={input:i0,output:o0,default:Qo,group:s0},Nc={straight:g0,smoothstep:h0,default:es,step:v0},x0=({nodes:e=[],edges:t=[],width:n,height:i,fitView:r,nodeOrigin:o,nodeExtent:s})=>{const a=new Map,c=new Map,l=new Map,u=new Map,f=o??[0,0],h=s??Dr;gc(e,a,c,{nodeExtent:h,nodeOrigin:f,elevateNodesOnSelect:!1,checkEquality:!1}),mc(l,u,t);let g={x:0,y:0,zoom:1};if(r&&n&&i){const y=sr(a,{filter:p=>!!((p.width||p.initialWidth)&&(p.height||p.initialHeight))});g=Cs(y,n,i,.5,2,.1)}return{flowId:ie(null),nodes:_0(e,a,c,f,h),nodeLookup:Et(a),parentLookup:Et(c),edgeLookup:Et(u),visibleNodes:Et([]),edges:w0(t,l,u),visibleEdges:Et([]),connectionLookup:Et(l),height:ie(500),width:ie(500),minZoom:ie(.5),maxZoom:ie(2),nodeOrigin:ie(f),nodeDragThreshold:ie(1),nodeExtent:ie(h),translateExtent:ie(Dr),autoPanOnNodeDrag:ie(!0),autoPanOnConnect:ie(!0),fitViewOnInit:ie(!1),fitViewOnInitDone:ie(!1),fitViewOptions:ie(void 0),panZoom:ie(null),snapGrid:ie(null),dragging:ie(!1),selectionRect:ie(null),selectionKeyPressed:ie(!1),multiselectionKeyPressed:ie(!1),deleteKeyPressed:ie(!1),panActivationKeyPressed:ie(!1),zoomActivationKeyPressed:ie(!1),selectionRectMode:ie(null),selectionMode:ie(Rr.Partial),nodeTypes:ie(Cc),edgeTypes:ie(Nc),viewport:ie(g),connectionMode:ie(Mn.Strict),domNode:ie(null),connection:Et(Zo),connectionLineType:ie(Xn.Bezier),connectionRadius:ie(20),isValidConnection:ie(()=>!0),nodesDraggable:ie(!0),nodesConnectable:ie(!0),elementsSelectable:ie(!0),selectNodesOnDrag:ie(!0),markers:Et([]),defaultMarkerColor:ie("#b1b1b7"),lib:Et("svelte"),onlyRenderVisibleElements:ie(!1),onerror:ie(ov),ondelete:ie(void 0),onedgecreate:ie(void 0),onconnect:ie(void 0),onconnectstart:ie(void 0),onconnectend:ie(void 0),onbeforedelete:ie(void 0),nodesInitialized:ie(!1),edgesInitialized:ie(!1),viewportInitialized:ie(!1),initialized:Et(!1)}};function b0(e){const t=Sn([e.edges,e.nodes,e.nodeLookup,e.onlyRenderVisibleElements,e.viewport,e.width,e.height],([n,,i,r,o,s,a])=>r&&s&&a?n.filter(l=>{const u=i.get(l.source),f=i.get(l.target);return u&&f&&fv({sourceNode:u,targetNode:f,width:s,height:a,transform:[o.x,o.y,o.zoom]})}):n);return Sn([t,e.nodes,e.nodeLookup,e.connectionMode,e.onerror],([n,,i,r,o])=>n.reduce((a,c)=>{const l=i.get(c.source),u=i.get(c.target);if(!l||!u)return a;const f=_v({id:c.id,sourceNode:l,targetNode:u,sourceHandle:c.sourceHandle||null,targetHandle:c.targetHandle||null,connectionMode:r,onError:o});return f&&a.push({...c,zIndex:dv({selected:c.selected,zIndex:c.zIndex,sourceNode:l,targetNode:u,elevateOnSelect:!1}),...f}),a},[]))}function E0(e){return Sn([e.nodeLookup,e.onlyRenderVisibleElements,e.width,e.height,e.viewport,e.nodes],([t,n,i,r,o])=>{const s=[o.x,o.y,o.zoom];return n?rc(t,{x:0,y:0,width:i,height:r},s,!0):Array.from(t.values())})}const As=Symbol();function k0({nodes:e,edges:t,width:n,height:i,fitView:r,nodeOrigin:o,nodeExtent:s}){const a=x0({nodes:e,edges:t,width:n,height:i,fitView:r,nodeOrigin:o,nodeExtent:s});function c(b){a.nodeTypes.set({...Cc,...b})}function l(b){a.edgeTypes.set({...Nc,...b})}function u(b){const M=R(a.edges);a.edges.set(vv(b,M))}const f=(b,M=!1)=>{var A;const I=R(a.nodeLookup);for(const[X,K]of b){const U=(A=I.get(X))==null?void 0:A.internals.userNode;U&&(U.position=K.position,U.dragging=M)}a.nodes.update(X=>X)};function h(b){var K,U,te;const M=R(a.nodeLookup),I=R(a.parentLookup),{changes:A,updatedInternals:X}=Cv(b,M,R(a.parentLookup),R(a.domNode),R(a.nodeOrigin));if(X){if(bv(M,I,{nodeOrigin:o,nodeExtent:s}),!R(a.fitViewOnInitDone)&&R(a.fitViewOnInit)){const B=R(a.fitViewOptions),J=y({...B,nodes:B==null?void 0:B.nodes});a.fitViewOnInitDone.set(J)}for(const B of A){const J=(K=M.get(B.id))==null?void 0:K.internals.userNode;if(J)switch(B.type){case"dimensions":{const ne={...J.measured,...B.dimensions};B.setAttributes&&(J.width=((U=B.dimensions)==null?void 0:U.width)??J.width,J.height=((te=B.dimensions)==null?void 0:te.height)??J.height),J.measured=ne;break}case"position":J.position=B.position??J.position;break}}a.nodes.update(B=>B),R(a.nodesInitialized)||a.nodesInitialized.set(!0)}}function g(b){const M=R(a.panZoom),I=R(a.domNode);if(!M||!I)return Promise.resolve(!1);const{width:A,height:X}=Ns(I),K=_a(R(a.nodeLookup),b);return wa({nodes:K,width:A,height:X,minZoom:R(a.minZoom),maxZoom:R(a.maxZoom),panZoom:M},b)}function y(b){const M=R(a.panZoom);if(!M)return!1;const I=_a(R(a.nodeLookup),b);return wa({nodes:I,width:R(a.width),height:R(a.height),minZoom:R(a.minZoom),maxZoom:R(a.maxZoom),panZoom:M},b),I.size>0}function p(b,M){const I=R(a.panZoom);return I?I.scaleBy(b,M):Promise.resolve(!1)}function N(b){return p(1.2,b)}function w(b){return p(1/1.2,b)}function m(b){const M=R(a.panZoom);M&&(M.setScaleExtent([b,R(a.maxZoom)]),a.minZoom.set(b))}function E(b){const M=R(a.panZoom);M&&(M.setScaleExtent([R(a.minZoom),b]),a.maxZoom.set(b))}function k(b){const M=R(a.panZoom);M&&(M.setTranslateExtent(b),a.translateExtent.set(b))}function _(b){let M=!1;return b.forEach(I=>{I.selected&&(I.selected=!1,M=!0)}),M}function S(b){var M;(M=R(a.panZoom))==null||M.setClickDistance(b)}function C(b){_((b==null?void 0:b.nodes)||R(a.nodes))&&a.nodes.set(R(a.nodes)),_((b==null?void 0:b.edges)||R(a.edges))&&a.edges.set(R(a.edges))}a.deleteKeyPressed.subscribe(async b=>{var M;if(b){const I=R(a.nodes),A=R(a.edges),X=I.filter(B=>B.selected),K=A.filter(B=>B.selected),{nodes:U,edges:te}=await oc({nodesToRemove:X,edgesToRemove:K,nodes:I,edges:A,onBeforeDelete:R(a.onbeforedelete)});(U.length||te.length)&&(a.nodes.update(B=>B.filter(J=>!U.some(ne=>ne.id===J.id))),a.edges.update(B=>B.filter(J=>!te.some(ne=>ne.id===J.id))),(M=R(a.ondelete))==null||M({nodes:U,edges:te}))}});function z(b){const M=R(a.multiselectionKeyPressed);a.nodes.update(I=>I.map(A=>{const X=b.includes(A.id),K=M&&A.selected||X;return A.selected=K,A})),M||a.edges.update(I=>I.map(A=>(A.selected=!1,A)))}function P(b){const M=R(a.multiselectionKeyPressed);a.edges.update(I=>I.map(A=>{const X=b.includes(A.id),K=M&&A.selected||X;return A.selected=K,A})),M||a.nodes.update(I=>I.map(A=>(A.selected=!1,A)))}function O(b){var I;const M=(I=R(a.nodes))==null?void 0:I.find(A=>A.id===b);if(!M){console.warn("012",rr.error012(b));return}a.selectionRect.set(null),a.selectionRectMode.set(null),M.selected?M.selected&&R(a.multiselectionKeyPressed)&&C({nodes:[M],edges:[]}):z([b])}function L(b){const M=R(a.viewport);return Nv({delta:b,panZoom:R(a.panZoom),transform:[M.x,M.y,M.zoom],translateExtent:R(a.translateExtent),width:R(a.width),height:R(a.height)})}const V=ie(Zo),H=b=>{V.set({...b})};function x(){V.set(Zo)}function T(){a.fitViewOnInitDone.set(!1),a.selectionRect.set(null),a.selectionRectMode.set(null),a.snapGrid.set(null),a.isValidConnection.set(()=>!0),C(),x()}return{...a,visibleEdges:b0(a),visibleNodes:E0(a),connection:Sn([V,a.viewport],([b,M])=>b.inProgress?{...b,to:ar(b.to,[M.x,M.y,M.zoom])}:{...b}),markers:Sn([a.edges,a.defaultMarkerColor,a.flowId],([b,M,I])=>wv(b,{defaultColor:M,id:I})),initialized:(()=>{let b=!1;const M=R(a.nodes).length,I=R(a.edges).length;return Sn([a.nodesInitialized,a.edgesInitialized,a.viewportInitialized],([A,X,K])=>b||(M===0?b=K:I===0?b=K&&A:b=K&&A&&X,b))})(),syncNodeStores:b=>m0(a.nodes,b),syncEdgeStores:b=>y0(a.edges,b),syncViewport:b=>p0(a.panZoom,a.viewport,b),setNodeTypes:c,setEdgeTypes:l,addEdge:u,updateNodePositions:f,updateNodeInternals:h,zoomIn:N,zoomOut:w,fitView:b=>g(b),setMinZoom:m,setMaxZoom:E,setTranslateExtent:k,setPaneClickDistance:S,unselectNodesAndEdges:C,addSelectedNodes:z,addSelectedEdges:P,handleNodeSelection:O,panBy:L,updateConnection:H,cancelConnection:x,reset:T}}function Fe(){const e=Kn(As);if(!e)throw new Error("In order to use useStore you need to wrap your component in a <SvelteFlowProvider />");return e.getStore()}function S0({nodes:e,edges:t,width:n,height:i,fitView:r,nodeOrigin:o,nodeExtent:s}){const a=k0({nodes:e,edges:t,width:n,height:i,fitView:r,nodeOrigin:o,nodeExtent:s});return Mr(As,{getStore:()=>a}),a}function So(e,t){const{panZoom:n,minZoom:i,maxZoom:r,initialViewport:o,viewport:s,dragging:a,translateExtent:c,paneClickDistance:l}=t,u=Kv({domNode:e,minZoom:i,maxZoom:r,translateExtent:c,viewport:o,paneClickDistance:l,onDraggingChange:a.set}),f=u.getViewport();return s.set(f),n.set(u),u.update(t),{update(h){u.update(h)}}}var C0=se('<div class="svelte-flow__zoom svelte-4xkw84"><!></div>');function N0(e,t){le(t,!1);const n=Ue(),i=()=>q(M,"$panActivationKeyPressed",n),r=()=>q(V,"$minZoom",n),o=()=>q(H,"$maxZoom",n),s=()=>q(I,"$zoomActivationKeyPressed",n),a=()=>q(L,"$selectionRect",n),c=()=>q(T,"$translateExtent",n),l=()=>q(b,"$lib",n),u=F(),f=F(),h=F();let g=v(t,"initialViewport",8,void 0),y=v(t,"onMoveStart",8,void 0),p=v(t,"onMove",8,void 0),N=v(t,"onMoveEnd",8,void 0),w=v(t,"panOnScrollMode",8),m=v(t,"preventScrolling",8),E=v(t,"zoomOnScroll",8),k=v(t,"zoomOnDoubleClick",8),_=v(t,"zoomOnPinch",8),S=v(t,"panOnDrag",8),C=v(t,"panOnScroll",8),z=v(t,"paneClickDistance",8);const{viewport:P,panZoom:O,selectionRect:L,minZoom:V,maxZoom:H,dragging:x,translateExtent:T,lib:b,panActivationKeyPressed:M,zoomActivationKeyPressed:I,viewportInitialized:A}=Fe(),X=te=>P.set({x:te[0],y:te[1],zoom:te[2]});ii(()=>{bi(A,!0)}),G(()=>Y(g()),()=>{D(u,g()||{x:0,y:0,zoom:1})}),G(()=>(i(),Y(S())),()=>{D(f,i()||S())}),G(()=>(i(),Y(C())),()=>{D(h,i()||C())}),rt(),ge();var K=C0(),U=ee(K);Re(U,t,"default",{}),ut(K,(te,B)=>So==null?void 0:So(te,B),()=>({viewport:P,minZoom:r(),maxZoom:o(),initialViewport:d(u),dragging:x,panZoom:O,onPanZoomStart:y(),onPanZoom:p(),onPanZoomEnd:N(),zoomOnScroll:E(),zoomOnDoubleClick:k(),zoomOnPinch:_(),panOnScroll:d(h),panOnDrag:d(f),panOnScrollSpeed:.5,panOnScrollMode:w()||vn.Free,zoomActivationKeyPressed:s(),preventScrolling:typeof m()=="boolean"?m():!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!a(),translateExtent:c(),lib:l(),paneClickDistance:z(),onTransformChange:X})),W(e,K),ce()}function Ta(e,t){return n=>{n.target===t&&(e==null||e(n))}}function Oa(e){return t=>{const n=e.includes(t.id);return t.selected!==n&&(t.selected=n),t}}var M0=se('<div class="svelte-flow__pane svelte-1esy7hx"><!></div>');function P0(e,t){le(t,!1);const n=Ue(),i=()=>q(H,"$panActivationKeyPressed",n),r=()=>q(L,"$selectionKeyPressed",n),o=()=>q(P,"$selectionRect",n),s=()=>q(z,"$elementsSelectable",n),a=()=>q(O,"$selectionRectMode",n),c=()=>q(_,"$edges",n),l=()=>q(k,"$nodeLookup",n),u=()=>q(S,"$viewport",n),f=()=>q(V,"$selectionMode",n),h=()=>q(C,"$dragging",n),g=F(),y=F(),p=F();let N=v(t,"panOnDrag",8,void 0),w=v(t,"selectionOnDrag",8,void 0);const m=eo(),{nodes:E,nodeLookup:k,edges:_,viewport:S,dragging:C,elementsSelectable:z,selectionRect:P,selectionRectMode:O,selectionKeyPressed:L,selectionMode:V,panActivationKeyPressed:H,unselectNodesAndEdges:x}=Fe();let T=F(),b=null,M=[],I=!1;function A(Z){if(I){I=!1;return}m("paneclick",{event:Z}),x(),O.set(null)}function X(Z){var ve,xe;if(b=d(T).getBoundingClientRect(),!z||!d(y)||Z.button!==0||Z.target!==d(T)||!b)return;(xe=(ve=Z.target)==null?void 0:ve.setPointerCapture)==null||xe.call(ve,Z.pointerId);const{x:$,y:j}=Jt(Z,b);x(),P.set({width:0,height:0,startX:$,startY:j,x:$,y:j})}function K(Z){if(!d(y)||!b||!o())return;I=!0;const $=Jt(Z,b),j=o().startX??0,ve=o().startY??0,xe={...o(),x:$.x<j?$.x:j,y:$.y<ve?$.y:ve,width:Math.abs($.x-j),height:Math.abs($.y-ve)},me=M.map(Le=>Le.id),ke=Uo(M,c()).map(Le=>Le.id);M=rc(l(),xe,[u().x,u().y,u().zoom],f()===Rr.Partial,!0);const Ce=Uo(M,c()).map(Le=>Le.id),Be=M.map(Le=>Le.id);(me.length!==Be.length||Be.some(Le=>!me.includes(Le)))&&E.update(Le=>Le.map(Oa(Be))),(ke.length!==Ce.length||Ce.some(Le=>!ke.includes(Le)))&&_.update(Le=>Le.map(Oa(Ce))),O.set("user"),P.set(xe)}function U(Z){var $,j;Z.button===0&&((j=($=Z.target)==null?void 0:$.releasePointerCapture)==null||j.call($,Z.pointerId),!d(y)&&a()==="user"&&Z.target===d(T)&&(A==null||A(Z)),P.set(null),M.length>0&&bi(O,"nodes"),r()&&(I=!1))}const te=Z=>{var $;if(Array.isArray(d(g))&&(($=d(g))!=null&&$.includes(2))){Z.preventDefault();return}m("panecontextmenu",{event:Z})};G(()=>(i(),Y(N())),()=>{D(g,i()||N())}),G(()=>(r(),o(),Y(w()),d(g)),()=>{D(y,r()||o()||w()&&d(g)!==!0)}),G(()=>(s(),d(y),a()),()=>{D(p,s()&&(d(y)||a()==="user"))}),rt(),ge();var B=M0(),J=Qt(()=>d(p)?void 0:Ta(A,d(T))),ne=Qt(()=>Ta(te,d(T)));const ue=oe(()=>N()===!0||Array.isArray(N())&&N().includes(0));pe(()=>Ye(B,"draggable",d(ue)));var fe=ee(B);Re(fe,t,"default",{}),tr(B,Z=>D(T,Z),()=>d(T)),pe(()=>{Ye(B,"dragging",h()),Ye(B,"selection",d(y))}),Pe("click",B,function(...Z){var $;($=d(J))==null||$.apply(this,Z)}),Pe("pointerdown",B,function(...Z){var $;($=d(p)?X:void 0)==null||$.apply(this,Z)}),Pe("pointermove",B,function(...Z){var $;($=d(p)?K:void 0)==null||$.apply(this,Z)}),Pe("pointerup",B,function(...Z){var $;($=d(p)?U:void 0)==null||$.apply(this,Z)}),Pe("contextmenu",B,function(...Z){var $;($=d(ne))==null||$.apply(this,Z)}),W(e,B),ce()}var z0=se('<div class="svelte-flow__viewport xyflow__viewport svelte-1floaup"><!></div>');function A0(e,t){le(t,!1);const n=Ue(),i=()=>q(r,"$viewport",n),{viewport:r}=Fe();ge();var o=z0(),s=ee(o);Re(s,t,"default",{}),pe(()=>Q(o,"style",`transform: translate(${i().x??""}px, ${i().y??""}px) scale(${i().zoom??""})`)),W(e,o),ce()}function Yn(e,t){const{store:n,onDrag:i,onDragStart:r,onDragStop:o,onNodeMouseDown:s}=t,a=Pv({onDrag:i,onDragStart:r,onDragStop:o,onNodeMouseDown:s,getStoreItems:()=>{const l=R(n.snapGrid),u=R(n.viewport);return{nodes:R(n.nodes),nodeLookup:R(n.nodeLookup),edges:R(n.edges),nodeExtent:R(n.nodeExtent),snapGrid:l||[0,0],snapToGrid:!!l,nodeOrigin:R(n.nodeOrigin),multiSelectionActive:R(n.multiselectionKeyPressed),domNode:R(n.domNode),transform:[u.x,u.y,u.zoom],autoPanOnNodeDrag:R(n.autoPanOnNodeDrag),nodesDraggable:R(n.nodesDraggable),selectNodesOnDrag:R(n.selectNodesOnDrag),nodeDragThreshold:R(n.nodeDragThreshold),unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,panBy:n.panBy}}});function c(l,u){if(u.disabled){a.destroy();return}a.update({domNode:l,noDragClassName:u.noDragClass,handleSelector:u.handleSelector,nodeId:u.nodeId,isSelectable:u.isSelectable,nodeClickDistance:u.nodeClickDistance})}return c(e,t),{update(l){c(e,l)},destroy(){a.destroy()}}}function I0({width:e,height:t,initialWidth:n,initialHeight:i,measuredWidth:r,measuredHeight:o}){if(r===void 0&&o===void 0){const s=e??n,a=t??i;return{width:s?`width:${s}px;`:"",height:a?`height:${a}px;`:""}}return{width:e?`width:${e}px;`:"",height:t?`height:${t}px;`:""}}var T0=se("<div><!></div>");function O0(e,t){le(t,!1);const n=Ue(),i=()=>q(B,"$nodeTypes",n),r=()=>q(ve,"$connectableStore",n),o=F(void 0,!0),s=F(void 0,!0),a=F(void 0,!0),c=F(void 0,!0);let l=v(t,"node",9),u=v(t,"id",9),f=v(t,"data",25,()=>({})),h=v(t,"selected",9,!1),g=v(t,"draggable",9,void 0),y=v(t,"selectable",9,void 0),p=v(t,"connectable",9,!0),N=v(t,"deletable",9,!0),w=v(t,"hidden",9,!1),m=v(t,"dragging",9,!1),E=v(t,"resizeObserver",9,null),k=v(t,"style",9,void 0),_=v(t,"type",9,"default"),S=v(t,"isParent",9,!1),C=v(t,"positionX",9),z=v(t,"positionY",9),P=v(t,"sourcePosition",9,void 0),O=v(t,"targetPosition",9,void 0),L=v(t,"zIndex",9),V=v(t,"measuredWidth",9,void 0),H=v(t,"measuredHeight",9,void 0),x=v(t,"initialWidth",9,void 0),T=v(t,"initialHeight",9,void 0),b=v(t,"width",9,void 0),M=v(t,"height",9,void 0),I=v(t,"dragHandle",9,void 0),A=v(t,"initialized",9,!1),X=v(t,"parentId",9,void 0),K=v(t,"nodeClickDistance",9,void 0),U=v(t,"class",9,"");const te=Fe(),{nodeTypes:B,nodeDragThreshold:J,selectNodesOnDrag:ne,handleNodeSelection:ue,updateNodeInternals:fe}=te;let Z=F(void 0,!0),$=F(null,!0);const j=eo(),ve=ie(p());let xe=F(void 0,!0),me=F(void 0,!0),ke=F(void 0,!0);Mr("svelteflow__node_id",u()),Mr("svelteflow__node_connectable",ve),Cl(()=>{var Ne;d($)&&((Ne=E())==null||Ne.unobserve(d($)))});function Ce(Ne){y()&&(!R(ne)||!g()||R(J)>0)&&ue(u()),j("nodeclick",{node:l().internals.userNode,event:Ne})}G(()=>Y(_()),()=>{D(o,_()||"default")}),G(()=>(i(),d(o)),()=>{D(s,!!i()[d(o)])}),G(()=>(i(),d(o),Qo),()=>{D(a,i()[d(o)]||Qo)}),G(()=>(d(s),Y(_())),()=>{d(s)||console.warn("003",rr.error003(_()))}),G(()=>(Y(b()),Y(M()),Y(x()),Y(T()),Y(V()),Y(H())),()=>{D(c,I0({width:b(),height:M(),initialWidth:x(),initialHeight:T(),measuredWidth:V(),measuredHeight:H()}))}),G(()=>Y(p()),()=>{ve.set(!!p())}),G(()=>(d(xe),d(o),d(me),Y(P()),d(ke),Y(O()),Y(u()),d(Z)),()=>{(d(xe)&&d(o)!==d(xe)||d(me)&&P()!==d(me)||d(ke)&&O()!==d(ke))&&requestAnimationFrame(()=>fe(new Map([[u(),{id:u(),nodeElement:d(Z),force:!0}]]))),D(xe,d(o)),D(me,P()),D(ke,O())}),G(()=>(Y(E()),d(Z),d($),Y(A())),()=>{E()&&(d(Z)!==d($)||!A())&&(d($)&&E().unobserve(d($)),d(Z)&&E().observe(d(Z)),D($,d(Z)))}),rt(),ge(!0);var Be=Te(),Le=ae(Be);{var qe=Ne=>{var we=T0();const Ge=oe(()=>Ht(at(["svelte-flow__node",`svelte-flow__node-${d(o)}`,U()])));var mt=ee(we);_l(mt,()=>d(a),(Ae,je)=>{je(Ae,{get data(){return f()},get id(){return u()},get selected(){return h()},get selectable(){return y()},get deletable(){return N()},get sourcePosition(){return P()},get targetPosition(){return O()},get zIndex(){return L()},get dragging(){return m()},get draggable(){return g()},get dragHandle(){return I()},get parentId(){return X()},get type(){return d(o)},get isConnectable(){return r()},get positionAbsoluteX(){return C()},get positionAbsoluteY(){return z()},get width(){return b()},get height(){return M()}})}),ut(we,(Ae,je)=>Yn==null?void 0:Yn(Ae,je),()=>({nodeId:u(),isSelectable:y(),disabled:!1,handleSelector:I(),noDragClass:"nodrag",nodeClickDistance:K(),onNodeMouseDown:ue,onDrag:(Ae,je,Ke,Oe)=>{j("nodedrag",{event:Ae,targetNode:Ke,nodes:Oe})},onDragStart:(Ae,je,Ke,Oe)=>{j("nodedragstart",{event:Ae,targetNode:Ke,nodes:Oe})},onDragStop:(Ae,je,Ke,Oe)=>{j("nodedragstop",{event:Ae,targetNode:Ke,nodes:Oe})},store:te})),tr(we,Ae=>D(Z,Ae),()=>d(Z)),pt(()=>Pe("click",we,Ce)),pt(()=>Pe("mouseenter",we,Ae=>j("nodemouseenter",{node:l(),event:Ae}))),pt(()=>Pe("mouseleave",we,Ae=>j("nodemouseleave",{node:l(),event:Ae}))),pt(()=>Pe("mousemove",we,Ae=>j("nodemousemove",{node:l(),event:Ae}))),pt(()=>Pe("contextmenu",we,Ae=>j("nodecontextmenu",{node:l(),event:Ae}))),pe(()=>{Q(we,"data-id",u()),ms(we,d(Ge),""),Q(we,"style",`${k()??""??""};${d(c).width??""}${d(c).height??""}`),Ye(we,"dragging",m()),Ye(we,"selected",h()),Ye(we,"draggable",g()),Ye(we,"connectable",p()),Ye(we,"selectable",y()),Ye(we,"nopan",g()),Ye(we,"parent",S()),We(we,"z-index",L()),We(we,"transform",`translate(${C()??""}px, ${z()??""}px)`),We(we,"visibility",A()?"visible":"hidden")}),W(Ne,we)};ze(Le,Ne=>{w()||Ne(qe)})}W(e,Be),ce()}var H0=se('<div class="svelte-flow__nodes svelte-tf4uy4"></div>');function D0(e,t){le(t,!1);const n=Ue(),i=()=>q(l,"$visibleNodes",n),r=()=>q(u,"$nodesDraggable",n),o=()=>q(h,"$elementsSelectable",n),s=()=>q(f,"$nodesConnectable",n),a=()=>q(y,"$parentLookup",n);let c=v(t,"nodeClickDistance",8,0);const{visibleNodes:l,nodesDraggable:u,nodesConnectable:f,elementsSelectable:h,updateNodeInternals:g,parentLookup:y}=Fe(),p=typeof ResizeObserver>"u"?null:new ResizeObserver(w=>{const m=new Map;w.forEach(E=>{const k=E.target.getAttribute("data-id");m.set(k,{id:k,nodeElement:E.target,force:!0})}),g(m)});Cl(()=>{p==null||p.disconnect()}),ge();var N=H0();zt(N,5,i,w=>w.id,(w,m)=>{var E=oe(()=>!!d(m).selected),k=oe(()=>!!d(m).hidden),_=oe(()=>!!(d(m).draggable||r()&&typeof d(m).draggable>"u")),S=oe(()=>!!(d(m).selectable||o()&&typeof d(m).selectable>"u")),C=oe(()=>!!(d(m).connectable||s()&&typeof d(m).connectable>"u")),z=oe(()=>d(m).deletable??!0),P=oe(()=>a().has(d(m).id)),O=oe(()=>d(m).type??"default"),L=oe(()=>d(m).internals.z??0),V=oe(()=>uc(d(m)));O0(w,{get node(){return d(m)},get id(){return d(m).id},get data(){return d(m).data},get selected(){return d(E)},get hidden(){return d(k)},get draggable(){return d(_)},get selectable(){return d(S)},get connectable(){return d(C)},get deletable(){return d(z)},get positionX(){return d(m).internals.positionAbsolute.x},get positionY(){return d(m).internals.positionAbsolute.y},get isParent(){return d(P)},get style(){return d(m).style},get class(){return d(m).class},get type(){return d(O)},get sourcePosition(){return d(m).sourcePosition},get targetPosition(){return d(m).targetPosition},get dragging(){return d(m).dragging},get zIndex(){return d(L)},get dragHandle(){return d(m).dragHandle},get initialized(){return d(V)},get width(){return d(m).width},get height(){return d(m).height},get initialWidth(){return d(m).initialWidth},get initialHeight(){return d(m).initialHeight},get measuredWidth(){return d(m).measured.width},get measuredHeight(){return d(m).measured.height},get parentId(){return d(m).parentId},resizeObserver:p,get nodeClickDistance(){return c()},$$events:{nodeclick(H){Ee.call(this,t,H)},nodemouseenter(H){Ee.call(this,t,H)},nodemousemove(H){Ee.call(this,t,H)},nodemouseleave(H){Ee.call(this,t,H)},nodedrag(H){Ee.call(this,t,H)},nodedragstart(H){Ee.call(this,t,H)},nodedragstop(H){Ee.call(this,t,H)},nodecontextmenu(H){Ee.call(this,t,H)}}})}),W(e,N),ce()}var R0=Je('<svg><g role="img"><!></g></svg>');function L0(e,t){le(t,!1);const n=Ue(),i=()=>q(B,"$edgeTypes",n),r=()=>q(J,"$flowId",n),o=()=>q(ne,"$elementsSelectable",n),s=()=>q(te,"$edgeLookup",n),a=F(void 0,!0),c=F(void 0,!0),l=F(void 0,!0),u=F(void 0,!0),f=F(void 0,!0);let h=v(t,"id",9),g=v(t,"type",9,"default"),y=v(t,"source",9,""),p=v(t,"target",9,""),N=v(t,"data",25,()=>({})),w=v(t,"style",9,void 0),m=v(t,"zIndex",9,void 0),E=v(t,"animated",9,!1),k=v(t,"selected",9,!1),_=v(t,"selectable",9,void 0),S=v(t,"deletable",9,void 0),C=v(t,"hidden",9,!1),z=v(t,"label",9,void 0),P=v(t,"labelStyle",9,void 0),O=v(t,"markerStart",9,void 0),L=v(t,"markerEnd",9,void 0),V=v(t,"sourceHandle",9,void 0),H=v(t,"targetHandle",9,void 0),x=v(t,"sourceX",9),T=v(t,"sourceY",9),b=v(t,"targetX",9),M=v(t,"targetY",9),I=v(t,"sourcePosition",9),A=v(t,"targetPosition",9),X=v(t,"ariaLabel",9,void 0),K=v(t,"interactionWidth",9,void 0),U=v(t,"class",9,"");Mr("svelteflow__edge_id",h());const{edgeLookup:te,edgeTypes:B,flowId:J,elementsSelectable:ne}=Fe(),ue=eo(),fe=Sc();function Z(me){const ke=s().get(h());ke&&(fe(h()),ue("edgeclick",{event:me,edge:ke}))}function $(me,ke){const Ce=s().get(h());Ce&&ue(ke,{event:me,edge:Ce})}G(()=>Y(g()),()=>{D(a,g()||"default")}),G(()=>(i(),d(a),es),()=>{D(c,i()[d(a)]||es)}),G(()=>(Y(O()),r()),()=>{D(l,O()?`url('#${jo(O(),r())}')`:void 0)}),G(()=>(Y(L()),r()),()=>{D(u,L()?`url('#${jo(L(),r())}')`:void 0)}),G(()=>(Y(_()),o()),()=>{D(f,_()??o())}),rt(),ge(!0);var j=Te(),ve=ae(j);{var xe=me=>{var ke=R0(),Ce=ee(ke);const Be=oe(()=>Ht(at(["svelte-flow__edge",U()])));var Le=ee(Ce),qe=oe(()=>S()??!0);_l(Le,()=>d(c),(Ne,we)=>{we(Ne,{get id(){return h()},get source(){return y()},get target(){return p()},get sourceX(){return x()},get sourceY(){return T()},get targetX(){return b()},get targetY(){return M()},get sourcePosition(){return I()},get targetPosition(){return A()},get animated(){return E()},get selected(){return k()},get label(){return z()},get labelStyle(){return P()},get data(){return N()},get style(){return w()},get interactionWidth(){return K()},get selectable(){return d(f)},get deletable(){return d(qe)},get type(){return d(a)},get sourceHandleId(){return V()},get targetHandleId(){return H()},get markerStart(){return d(l)},get markerEnd(){return d(u)}})}),pe(()=>{We(ke,"z-index",m()),In(Ce,d(Be),""),Q(Ce,"data-id",h()),Q(Ce,"aria-label",X()===null?void 0:X()?X():`Edge from ${y()} to ${p()}`),Ye(Ce,"animated",E()),Ye(Ce,"selected",k()),Ye(Ce,"selectable",d(f))}),Pe("click",Ce,Z),Pe("contextmenu",Ce,Ne=>{$(Ne,"edgecontextmenu")}),Pe("mouseenter",Ce,Ne=>{$(Ne,"edgemouseenter")}),Pe("mouseleave",Ce,Ne=>{$(Ne,"edgemouseleave")}),W(me,ke)};ze(ve,me=>{C()||me(xe)})}W(e,j),ce()}function V0(e,t){le(t,!1);let n=v(t,"onMount",8,void 0),i=v(t,"onDestroy",8,void 0);ii(()=>{var r;return(r=n())==null||r(),i()}),ge(),ce()}var X0=Je("<defs></defs>");function Y0(e,t){le(t,!1);const n=Ue(),i=()=>q(r,"$markers",n),{markers:r}=Fe();ge();var o=X0();zt(o,5,i,s=>s.id,(s,a)=>{F0(s,Qe(()=>d(a)))}),W(e,o),ce()}var W0=Je('<polyline stroke-linecap="round" stroke-linejoin="round" fill="none" points="-5,-4 0,0 -5,4"></polyline>'),B0=Je('<polyline stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),K0=Je('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');function F0(e,t){le(t,!1);let n=v(t,"id",8),i=v(t,"type",8),r=v(t,"width",8,12.5),o=v(t,"height",8,12.5),s=v(t,"markerUnits",8,"strokeWidth"),a=v(t,"orient",8,"auto-start-reverse"),c=v(t,"color",8,void 0),l=v(t,"strokeWidth",8,void 0);ge();var u=K0(),f=ee(u);{var h=y=>{var p=W0();pe(()=>{Q(p,"stroke",c()),Q(p,"stroke-width",l())}),W(y,p)},g=y=>{var p=Te(),N=ae(p);{var w=m=>{var E=B0();pe(()=>{Q(E,"stroke",c()),Q(E,"stroke-width",l()),Q(E,"fill",c())}),W(m,E)};ze(N,m=>{i()===Lr.ArrowClosed&&m(w)},!0)}W(y,p)};ze(f,y=>{i()===Lr.Arrow?y(h):y(g,!1)})}pe(()=>{Q(u,"id",n()),Q(u,"markerWidth",`${r()}`),Q(u,"markerHeight",`${o()}`),Q(u,"markerUnits",s()),Q(u,"orient",a())}),W(e,u),ce()}var q0=se('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!> <!></div>');function G0(e,t){le(t,!1);const n=Ue(),i=()=>q(s,"$visibleEdges",n),r=()=>q(l,"$elementsSelectable",n);let o=v(t,"defaultEdgeOptions",8);const{visibleEdges:s,edgesInitialized:a,edges:{setDefaultOptions:c},elementsSelectable:l}=Fe();ii(()=>{o()&&c(o())}),ge();var u=q0(),f=ee(u),h=ee(f);Y0(h,{});var g=re(f,2);zt(g,1,i,N=>N.id,(N,w)=>{var m=oe(()=>d(w).selectable??r()),E=oe(()=>d(w).type||"default");L0(N,{get id(){return d(w).id},get source(){return d(w).source},get target(){return d(w).target},get data(){return d(w).data},get style(){return d(w).style},get animated(){return d(w).animated},get selected(){return d(w).selected},get selectable(){return d(m)},get deletable(){return d(w).deletable},get hidden(){return d(w).hidden},get label(){return d(w).label},get labelStyle(){return d(w).labelStyle},get markerStart(){return d(w).markerStart},get markerEnd(){return d(w).markerEnd},get sourceHandle(){return d(w).sourceHandle},get targetHandle(){return d(w).targetHandle},get sourceX(){return d(w).sourceX},get sourceY(){return d(w).sourceY},get targetX(){return d(w).targetX},get targetY(){return d(w).targetY},get sourcePosition(){return d(w).sourcePosition},get targetPosition(){return d(w).targetPosition},get ariaLabel(){return d(w).ariaLabel},get interactionWidth(){return d(w).interactionWidth},get class(){return d(w).class},get type(){return d(E)},get zIndex(){return d(w).zIndex},$$events:{edgeclick(k){Ee.call(this,t,k)},edgecontextmenu(k){Ee.call(this,t,k)},edgemouseenter(k){Ee.call(this,t,k)},edgemouseleave(k){Ee.call(this,t,k)}}})});var y=re(g,2);{var p=N=>{V0(N,{onMount:()=>{bi(a,!0)},onDestroy:()=>{bi(a,!1)}})};ze(y,N=>{i().length>0&&N(p)})}W(e,u),ce()}var Z0=se('<div class="svelte-flow__selection svelte-1iugwpu"></div>');function Mc(e,t){let n=v(t,"x",8,0),i=v(t,"y",8,0),r=v(t,"width",8,0),o=v(t,"height",8,0),s=v(t,"isVisible",8,!0);var a=Te(),c=ae(a);{var l=u=>{var f=Z0();pe(()=>{We(f,"width",typeof r()=="string"?r():`${r()}px`),We(f,"height",typeof o()=="string"?o():`${o()}px`),We(f,"transform",`translate(${n()}px, ${i()}px)`)}),W(u,f)};ze(c,u=>{s()&&u(l)})}W(e,a)}function U0(e,t){le(t,!1);const n=Ue(),i=()=>q(o,"$selectionRect",n),r=()=>q(s,"$selectionRectMode",n),{selectionRect:o,selectionRectMode:s}=Fe();ge();var a=oe(()=>!!(i()&&r()==="user")),c=oe(()=>{var h;return(h=i())==null?void 0:h.width}),l=oe(()=>{var h;return(h=i())==null?void 0:h.height}),u=oe(()=>{var h;return(h=i())==null?void 0:h.x}),f=oe(()=>{var h;return(h=i())==null?void 0:h.y});Mc(e,{get isVisible(){return d(a)},get width(){return d(c)},get height(){return d(l)},get x(){return d(u)},get y(){return d(f)}}),ce()}var $0=se('<div class="selection-wrapper nopan svelte-5pxri" role="button" tabindex="-1"><!></div>');function J0(e,t){le(t,!1);const n=Ue(),i=()=>q(a,"$selectionRectMode",n),r=()=>q(l,"$nodeLookup",n),o=()=>q(c,"$nodes",n),s=Fe(),{selectionRectMode:a,nodes:c,nodeLookup:l}=s,u=eo();let f=F(null);function h(w){const m=o().filter(E=>E.selected);u("selectioncontextmenu",{nodes:m,event:w})}function g(w){const m=o().filter(E=>E.selected);u("selectionclick",{nodes:m,event:w})}G(()=>(i(),r(),o()),()=>{i()==="nodes"&&(D(f,sr(r(),{filter:w=>!!w.selected})),o())}),rt(),ge();var y=Te(),p=ae(y);{var N=w=>{var m=$0(),E=ee(m);Mc(E,{width:"100%",height:"100%",x:0,y:0}),ut(m,(k,_)=>Yn==null?void 0:Yn(k,_),()=>({disabled:!1,store:s,onDrag:(k,_,S,C)=>{u("nodedrag",{event:k,targetNode:null,nodes:C})},onDragStart:(k,_,S,C)=>{u("nodedragstart",{event:k,targetNode:null,nodes:C})},onDragStop:(k,_,S,C)=>{u("nodedragstop",{event:k,targetNode:null,nodes:C})}})),pt(()=>Pe("contextmenu",m,h)),pt(()=>Pe("click",m,g)),pt(()=>Pe("keyup",m,()=>{})),pe(()=>Q(m,"style",`width: ${d(f).width??""}px; height: ${d(f).height??""}px; transform: translate(${d(f).x??""}px, ${d(f).y??""}px)`)),W(w,m)};ze(p,w=>{i()==="nodes"&&d(f)&&Zt(d(f).x)&&Zt(d(f).y)&&w(N)})}W(e,y),ce()}function Ie(e,t){let{enabled:n=!0,trigger:i,type:r="keydown"}=t;function o(s){const a=Array.isArray(i)?i:[i],c={alt:s.altKey,ctrl:s.ctrlKey,shift:s.shiftKey,meta:s.metaKey};for(const l of a){const u={modifier:[],preventDefault:!1,enabled:!0,...l},{modifier:f,key:h,callback:g,preventDefault:y,enabled:p}=u;if(p){if(f.length&&!(Array.isArray(f)?f:[f]).map(m=>typeof m=="string"?[m]:m).some(m=>m.every(E=>c[E])))continue;if(s.key===h){y&&s.preventDefault();const N={node:e,trigger:u,originalEvent:s};e.dispatchEvent(new CustomEvent("shortcut",{detail:N})),g==null||g(N)}}}}return n&&e.addEventListener(r,o),{update:s=>{const{enabled:a=!0,type:c="keydown"}=s;n&&(!a||r!==c)?e.removeEventListener(r,o):!n&&a&&e.addEventListener(c,o),n=a,r=c,i=s.trigger},destroy:()=>{e.removeEventListener(r,o)}}}function j0(e,t){le(t,!1);let n=v(t,"selectionKey",8,"Shift"),i=v(t,"multiSelectionKey",24,()=>Xr()?"Meta":"Control"),r=v(t,"deleteKey",8,"Backspace"),o=v(t,"panActivationKey",8," "),s=v(t,"zoomActivationKey",24,()=>Xr()?"Meta":"Control");const{selectionKeyPressed:a,multiselectionKeyPressed:c,deleteKeyPressed:l,panActivationKeyPressed:u,zoomActivationKeyPressed:f,selectionRect:h}=Fe();function g(m){return m!==null&&typeof m=="object"}function y(m){return g(m)?m.modifier||[]:[]}function p(m){return m==null?"":g(m)?m.key:m}function N(m,E){return(Array.isArray(m)?m:[m]).map(_=>{const S=p(_);return{key:S,modifier:y(_),enabled:S!==null,callback:E}})}function w(){h.set(null),a.set(!1),c.set(!1),l.set(!1),u.set(!1),f.set(!1)}ge(),Pe("blur",ct,w),Pe("contextmenu",ct,w),ut(ct,(m,E)=>Ie==null?void 0:Ie(m,E),()=>({trigger:N(n(),()=>a.set(!0)),type:"keydown"})),ut(ct,(m,E)=>Ie==null?void 0:Ie(m,E),()=>({trigger:N(n(),()=>a.set(!1)),type:"keyup"})),ut(ct,(m,E)=>Ie==null?void 0:Ie(m,E),()=>({trigger:N(i(),()=>c.set(!0)),type:"keydown"})),ut(ct,(m,E)=>Ie==null?void 0:Ie(m,E),()=>({trigger:N(i(),()=>c.set(!1)),type:"keyup"})),ut(ct,(m,E)=>Ie==null?void 0:Ie(m,E),()=>({trigger:N(r(),m=>{!(m.originalEvent.ctrlKey||m.originalEvent.metaKey||m.originalEvent.shiftKey)&&!cv(m.originalEvent)&&l.set(!0)}),type:"keydown"})),ut(ct,(m,E)=>Ie==null?void 0:Ie(m,E),()=>({trigger:N(r(),()=>l.set(!1)),type:"keyup"})),ut(ct,(m,E)=>Ie==null?void 0:Ie(m,E),()=>({trigger:N(o(),()=>u.set(!0)),type:"keydown"})),ut(ct,(m,E)=>Ie==null?void 0:Ie(m,E),()=>({trigger:N(o(),()=>u.set(!1)),type:"keyup"})),ut(ct,(m,E)=>Ie==null?void 0:Ie(m,E),()=>({trigger:N(s(),()=>f.set(!0)),type:"keydown"})),ut(ct,(m,E)=>Ie==null?void 0:Ie(m,E),()=>({trigger:N(s(),()=>f.set(!1)),type:"keyup"})),ce()}var Q0=Je('<path fill="none" class="svelte-flow__connection-path"></path>'),em=Je('<svg class="svelte-flow__connectionline"><g><!><!></g></svg>');function tm(e,t){le(t,!1);const n=Ue(),i=()=>q(h,"$connection",n),r=()=>q(g,"$connectionLineType",n),o=()=>q(u,"$width",n),s=()=>q(f,"$height",n);let a=v(t,"containerStyle",8,""),c=v(t,"style",8,""),l=v(t,"isCustomComponent",8,!1);const{width:u,height:f,connection:h,connectionLineType:g}=Fe();let y=F(null);G(()=>(i(),Y(l()),r(),d(y),Jo),()=>{if(i().inProgress&&!l()){const{from:m,to:E,fromPosition:k,toPosition:_}=i(),S={sourceX:m.x,sourceY:m.y,sourcePosition:k,targetX:E.x,targetY:E.y,targetPosition:_};switch(r()){case Xn.Bezier:(C=>D(y,C[0]))(fc(S));break;case Xn.Step:(C=>D(y,C[0]))(Yr({...S,borderRadius:0}));break;case Xn.SmoothStep:(C=>D(y,C[0]))(Yr(S));break;default:(C=>D(y,C[0]))(Jo(S))}}}),rt(),ge();var p=Te(),N=ae(p);{var w=m=>{var E=em(),k=ee(E);const _=oe(()=>Ht(at(["svelte-flow__connection",ev(i().isValid)])));var S=ee(k);Re(S,t,"connectionLine",{});var C=re(S);{var z=P=>{var O=Q0();pe(()=>{Q(O,"d",d(y)),Q(O,"style",c())}),W(P,O)};ze(C,P=>{l()||P(z)})}pe(()=>{Q(E,"width",o()),Q(E,"height",s()),Q(E,"style",a()),In(k,d(_),"")}),W(m,E)};ze(N,m=>{i().inProgress&&m(w)})}W(e,p),ce()}var nm=se("<div><!></div>");function Is(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]),i=_e(n,["position","style","class"]);le(t,!1);const r=Ue(),o=()=>q(u,"$selectionRectMode",r),s=F();let a=v(t,"position",8,"top-right"),c=v(t,"style",8,void 0),l=v(t,"class",8,void 0);const{selectionRectMode:u}=Fe();G(()=>Y(a()),()=>{D(s,`${a()}`.split("-"))}),rt(),ge();var f=nm();let h;var g=ee(f);Re(g,t,"default",{}),pe(()=>{h=xi(f,h,{class:at(["svelte-flow__panel",l(),...d(s)]),style:c(),...i}),We(f,"pointer-events",o()?"none":"")}),W(e,f),ce()}var im=se('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');function rm(e,t){le(t,!1);let n=v(t,"proOptions",8,void 0),i=v(t,"position",8,"bottom-right");ge();var r=Te(),o=ae(r);{var s=a=>{Is(a,{get position(){return i()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(c,l)=>{var u=im();W(c,u)},$$slots:{default:!0}})};ze(o,a=>{var c;(c=n())!=null&&c.hideAttribution||a(s)})}W(e,r),ce()}function Ha(e,{nodeTypes:t,edgeTypes:n,minZoom:i,maxZoom:r,translateExtent:o,paneClickDistance:s}){t!==void 0&&e.setNodeTypes(t),n!==void 0&&e.setEdgeTypes(n),i!==void 0&&e.setMinZoom(i),r!==void 0&&e.setMaxZoom(r),o!==void 0&&e.setTranslateExtent(o),s!==void 0&&e.setPaneClickDistance(s)}const om=e=>Object.keys(e);function Da(e,t){om(t).forEach(n=>{const i=t[n];i!==void 0&&e[n].set(i)})}function sm(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function am(e="light"){return Et("light",n=>{if(e!=="system"){n(e);return}const i=sm(),r=()=>n(i!=null&&i.matches?"dark":"light");return n(i!=null&&i.matches?"dark":"light"),i==null||i.addEventListener("change",r),()=>{i==null||i.removeEventListener("change",r)}})}var lm=se('<!> <!> <div class="svelte-flow__edgelabel-renderer"></div> <div class="svelte-flow__viewport-portal"></div> <!> <!>',1),cm=se("<!> <!>",1),um=se("<div><!> <!> <!> <!></div>");function dm(e,t){const n=ud(t),i=_e(t,["children","$$slots","$$events","$$legacy"]),r=_e(i,["id","nodes","edges","fitView","fitViewOptions","minZoom","maxZoom","initialViewport","viewport","nodeTypes","edgeTypes","selectionKey","selectionMode","panActivationKey","multiSelectionKey","zoomActivationKey","nodesDraggable","nodesConnectable","nodeDragThreshold","elementsSelectable","snapGrid","deleteKey","connectionRadius","connectionLineType","connectionMode","connectionLineStyle","connectionLineContainerStyle","onMoveStart","onMove","onMoveEnd","isValidConnection","translateExtent","nodeExtent","onlyRenderVisibleElements","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","autoPanOnConnect","autoPanOnNodeDrag","onerror","ondelete","onedgecreate","attributionPosition","proOptions","defaultEdgeOptions","width","height","colorMode","onconnect","onconnectstart","onconnectend","onbeforedelete","oninit","nodeOrigin","paneClickDistance","nodeClickDistance","defaultMarkerColor","style","class"]);le(t,!1);const o=Ue(),s=()=>q(m(),"$viewport",o),a=()=>q(oi,"$initialized",o),c=()=>q(d(l),"$colorModeClass",o),l=F();let u=v(t,"id",8,"1"),f=v(t,"nodes",8),h=v(t,"edges",8),g=v(t,"fitView",8,void 0),y=v(t,"fitViewOptions",8,void 0),p=v(t,"minZoom",8,void 0),N=v(t,"maxZoom",8,void 0),w=v(t,"initialViewport",8,void 0),m=v(t,"viewport",8,void 0),E=v(t,"nodeTypes",8,void 0),k=v(t,"edgeTypes",8,void 0),_=v(t,"selectionKey",8,void 0),S=v(t,"selectionMode",8,void 0),C=v(t,"panActivationKey",8,void 0),z=v(t,"multiSelectionKey",8,void 0),P=v(t,"zoomActivationKey",8,void 0),O=v(t,"nodesDraggable",8,void 0),L=v(t,"nodesConnectable",8,void 0),V=v(t,"nodeDragThreshold",8,void 0),H=v(t,"elementsSelectable",8,void 0),x=v(t,"snapGrid",8,void 0),T=v(t,"deleteKey",8,void 0),b=v(t,"connectionRadius",8,void 0),M=v(t,"connectionLineType",8,void 0),I=v(t,"connectionMode",24,()=>Mn.Strict),A=v(t,"connectionLineStyle",8,""),X=v(t,"connectionLineContainerStyle",8,""),K=v(t,"onMoveStart",8,void 0),U=v(t,"onMove",8,void 0),te=v(t,"onMoveEnd",8,void 0),B=v(t,"isValidConnection",8,void 0),J=v(t,"translateExtent",8,void 0),ne=v(t,"nodeExtent",8,void 0),ue=v(t,"onlyRenderVisibleElements",8,void 0),fe=v(t,"panOnScrollMode",24,()=>vn.Free),Z=v(t,"preventScrolling",8,!0),$=v(t,"zoomOnScroll",8,!0),j=v(t,"zoomOnDoubleClick",8,!0),ve=v(t,"zoomOnPinch",8,!0),xe=v(t,"panOnScroll",8,!1),me=v(t,"panOnDrag",8,!0),ke=v(t,"selectionOnDrag",8,void 0),Ce=v(t,"autoPanOnConnect",8,!0),Be=v(t,"autoPanOnNodeDrag",8,!0),Le=v(t,"onerror",8,void 0),qe=v(t,"ondelete",8,void 0),Ne=v(t,"onedgecreate",8,void 0),we=v(t,"attributionPosition",8,void 0),Ge=v(t,"proOptions",8,void 0),mt=v(t,"defaultEdgeOptions",8,void 0),Ae=v(t,"width",8,void 0),je=v(t,"height",8,void 0),Ke=v(t,"colorMode",8,"light"),Oe=v(t,"onconnect",8,void 0),xn=v(t,"onconnectstart",8,void 0),Tn=v(t,"onconnectend",8,void 0),$e=v(t,"onbeforedelete",8,void 0),et=v(t,"oninit",8,void 0),Me=v(t,"nodeOrigin",8,void 0),nt=v(t,"paneClickDistance",8,0),bt=v(t,"nodeClickDistance",8,0),ri=v(t,"defaultMarkerColor",8,"#b1b1b7"),uo=v(t,"style",8,void 0),St=v(t,"class",8,void 0),Ct=F(),Rt=F(),lt=F();const fo=s()||w(),it=Ku(As)?Fe():S0({nodes:R(f()),edges:R(h()),width:Ae(),height:je(),fitView:g(),nodeOrigin:Me(),nodeExtent:ne()});ii(()=>(it.width.set(d(Rt)),it.height.set(d(lt)),it.domNode.set(d(Ct)),it.syncNodeStores(f()),it.syncEdgeStores(h()),it.syncViewport(m()),g()!==void 0&&it.fitViewOnInit.set(g()),y()&&it.fitViewOptions.set(y()),Ha(it,{nodeTypes:E(),edgeTypes:k(),minZoom:p(),maxZoom:N(),translateExtent:J(),paneClickDistance:nt()}),()=>{it.reset()}));const{initialized:oi}=it;let si=F(!1);G(()=>(d(Rt),d(lt)),()=>{d(Rt)!==void 0&&d(lt)!==void 0&&(it.width.set(d(Rt)),it.height.set(d(lt)))}),G(()=>(d(si),a(),Y(et())),()=>{var ot;!d(si)&&a()&&((ot=et())==null||ot(),D(si,!0))}),G(()=>(Y(u()),Y(M()),Y(b()),Y(S()),Y(x()),Y(ri()),Y(O()),Y(L()),Y(H()),Y(ue()),Y(B()),Y(Ce()),Y(Be()),Y(Le()),Y(qe()),Y(Ne()),Y(I()),Y(V()),Y(Oe()),Y(xn()),Y(Tn()),Y($e()),Y(Me()),Da),()=>{const ot={flowId:u(),connectionLineType:M(),connectionRadius:b(),selectionMode:S(),snapGrid:x(),defaultMarkerColor:ri(),nodesDraggable:O(),nodesConnectable:L(),elementsSelectable:H(),onlyRenderVisibleElements:ue(),isValidConnection:B(),autoPanOnConnect:Ce(),autoPanOnNodeDrag:Be(),onerror:Le(),ondelete:qe(),onedgecreate:Ne(),connectionMode:I(),nodeDragThreshold:V(),onconnect:Oe(),onconnectstart:xn(),onconnectend:Tn(),onbeforedelete:$e(),nodeOrigin:Me()};Da(it,ot)}),G(()=>(Y(E()),Y(k()),Y(p()),Y(N()),Y(J()),Y(nt())),()=>{Ha(it,{nodeTypes:E(),edgeTypes:k(),minZoom:p(),maxZoom:N(),translateExtent:J(),paneClickDistance:nt()})}),G(()=>Y(Ke()),()=>{md(D(l,am(Ke())),"$colorModeClass",o)}),rt(),ge();var Lt=um();let lr;var cr=ee(Lt);j0(cr,{get selectionKey(){return _()},get deleteKey(){return T()},get panActivationKey(){return C()},get multiSelectionKey(){return z()},get zoomActivationKey(){return P()}});var Ts=re(cr,2),Lc=oe(()=>fe()===void 0?vn.Free:fe()),Vc=oe(()=>Z()===void 0?!0:Z()),Xc=oe(()=>$()===void 0?!0:$()),Yc=oe(()=>j()===void 0?!0:j()),Wc=oe(()=>ve()===void 0?!0:ve()),Bc=oe(()=>xe()===void 0?!1:xe()),Kc=oe(()=>me()===void 0?!0:me()),Fc=oe(()=>nt()===void 0?0:nt());N0(Ts,{initialViewport:fo,get onMoveStart(){return K()},get onMove(){return U()},get onMoveEnd(){return te()},get panOnScrollMode(){return d(Lc)},get preventScrolling(){return d(Vc)},get zoomOnScroll(){return d(Xc)},get zoomOnDoubleClick(){return d(Yc)},get zoomOnPinch(){return d(Wc)},get panOnScroll(){return d(Bc)},get panOnDrag(){return d(Kc)},get paneClickDistance(){return d(Fc)},children:(ot,Zy)=>{var Gc=oe(()=>me()===void 0?!0:me());P0(ot,{get panOnDrag(){return d(Gc)},get selectionOnDrag(){return ke()},$$events:{paneclick(ai){Ee.call(this,t,ai)},panecontextmenu(ai){Ee.call(this,t,ai)}},children:(ai,Uy)=>{var Hs=cm(),Ds=ae(Hs);A0(Ds,{children:(Uc,$y)=>{var Rs=lm(),Ls=ae(Rs);G0(Ls,{get defaultEdgeOptions(){return mt()},$$events:{edgeclick(be){Ee.call(this,t,be)},edgecontextmenu(be){Ee.call(this,t,be)},edgemouseenter(be){Ee.call(this,t,be)},edgemouseleave(be){Ee.call(this,t,be)}}});var Vs=re(Ls,2);tm(Vs,{get containerStyle(){return X()},get style(){return A()},isCustomComponent:n.connectionLine,$$slots:{connectionLine:(be,Jy)=>{var Ys=Te(),Jc=ae(Ys);Re(Jc,t,"connectionLine",{}),W(be,Ys)}}});var Xs=re(Vs,6);D0(Xs,{get nodeClickDistance(){return bt()},$$events:{nodeclick(be){Ee.call(this,t,be)},nodemouseenter(be){Ee.call(this,t,be)},nodemousemove(be){Ee.call(this,t,be)},nodemouseleave(be){Ee.call(this,t,be)},nodedragstart(be){Ee.call(this,t,be)},nodedrag(be){Ee.call(this,t,be)},nodedragstop(be){Ee.call(this,t,be)},nodecontextmenu(be){Ee.call(this,t,be)}}});var $c=re(Xs,2);J0($c,{$$events:{selectionclick(be){Ee.call(this,t,be)},selectioncontextmenu(be){Ee.call(this,t,be)},nodedragstart(be){Ee.call(this,t,be)},nodedrag(be){Ee.call(this,t,be)},nodedragstop(be){Ee.call(this,t,be)}}}),W(Uc,Rs)},$$slots:{default:!0}});var Zc=re(Ds,2);U0(Zc,{}),W(ai,Hs)},$$slots:{default:!0}})},$$slots:{default:!0}});var Os=re(Ts,2);rm(Os,{get proOptions(){return Ge()},get position(){return we()}});var qc=re(Os,2);Re(qc,t,"default",{}),tr(Lt,ot=>D(Ct,ot),()=>d(Ct)),pe(()=>lr=xi(Lt,lr,{style:uo(),class:at(["svelte-flow",St(),c()]),"data-testid":"svelte-flow__wrapper",...r,role:"application"},"svelte-12wlba6")),Pr(Lt,"clientWidth",ot=>D(Rt,ot)),Pr(Lt,"clientHeight",ot=>D(lt,ot)),Pe("dragover",Lt,function(ot){Ee.call(this,t,ot)}),Pe("drop",Lt,function(ot){Ee.call(this,t,ot)}),W(e,Lt),ce()}var fm=se("<button><!></button>");function dn(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]),i=_e(n,["class"]);le(t,!1);let r=v(t,"class",8,void 0),o,s,a,c,l;ge();var u=fm();let f;var h=ee(u);Re(h,t,"default",{class:"button-svg"}),pe(()=>{f=xi(u,f,{type:"button",class:at(["svelte-flow__controls-button",r()]),...i}),We(u,"--xy-controls-button-background-color-props",o),We(u,"--xy-controls-button-background-color-hover-props",s),We(u,"--xy-controls-button-color-props",a),We(u,"--xy-controls-button-color-hover-props",c),We(u,"--xy-controls-button-border-color-props",l)}),Pe("click",u,function(g){Ee.call(this,t,g)}),W(e,u),ce()}var hm=Je('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"></path></svg>');function gm(e){var t=hm();W(e,t)}var vm=Je('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 5"><path d="M0 0h32v4.2H0z"></path></svg>');function mm(e){var t=vm();W(e,t)}var ym=Je('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 30"><path d="M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"></path></svg>');function pm(e){var t=ym();W(e,t)}var _m=Je('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"></path></svg>');function wm(e){var t=_m();W(e,t)}var xm=Je('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"></path></svg>');function bm(e){var t=xm();W(e,t)}var Em=se("<!> <!>",1),km=se("<!> <!> <!> <!> <!> <!>",1);function Pc(e,t){le(t,!1);const n=Ue(),i=()=>q(M,"$nodesDraggable",n),r=()=>q(I,"$nodesConnectable",n),o=()=>q(A,"$elementsSelectable",n),s=()=>q(x,"$viewport",n),a=()=>q(T,"$minZoom",n),c=()=>q(b,"$maxZoom",n),l=F(),u=F(),f=F(),h=F();let g=v(t,"position",8,"bottom-left"),y=v(t,"showZoom",8,!0),p=v(t,"showFitView",8,!0),N=v(t,"showLock",8,!0),w=v(t,"buttonBgColor",8,void 0),m=v(t,"buttonBgColorHover",8,void 0),E=v(t,"buttonColor",8,void 0),k=v(t,"buttonColorHover",8,void 0),_=v(t,"buttonBorderColor",8,void 0),S=v(t,"ariaLabel",8,void 0),C=v(t,"style",8,void 0),z=v(t,"orientation",8,"vertical"),P=v(t,"fitViewOptions",8,void 0),O=v(t,"class",8,"");const{zoomIn:L,zoomOut:V,fitView:H,viewport:x,minZoom:T,maxZoom:b,nodesDraggable:M,nodesConnectable:I,elementsSelectable:A}=Fe(),X={bgColor:w(),bgColorHover:m(),color:E(),colorHover:k(),borderColor:_()},K=()=>{L()},U=()=>{V()},te=()=>{H(P())},B=()=>{D(l,!d(l)),M.set(d(l)),I.set(d(l)),A.set(d(l))};G(()=>(i(),r(),o()),()=>{D(l,i()||r()||o())}),G(()=>(s(),a()),()=>{D(u,s().zoom<=a())}),G(()=>(s(),c()),()=>{D(f,s().zoom>=c())}),G(()=>Y(z()),()=>{D(h,z()==="horizontal"?"horizontal":"vertical")}),rt(),ge();var J=oe(()=>at(["svelte-flow__controls",d(h),O()])),ne=oe(()=>S()??"Svelte Flow controls");Is(e,{get class(){return d(J)},get position(){return g()},"data-testid":"svelte-flow__controls",get"aria-label"(){return d(ne)},get style(){return C()},children:(ue,fe)=>{var Z=km(),$=ae(Z);Re($,t,"before",{});var j=re($,2);{var ve=qe=>{var Ne=Em(),we=ae(Ne);dn(we,Qe({class:"svelte-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",get disabled(){return d(f)}},X,{$$events:{click:K},children:(mt,Ae)=>{gm(mt)},$$slots:{default:!0}}));var Ge=re(we,2);dn(Ge,Qe({class:"svelte-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",get disabled(){return d(u)}},X,{$$events:{click:U},children:(mt,Ae)=>{mm(mt)},$$slots:{default:!0}})),W(qe,Ne)};ze(j,qe=>{y()&&qe(ve)})}var xe=re(j,2);{var me=qe=>{dn(qe,Qe({class:"svelte-flow__controls-fitview",title:"fit view","aria-label":"fit view"},X,{$$events:{click:te},children:(Ne,we)=>{pm(Ne)},$$slots:{default:!0}}))};ze(xe,qe=>{p()&&qe(me)})}var ke=re(xe,2);{var Ce=qe=>{dn(qe,Qe({class:"svelte-flow__controls-interactive",title:"toggle interactivity","aria-label":"toggle interactivity"},X,{$$events:{click:B},children:(Ne,we)=>{var Ge=Te(),mt=ae(Ge);{var Ae=Ke=>{bm(Ke)},je=Ke=>{wm(Ke)};ze(mt,Ke=>{d(l)?Ke(Ae):Ke(je,!1)})}W(Ne,Ge)},$$slots:{default:!0}}))};ze(ke,qe=>{N()&&qe(Ce)})}var Be=re(ke,2);Re(Be,t,"default",{});var Le=re(Be,2);Re(Le,t,"after",{}),W(ue,Z)},$$slots:{default:!0}}),ce()}var jt;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(jt||(jt={}));var Sm=Je("<circle></circle>");function Cm(e,t){le(t,!1);let n=v(t,"radius",8,5),i=v(t,"class",8,"");ge();var r=Sm();const o=oe(()=>Ht(at(["svelte-flow__background-pattern","dots",i()])));pe(()=>{Q(r,"cx",n()),Q(r,"cy",n()),Q(r,"r",n()),In(r,d(o),"")}),W(e,r),ce()}var Nm=Je("<path></path>");function Mm(e,t){le(t,!1);let n=v(t,"lineWidth",8,1),i=v(t,"dimensions",8),r=v(t,"variant",8,void 0),o=v(t,"class",8,"");ge();var s=Nm();const a=oe(()=>Ht(at(["svelte-flow__background-pattern",r(),o()])));pe(()=>{Q(s,"stroke-width",n()),Q(s,"d",`M${i()[0]/2} 0 V${i()[1]} M0 ${i()[1]/2} H${i()[0]}`),In(s,d(a),"")}),W(e,s),ce()}const Pm={[jt.Dots]:1,[jt.Lines]:1,[jt.Cross]:6};var zm=Je('<svg data-testid="svelte-flow__background"><pattern patternUnits="userSpaceOnUse"><!></pattern><rect x="0" y="0" width="100%" height="100%"></rect></svg>');function Am(e,t){le(t,!1);const n=Ue(),i=()=>q(k,"$flowId",n),r=()=>q(E,"$viewport",n),o=F(),s=F(),a=F(),c=F(),l=F();let u=v(t,"id",8,void 0),f=v(t,"variant",24,()=>jt.Dots),h=v(t,"gap",8,20),g=v(t,"size",8,1),y=v(t,"lineWidth",8,1),p=v(t,"bgColor",8,void 0),N=v(t,"patternColor",8,void 0),w=v(t,"patternClass",8,void 0),m=v(t,"class",8,"");const{viewport:E,flowId:k}=Fe(),_=g()||Pm[f()],S=f()===jt.Dots,C=f()===jt.Cross,z=Array.isArray(h())?h():[h(),h()];G(()=>(i(),Y(u())),()=>{D(o,`background-pattern-${i()}-${u()?u():""}`)}),G(()=>r(),()=>{D(s,[z[0]*r().zoom||1,z[1]*r().zoom||1])}),G(()=>r(),()=>{D(a,_*r().zoom)}),G(()=>(d(a),d(s)),()=>{D(c,C?[d(a),d(a)]:d(s))}),G(()=>(d(a),d(c)),()=>{D(l,S?[d(a)/2,d(a)/2]:[d(c)[0]/2,d(c)[1]/2])}),rt(),ge();var P=zm();const O=oe(()=>Ht(at(["svelte-flow__background",m()])));var L=ee(P),V=ee(L);{var H=b=>{var M=oe(()=>d(a)/2);Cm(b,{get radius(){return d(M)},get class(){return w()}})},x=b=>{Mm(b,{get dimensions(){return d(c)},get variant(){return f()},get lineWidth(){return y()},get class(){return w()}})};ze(V,b=>{S?b(H):b(x,!1)})}var T=re(L);pe(()=>{In(P,d(O),"svelte-1r7pe8d"),We(P,"--xy-background-color-props",p()),We(P,"--xy-background-pattern-color-props",N()),Q(L,"id",d(o)),Q(L,"x",r().x%d(s)[0]),Q(L,"y",r().y%d(s)[1]),Q(L,"width",d(s)[0]),Q(L,"height",d(s)[1]),Q(L,"patternTransform",`translate(-${d(l)[0]},-${d(l)[1]})`),Q(T,"fill",`url(#${d(o)})`)}),W(e,P),ce()}var Im=Je("<rect></rect>");function Tm(e,t){le(t,!1);let n=v(t,"x",8),i=v(t,"y",8),r=v(t,"width",8,0),o=v(t,"height",8,0),s=v(t,"borderRadius",8,5),a=v(t,"color",8,void 0),c=v(t,"shapeRendering",8),l=v(t,"strokeColor",8,void 0),u=v(t,"strokeWidth",8,2),f=v(t,"selected",8,!1),h=v(t,"class",8,"");ge();var g=Im();const y=oe(()=>Ht(at(["svelte-flow__minimap-node",h()])));pe(()=>{In(g,d(y),""),Q(g,"x",n()),Q(g,"y",i()),Q(g,"rx",s()),Q(g,"ry",s()),Q(g,"width",r()),Q(g,"height",o()),Q(g,"style",`${a()?`fill: ${a()};`:""}${l()?`stroke: ${l()};`:""}${u()?`stroke-width: ${u()};`:""}`),Q(g,"shape-rendering",c()),Ye(g,"selected",f())}),W(e,g),ce()}function Co(e,t){const n=Dv({domNode:e,panZoom:t.panZoom,getTransform:()=>{const r=R(t.viewport);return[r.x,r.y,r.zoom]},getViewScale:t.getViewScale});function i(r){n.update({translateExtent:r.translateExtent,width:r.width,height:r.height,inversePan:r.inversePan,zoomStep:r.zoomStep,pannable:r.pannable,zoomable:r.zoomable})}return{update:i,destroy(){n.destroy()}}}const No=e=>e instanceof Function?e:()=>e;var Om=se("<title> </title>"),Hm=Je('<svg class="svelte-flow__minimap-svg" role="img"><!><!><path class="svelte-flow__minimap-mask" fill-rule="evenodd" pointer-events="none"></path></svg>');function Dm(e,t){le(t,!1);const n=Ue(),i=()=>q(me,"$flowId",n),r=()=>q(j,"$viewport",n),o=()=>q(ve,"$containerWidth",n),s=()=>q(xe,"$containerHeight",n),a=()=>q($,"$nodeLookup",n),c=()=>q(Z,"$nodes",n),l=()=>q(ke,"$panZoom",n),u=()=>q(Ce,"$translateExtent",n),f=F(),h=F(),g=F(),y=F(),p=F(),N=F(),w=F(),m=F(),E=F(),k=F(),_=F(),S=F(),C=F();let z=v(t,"position",8,"bottom-right"),P=v(t,"ariaLabel",8,"Mini map"),O=v(t,"nodeStrokeColor",8,"transparent"),L=v(t,"nodeColor",8,void 0),V=v(t,"nodeClass",8,""),H=v(t,"nodeBorderRadius",8,5),x=v(t,"nodeStrokeWidth",8,2),T=v(t,"bgColor",8,void 0),b=v(t,"maskColor",8,void 0),M=v(t,"maskStrokeColor",8,void 0),I=v(t,"maskStrokeWidth",8,void 0),A=v(t,"width",8,void 0),X=v(t,"height",8,void 0),K=v(t,"pannable",8,!0),U=v(t,"zoomable",8,!0),te=v(t,"inversePan",8,void 0),B=v(t,"zoomStep",8,void 0),J=v(t,"style",8,""),ne=v(t,"class",8,"");const ue=200,fe=150,{nodes:Z,nodeLookup:$,viewport:j,width:ve,height:xe,flowId:me,panZoom:ke,translateExtent:Ce}=Fe(),Be=L()===void 0?void 0:No(L()),Le=No(O()),qe=No(V()),Ne=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",we=`svelte-flow__minimap-desc-${i()}`;let Ge=F(d(f));const mt=()=>d(N);G(()=>(r(),o(),s()),()=>{D(f,{x:-r().x/r().zoom,y:-r().y/r().zoom,width:o()/r().zoom,height:s()/r().zoom})}),G(()=>(a(),d(f),c()),()=>{D(Ge,a().size>0?lc(sr(a()),d(f)):d(f)),c()}),G(()=>Y(A()),()=>{D(h,A()??ue)}),G(()=>Y(X()),()=>{D(g,X()??fe)}),G(()=>(d(Ge),d(h)),()=>{D(y,d(Ge).width/d(h))}),G(()=>(d(Ge),d(g)),()=>{D(p,d(Ge).height/d(g))}),G(()=>(d(y),d(p)),()=>{D(N,Math.max(d(y),d(p)))}),G(()=>(d(N),d(h)),()=>{D(w,d(N)*d(h))}),G(()=>(d(N),d(g)),()=>{D(m,d(N)*d(g))}),G(()=>d(N),()=>{D(E,5*d(N))}),G(()=>(d(Ge),d(w),d(E)),()=>{D(k,d(Ge).x-(d(w)-d(Ge).width)/2-d(E))}),G(()=>(d(Ge),d(m),d(E)),()=>{D(_,d(Ge).y-(d(m)-d(Ge).height)/2-d(E))}),G(()=>(d(w),d(E)),()=>{D(S,d(w)+d(E)*2)}),G(()=>(d(m),d(E)),()=>{D(C,d(m)+d(E)*2)}),rt(),ge();var Ae=oe(()=>J()+(T()?`;--xy-minimap-background-color-props:${T()}`:"")),je=oe(()=>at(["svelte-flow__minimap",ne()]));Is(e,{get position(){return z()},get style(){return d(Ae)},get class(){return d(je)},"data-testid":"svelte-flow__minimap",children:(Ke,Oe)=>{var xn=Te(),Tn=ae(xn);{var $e=et=>{var Me=Hm();Q(Me,"aria-labelledby",we);var nt=ee(Me);{var bt=St=>{var Ct=Om();Q(Ct,"id",we);var Rt=ee(Ct);pe(()=>en(Rt,P())),W(St,Ct)};ze(nt,St=>{P()&&St(bt)})}var ri=re(nt);zt(ri,1,c,St=>St.id,(St,Ct)=>{var Rt=Te();const lt=oe(()=>a().get(d(Ct).id));var fo=ae(Rt);{var it=oi=>{const si=oe(()=>wn(d(lt)));var Lt=oe(()=>Be==null?void 0:Be(d(lt))),lr=oe(()=>Le(d(lt))),cr=oe(()=>qe(d(lt)));Tm(oi,Qe({get x(){return d(lt).internals.positionAbsolute.x},get y(){return d(lt).internals.positionAbsolute.y}},()=>d(si),{get selected(){return d(lt).selected},get color(){return d(Lt)},get borderRadius(){return H()},get strokeColor(){return d(lr)},get strokeWidth(){return x()},shapeRendering:Ne,get class(){return d(cr)}}))};ze(fo,oi=>{d(lt)&&uc(d(lt))&&oi(it)})}W(St,Rt)});var uo=re(ri);ut(Me,(St,Ct)=>Co==null?void 0:Co(St,Ct),()=>({panZoom:l(),viewport:j,getViewScale:mt,translateExtent:u(),width:o(),height:s(),inversePan:te(),zoomStep:B(),pannable:K(),zoomable:U()})),pe(()=>{Q(Me,"width",d(h)),Q(Me,"height",d(g)),Q(Me,"viewBox",`${d(k)??""} ${d(_)??""} ${d(S)??""} ${d(C)??""}`),We(Me,"--xy-minimap-mask-background-color-props",b()),We(Me,"--xy-minimap-mask-stroke-color-props",M()),We(Me,"--xy-minimap-mask-stroke-width-props",I()?I()*d(N):void 0),Q(uo,"d",`M${d(k)-d(E)},${d(_)-d(E)}h${d(S)+d(E)*2}v${d(C)+d(E)*2}h${-d(S)-d(E)*2}z
      M${d(f).x??""},${d(f).y??""}h${d(f).width??""}v${d(f).height??""}h${-d(f).width}z`)}),W(et,Me)};ze(Tn,et=>{l()&&et($e)})}W(Ke,xn)},$$slots:{default:!0}}),ce()}const Ra=e=>nv(e);function Rm(){const{zoomIn:e,zoomOut:t,fitView:n,onbeforedelete:i,snapGrid:r,viewport:o,width:s,height:a,minZoom:c,maxZoom:l,panZoom:u,nodes:f,edges:h,domNode:g,nodeLookup:y,nodeOrigin:p,edgeLookup:N,connectionLookup:w}=Fe(),m=_=>{var O,L;const S=R(y),C=Ra(_)?_:S.get(_.id),z=C.parentId?sv(C.position,C.measured,C.parentId,S,R(p)):C.position,P={...C,position:z,width:((O=C.measured)==null?void 0:O.width)??C.width,height:((L=C.measured)==null?void 0:L.height)??C.height};return Zn(P)},E=(_,S,C={replace:!1})=>{var O;const z=(O=R(y).get(_))==null?void 0:O.internals.userNode;if(!z)return;const P=typeof S=="function"?S(z):S;C.replace?f.update(L=>L.map(V=>V.id===_?Ra(P)?P:{...V,...P}:V)):(Object.assign(z,P),f.update(L=>L))},k=_=>R(y).get(_);return{zoomIn:e,zoomOut:t,getInternalNode:k,getNode:_=>{var S;return(S=k(_))==null?void 0:S.internals.userNode},getNodes:_=>_===void 0?R(f):La(R(y),_),getEdge:_=>R(N).get(_),getEdges:_=>_===void 0?R(h):La(R(N),_),setZoom:(_,S)=>{const C=R(u);return C?C.scaleTo(_,{duration:S==null?void 0:S.duration}):Promise.resolve(!1)},getZoom:()=>R(o).zoom,setViewport:async(_,S)=>{const C=R(o),z=R(u);return z?(await z.setViewport({x:_.x??C.x,y:_.y??C.y,zoom:_.zoom??C.zoom},{duration:S==null?void 0:S.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>R(o),setCenter:async(_,S,C)=>{const z=typeof(C==null?void 0:C.zoom)<"u"?C.zoom:R(l),P=R(u);return P?(await P.setViewport({x:R(s)/2-_*z,y:R(a)/2-S*z,zoom:z},{duration:C==null?void 0:C.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:n,fitBounds:async(_,S)=>{const C=R(u);if(!C)return Promise.resolve(!1);const z=Cs(_,R(s),R(a),R(c),R(l),(S==null?void 0:S.padding)??.1);return await C.setViewport(z,{duration:S==null?void 0:S.duration}),Promise.resolve(!0)},getIntersectingNodes:(_,S=!0,C)=>{const z=ba(_),P=z?_:m(_);return P?(C||R(f)).filter(O=>{const L=R(y).get(O.id);if(!L||!z&&O.id===_.id)return!1;const V=Zn(L),H=Mi(V,P);return S&&H>0||H>=P.width*P.height}):[]},isNodeIntersecting:(_,S,C=!0)=>{const P=ba(_)?_:m(_);if(!P)return!1;const O=Mi(P,S);return C&&O>0||O>=P.width*P.height},deleteElements:async({nodes:_=[],edges:S=[]})=>{const{nodes:C,edges:z}=await oc({nodesToRemove:_,edgesToRemove:S,nodes:R(f),edges:R(h),onBeforeDelete:R(i)});return C&&f.update(P=>P.filter(O=>!C.some(({id:L})=>L===O.id))),z&&h.update(P=>P.filter(O=>!z.some(({id:L})=>L===O.id))),{deletedNodes:C,deletedEdges:z}},screenToFlowPosition:(_,S={snapToGrid:!0})=>{const C=R(g);if(!C)return _;const z=S.snapToGrid?R(r):!1,{x:P,y:O,zoom:L}=R(o),{x:V,y:H}=C.getBoundingClientRect(),x={x:_.x-V,y:_.y-H};return ar(x,[P,O,L],z!==null,z||[1,1])},flowToScreenPosition:_=>{const S=R(g);if(!S)return _;const{x:C,y:z,zoom:P}=R(o),{x:O,y:L}=S.getBoundingClientRect(),V=cc(_,[C,z,P]);return{x:V.x+O,y:V.y+L}},toObject:()=>({nodes:R(f).map(_=>({..._,position:{..._.position},data:{..._.data}})),edges:R(h).map(_=>({..._})),viewport:{...R(o)}}),updateNode:E,updateNodeData:(_,S,C)=>{var O;const z=(O=R(y).get(_))==null?void 0:O.internals.userNode;if(!z)return;const P=typeof S=="function"?S(z):S;z.data=C!=null&&C.replace?P:{...z.data,...P},f.update(L=>L)},getNodesBounds:_=>{const S=R(y),C=R(p);return iv(_,{nodeLookup:S,nodeOrigin:C})},getHandleConnections:({type:_,id:S,nodeId:C})=>{var z;return Array.from(((z=R(w).get(`${C}-${_}-${S??null}`))==null?void 0:z.values())??[])},viewport:o}}function La(e,t){var i;const n=[];for(const r of t){const o=e.get(r);if(o){const s="internals"in o?(i=o.internals)==null?void 0:i.userNode:o;n.push(s)}}return n}var Lm=se("<div><!></div>");function Va(e,t){le(t,!1);const n=Ue(),i=()=>q(A,"$nodeLookup",n),r=()=>q(K,"$viewport",n),o=()=>q(X,"$snapGrid",n),s=()=>q(te,"$nodeOrigin",n),a=()=>q(B,"$domNode",n),c=()=>q(U,"$nodes",n),l=F(),u=F(),f=F(),h=F(),g=F(),y=F(),p=F(),N=F(),w=F(),m=F(),E=F();let k=v(t,"nodeId",8,void 0),_=v(t,"position",8,void 0),S=v(t,"variant",24,()=>cn.Handle),C=v(t,"color",8,void 0),z=v(t,"minWidth",8,10),P=v(t,"minHeight",8,10),O=v(t,"maxWidth",24,()=>Number.MAX_VALUE),L=v(t,"maxHeight",24,()=>Number.MAX_VALUE),V=v(t,"keepAspectRatio",8,!1),H=v(t,"shouldResize",8,void 0),x=v(t,"onResizeStart",8,void 0),T=v(t,"onResize",8,void 0),b=v(t,"onResizeEnd",8,void 0),M=v(t,"style",8,""),I=v(t,"class",8,"");const{nodeLookup:A,snapGrid:X,viewport:K,nodes:U,nodeOrigin:te,domNode:B}=Fe(),J=Kn("svelteflow__node_id");let ne=F(),ue=F(null);ii(()=>(d(ne)&&D(ue,Qv({domNode:d(ne),nodeId:d(g),getStoreItems:()=>({nodeLookup:i(),transform:[r().x,r().y,r().zoom],snapGrid:o()??void 0,snapToGrid:!!o(),nodeOrigin:s(),paneDomNode:a()}),onChange:(j,ve)=>{var me,ke;const xe=(me=i().get(d(g)))==null?void 0:me.internals.userNode;if(xe){j.x!==void 0&&j.y!==void 0&&(xe.position={x:j.x,y:j.y}),j.width!==void 0&&j.height!==void 0&&(xe.width=j.width,xe.height=j.height);for(const Ce of ve){const Be=(ke=i().get(Ce.id))==null?void 0:ke.internals.userNode;Be&&(Be.position=Ce.position)}bi(U,c())}}})),()=>{var j;(j=d(ue))==null||j.destroy()})),G(()=>Y(z()),()=>{D(l,z()??10)}),G(()=>Y(P()),()=>{D(u,P()??10)}),G(()=>Y(O()),()=>{D(f,O()??Number.MAX_VALUE)}),G(()=>Y(L()),()=>{D(h,L()??Number.MAX_VALUE)}),G(()=>Y(k()),()=>{D(g,typeof k()=="string"?k():J)}),G(()=>(Y(S()),cn),()=>{D(y,S()===cn.Line?"right":"bottom-right")}),G(()=>(Y(_()),d(y)),()=>{D(p,_()??d(y))}),G(()=>d(p),()=>{D(N,d(p).split("-"))}),G(()=>(Y(S()),cn),()=>{D(w,S()===cn.Line?"border-color":"background-color")}),G(()=>Y(M()),()=>{D(m,M()??"")}),G(()=>(Y(C()),d(m),d(w)),()=>{D(E,C()?`${d(m)} ${d(w)}: ${C()};`:d(m))}),G(()=>(d(ue),d(p),d(l),d(u),d(f),d(h),Y(V()),Y(x()),Y(T()),Y(b()),Y(H())),()=>{var j;(j=d(ue))==null||j.update({controlPosition:d(p),boundaries:{minWidth:d(l),minHeight:d(u),maxWidth:d(f),maxHeight:d(h)},keepAspectRatio:!!V(),onResizeStart:x(),onResize:T(),onResizeEnd:b(),shouldResize:H()})}),rt(),ge();var fe=Lm();const Z=oe(()=>Ht(at(["svelte-flow__resize-control","nodrag",...d(N),S(),I()])));var $=ee(fe);Re($,t,"default",{}),tr(fe,j=>D(ne,j),()=>d(ne)),pe(()=>{ms(fe,d(Z),""),Q(fe,"style",d(E))}),W(e,fe),ce()}var Vm=se("<!> <!>",1);function zc(e,t){le(t,!1);let n=v(t,"nodeId",8,void 0),i=v(t,"isVisible",8,!0),r=v(t,"handleClass",8,void 0),o=v(t,"handleStyle",8,void 0),s=v(t,"lineClass",8,void 0),a=v(t,"lineStyle",8,void 0),c=v(t,"color",8,void 0),l=v(t,"minWidth",8,10),u=v(t,"minHeight",8,10),f=v(t,"maxWidth",24,()=>Number.MAX_VALUE),h=v(t,"maxHeight",24,()=>Number.MAX_VALUE),g=v(t,"keepAspectRatio",8,!1),y=v(t,"shouldResize",8,void 0),p=v(t,"onResizeStart",8,void 0),N=v(t,"onResize",8,void 0),w=v(t,"onResizeEnd",8,void 0),m=l()||10,E=u()||10,k=f()||Number.MAX_VALUE,_=h()||Number.MAX_VALUE;ge();var S=Te(),C=ae(S);{var z=P=>{var O=Vm(),L=ae(O);zt(L,1,()=>qv,H=>H,(H,x)=>{Va(H,{get class(){return s()},get style(){return a()},get nodeId(){return n()},get position(){return d(x)},get variant(){return cn.Line},get color(){return c()},minWidth:m,minHeight:E,maxWidth:k,maxHeight:_,get onResizeStart(){return p()},get keepAspectRatio(){return g()},get shouldResize(){return y()},get onResize(){return N()},get onResizeEnd(){return w()}})});var V=re(L,2);zt(V,1,()=>Fv,H=>H,(H,x)=>{Va(H,{get class(){return r()},get style(){return o()},get nodeId(){return n()},get position(){return d(x)},get color(){return c()},minWidth:m,minHeight:E,maxWidth:k,maxHeight:_,get onResizeStart(){return p()},get keepAspectRatio(){return g()},get shouldResize(){return y()},get onResize(){return N()},get onResizeEnd(){return w()}})}),W(P,O)};ze(C,P=>{i()&&P(z)})}W(e,S),ce()}const Xm=[];function Ac({type:e,nodeId:t,id:n=null}){const{edges:i,connectionLookup:r}=Fe(),o=Kn("svelteflow__node_id"),s=t??o;let a;return Sn([i,r],([,c],l)=>{const u=c.get(`${s}-${e}-${n||null}`);ic(u,a)||(a=u,l(Array.from((a==null?void 0:a.values())||[])))},Xm)}/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ym={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var Wm=Je("<svg><!><!></svg>");function xt(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]),i=_e(n,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);le(t,!1);let r=v(t,"name",8,void 0),o=v(t,"color",8,"currentColor"),s=v(t,"size",8,24),a=v(t,"strokeWidth",8,2),c=v(t,"absoluteStrokeWidth",8,!1),l=v(t,"iconNode",24,()=>[]);const u=(...p)=>p.filter((N,w,m)=>!!N&&m.indexOf(N)===w).join(" ");ge();var f=Wm();let h;var g=ee(f);zt(g,1,l,yi,(p,N)=>{let w=()=>d(N)[0],m=()=>d(N)[1];var E=Te(),k=ae(E);dd(k,w,!0,(_,S)=>{let C;pe(()=>C=xi(_,C,{...m()},void 0,_.namespaceURI===$a,_.nodeName.includes("-")))}),W(p,E)});var y=re(g);Re(y,t,"default",{}),pe(()=>h=xi(f,h,{...Ym,...i,width:s(),height:s(),stroke:o(),"stroke-width":c()?Number(a())*24/Number(s()):a(),class:u("lucide-icon","lucide",r()?`lucide-${r()}`:"",n.class)},void 0,!0)),W(e,f),ce()}function Bm(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);xt(e,Qe({name:"copy"},()=>n,{iconNode:[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"}]],children:(r,o)=>{var s=Te(),a=ae(s);Re(a,t,"default",{}),W(r,s)},$$slots:{default:!0}}))}function Km(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);xt(e,Qe({name:"download"},()=>n,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"7 10 12 15 17 10"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3"}]],children:(r,o)=>{var s=Te(),a=ae(s);Re(a,t,"default",{}),W(r,s)},$$slots:{default:!0}}))}function Fm(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);xt(e,Qe({name:"ellipsis-vertical"},()=>n,{iconNode:[["circle",{cx:"12",cy:"12",r:"1"}],["circle",{cx:"12",cy:"5",r:"1"}],["circle",{cx:"12",cy:"19",r:"1"}]],children:(r,o)=>{var s=Te(),a=ae(s);Re(a,t,"default",{}),W(r,s)},$$slots:{default:!0}}))}function Ic(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);xt(e,Qe({name:"loader"},()=>n,{iconNode:[["path",{d:"M12 2v4"}],["path",{d:"m16.2 7.8 2.9-2.9"}],["path",{d:"M18 12h4"}],["path",{d:"m16.2 16.2 2.9 2.9"}],["path",{d:"M12 18v4"}],["path",{d:"m4.9 19.1 2.9-2.9"}],["path",{d:"M2 12h4"}],["path",{d:"m4.9 4.9 2.9 2.9"}]],children:(r,o)=>{var s=Te(),a=ae(s);Re(a,t,"default",{}),W(r,s)},$$slots:{default:!0}}))}function qm(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);xt(e,Qe({name:"map"},()=>n,{iconNode:[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z"}],["path",{d:"M15 5.764v15"}],["path",{d:"M9 3.236v15"}]],children:(r,o)=>{var s=Te(),a=ae(s);Re(a,t,"default",{}),W(r,s)},$$slots:{default:!0}}))}function Gm(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);xt(e,Qe({name:"play"},()=>n,{iconNode:[["polygon",{points:"6 3 20 12 6 21 6 3"}]],children:(r,o)=>{var s=Te(),a=ae(s);Re(a,t,"default",{}),W(r,s)},$$slots:{default:!0}}))}function Zm(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);xt(e,Qe({name:"settings"},()=>n,{iconNode:[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}],["circle",{cx:"12",cy:"12",r:"3"}]],children:(r,o)=>{var s=Te(),a=ae(s);Re(a,t,"default",{}),W(r,s)},$$slots:{default:!0}}))}function Um(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);xt(e,Qe({name:"square-arrow-out-up-right"},()=>n,{iconNode:[["path",{d:"M21 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h6"}],["path",{d:"m21 3-9 9"}],["path",{d:"M15 3h6v6"}]],children:(r,o)=>{var s=Te(),a=ae(s);Re(a,t,"default",{}),W(r,s)},$$slots:{default:!0}}))}function $m(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);xt(e,Qe({name:"square-play"},()=>n,{iconNode:[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}],["path",{d:"m9 8 6 4-6 4Z"}]],children:(r,o)=>{var s=Te(),a=ae(s);Re(a,t,"default",{}),W(r,s)},$$slots:{default:!0}}))}function Xa(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);xt(e,Qe({name:"square-x"},()=>n,{iconNode:[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}],["path",{d:"m15 9-6 6"}],["path",{d:"m9 9 6 6"}]],children:(r,o)=>{var s=Te(),a=ae(s);Re(a,t,"default",{}),W(r,s)},$$slots:{default:!0}}))}function Jm(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);xt(e,Qe({name:"text-cursor-input"},()=>n,{iconNode:[["path",{d:"M5 4h1a3 3 0 0 1 3 3 3 3 0 0 1 3-3h1"}],["path",{d:"M13 20h-1a3 3 0 0 1-3-3 3 3 0 0 1-3 3H5"}],["path",{d:"M5 16H4a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h1"}],["path",{d:"M13 8h7a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-7"}],["path",{d:"M9 7v10"}]],children:(r,o)=>{var s=Te(),a=ae(s);Re(a,t,"default",{}),W(r,s)},$$slots:{default:!0}}))}function jm(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);xt(e,Qe({name:"upload"},()=>n,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"17 8 12 3 7 8"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15"}]],children:(r,o)=>{var s=Te(),a=ae(s);Re(a,t,"default",{}),W(r,s)},$$slots:{default:!0}}))}function Qm(e,t){const n=_e(t,["children","$$slots","$$events","$$legacy"]);xt(e,Qe({name:"x"},()=>n,{iconNode:[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]],children:(r,o)=>{var s=Te(),a=ae(s);Re(a,t,"default",{}),W(r,s)},$$slots:{default:!0}}))}const ey={nodes:[{id:"1",type:"textInput",position:{x:-20,y:0},data:{value:"What is AGI?"},width:180,height:100},{id:"2",type:"generate",position:{x:240,y:0},width:460,height:340,data:{markdown:"",html:"",model:"gemini-2.0-flash-exp"}}],edges:[{source:"1",target:"2"}]};var Kr,Tc;class ty{constructor(){Ve(this,Kr);const t=Nt(this,Kr,Tc).call(this);this.nodes=ie(t.nodes),this.edges=ie(t.edges)}LoadFromFile(t){this.nodes.set(t.nodes),this.edges.set(t.edges),this.Save()}AddNode(t){this.nodes.update(n=>(n.push(t),n)),this.Save()}AddEdge(t,n){this.edges.update(i=>(i.push({source:t,target:n,id:new Date().getTime().toString()}),i)),this.Save()}RemoveNode(t){this.nodes.update(n=>n.filter(i=>i.id!=t.id)),this.Save()}RemoveEdge(t){this.edges.update(n=>n.filter(i=>i.source!=t.source||i.target!=t.target)),this.Save()}RemovePrevEdge(t){const n={};n[t.fromHandle.type]=t.fromHandle.nodeId,n[t.toHandle.type]=t.toHandle.nodeId,this.edges.update(i=>{for(let r=i.length-1;r>=0;r--){let o=i[r];n.id?o.target==n.target&&o.id!=n.id&&i.splice(r,1):o.source==n.source&&o.target==n.target&&(n.id=o.id)}return i}),this.Save()}UpdateNode(t,n){this.nodes.update(i=>{const r=i.find(o=>o.id===t);return r&&(r.data={...r.data,...n}),i}),this.Save()}Dump(){return{nodes:R(this.nodes),edges:R(this.edges)}}Save(){const t=this.Dump();localStorage.graph=JSON.stringify(t)}GetPrompt(t){const i=R(this.edges).find(a=>a.target===t);if(!i)return"";const o=R(this.nodes).find(a=>a.id===i.source);let s;switch(o.type){case"textInput":s={role:"user",content:o.data.value};break;case"generate":s={role:"model",content:o.data.markdown};break}return[...this.GetPrompt(o.id),s]}}Kr=new WeakSet,Tc=function(){return localStorage.graph?JSON.parse(localStorage.graph):ey};const tt=new ty;var Ai,Ii,Ti,Oi,Hi,Di,Ri,Li,Vi,kn,vi;class ny{constructor(){Ve(this,kn);Ve(this,Ai,Ze(!1));Ve(this,Ii,Ze(null));Ve(this,Ti,Ze(null));Ve(this,Oi,Ze(void 0));Ve(this,Hi,Ze(void 0));Ve(this,Di,Ze(void 0));Ve(this,Ri,Ze(void 0));Ve(this,Li,Ze(0));Ve(this,Vi,Ze(0))}get IsVisible(){return d(de(this,Ai))}set IsVisible(t){D(de(this,Ai),Xe(t))}get Node(){return d(de(this,Ii))}set Node(t){D(de(this,Ii),Xe(t))}get Edge(){return d(de(this,Ti))}set Edge(t){D(de(this,Ti),Xe(t))}get Top(){return d(de(this,Oi))}set Top(t){D(de(this,Oi),Xe(t))}get Left(){return d(de(this,Hi))}set Left(t){D(de(this,Hi),Xe(t))}get Right(){return d(de(this,Di))}set Right(t){D(de(this,Di),Xe(t))}get Bottom(){return d(de(this,Ri))}set Bottom(t){D(de(this,Ri),Xe(t))}get CanvasWidth(){return d(de(this,Li))}set CanvasWidth(t){D(de(this,Li),Xe(t))}get CanvasHeight(){return d(de(this,Vi))}set CanvasHeight(t){D(de(this,Vi),Xe(t))}ShowPane(t){Nt(this,kn,vi).call(this,t)}ShowNode(t,n){Nt(this,kn,vi).call(this,t,n)}ShowEdge(t,n){Nt(this,kn,vi).call(this,t,null,n)}ShowConnect(t,n){Nt(this,kn,vi).call(this,t,null,null,n)}Hide(){this.IsVisible&&(this.Event=null,this.Node=null,this.Edge=null,this.IsVisible=!1)}}Ai=new WeakMap,Ii=new WeakMap,Ti=new WeakMap,Oi=new WeakMap,Hi=new WeakMap,Di=new WeakMap,Ri=new WeakMap,Li=new WeakMap,Vi=new WeakMap,kn=new WeakSet,vi=function(t,n,i,r){if(t.target.closest(".nomenu")){this.Hide();return}this.Event=t,this.Node=n,this.Edge=i,this.Connection=r,t.preventDefault(),this.Top=t.clientY<this.CanvasHeight-200?t.clientY+"px":void 0,this.Left=t.clientX<this.CanvasWidth-200?t.clientX+"px":void 0,this.Right=t.clientX>=this.CanvasWidth-200?this.CanvasWidth-t.clientX+"px":void 0,this.Bottom=t.clientY>=this.CanvasHeight-200?this.CanvasHeight-t.clientY+"px":void 0,this.IsVisible=!0};const He=new ny;var Xi,Yi,Wi,Bi,Ki,Fr;class iy{constructor(){Ve(this,Xi,Ze(!1));Ve(this,Yi,Ze(""));Ve(this,Wi,Ze(""));Ve(this,Bi,Ze(""));Ve(this,Ki,Ze("gemini-2.0-flash-exp"));Ve(this,Fr,Qt(()=>!!(this.openaiKey||this.googleKey||this.anthropicKey)));if(localStorage.settings){const t=JSON.parse(localStorage.settings);t.geminiKey&&(t.googleKey=t.geminiKey,delete t.geminiKey,localStorage.settings=JSON.stringify(t)),this.openaiKey=t.openaiKey,this.googleKey=t.googleKey,this.anthropicKey=t.anthropicKey,this.defaultModel=t.defaultModel}this.HasApiKey||this.Show()}get IsVisible(){return d(de(this,Xi))}set IsVisible(t){D(de(this,Xi),Xe(t))}get openaiKey(){return d(de(this,Yi))}set openaiKey(t){D(de(this,Yi),Xe(t))}get googleKey(){return d(de(this,Wi))}set googleKey(t){D(de(this,Wi),Xe(t))}get anthropicKey(){return d(de(this,Bi))}set anthropicKey(t){D(de(this,Bi),Xe(t))}get defaultModel(){return d(de(this,Ki))}set defaultModel(t){D(de(this,Ki),Xe(t))}get HasApiKey(){return d(de(this,Fr))}Save(){localStorage.settings=JSON.stringify({openaiKey:this.openaiKey,googleKey:this.googleKey,anthropicKey:this.anthropicKey,defaultModel:this.defaultModel})}Show(){this.IsVisible=!0}Hide(){this.IsVisible=!1}}Xi=new WeakMap,Yi=new WeakMap,Wi=new WeakMap,Bi=new WeakMap,Ki=new WeakMap,Fr=new WeakMap;const ft=new iy;var ry=se("<!> <!> <!>",1),oy=se('<input type="file" id="fileInput" style="display: none;" accept=".json"> <!>',1);function sy(e,t){le(t,!1);let n=F();function i(c){const l=c.target.files[0];if(!l||l.type!="application/json")throw"Invalid file";const u=new FileReader;u.onload=f=>{const h=JSON.parse(f.target.result.toString());if(!Array.isArray(h.nodes)||!Array.isArray(h.edges))throw"Invalid file";tt.LoadFromFile(h)},u.readAsText(l)}function r(){const c=tt.Dump(),l=JSON.stringify(c,null,2),u=new Blob([l],{type:"application/json"}),f=URL.createObjectURL(u),h=document.createElement("a");h.href=f,h.download="llm-graph.json",h.click(),URL.revokeObjectURL(f)}ge();var o=oy(),s=ae(o);s.__change=i,tr(s,c=>D(n,c),()=>d(n));var a=re(s,2);Pc(a,{position:"top-left",showFitView:!1,showLock:!1,showZoom:!1,children:(c,l)=>{var u=ry(),f=ae(u);dn(f,{title:"Import",class:"canvas-llm-controll-button",$$events:{click:()=>d(n).click()},children:(y,p)=>{jm(y,{size:24})},$$slots:{default:!0}});var h=re(f,2);dn(h,{title:"Export",class:"canvas-llm-controll-button",$$events:{click:r},children:(y,p)=>{Km(y,{size:24})},$$slots:{default:!0}});var g=re(h,2);dn(g,{title:"Settings",class:"canvas-llm-controll-button",$$events:{click:()=>ft.Show()},children:(y,p)=>{Zm(y,{size:24})},$$slots:{default:!0}}),W(c,u)},$$slots:{default:!0}}),W(e,o),ce()}rn(["change"]);var ay=se('<button class="context-menu-item svelte-1llxoho"><!> Delete node</button>'),ly=se('<button class="context-menu-item svelte-1llxoho"><!> Delete edge</button>'),cy=se('<div class="context-menu-item svelte-1llxoho" style="padding: 0.5em;background: #ddd; color: #666;">Add node:</div> <button class="context-menu-item svelte-1llxoho"><!> TextInput</button> <button class="context-menu-item svelte-1llxoho"><!> Generate</button>',1),uy=se('<div class="context-menu svelte-1llxoho"><!></div>');function dy(e,t){le(t,!1);const{screenToFlowPosition:n}=Rm();function i(f){f.id=new Date().getTime().toString(),f.origin=[0,0],f.position=n({x:He.Event.clientX,y:He.Event.clientY}),tt.AddNode(f),He.Connection&&(He.Connection.fromHandle.type=="source"?tt.AddEdge(He.Connection.fromNode.id,f.id):tt.AddEdge(f.id,He.Connection.fromNode.id)),He.Hide()}function r(){i({type:"textInput",width:260,height:120,data:{value:""}})}function o(){i({type:"generate",width:460,height:340,data:{markdown:"",html:"",model:ft.defaultModel}})}function s(){tt.RemoveNode(He.Node),He.Hide()}function a(){tt.RemoveEdge(He.Edge),He.Hide()}ge();var c=Te(),l=ae(c);{var u=f=>{var h=uy(),g=ee(h);{var y=N=>{var w=ay(),m=ee(w);Xa(m,{size:24,color:"red"}),Pe("click",w,s),W(N,w)},p=N=>{var w=Te(),m=ae(w);{var E=_=>{var S=ly(),C=ee(S);Xa(C,{size:24,color:"red"}),Pe("click",S,a),W(_,S)},k=_=>{var S=cy(),C=re(ae(S),2),z=ee(C);Jm(z,{size:24,color:"#00abff"});var P=re(C,2),O=ee(P);$m(O,{size:24,color:"#00abff"}),Pe("click",C,r),Pe("click",P,o),W(_,S)};ze(m,_=>{He.Edge?_(E):_(k,!1)},!0)}W(N,w)};ze(g,N=>{He.Node?N(y):N(p,!1)})}pe(()=>{We(h,"top",He.Top),We(h,"left",He.Left),We(h,"right",He.Right),We(h,"bottom",He.Bottom)}),W(f,h)};ze(l,f=>{He.IsVisible&&f(u)})}W(e,c),ce()}function fy(e,t){t.text&&navigator.clipboard.writeText(t.text)}var hy=se('<button class="btn-dark svelte-1fizegg" title="Copy text" aria-label="Copy text"><!></button>');function Oc(e,t){var n=hy();n.__click=[fy,t];var i=ee(n);Bm(i,{size:16}),W(e,n)}rn(["click"]);function gy(e,t,n){tt.UpdateNode(t.id,{value:d(n)})}var vy=se('<!> <!> <!> <node-content><node-header><node-header-left>Input</node-header-left> <node-header-right><!></node-header-right></node-header> <node-body><textarea class="nodrag nozoom node-text"></textarea></node-body></node-content>',3);function my(e,t){le(t,!0),Ue();let n=Ze(Xe(t.data.value));Ac({nodeId:t.id,type:"target"});var i=vy(),r=ae(i);zc(r,{minWidth:100,minHeight:30,onResizeEnd:()=>tt.Save()});var o=re(r,2);_n(o,{type:"target",get position(){return he.Left}});var s=re(o,2);_n(s,{type:"source",get position(){return he.Right}});var a=re(s,2),c=ee(a),l=ee(c),u=re(l,2),f=ee(u);Oc(f,{get text(){return d(n)}});var h=re(c,2);xl(h,"class","nomenu");var g=ee(h);g.__change=[gy,t,n],El(g,()=>d(n),y=>D(n,y)),W(e,i),ce()}rn(["change"]);var yy=se('<button type="button" class="btn-dark svelte-1fizegg"><!></button>');function py(e,t){var n=yy();n.__click=function(...r){var o;(o=t.onclick)==null||o.apply(this,r)};var i=ee(n);Fm(i,{size:16}),W(e,n)}rn(["click"]);var Fi,qi,nn,Hc,Dc,ts;class _y{constructor(){Ve(this,nn);Ve(this,Fi,Ze(Xe([])));Ve(this,qi,Ze(Xe({})));Nt(this,nn,Hc).call(this),Nt(this,nn,Dc).call(this)}get providers(){return d(de(this,Fi))}set providers(t){D(de(this,Fi),Xe(t))}get models(){return d(de(this,qi))}set models(t){D(de(this,qi),Xe(t))}}Fi=new WeakMap,qi=new WeakMap,nn=new WeakSet,Hc=function(){if(localStorage.info)try{const t=JSON.parse(localStorage.info);Nt(this,nn,ts).call(this,t)}catch(t){console.log("[AppInfo > readLocal]",t,localStorage.info)}},Dc=async function(){const t="https://script.google.com/macros/s/AKfycbzt9TaEx3_lNwYDXiWk1SOvcdsq4c4THAX85Mc-5-yYH4AQ9fuJ3G3TTuUK1fMC9k9dMQ/exec?app="+window.location,n=await fetch(t);if(!n.ok)throw new Error(`[AppInfo > readRemote] ${n.status}: ${n.statusText}`);const i=await n.json();localStorage.info=JSON.stringify(i),Nt(this,nn,ts).call(this,i)},ts=function(t){const n={};for(let i=0;i<t.models.length;i++){let r=t.models[i];for(let o=0;o<r.models.length;o++){let s=r.models[o];n[s.id]=r.id}}this.models=n,this.providers=t.models};const zn=new _y,Mo=`

---

`;class wy{async Call(t,n){const i=zn.models[t];let r;switch(i){case"openai":r=await this.CallOpenAI(t,n);break;case"google":r=await this.CallGoogle(t,n);break;case"anthropic":r=await this.CallAnthropic(t,n);break;default:throw`[AiClient > Call] Invalid LLM: ${i} / ${t}`}const o=marked.parse(r);return{markdown:r,html:o}}async CallOpenAI(t,n){const i="https://api.openai.com/v1/chat/completions",r=[];for(var o=0;o<n.length;o++){let s=n[o],a={content:s.content};switch(s.role){case"system":a.role="system";break;case"user":a.role="user";break;case"model":a.role="assistant";break}r.push(a)}try{const s=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+ft.openaiKey},body:JSON.stringify({model:t,messages:r})});if(!s.ok)throw new Error(`[AiClient > CallOpenAI] ${s.status}: ${s.statusText}`);const a=await s.json();let c="";return a.choices.forEach(l=>{c&&(c+=Mo),c+=l.message.content}),c}catch(s){throw console.error("[AiClient > CallOpenAI]",s),s}}async CallGoogle(t,n){const i=`https://generativelanguage.googleapis.com/v1beta/models/${t}:generateContent?key=${ft.googleKey}`,r=[];for(var o=0;o<n.length;o++){let s=n[o],a={parts:[{text:s.content}]};switch(s.role){case"user":a.role="user";break;case"model":a.role="model";break;case"system":a.role="user",a.parts[0].text=`*${s.content}*`;break}r.push(a)}try{const s=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:r,safetySettings:[{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"BLOCK_NONE"}]})});if(!s.ok)throw new Error(`[AiClient > CallGoogle] ${s.status}: ${s.statusText}`);const a=await s.json();let c="";return a.candidates.forEach(l=>{l.content.parts.forEach(u=>{c&&(c+=Mo),c+=u.text})}),c}catch(s){throw console.error("[AiClient > CallGoogle]",s),s}}async CallAnthropic(t,n){const i="https://api.anthropic.com/v1/messages",r=[];for(var o=0;o<n.length;o++){let s=n[o],a={content:s.content};switch(s.role){case"system":a.role="user";break;case"user":a.role="user";break;case"model":a.role="assistant";break}r.push(a)}try{const s=await fetch(i,{method:"POST",headers:{"x-api-key":ft.anthropicKey,"anthropic-version":"2023-06-01","content-type":"application/json","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:t,messages:r,max_tokens:2048})});if(!s.ok)throw new Error(`[AiClient > CallAnthropic] ${s.status}: ${s.statusText}`);const a=await s.json();let c="";return a.content.forEach(l=>{c&&(c+=Mo),c+=l.text}),c}catch(s){throw console.error("[AiClient > CallAnthropic]",s),s}}}const xy=new wy;var Gi,Zi,qr,Ya;let by=(Ya=class{constructor(){Ve(this,Gi,Ze(0));Ve(this,Zi,Ze(""));Ve(this,qr,Qt(()=>this.NodeID>0))}get NodeID(){return d(de(this,Gi))}set NodeID(t){D(de(this,Gi),Xe(t))}get ModelID(){return d(de(this,Zi))}set ModelID(t){D(de(this,Zi),Xe(t))}get IsVisible(){return d(de(this,qr))}Show(t,n){this.NodeID=t,this.ModelID=n}Hide(){this.NodeID=0}},Gi=new WeakMap,Zi=new WeakMap,qr=new WeakMap,Ya);const Ut=new by;async function Ey(e,t,n){if(!t.data.model){Ut.Show(t.id);return}if(!zn.models[t.data.model]){Ut.Show(t.id);return}const i=zn.models[t.data.model];if(i=="openai"&&!ft.openaiKey){ft.Show();return}if(i=="google"&&!ft.googleKey){ft.Show();return}if(i=="anthropic"&&!ft.anthropicKey){ft.Show();return}D(n,!0);try{const r=tt.GetPrompt(t.id),{markdown:o,html:s}=await xy.Call(t.data.model,r);tt.UpdateNode(t.id,{markdown:o,html:s})}catch(r){console.error("[GenerateNode > Exec]",r)}D(n,!1)}var ky=se('<button class="btn-main" title="Call LLM" aria-label="Call LLM"><!></button>'),Sy=se('<button class="btn-main" title="In progress..." aria-label="In progress..." disabled><!></button>'),Cy=se("<!> <!> <!> <node-content><node-header><node-header-left><!> <!></node-header-left> <node-header-right><!> <!></node-header-right></node-header> <node-body><!></node-body></node-content>",3);function Ny(e,t){le(t,!0),Ue();let n=Ze(!1);Ac({nodeId:t.id,type:"target"});var i=Cy(),r=ae(i);zc(r,{minWidth:100,minHeight:30,onResizeEnd:()=>tt.Save()});var o=re(r,2);_n(o,{type:"target",get position(){return he.Left}});var s=re(o,2);_n(s,{type:"source",get position(){return he.Right}});var a=re(s,2),c=ee(a),l=ee(c),u=ee(l);{var f=_=>{var S=Ro();pe(()=>en(S,t.data.model)),W(_,S)},h=_=>{var S=Ro("Generate");W(_,S)};ze(u,_=>{t.data.model?_(f):_(h,!1)})}var g=re(u,2);{var y=_=>{var S=ky();S.__click=[Ey,t,n];var C=ee(S);Gm(C,{size:16}),W(_,S)},p=_=>{var S=Sy(),C=ee(S);Ic(C,{size:16,class:"rotate"}),W(_,S)};ze(g,_=>{d(n)?_(p,!1):_(y)})}var N=re(l,2),w=ee(N);Oc(w,{get text(){return t.data.markdown}});var m=re(w,2);py(m,{onclick:()=>Ut.Show(t.id,t.data.model)});var E=re(c,2);xl(E,"class","nodrag nozoom nomenu node-text");var k=ee(E);cd(k,()=>t.data.html),W(e,i),ce()}rn(["click"]);var My=se("<!> <!> <!> <!> <!>",1),Py=se("<div><!></div>");function zy(e,t){le(t,!0);const n={textInput:my,generate:Ny};let i=Ze(!1),r=Ze(!0),o=Qt(()=>d(r));async function s(l,u){if(u.isValid){tt.RemovePrevEdge(u);return}console.log(u),await new Promise(f=>setTimeout(f,100)),He.ShowConnect(l,u)}var a=Py();We(a,"height","100%");var c=ee(a);dm(c,{get nodes(){return tt.nodes},get edges(){return tt.edges},nodeTypes:n,get zoomOnScroll(){return d(r)},get preventScrolling(){return d(o)},fitView:!0,fitViewOptions:{maxZoom:1,minZoom:1},proOptions:{hideAttribution:!0},colorMode:"dark",snapGrid:[20,20],onconnectstart:()=>He.Hide(),onconnectend:s,ondelete:l=>tt.Save(),$$events:{paneclick:()=>He.Hide(),nodeclick:()=>He.Hide(),edgeclick:()=>He.Hide(),nodedragstart:()=>He.Hide(),nodedragstop:()=>tt.Save(),panecontextmenu:({detail:{event:l}})=>He.ShowPane(l),nodecontextmenu:({detail:{event:l,node:u}})=>He.ShowNode(l,u),edgecontextmenu:({detail:{event:l,edge:u}})=>He.ShowEdge(l,u),nodemousemove:({detail:{event:l}})=>{D(r,l.target.closest(".nozoom")==null)},nodemouseleave:()=>{D(r,!0)}},children:(l,u)=>{var f=My(),h=ae(f);Pc(h,{children:(m,E)=>{dn(m,{title:"MiniMap",class:"canvas-llm-controll-button",$$events:{click:()=>D(i,!d(i))},children:(k,_)=>{qm(k,{size:24})},$$slots:{default:!0}})},$$slots:{default:!0}});var g=re(h,2);dy(g,{});var y=re(g,2);sy(y,{});var p=re(y,2);{var N=m=>{Dm(m,{})};ze(p,m=>{d(i)&&m(N)})}var w=re(p,2);Am(w,{get variant(){return jt.Dots},patternColor:"rgba(255,255,255,0.5)",gap:20}),W(l,f)},$$slots:{default:!0}}),Pr(a,"clientWidth",l=>He.CanvasWidth=l),Pr(a,"clientHeight",l=>He.CanvasHeight=l),W(e,a),ce()}var Ay=se('<button type="button" class="btn-dark svelte-1sun3k7"><!> Close</button>');function Rc(e,t){le(t,!0);function n(o){o.key==="Escape"&&t.onclick()}var i=Ay();Pe("keydown",ct,n),i.__click=function(...o){var s;(s=t.onclick)==null||s.apply(this,o)};var r=ee(i);Qm(r,{size:48,strokeWidth:1}),W(e,i),ce()}rn(["click"]);var pr=Sl(()=>ft),Iy=se('<th class="svelte-1lfplf3"><h1 class="svelte-1lfplf3"> </h1></th>'),Ty=(e,t,n)=>{t(d(n).id)},Oy=(e,t,n)=>{t(e,d(n).id)},Hy=se('<button class="svelte-1lfplf3"> <input type="radio" name="defaultModel" title="Default Model" class="svelte-1lfplf3"></button>'),Dy=se('<td class="svelte-1lfplf3"></td>'),Ry=se('<!> <table class="form"><thead><tr></tr></thead><tbody><tr></tr></tbody></table>',1);function Ly(e,t){le(t,!1);function n(f){tt.UpdateNode(Ut.NodeID,{model:f}),Ut.Hide()}function i(f,h){pr(pr().defaultModel=h),pr().Save(),f.stopPropagation()}ge();var r=Ry(),o=ae(r);Rc(o,{onclick:()=>Ut.Hide()});var s=re(o,2),a=ee(s),c=ee(a);zt(c,5,()=>zn.providers,yi,(f,h)=>{var g=Iy(),y=ee(g),p=ee(y);pe(()=>en(p,d(h).name)),W(f,g)});var l=re(a),u=ee(l);zt(u,5,()=>zn.providers,yi,(f,h)=>{var g=Dy();zt(g,5,()=>d(h).models,yi,(y,p)=>{var N=Hy();N.__click=[Ty,n,p];var w=ee(N),m=re(w);m.__click=[Oy,i,p],pe(()=>{Ye(N,"selected",Ut.ModelID==d(p).id),en(w,`${d(p).id??""} `),hd(m,d(p).id==pr().defaultModel)}),W(y,N)}),W(f,g)}),W(e,r),ce()}rn(["click"]);var di=Sl(()=>ft),Vy=se('<div style="animation: rotate 3s infinite linear, blink 1s infinite linear"><!></div>'),Xy=se('<tr><td class="svelte-1xsv1sz"><div class="provider svelte-1xsv1sz"> <a target="_blank" title="Get API Key" class="svelte-1xsv1sz"><!></a></div></td><td class="key svelte-1xsv1sz"><input type="text" class="svelte-1xsv1sz"></td></tr>'),Yy=se('<div class="settings svelte-1xsv1sz"><h3 class="text-lg font-bold">API Keys</h3> <table class="form svelte-1xsv1sz"><tbody></tbody></table></div>'),Wy=se("<!> <!>",1);function By(e,t){le(t,!1),ge();var n=Wy(),i=ae(n);Rc(i,{onclick:()=>di().Hide()});var r=re(i,2);{var o=a=>{var c=Vy(),l=ee(c);Ic(l,{size:32}),W(a,c)},s=a=>{var c=Yy(),l=re(ee(c),2),u=ee(l);zt(u,5,()=>zn.providers,yi,(f,h)=>{var g=Xy(),y=ee(g),p=ee(y),N=ee(p),w=re(N),m=ee(w);Um(m,{size:16});var E=re(y),k=ee(E);k.__change=()=>di().Save(),pe(()=>{en(N,`${d(h).name??""} `),Q(w,"href",d(h).link)}),El(k,()=>di()[d(h).id+"Key"],_=>di(di()[d(h).id+"Key"]=_)),W(f,g)}),W(a,c)};ze(r,a=>{zn.providers.length==0?a(o):a(s,!1)})}W(e,n),ce()}rn(["change"]);var Ky=se('<div class="full-screen center-h svelte-uz21qr"><div class="relative max-size center-v"><!></div></div>');function Fy(e,t){le(t,!1),ge();var n=Te(),i=ae(n);{var r=o=>{var s=Ky(),a=ee(s),c=ee(a);{var l=f=>{By(f,{})},u=f=>{var h=Te(),g=ae(h);{var y=p=>{Ly(p,{})};ze(g,p=>{Ut.IsVisible&&p(y)},!0)}W(f,h)};ze(c,f=>{ft.IsVisible?f(l):f(u,!1)})}W(o,s)};ze(i,o=>{(ft.IsVisible||Ut.IsVisible)&&o(r)})}W(e,n),ce()}var qy=se("<!> <!>",1);function Gy(e){var t=qy(),n=ae(t);zy(n,{});var i=re(n,2);Fy(i,{}),W(e,t)}nd(Gy,{target:document.getElementById("app")});
