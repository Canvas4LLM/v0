var Qc=Object.defineProperty;var Bs=e=>{throw TypeError(e)};var eu=(e,t,n)=>t in e?Qc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ks=(e,t,n)=>eu(e,typeof t!="symbol"?t+"":t,n),go=(e,t,n)=>t.has(e)||Bs("Cannot "+n);var ve=(e,t,n)=>(go(e,t,"read from private field"),n?n.call(e):t.get(e)),Xe=(e,t,n)=>t.has(e)?Bs("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),vo=(e,t,n,r)=>(go(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ct=(e,t,n)=>(go(e,t,"access private method"),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const tu=!1;var Gr=Array.isArray,ns=Array.from,nu=Object.defineProperty,dn=Object.getOwnPropertyDescriptor,Ka=Object.getOwnPropertyDescriptors,ru=Object.prototype,iu=Array.prototype,rs=Object.getPrototypeOf;function ur(e){return typeof e=="function"}const Qt=()=>{};function ou(e){return e()}function Si(e){for(var t=0;t<e.length;t++)e[t]()}const At=2,Fa=4,Zr=8,is=16,Tt=32,Ur=64,Po=128,In=256,Ci=512,ht=1024,vn=2048,jn=4096,Xt=8192,Qn=16384,su=32768,Jr=65536,au=1<<17,lu=1<<19,qa=1<<20,fn=Symbol("$state"),$a=Symbol("legacy props"),cu=Symbol("");function Ga(e){return e===this.v}function os(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function ss(e){return!os(e,this.v)}function uu(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function du(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function fu(e){throw new Error("https://svelte.dev/e/effect_orphan")}function hu(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function gu(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function vu(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function mu(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function yu(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function pu(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let er=!1;function _u(){er=!0}const as=1,ls=2,Za=4,wu=8,xu=16,bu=1,ku=2,Ua=4,Eu=8,Su=16,Ja=1,Cu=2,vt=Symbol(),ja="http://www.w3.org/2000/svg";function ft(e,t){var n={f:0,v:e,reactions:null,equals:Ga,version:0};return n}function Ge(e){return Qa(ft(e))}function Gi(e,t=!1){var r;const n=ft(e);return t||(n.equals=ss),er&&Ne!==null&&Ne.l!==null&&((r=Ne.l).s??(r.s=[])).push(n),n}function F(e,t=!1){return Qa(Gi(e,t))}function Qa(e){return Le!==null&&Le.f&At&&(Yt===null?Du([e]):Yt.push(e)),e}function H(e,t){return Le!==null&&ji()&&Le.f&(At|is)&&(Yt===null||!Yt.includes(e))&&pu(),zo(e,t)}function zo(e,t){return e.equals(t)||(e.v=t,e.version=vl(),el(e,vn),ji()&&_e!==null&&_e.f&ht&&!(_e.f&Tt)&&(st!==null&&st.includes(e)?(Ot(_e,vn),eo(_e)):hn===null?Hu([e]):hn.push(e))),t}function el(e,t){var n=e.reactions;if(n!==null)for(var r=ji(),i=n.length,o=0;o<i;o++){var s=n[o],a=s.f;a&vn||!r&&s===_e||(Ot(s,t),a&(ht|In)&&(a&At?el(s,jn):eo(s)))}}let cs=!1;function Re(e,t=null,n){if(typeof e!="object"||e===null||fn in e)return e;const r=rs(e);if(r!==ru&&r!==iu)return e;var i=new Map,o=Gr(e),s=ft(0);o&&i.set("length",ft(e.length));var a;return new Proxy(e,{defineProperty(l,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&vu();var f=i.get(c);return f===void 0?(f=ft(u.value),i.set(c,f)):H(f,Re(u.value,a)),!0},deleteProperty(l,c){var u=i.get(c);if(u===void 0)c in l&&i.set(c,ft(vt));else{if(o&&typeof c=="string"){var f=i.get("length"),h=Number(c);Number.isInteger(h)&&h<f.v&&H(f,h)}H(u,vt),Fs(s)}return!0},get(l,c,u){var p;if(c===fn)return e;var f=i.get(c),h=c in l;if(f===void 0&&(!h||(p=dn(l,c))!=null&&p.writable)&&(f=ft(Re(h?l[c]:vt,a)),i.set(c,f)),f!==void 0){var g=d(f);return g===vt?void 0:g}return Reflect.get(l,c,u)},getOwnPropertyDescriptor(l,c){var u=Reflect.getOwnPropertyDescriptor(l,c);if(u&&"value"in u){var f=i.get(c);f&&(u.value=d(f))}else if(u===void 0){var h=i.get(c),g=h==null?void 0:h.v;if(h!==void 0&&g!==vt)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return u},has(l,c){var g;if(c===fn)return!0;var u=i.get(c),f=u!==void 0&&u.v!==vt||Reflect.has(l,c);if(u!==void 0||_e!==null&&(!f||(g=dn(l,c))!=null&&g.writable)){u===void 0&&(u=ft(f?Re(l[c],a):vt),i.set(c,u));var h=d(u);if(h===vt)return!1}return f},set(l,c,u,f){var b;var h=i.get(c),g=c in l;if(o&&c==="length")for(var p=u;p<h.v;p+=1){var y=i.get(p+"");y!==void 0?H(y,vt):p in l&&(y=ft(vt),i.set(p+"",y))}h===void 0?(!g||(b=dn(l,c))!=null&&b.writable)&&(h=ft(void 0),H(h,Re(u,a)),i.set(c,h)):(g=h.v!==vt,H(h,Re(u,a)));var S=Reflect.getOwnPropertyDescriptor(l,c);if(S!=null&&S.set&&S.set.call(f,u),!g){if(o&&typeof c=="string"){var w=i.get("length"),m=Number(c);Number.isInteger(m)&&m>=w.v&&H(w,m+1)}Fs(s)}return!0},ownKeys(l){d(s);var c=Reflect.ownKeys(l).filter(h=>{var g=i.get(h);return g===void 0||g.v!==vt});for(var[u,f]of i)f.v!==vt&&!(u in l)&&c.push(u);return c},setPrototypeOf(){mu()}})}function Fs(e,t=1){H(e,e.v+t)}var ut,tl,nl;function Nu(){if(ut===void 0){ut=window;var e=Element.prototype,t=Node.prototype;tl=dn(t,"firstChild").get,nl=dn(t,"nextSibling").get,e.__click=void 0,e.__className="",e.__attributes=null,e.__styles=null,e.__e=void 0,Text.prototype.__t=void 0}}function jr(e=""){return document.createTextNode(e)}function Vt(e){return tl.call(e)}function Zi(e){return nl.call(e)}function ee(e,t){return Vt(e)}function oe(e,t){{var n=Vt(e);return n instanceof Comment&&n.data===""?Zi(n):n}}function te(e,t=1,n=!1){let r=e;for(;t--;)r=Zi(r);return r}function Mu(e){e.textContent=""}function mn(e){var t=At|vn;_e===null?t|=In:_e.f|=qa;var n=Le!==null&&Le.f&At?Le:null;const r={children:null,ctx:Ne,deps:null,equals:Ga,f:t,fn:e,reactions:null,v:null,version:0,parent:n??_e};return n!==null&&(n.children??(n.children=[])).push(r),r}function ae(e){const t=mn(e);return t.equals=ss,t}function rl(e){var t=e.children;if(t!==null){e.children=null;for(var n=0;n<t.length;n+=1){var r=t[n];r.f&At?us(r):Kt(r)}}}function Pu(e){for(var t=e.parent;t!==null;){if(!(t.f&At))return t;t=t.parent}return null}function il(e){var t,n=_e;Ct(Pu(e));try{rl(e),t=ml(e)}finally{Ct(n)}return t}function ol(e){var t=il(e),n=(kn||e.f&In)&&e.deps!==null?jn:ht;Ot(e,n),e.equals(t)||(e.v=t,e.version=vl())}function us(e){rl(e),xr(e,0),Ot(e,Qn),e.v=e.children=e.deps=e.ctx=e.reactions=null}function sl(e){_e===null&&Le===null&&fu(),Le!==null&&Le.f&In&&du(),fs&&uu()}function zu(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function tr(e,t,n,r=!0){var i=(e&Ur)!==0,o=_e,s={ctx:Ne,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:e|vn,first:null,fn:t,last:null,next:null,parent:i?null:o,prev:null,teardown:null,transitions:null,version:0};if(n){var a=Ln;try{qs(!0),Qr(s),s.f|=su}catch(u){throw Kt(s),u}finally{qs(a)}}else t!==null&&eo(s);var l=n&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&qa)===0;if(!l&&!i&&r&&(o!==null&&zu(s,o),Le!==null&&Le.f&At)){var c=Le;(c.children??(c.children=[])).push(s)}return s}function al(e){const t=tr(Zr,null,!1);return Ot(t,ht),t.teardown=e,t}function Ao(e){sl();var t=_e!==null&&(_e.f&Tt)!==0&&Ne!==null&&!Ne.m;if(t){var n=Ne;(n.e??(n.e=[])).push({fn:e,effect:_e,reaction:Le})}else{var r=_t(e);return r}}function Au(e){return sl(),nr(e)}function Iu(e){const t=tr(Ur,e,!0);return(n={})=>new Promise(r=>{n.outro?Fn(t,()=>{Kt(t),r(void 0)}):(Kt(t),r(void 0))})}function _t(e){return tr(Fa,e,!1)}function $(e,t){var n=Ne,r={effect:null,ran:!1};n.l.r1.push(r),r.effect=nr(()=>{e(),!r.ran&&(r.ran=!0,H(n.l.r2,!0),It(t))})}function it(){var e=Ne;nr(()=>{if(d(e.l.r2)){for(var t of e.l.r1){var n=t.effect;n.f&ht&&Ot(n,jn),ir(n)&&Qr(n),t.ran=!1}e.l.r2.v=!1}})}function nr(e){return tr(Zr,e,!0)}function me(e){return rr(e)}function rr(e,t=0){return tr(Zr|is|t,e,!0)}function yn(e,t=!0){return tr(Zr|Tt,e,!0,t)}function ll(e){var t=e.teardown;if(t!==null){const n=fs,r=Le;$s(!0),Ft(null);try{t.call(null)}finally{$s(n),Ft(r)}}}function cl(e){var t=e.deriveds;if(t!==null){e.deriveds=null;for(var n=0;n<t.length;n+=1)us(t[n])}}function ul(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){var r=n.next;Kt(n,t),n=r}}function Tu(e){for(var t=e.first;t!==null;){var n=t.next;t.f&Tt||Kt(t),t=n}}function Kt(e,t=!0){var n=!1;if((t||e.f&lu)&&e.nodes_start!==null){for(var r=e.nodes_start,i=e.nodes_end;r!==null;){var o=r===i?null:Zi(r);r.remove(),r=o}n=!0}ul(e,t&&!n),cl(e),xr(e,0),Ot(e,Qn);var s=e.transitions;if(s!==null)for(const l of s)l.stop();ll(e);var a=e.parent;a!==null&&a.first!==null&&dl(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function dl(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Fn(e,t){var n=[];ds(e,n,!0),fl(n,()=>{Kt(e),t&&t()})}function fl(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var i of e)i.out(r)}else t()}function ds(e,t,n){if(!(e.f&Xt)){if(e.f^=Xt,e.transitions!==null)for(const s of e.transitions)(s.is_global||n)&&t.push(s);for(var r=e.first;r!==null;){var i=r.next,o=(r.f&Jr)!==0||(r.f&Tt)!==0;ds(r,t,o?n:!1),r=i}}}function wr(e){hl(e,!0)}function hl(e,t){if(e.f&Xt){ir(e)&&Qr(e),e.f^=Xt;for(var n=e.first;n!==null;){var r=n.next,i=(n.f&Jr)!==0||(n.f&Tt)!==0;hl(n,i?t:!1),n=r}if(e.transitions!==null)for(const o of e.transitions)(o.is_global||t)&&o.in()}}let Io=!1,To=[];function Ou(){Io=!1;const e=To.slice();To=[],Si(e)}function Ui(e){Io||(Io=!0,queueMicrotask(Ou)),To.push(e)}function Ji(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let pi=!1,Ni=!1,Mi=null,Ln=!1,fs=!1;function qs(e){Ln=e}function $s(e){fs=e}let Oo=[],pr=0;let Le=null;function Ft(e){Le=e}let _e=null;function Ct(e){_e=e}let Yt=null;function Du(e){Yt=e}let st=null,pt=0,hn=null;function Hu(e){hn=e}let gl=1,kn=!1,Ne=null;function vl(){return++gl}function ji(){return!er||Ne!==null&&Ne.l===null}function ir(e){var s,a;var t=e.f;if(t&vn)return!0;if(t&jn){var n=e.deps,r=(t&In)!==0;if(n!==null){var i;if(t&Ci){for(i=0;i<n.length;i++)((s=n[i]).reactions??(s.reactions=[])).push(e);e.f^=Ci}for(i=0;i<n.length;i++){var o=n[i];if(ir(o)&&ol(o),r&&_e!==null&&!kn&&!((a=o==null?void 0:o.reactions)!=null&&a.includes(e))&&(o.reactions??(o.reactions=[])).push(e),o.version>e.version)return!0}}(!r||_e!==null&&!kn)&&Ot(e,ht)}return!1}function Ru(e,t){for(var n=t;n!==null;){if(n.f&Po)try{n.fn(e);return}catch{n.f^=Po}n=n.parent}throw pi=!1,e}function Lu(e){return(e.f&Qn)===0&&(e.parent===null||(e.parent.f&Po)===0)}function Qi(e,t,n,r){if(pi){if(n===null&&(pi=!1),Lu(t))throw e;return}n!==null&&(pi=!0);{Ru(e,t);return}}function ml(e){var h;var t=st,n=pt,r=hn,i=Le,o=kn,s=Yt,a=Ne,l=e.f;st=null,pt=0,hn=null,Le=l&(Tt|Ur)?null:e,kn=!Ln&&(l&In)!==0,Yt=null,Ne=e.ctx;try{var c=(0,e.fn)(),u=e.deps;if(st!==null){var f;if(xr(e,pt),u!==null&&pt>0)for(u.length=pt+st.length,f=0;f<st.length;f++)u[pt+f]=st[f];else e.deps=u=st;if(!kn)for(f=pt;f<u.length;f++)((h=u[f]).reactions??(h.reactions=[])).push(e)}else u!==null&&pt<u.length&&(xr(e,pt),u.length=pt);return c}finally{st=t,pt=n,hn=r,Le=i,kn=o,Yt=s,Ne=a}}function Vu(e,t){let n=t.reactions;if(n!==null){var r=n.indexOf(e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}n===null&&t.f&At&&(st===null||!st.includes(t))&&(Ot(t,jn),t.f&(In|Ci)||(t.f^=Ci),xr(t,0))}function xr(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Vu(e,n[r])}function Qr(e){var t=e.f;if(!(t&Qn)){Ot(e,ht);var n=_e,r=Ne;_e=e;try{t&is?Tu(e):ul(e),cl(e),ll(e);var i=ml(e);e.teardown=typeof i=="function"?i:null,e.version=gl}catch(o){Qi(o,e,n,r||e.ctx)}finally{_e=n}}}function Xu(){if(pr>1e3){pr=0;try{hu()}catch(e){if(Mi!==null)Qi(e,Mi,null);else throw e}}pr++}function Yu(e){var t=e.length;if(t!==0){Xu();var n=Ln;Ln=!0;try{for(var r=0;r<t;r++){var i=e[r];i.f&ht||(i.f^=ht);var o=[];yl(i,o),Wu(o)}}finally{Ln=n}}}function Wu(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var r=e[n];if(!(r.f&(Qn|Xt)))try{ir(r)&&(Qr(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?dl(r):r.fn=null))}catch(i){Qi(i,r,null,r.ctx)}}}function Bu(){if(Ni=!1,pr>1001)return;const e=Oo;Oo=[],Yu(e),Ni||(pr=0,Mi=null)}function eo(e){Ni||(Ni=!0,queueMicrotask(Bu)),Mi=e;for(var t=e;t.parent!==null;){t=t.parent;var n=t.f;if(n&(Ur|Tt)){if(!(n&ht))return;t.f^=ht}}Oo.push(t)}function yl(e,t){var n=e.first,r=[];e:for(;n!==null;){var i=n.f,o=(i&Tt)!==0,s=o&&(i&ht)!==0,a=n.next;if(!s&&!(i&Xt))if(i&Zr){if(o)n.f^=ht;else try{ir(n)&&Qr(n)}catch(f){Qi(f,n,null,n.ctx)}var l=n.first;if(l!==null){n=l;continue}}else i&Fa&&r.push(n);if(a===null){let f=n.parent;for(;f!==null;){if(e===f)break e;var c=f.next;if(c!==null){n=c;continue e}f=f.parent}}n=a}for(var u=0;u<r.length;u++)l=r[u],t.push(l),yl(l,t)}function d(e){var u;var t=e.f,n=(t&At)!==0;if(n&&t&Qn){var r=il(e);return us(e),r}if(Le!==null){Yt!==null&&Yt.includes(e)&&yu();var i=Le.deps;st===null&&i!==null&&i[pt]===e?pt++:st===null?st=[e]:st.push(e),hn!==null&&_e!==null&&_e.f&ht&&!(_e.f&Tt)&&hn.includes(e)&&(Ot(_e,vn),eo(_e))}else if(n&&e.deps===null)for(var o=e,s=o.parent,a=o;s!==null;)if(s.f&At){var l=s;a=l,s=l.parent}else{var c=s;(u=c.deriveds)!=null&&u.includes(a)||(c.deriveds??(c.deriveds=[])).push(a);break}return n&&(o=e,ir(o)&&ol(o)),e.v}function It(e){const t=Le;try{return Le=null,e()}finally{Le=t}}const Ku=~(vn|jn|ht);function Ot(e,t){e.f=e.f&Ku|t}function qn(e){return hs().get(e)}function Pi(e,t){return hs().set(e,t),t}function Fu(e){return hs().has(e)}function hs(e){return Ne===null&&Ji(),Ne.c??(Ne.c=new Map(qu(Ne)||void 0))}function qu(e){let t=e.p;for(;t!==null;){const n=t.c;if(n!==null)return n;t=t.p}return null}function Gs(e,t=1){var n=d(e),r=t===1?n++:n--;return H(e,n),r}function le(e,t=!1,n){Ne={p:Ne,c:null,e:null,m:!1,s:e,x:null,l:null},er&&!t&&(Ne.l={s:null,u:null,r1:[],r2:ft(!1)})}function ce(e){const t=Ne;if(t!==null){const s=t.e;if(s!==null){var n=_e,r=Le;t.e=null;try{for(var i=0;i<s.length;i++){var o=s[i];Ct(o.effect),Ft(o.reaction),_t(o.fn)}}finally{Ct(n),Ft(r)}}Ne=t.p,t.m=!0}return{}}function W(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(fn in e)Do(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&fn in n&&Do(n)}}}function Do(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{Do(e[r],t)}catch{}const n=rs(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=Ka(n);for(let i in r){const o=r[i].get;if(o)try{o.call(e)}catch{}}}}}function $u(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const Gu=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Zu(e){return Gu.includes(e)}const Uu={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject"};function Ju(e){return e=e.toLowerCase(),Uu[e]??e}const ju=["touchstart","touchmove"];function Qu(e){return ju.includes(e)}function ed(e,t){if(t){const n=document.body;e.autofocus=!0,Ui(()=>{document.activeElement===n&&e.focus()})}}let Zs=!1;function td(){Zs||(Zs=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function pl(e){var t=Le,n=_e;Ft(null),Ct(null);try{return e()}finally{Ft(t),Ct(n)}}function nd(e,t,n,r=n){e.addEventListener(t,()=>pl(n));const i=e.__on_r;i?e.__on_r=()=>{i(),r(!0)}:e.__on_r=()=>r(!0),td()}const _l=new Set,Ho=new Set;function wl(e,t,n,r){function i(o){if(r.capture||gr.call(t,o),!o.cancelBubble)return pl(()=>n.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Ui(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function Ae(e,t,n,r,i){var o={capture:r,passive:i},s=wl(e,t,n,o);(t===document.body||t===window||t===document)&&al(()=>{t.removeEventListener(e,s,o)})}function rn(e){for(var t=0;t<e.length;t++)_l.add(e[t]);for(var n of Ho)n(e)}function gr(e){var m;var t=this,n=t.ownerDocument,r=e.type,i=((m=e.composedPath)==null?void 0:m.call(e))||[],o=i[0]||e.target,s=0,a=e.__root;if(a){var l=i.indexOf(a);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var c=i.indexOf(t);if(c===-1)return;l<=c&&(s=l)}if(o=i[s]||e.target,o!==t){nu(e,"currentTarget",{configurable:!0,get(){return o||n}});var u=Le,f=_e;Ft(null),Ct(null);try{for(var h,g=[];o!==null;){var p=o.assignedSlot||o.parentNode||o.host||null;try{var y=o["__"+r];if(y!==void 0&&!o.disabled)if(Gr(y)){var[S,...w]=y;S.apply(o,[e,...w])}else y.call(o,e)}catch(b){h?g.push(b):h=b}if(e.cancelBubble||p===t||p===null)break;o=p}if(h){for(let b of g)queueMicrotask(()=>{throw b});throw h}}finally{e.__root=t,delete e.currentTarget,Ft(u),Ct(f)}}}function gs(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function pn(e,t){var n=_e;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function se(e,t){var n=(t&Ja)!==0,r=(t&Cu)!==0,i,o=!e.startsWith("<!>");return()=>{i===void 0&&(i=gs(o?e:"<!>"+e),n||(i=Vt(i)));var s=r?document.importNode(i,!0):i.cloneNode(!0);if(n){var a=Vt(s),l=s.lastChild;pn(a,l)}else pn(s,s);return s}}function Je(e,t,n="svg"){var r=!e.startsWith("<!>"),i=(t&Ja)!==0,o=`<${n}>${r?e:"<!>"+e}</${n}>`,s;return()=>{if(!s){var a=gs(o),l=Vt(a);if(i)for(s=document.createDocumentFragment();Vt(l);)s.appendChild(Vt(l));else s=Vt(l)}var c=s.cloneNode(!0);if(i){var u=Vt(c),f=c.lastChild;pn(u,f)}else pn(c,c);return c}}function Ro(e=""){{var t=jr(e+"");return pn(t,t),t}}function xe(){var e=document.createDocumentFragment(),t=document.createComment(""),n=jr();return e.append(t,n),pn(t,n),e}function Y(e,t){e!==null&&e.before(t)}function qt(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n==null?"":n+"")}function rd(e,t){return id(e,t)}const Dn=new Map;function id(e,{target:t,anchor:n,props:r={},events:i,context:o,intro:s=!0}){Nu();var a=new Set,l=f=>{for(var h=0;h<f.length;h++){var g=f[h];if(!a.has(g)){a.add(g);var p=Qu(g);t.addEventListener(g,gr,{passive:p});var y=Dn.get(g);y===void 0?(document.addEventListener(g,gr,{passive:p}),Dn.set(g,1)):Dn.set(g,y+1)}}};l(ns(_l)),Ho.add(l);var c=void 0,u=Iu(()=>{var f=n??t.appendChild(jr());return yn(()=>{if(o){le({});var h=Ne;h.c=o}i&&(r.$$events=i),c=e(f,r)||{},o&&ce()}),()=>{var p;for(var h of a){t.removeEventListener(h,gr);var g=Dn.get(h);--g===0?(document.removeEventListener(h,gr),Dn.delete(h)):Dn.set(h,g)}Ho.delete(l),f!==n&&((p=f.parentNode)==null||p.removeChild(f))}});return od.set(c,u),c}let od=new WeakMap;function we(e,t,n=!1){var r=e,i=null,o=null,s=vt,a=n?Jr:0,l=!1;const c=(f,h=!0)=>{l=!0,u(h,f)},u=(f,h)=>{s!==(s=f)&&(s?(i?wr(i):h&&(i=yn(()=>h(r))),o&&Fn(o,()=>{o=null})):(o?wr(o):h&&(o=yn(()=>h(r))),i&&Fn(i,()=>{i=null})))};rr(()=>{l=!1,t(c),l||u(null,null)},a)}function Vn(e,t){return t}function sd(e,t,n,r){for(var i=[],o=t.length,s=0;s<o;s++)ds(t[s].e,i,!0);var a=o>0&&i.length===0&&n!==null;if(a){var l=n.parentNode;Mu(l),l.append(n),r.clear(),an(e,t[0].prev,t[o-1].next)}fl(i,()=>{for(var c=0;c<o;c++){var u=t[c];a||(r.delete(u.k),an(e,u.prev,u.next)),Kt(u.e,!a)}})}function St(e,t,n,r,i,o=null){var s=e,a={flags:t,items:new Map,first:null},l=(t&Za)!==0;if(l){var c=e;s=c.appendChild(jr())}var u=null,f=!1;rr(()=>{var h=n(),g=Gr(h)?h:h==null?[]:ns(h),p=g.length;if(!(f&&p===0)){f=p===0;{var y=Le;ad(g,a,s,i,t,(y.f&Xt)!==0,r)}o!==null&&(p===0?u?wr(u):u=yn(()=>o(s)):u!==null&&Fn(u,()=>{u=null})),n()}})}function ad(e,t,n,r,i,o,s,a){var P,_,M,T;var l=(i&wu)!==0,c=(i&(as|ls))!==0,u=e.length,f=t.items,h=t.first,g=h,p,y=null,S,w=[],m=[],b,k,E,N;if(l)for(N=0;N<u;N+=1)b=e[N],k=s(b,N),E=f.get(k),E!==void 0&&((P=E.a)==null||P.measure(),(S??(S=new Set)).add(E));for(N=0;N<u;N+=1){if(b=e[N],k=s(b,N),E=f.get(k),E===void 0){var C=g?g.e.nodes_start:n;y=cd(C,t,y,y===null?t.first:y.next,b,k,N,r,i),f.set(k,y),w=[],m=[],g=y.next;continue}if(c&&ld(E,b,N,i),E.e.f&Xt&&(wr(E.e),l&&((_=E.a)==null||_.unfix(),(S??(S=new Set)).delete(E))),E!==g){if(p!==void 0&&p.has(E)){if(w.length<m.length){var A=m[0],z;y=A.prev;var O=w[0],L=w[w.length-1];for(z=0;z<w.length;z+=1)Us(w[z],A,n);for(z=0;z<m.length;z+=1)p.delete(m[z]);an(t,O.prev,L.next),an(t,y,O),an(t,L,A),g=A,y=L,N-=1,w=[],m=[]}else p.delete(E),Us(E,g,n),an(t,E.prev,E.next),an(t,E,y===null?t.first:y.next),an(t,y,E),y=E;continue}for(w=[],m=[];g!==null&&g.k!==k;)(o||!(g.e.f&Xt))&&(p??(p=new Set)).add(g),m.push(g),g=g.next;if(g===null)continue;E=g}w.push(E),y=E,g=E.next}if(g!==null||p!==void 0){for(var V=p===void 0?[]:ns(p);g!==null;)(o||!(g.e.f&Xt))&&V.push(g),g=g.next;var D=V.length;if(D>0){var x=i&Za&&u===0?n:null;if(l){for(N=0;N<D;N+=1)(M=V[N].a)==null||M.measure();for(N=0;N<D;N+=1)(T=V[N].a)==null||T.fix()}sd(t,V,x,f)}}l&&Ui(()=>{var I;if(S!==void 0)for(E of S)(I=E.a)==null||I.apply()}),_e.first=t.first&&t.first.e,_e.last=y&&y.e}function ld(e,t,n,r){r&as&&zo(e.v,t),r&ls?zo(e.i,n):e.i=n}function cd(e,t,n,r,i,o,s,a,l,c){var u=(l&as)!==0,f=(l&xu)===0,h=u?f?Gi(i):ft(i):i,g=l&ls?ft(s):s,p={i:g,v:h,k:o,a:null,e:null,prev:n,next:r};try{return p.e=yn(()=>a(e,h,g),cs),p.e.prev=n&&n.e,p.e.next=r&&r.e,n===null?t.first=p:(n.next=p,n.e.next=p.e),r!==null&&(r.prev=p,r.e.prev=p.e),p}finally{}}function Us(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,o=e.e.nodes_start;o!==r;){var s=Zi(o);i.before(o),o=s}}function an(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Js(e,t,n,r,i){var o=e,s="",a;rr(()=>{s!==(s=t()??"")&&(a!==void 0&&(Kt(a),a=void 0),s!==""&&(a=yn(()=>{var l=s+"",c=gs(l);pn(Vt(c),c.lastChild),o.before(c)})))})}function Ie(e,t,n,r,i){var a;var o=(a=t.$$slots)==null?void 0:a[n],s=!1;o===!0&&(o=t[n==="default"?"children":n],s=!0),o===void 0||o(e,s?()=>r:r)}function ud(e){const t={};e.children&&(t.default=!0);for(const n in e.$$slots)t[n]=!0;return t}function xl(e,t,n){var r=e,i,o;rr(()=>{i!==(i=t())&&(o&&(Fn(o),o=null),i&&(o=yn(()=>n(r,i))))},Jr)}function dd(e,t,n,r,i,o){var s,a,l=null,c=e,u;rr(()=>{const f=t()||null;var h=ja;f!==s&&(u&&(f===null?Fn(u,()=>{u=null,a=null}):f===a?wr(u):Kt(u)),f&&f!==a&&(u=yn(()=>{if(l=document.createElementNS(h,f),pn(l,l),r){var g=l.appendChild(jr());r(l,g)}_e.nodes_end=l,c.before(l)})),s=f,s&&(a=s))},Jr)}function dt(e,t,n){_t(()=>{var r=It(()=>t(e,n==null?void 0:n())||{});if(n&&(r!=null&&r.update)){var i=!1,o={};nr(()=>{var s=n();W(s),i&&os(o,s)&&(o=s,r.update(s))}),i=!0}if(r!=null&&r.destroy)return()=>r.destroy()})}function bl(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=bl(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function fd(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=bl(e))&&(r&&(r+=" "),r+=t);return r}function Dt(e){return typeof e=="object"?fd(e):e??""}function hd(e,t){var n=e.__attributes??(e.__attributes={});n.checked!==(n.checked=t??void 0)&&(e.checked=t)}function gd(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function Q(e,t,n,r){var i=e.__attributes??(e.__attributes={});i[t]!==(i[t]=n)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[cu]=n),n==null?e.removeAttribute(t):typeof n!="string"&&vs(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function _i(e,t,n){var r=Le,i=_e;Ft(null),Ct(null);try{(Lo.has(e.nodeName)||customElements.get(e.tagName.toLowerCase())?vs(e).includes(t):n&&typeof n=="object")?e[t]=n:Q(e,t,n==null?n:String(n))}finally{Ft(r),Ct(i)}}function br(e,t,n,r,i=!1,o=!1,s=!1){var a=t||{},l=e.tagName==="OPTION";for(var c in t)c in n||(n[c]=null);n.class&&(n.class=Dt(n.class)),r!==void 0&&(n.class=n.class?n.class+" "+r:r);var u=vs(e),f=e.__attributes??(e.__attributes={});for(const m in n){let b=n[m];if(l&&m==="value"&&b==null){e.value=e.__value="",a[m]=b;continue}var h=a[m];if(b!==h){a[m]=b;var g=m[0]+m[1];if(g!=="$$"){if(g==="on"){const k={},E="$$"+m;let N=m.slice(2);var p=Zu(N);if($u(N)&&(N=N.slice(0,-7),k.capture=!0),!p&&h){if(b!=null)continue;e.removeEventListener(N,a[E],k),a[E]=null}if(b!=null)if(p)e[`__${N}`]=b,rn([N]);else{let C=function(A){a[m].call(this,A)};var w=C;a[E]=wl(N,e,C,k)}else p&&(e[`__${N}`]=void 0)}else if(m==="style"&&b!=null)e.style.cssText=b+"";else if(m==="autofocus")ed(e,!!b);else if(m==="__value"||m==="value"&&b!=null)e.value=e[m]=e.__value=b;else if(m==="selected"&&l)gd(e,b);else{var y=m;i||(y=Ju(y));var S=y==="defaultValue"||y==="defaultChecked";if(b==null&&!o&&!S)if(f[m]=null,y==="value"||y==="checked"){let k=e;if(y==="value"){let E=k.defaultValue;k.removeAttribute(y),k.defaultValue=E}else{let E=k.defaultChecked;k.removeAttribute(y),k.defaultChecked=E}}else e.removeAttribute(m);else S||u.includes(y)&&(o||typeof b!="string")?e[y]=b:typeof b!="function"&&Q(e,y,b)}m==="style"&&"__styles"in e&&(e.__styles={})}}}return a}var Lo=new Map;function vs(e){var t=Lo.get(e.nodeName);if(t)return t;Lo.set(e.nodeName,t=[]);for(var n,r=e,i=Element.prototype;i!==r;){n=Ka(r);for(var o in n)n[o].set&&t.push(o);r=rs(r)}return t}function Tn(e,t,n){var r=e.__className,i=kl(t,n);(r!==i||cs)&&(i===""?e.removeAttribute("class"):e.setAttribute("class",i),e.__className=i)}function ms(e,t,n){var r=e.__className,i=kl(t,n);(r!==i||cs)&&(t==null&&!n?e.removeAttribute("class"):e.className=i,e.__className=i)}function kl(e,t){return(e??"")+(t?" "+t:"")}function Ye(e,t,n){if(n){if(e.classList.contains(t))return;e.classList.add(t)}else{if(!e.classList.contains(t))return;e.classList.remove(t)}}function We(e,t,n,r){var i=e.__styles??(e.__styles={});i[t]!==n&&(i[t]=n,n==null?e.style.removeProperty(t):e.style.setProperty(t,n,""))}function El(e,t,n=t){var r=ji();nd(e,"input",i=>{var o=i?e.defaultValue:e.value;if(o=mo(e)?yo(o):o,n(o),r&&o!==(o=t())){var s=e.selectionStart,a=e.selectionEnd;e.value=o??"",a!==null&&(e.selectionStart=s,e.selectionEnd=Math.min(a,e.value.length))}}),It(t)==null&&e.value&&n(mo(e)?yo(e.value):e.value),nr(()=>{var i=t();mo(e)&&i===yo(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function mo(e){var t=e.type;return t==="number"||t==="range"}function yo(e){return e===""?null:+e}var un,Kn,Ar,Ki,Sl;const Fi=class Fi{constructor(t){Xe(this,Ki);Xe(this,un,new WeakMap);Xe(this,Kn);Xe(this,Ar);vo(this,Ar,t)}observe(t,n){var r=ve(this,un).get(t)||new Set;return r.add(n),ve(this,un).set(t,r),ct(this,Ki,Sl).call(this).observe(t,ve(this,Ar)),()=>{var i=ve(this,un).get(t);i.delete(n),i.size===0&&(ve(this,un).delete(t),ve(this,Kn).unobserve(t))}}};un=new WeakMap,Kn=new WeakMap,Ar=new WeakMap,Ki=new WeakSet,Sl=function(){return ve(this,Kn)??vo(this,Kn,new ResizeObserver(t=>{for(var n of t){Fi.entries.set(n.target,n);for(var r of ve(this,un).get(n.target)||[])r(n)}}))},Ks(Fi,"entries",new WeakMap);let Vo=Fi;var vd=new Vo({box:"border-box"});function zi(e,t,n){var r=vd.observe(e,()=>n(e[t]));_t(()=>(It(()=>n(e[t])),r))}function js(e,t){return e===t||(e==null?void 0:e[fn])===t}function ei(e={},t,n,r){return _t(()=>{var i,o;return nr(()=>{i=o,o=[],It(()=>{e!==n(...o)&&(t(e,...o),i&&js(n(...i),e)&&t(null,...i))})}),()=>{Ui(()=>{o&&js(n(...o),e)&&t(null,...o)})}}),e}function he(e=!1){const t=Ne,n=t.l.u;if(!n)return;let r=()=>W(t.s);if(e){let i=0,o={};const s=mn(()=>{let a=!1;const l=t.s;for(const c in l)l[c]!==o[c]&&(o[c]=l[c],a=!0);return a&&i++,i});r=()=>d(s)}n.b.length&&Au(()=>{Qs(t,r),Si(n.b)}),Ao(()=>{const i=It(()=>n.m.map(ou));return()=>{for(const o of i)typeof o=="function"&&o()}}),n.a.length&&Ao(()=>{Qs(t,r),Si(n.a)})}function Qs(e,t){if(e.l.s)for(const n of e.l.s)d(n);t()}function Cl(e){var t=ft(0);return function(){return arguments.length===1?(H(t,d(t)+1),arguments[0]):(d(t),e())}}function Se(e,t){var o;var n=(o=e.$$events)==null?void 0:o[t.type],r=Gr(n)?n.slice():n==null?[]:[n];for(var i of r)i.call(this,t)}function ys(e,t,n){if(e==null)return t(void 0),n&&n(void 0),Qt;const r=It(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}let ci=!1;function q(e,t,n){const r=n[t]??(n[t]={store:null,source:Gi(void 0),unsubscribe:Qt});if(r.store!==e)if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=Qt;else{var i=!0;r.unsubscribe=ys(e,o=>{i?r.source.v=o:H(r.source,o)}),i=!1}return d(r.source)}function md(e,t,n){let r=n[t];return r&&r.store!==e&&(r.unsubscribe(),r.unsubscribe=Qt),e}function kr(e,t){return e.set(t),t}function je(){const e={};return al(()=>{for(var t in e)e[t].unsubscribe()}),e}function yd(e){var t=ci;try{return ci=!1,[e(),ci]}finally{ci=t}}const pd={get(e,t){if(!e.exclude.includes(t))return d(e.version),t in e.special?e.special[t]():e.props[t]},set(e,t,n){return t in e.special||(e.special[t]=v({get[t](){return e.props[t]}},t,Ua)),e.special[t](n),Gs(e.version),!0},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},deleteProperty(e,t){return e.exclude.includes(t)||(e.exclude.push(t),Gs(e.version)),!0},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function ye(e,t){return new Proxy({props:e,exclude:t,special:{},version:ft(0)},pd)}const _d={get(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(ur(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r)return r[t]}},set(e,t,n){let r=e.props.length;for(;r--;){let i=e.props[r];ur(i)&&(i=i());const o=dn(i,t);if(o&&o.set)return o.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(ur(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r){const i=dn(r,t);return i&&!i.configurable&&(i.configurable=!0),i}}},has(e,t){if(t===fn||t===$a)return!1;for(let n of e.props)if(ur(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props){ur(n)&&(n=n());for(const r in n)t.includes(r)||t.push(r)}return t}};function Ze(...e){return new Proxy({props:e},_d)}function ea(e){for(var t=_e,n=_e;t!==null&&!(t.f&(Tt|Ur));)t=t.parent;try{return Ct(t),e()}finally{Ct(n)}}function v(e,t,n,r){var C;var i=(n&bu)!==0,o=!er||(n&ku)!==0,s=(n&Eu)!==0,a=(n&Su)!==0,l=!1,c;s?[c,l]=yd(()=>e[t]):c=e[t];var u=fn in e||$a in e,f=((C=dn(e,t))==null?void 0:C.set)??(u&&s&&t in e?A=>e[t]=A:void 0),h=r,g=!0,p=!1,y=()=>(p=!0,g&&(g=!1,a?h=It(r):h=r),h);c===void 0&&r!==void 0&&(f&&o&&gu(),c=y(),f&&f(c));var S;if(o)S=()=>{var A=e[t];return A===void 0?y():(g=!0,p=!1,A)};else{var w=ea(()=>(i?mn:ae)(()=>e[t]));w.f|=au,S=()=>{var A=d(w);return A!==void 0&&(h=void 0),A===void 0?h:A}}if(!(n&Ua))return S;if(f){var m=e.$$legacy;return function(A,z){return arguments.length>0?((!o||!z||m||l)&&f(z?S():A),A):S()}}var b=!1,k=!1,E=Gi(c),N=ea(()=>mn(()=>{var A=S(),z=d(E);return b?(b=!1,k=!0,z):(k=!1,E.v=A)}));return i||(N.equals=ss),function(A,z){if(arguments.length>0){const O=z?d(N):o&&s?Re(A):A;return N.equals(O)||(b=!0,H(E,O),p&&h!==void 0&&(h=O),It(()=>d(N))),A}return d(N)}}function or(e){Ne===null&&Ji(),er&&Ne.l!==null?xd(Ne).m.push(e):Ao(()=>{const t=It(e);if(typeof t=="function")return t})}function Nl(e){Ne===null&&Ji(),or(()=>()=>It(e))}function wd(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}function to(){const e=Ne;return e===null&&Ji(),(t,n,r)=>{var o;const i=(o=e.s.$$events)==null?void 0:o[t];if(i){const s=Gr(i)?i.slice():[i],a=wd(t,n,r);for(const l of s)l.call(e.x,a);return!a.defaultPrevented}return!0}}function xd(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const bd="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(bd);_u();const Hn=[];function Et(e,t){return{subscribe:ie(e,t).subscribe}}function ie(e,t=Qt){let n=null;const r=new Set;function i(a){if(os(e,a)&&(e=a,n)){const l=!Hn.length;for(const c of r)c[1](),Hn.push(c,e);if(l){for(let c=0;c<Hn.length;c+=2)Hn[c][0](Hn[c+1]);Hn.length=0}}}function o(a){i(a(e))}function s(a,l=Qt){const c=[a,l];return r.add(c),r.size===1&&(n=t(i,o)||Qt),a(e),()=>{r.delete(c),r.size===0&&n&&(n(),n=null)}}return{set:i,update:o,subscribe:s}}function Cn(e,t,n){const r=!Array.isArray(e),i=r?[e]:e;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=t.length<2;return Et(n,(s,a)=>{let l=!1;const c=[];let u=0,f=Qt;const h=()=>{if(u)return;f();const p=t(r?c[0]:c,s,a);o?s(p):f=typeof p=="function"?p:Qt},g=i.map((p,y)=>ys(p,S=>{c[y]=S,u&=~(1<<y),l&&h()},()=>{u|=1<<y}));return l=!0,h(),function(){Si(g),f(),l=!1}})}function X(e){let t;return ys(e,n=>t=n)(),t}function at(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=at(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var kd={value:()=>{}};function no(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new wi(n)}function wi(e){this._=e}function Ed(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}wi.prototype=no.prototype={constructor:wi,on:function(e,t){var n=this._,r=Ed(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=Sd(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=ta(n[i],e.name,t);else if(t==null)for(i in n)n[i]=ta(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new wi(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function Sd(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function ta(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=kd,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Xo="http://www.w3.org/1999/xhtml";const na={svg:"http://www.w3.org/2000/svg",xhtml:Xo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ro(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),na.hasOwnProperty(t)?{space:na[t],local:e}:e}function Cd(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Xo&&t.documentElement.namespaceURI===Xo?t.createElement(e):t.createElementNS(n,e)}}function Nd(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ml(e){var t=ro(e);return(t.local?Nd:Cd)(t)}function Md(){}function ps(e){return e==null?Md:function(){return this.querySelector(e)}}function Pd(e){typeof e!="function"&&(e=ps(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),l,c,u=0;u<s;++u)(l=o[u])&&(c=e.call(l,l.__data__,u,o))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new bt(r,this._parents)}function zd(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Ad(){return[]}function Pl(e){return e==null?Ad:function(){return this.querySelectorAll(e)}}function Id(e){return function(){return zd(e.apply(this,arguments))}}function Td(e){typeof e=="function"?e=Id(e):e=Pl(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],a=s.length,l,c=0;c<a;++c)(l=s[c])&&(r.push(e.call(l,l.__data__,c,s)),i.push(l));return new bt(r,i)}function zl(e){return function(){return this.matches(e)}}function Al(e){return function(t){return t.matches(e)}}var Od=Array.prototype.find;function Dd(e){return function(){return Od.call(this.children,e)}}function Hd(){return this.firstElementChild}function Rd(e){return this.select(e==null?Hd:Dd(typeof e=="function"?e:Al(e)))}var Ld=Array.prototype.filter;function Vd(){return Array.from(this.children)}function Xd(e){return function(){return Ld.call(this.children,e)}}function Yd(e){return this.selectAll(e==null?Vd:Xd(typeof e=="function"?e:Al(e)))}function Wd(e){typeof e!="function"&&(e=zl(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],l,c=0;c<s;++c)(l=o[c])&&e.call(l,l.__data__,c,o)&&a.push(l);return new bt(r,this._parents)}function Il(e){return new Array(e.length)}function Bd(){return new bt(this._enter||this._groups.map(Il),this._parents)}function Ai(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ai.prototype={constructor:Ai,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Kd(e){return function(){return e}}function Fd(e,t,n,r,i,o){for(var s=0,a,l=t.length,c=o.length;s<c;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new Ai(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function qd(e,t,n,r,i,o,s){var a,l,c=new Map,u=t.length,f=o.length,h=new Array(u),g;for(a=0;a<u;++a)(l=t[a])&&(h[a]=g=s.call(l,l.__data__,a,t)+"",c.has(g)?i[a]=l:c.set(g,l));for(a=0;a<f;++a)g=s.call(e,o[a],a,o)+"",(l=c.get(g))?(r[a]=l,l.__data__=o[a],c.delete(g)):n[a]=new Ai(e,o[a]);for(a=0;a<u;++a)(l=t[a])&&c.get(h[a])===l&&(i[a]=l)}function $d(e){return e.__data__}function Gd(e,t){if(!arguments.length)return Array.from(this,$d);var n=t?qd:Fd,r=this._parents,i=this._groups;typeof e!="function"&&(e=Kd(e));for(var o=i.length,s=new Array(o),a=new Array(o),l=new Array(o),c=0;c<o;++c){var u=r[c],f=i[c],h=f.length,g=Zd(e.call(u,u&&u.__data__,c,r)),p=g.length,y=a[c]=new Array(p),S=s[c]=new Array(p),w=l[c]=new Array(h);n(u,f,y,S,w,g,t);for(var m=0,b=0,k,E;m<p;++m)if(k=y[m]){for(m>=b&&(b=m+1);!(E=S[b])&&++b<p;);k._next=E||null}}return s=new bt(s,r),s._enter=a,s._exit=l,s}function Zd(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ud(){return new bt(this._exit||this._groups.map(Il),this._parents)}function Jd(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function jd(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var c=n[l],u=r[l],f=c.length,h=a[l]=new Array(f),g,p=0;p<f;++p)(g=c[p]||u[p])&&(h[p]=g);for(;l<i;++l)a[l]=n[l];return new bt(a,this._parents)}function Qd(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function ef(e){e||(e=tf);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,l=i[o]=new Array(a),c,u=0;u<a;++u)(c=s[u])&&(l[u]=c);l.sort(t)}return new bt(i,this._parents).order()}function tf(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function nf(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function rf(){return Array.from(this)}function of(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function sf(){let e=0;for(const t of this)++e;return e}function af(){return!this.node()}function lf(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function cf(e){return function(){this.removeAttribute(e)}}function uf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function df(e,t){return function(){this.setAttribute(e,t)}}function ff(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function hf(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function gf(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function vf(e,t){var n=ro(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?uf:cf:typeof t=="function"?n.local?gf:hf:n.local?ff:df)(n,t))}function Tl(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function mf(e){return function(){this.style.removeProperty(e)}}function yf(e,t,n){return function(){this.style.setProperty(e,t,n)}}function pf(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function _f(e,t,n){return arguments.length>1?this.each((t==null?mf:typeof t=="function"?pf:yf)(e,t,n??"")):$n(this.node(),e)}function $n(e,t){return e.style.getPropertyValue(t)||Tl(e).getComputedStyle(e,null).getPropertyValue(t)}function wf(e){return function(){delete this[e]}}function xf(e,t){return function(){this[e]=t}}function bf(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function kf(e,t){return arguments.length>1?this.each((t==null?wf:typeof t=="function"?bf:xf)(e,t)):this.node()[e]}function Ol(e){return e.trim().split(/^|\s+/)}function _s(e){return e.classList||new Dl(e)}function Dl(e){this._node=e,this._names=Ol(e.getAttribute("class")||"")}Dl.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Hl(e,t){for(var n=_s(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Rl(e,t){for(var n=_s(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Ef(e){return function(){Hl(this,e)}}function Sf(e){return function(){Rl(this,e)}}function Cf(e,t){return function(){(t.apply(this,arguments)?Hl:Rl)(this,e)}}function Nf(e,t){var n=Ol(e+"");if(arguments.length<2){for(var r=_s(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Cf:t?Ef:Sf)(n,t))}function Mf(){this.textContent=""}function Pf(e){return function(){this.textContent=e}}function zf(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Af(e){return arguments.length?this.each(e==null?Mf:(typeof e=="function"?zf:Pf)(e)):this.node().textContent}function If(){this.innerHTML=""}function Tf(e){return function(){this.innerHTML=e}}function Of(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Df(e){return arguments.length?this.each(e==null?If:(typeof e=="function"?Of:Tf)(e)):this.node().innerHTML}function Hf(){this.nextSibling&&this.parentNode.appendChild(this)}function Rf(){return this.each(Hf)}function Lf(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Vf(){return this.each(Lf)}function Xf(e){var t=typeof e=="function"?e:Ml(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Yf(){return null}function Wf(e,t){var n=typeof e=="function"?e:Ml(e),r=t==null?Yf:typeof t=="function"?t:ps(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Bf(){var e=this.parentNode;e&&e.removeChild(this)}function Kf(){return this.each(Bf)}function Ff(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function qf(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function $f(e){return this.select(e?qf:Ff)}function Gf(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Zf(e){return function(t){e.call(this,t,this.__data__)}}function Uf(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Jf(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function jf(e,t,n){return function(){var r=this.__on,i,o=Zf(t);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Qf(e,t,n){var r=Uf(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(i=0,u=a[l];i<o;++i)if((s=r[i]).type===u.type&&s.name===u.name)return u.value}return}for(a=t?jf:Jf,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function Ll(e,t,n){var r=Tl(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function eh(e,t){return function(){return Ll(this,e,t)}}function th(e,t){return function(){return Ll(this,e,t.apply(this,arguments))}}function nh(e,t){return this.each((typeof t=="function"?th:eh)(e,t))}function*rh(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var Vl=[null];function bt(e,t){this._groups=e,this._parents=t}function ti(){return new bt([[document.documentElement]],Vl)}function ih(){return this}bt.prototype=ti.prototype={constructor:bt,select:Pd,selectAll:Td,selectChild:Rd,selectChildren:Yd,filter:Wd,data:Gd,enter:Bd,exit:Ud,join:Jd,merge:jd,selection:ih,order:Qd,sort:ef,call:nf,nodes:rf,node:of,size:sf,empty:af,each:lf,attr:vf,style:_f,property:kf,classed:Nf,text:Af,html:Df,raise:Rf,lower:Vf,append:Xf,insert:Wf,remove:Kf,clone:$f,datum:Gf,on:Qf,dispatch:nh,[Symbol.iterator]:rh};function wt(e){return typeof e=="string"?new bt([[document.querySelector(e)]],[document.documentElement]):new bt([[e]],Vl)}function oh(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Pt(e,t){if(e=oh(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const sh={passive:!1},Er={capture:!0,passive:!1};function po(e){e.stopImmediatePropagation()}function Xn(e){e.preventDefault(),e.stopImmediatePropagation()}function Xl(e){var t=e.document.documentElement,n=wt(e).on("dragstart.drag",Xn,Er);"onselectstart"in t?n.on("selectstart.drag",Xn,Er):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Yl(e,t){var n=e.document.documentElement,r=wt(e).on("dragstart.drag",null);t&&(r.on("click.drag",Xn,Er),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const ui=e=>()=>e;function Yo(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:s,y:a,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}Yo.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function ah(e){return!e.ctrlKey&&!e.button}function lh(){return this.parentNode}function ch(e,t){return t??{x:e.x,y:e.y}}function uh(){return navigator.maxTouchPoints||"ontouchstart"in this}function Wl(){var e=ah,t=lh,n=ch,r=uh,i={},o=no("start","drag","end"),s=0,a,l,c,u,f=0;function h(k){k.on("mousedown.drag",g).filter(r).on("touchstart.drag",S).on("touchmove.drag",w,sh).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(k,E){if(!(u||!e.call(this,k,E))){var N=b(this,t.call(this,k,E),k,E,"mouse");N&&(wt(k.view).on("mousemove.drag",p,Er).on("mouseup.drag",y,Er),Xl(k.view),po(k),c=!1,a=k.clientX,l=k.clientY,N("start",k))}}function p(k){if(Xn(k),!c){var E=k.clientX-a,N=k.clientY-l;c=E*E+N*N>f}i.mouse("drag",k)}function y(k){wt(k.view).on("mousemove.drag mouseup.drag",null),Yl(k.view,c),Xn(k),i.mouse("end",k)}function S(k,E){if(e.call(this,k,E)){var N=k.changedTouches,C=t.call(this,k,E),A=N.length,z,O;for(z=0;z<A;++z)(O=b(this,C,k,E,N[z].identifier,N[z]))&&(po(k),O("start",k,N[z]))}}function w(k){var E=k.changedTouches,N=E.length,C,A;for(C=0;C<N;++C)(A=i[E[C].identifier])&&(Xn(k),A("drag",k,E[C]))}function m(k){var E=k.changedTouches,N=E.length,C,A;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),C=0;C<N;++C)(A=i[E[C].identifier])&&(po(k),A("end",k,E[C]))}function b(k,E,N,C,A,z){var O=o.copy(),L=Pt(z||N,E),V,D,x;if((x=n.call(k,new Yo("beforestart",{sourceEvent:N,target:h,identifier:A,active:s,x:L[0],y:L[1],dx:0,dy:0,dispatch:O}),C))!=null)return V=x.x-L[0]||0,D=x.y-L[1]||0,function P(_,M,T){var I=L,R;switch(_){case"start":i[A]=P,R=s++;break;case"end":delete i[A],--s;case"drag":L=Pt(T||M,E),R=s;break}O.call(_,k,new Yo(_,{sourceEvent:M,subject:x,target:h,identifier:A,active:R,x:L[0]+V,y:L[1]+D,dx:L[0]-I[0],dy:L[1]-I[1],dispatch:O}),C)}}return h.filter=function(k){return arguments.length?(e=typeof k=="function"?k:ui(!!k),h):e},h.container=function(k){return arguments.length?(t=typeof k=="function"?k:ui(k),h):t},h.subject=function(k){return arguments.length?(n=typeof k=="function"?k:ui(k),h):n},h.touchable=function(k){return arguments.length?(r=typeof k=="function"?k:ui(!!k),h):r},h.on=function(){var k=o.on.apply(o,arguments);return k===o?h:k},h.clickDistance=function(k){return arguments.length?(f=(k=+k)*k,h):Math.sqrt(f)},h}function ws(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Bl(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ni(){}var Sr=.7,Ii=1/Sr,Yn="\\s*([+-]?\\d+)\\s*",Cr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dh=/^#([0-9a-f]{3,8})$/,fh=new RegExp(`^rgb\\(${Yn},${Yn},${Yn}\\)$`),hh=new RegExp(`^rgb\\(${Wt},${Wt},${Wt}\\)$`),gh=new RegExp(`^rgba\\(${Yn},${Yn},${Yn},${Cr}\\)$`),vh=new RegExp(`^rgba\\(${Wt},${Wt},${Wt},${Cr}\\)$`),mh=new RegExp(`^hsl\\(${Cr},${Wt},${Wt}\\)$`),yh=new RegExp(`^hsla\\(${Cr},${Wt},${Wt},${Cr}\\)$`),ra={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ws(ni,Nr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ia,formatHex:ia,formatHex8:ph,formatHsl:_h,formatRgb:oa,toString:oa});function ia(){return this.rgb().formatHex()}function ph(){return this.rgb().formatHex8()}function _h(){return Kl(this).formatHsl()}function oa(){return this.rgb().formatRgb()}function Nr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=dh.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?sa(t):n===3?new mt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?di(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?di(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=fh.exec(e))?new mt(t[1],t[2],t[3],1):(t=hh.exec(e))?new mt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=gh.exec(e))?di(t[1],t[2],t[3],t[4]):(t=vh.exec(e))?di(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=mh.exec(e))?ca(t[1],t[2]/100,t[3]/100,1):(t=yh.exec(e))?ca(t[1],t[2]/100,t[3]/100,t[4]):ra.hasOwnProperty(e)?sa(ra[e]):e==="transparent"?new mt(NaN,NaN,NaN,0):null}function sa(e){return new mt(e>>16&255,e>>8&255,e&255,1)}function di(e,t,n,r){return r<=0&&(e=t=n=NaN),new mt(e,t,n,r)}function wh(e){return e instanceof ni||(e=Nr(e)),e?(e=e.rgb(),new mt(e.r,e.g,e.b,e.opacity)):new mt}function Wo(e,t,n,r){return arguments.length===1?wh(e):new mt(e,t,n,r??1)}function mt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}ws(mt,Wo,Bl(ni,{brighter(e){return e=e==null?Ii:Math.pow(Ii,e),new mt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Sr:Math.pow(Sr,e),new mt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new mt(Nn(this.r),Nn(this.g),Nn(this.b),Ti(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:aa,formatHex:aa,formatHex8:xh,formatRgb:la,toString:la}));function aa(){return`#${En(this.r)}${En(this.g)}${En(this.b)}`}function xh(){return`#${En(this.r)}${En(this.g)}${En(this.b)}${En((isNaN(this.opacity)?1:this.opacity)*255)}`}function la(){const e=Ti(this.opacity);return`${e===1?"rgb(":"rgba("}${Nn(this.r)}, ${Nn(this.g)}, ${Nn(this.b)}${e===1?")":`, ${e})`}`}function Ti(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Nn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function En(e){return e=Nn(e),(e<16?"0":"")+e.toString(16)}function ca(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new zt(e,t,n,r)}function Kl(e){if(e instanceof zt)return new zt(e.h,e.s,e.l,e.opacity);if(e instanceof ni||(e=Nr(e)),!e)return new zt;if(e instanceof zt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new zt(s,a,l,e.opacity)}function bh(e,t,n,r){return arguments.length===1?Kl(e):new zt(e,t,n,r??1)}function zt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ws(zt,bh,Bl(ni,{brighter(e){return e=e==null?Ii:Math.pow(Ii,e),new zt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Sr:Math.pow(Sr,e),new zt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new mt(_o(e>=240?e-240:e+120,i,r),_o(e,i,r),_o(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new zt(ua(this.h),fi(this.s),fi(this.l),Ti(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ti(this.opacity);return`${e===1?"hsl(":"hsla("}${ua(this.h)}, ${fi(this.s)*100}%, ${fi(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ua(e){return e=(e||0)%360,e<0?e+360:e}function fi(e){return Math.max(0,Math.min(1,e||0))}function _o(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Fl=e=>()=>e;function kh(e,t){return function(n){return e+n*t}}function Eh(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Sh(e){return(e=+e)==1?ql:function(t,n){return n-t?Eh(t,n,e):Fl(isNaN(t)?n:t)}}function ql(e,t){var n=t-e;return n?kh(e,n):Fl(isNaN(e)?t:e)}const da=function e(t){var n=Sh(t);function r(i,o){var s=n((i=Wo(i)).r,(o=Wo(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),c=ql(i.opacity,o.opacity);return function(u){return i.r=s(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=e,r}(1);function ln(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Bo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wo=new RegExp(Bo.source,"g");function Ch(e){return function(){return e}}function Nh(e){return function(t){return e(t)+""}}function Mh(e,t){var n=Bo.lastIndex=wo.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(e=e+"",t=t+"";(r=Bo.exec(e))&&(i=wo.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:ln(r,i)})),n=wo.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?Nh(l[0].x):Ch(t):(t=l.length,function(c){for(var u=0,f;u<t;++u)a[(f=l[u]).i]=f.x(c);return a.join("")})}var fa=180/Math.PI,Ko={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function $l(e,t,n,r,i,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*fa,skewX:Math.atan(l)*fa,scaleX:s,scaleY:a}}var hi;function Ph(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ko:$l(t.a,t.b,t.c,t.d,t.e,t.f)}function zh(e){return e==null||(hi||(hi=document.createElementNS("http://www.w3.org/2000/svg","g")),hi.setAttribute("transform",e),!(e=hi.transform.baseVal.consolidate()))?Ko:(e=e.matrix,$l(e.a,e.b,e.c,e.d,e.e,e.f))}function Gl(e,t,n,r){function i(c){return c.length?c.pop()+" ":""}function o(c,u,f,h,g,p){if(c!==f||u!==h){var y=g.push("translate(",null,t,null,n);p.push({i:y-4,x:ln(c,f)},{i:y-2,x:ln(u,h)})}else(f||h)&&g.push("translate("+f+t+h+n)}function s(c,u,f,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:ln(c,u)})):u&&f.push(i(f)+"rotate("+u+r)}function a(c,u,f,h){c!==u?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:ln(c,u)}):u&&f.push(i(f)+"skewX("+u+r)}function l(c,u,f,h,g,p){if(c!==f||u!==h){var y=g.push(i(g)+"scale(",null,",",null,")");p.push({i:y-4,x:ln(c,f)},{i:y-2,x:ln(u,h)})}else(f!==1||h!==1)&&g.push(i(g)+"scale("+f+","+h+")")}return function(c,u){var f=[],h=[];return c=e(c),u=e(u),o(c.translateX,c.translateY,u.translateX,u.translateY,f,h),s(c.rotate,u.rotate,f,h),a(c.skewX,u.skewX,f,h),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,h),c=u=null,function(g){for(var p=-1,y=h.length,S;++p<y;)f[(S=h[p]).i]=S.x(g);return f.join("")}}}var Ah=Gl(Ph,"px, ","px)","deg)"),Ih=Gl(zh,", ",")",")"),Th=1e-12;function ha(e){return((e=Math.exp(e))+1/e)/2}function Oh(e){return((e=Math.exp(e))-1/e)/2}function Dh(e){return((e=Math.exp(2*e))-1)/(e+1)}const Hh=function e(t,n,r){function i(o,s){var a=o[0],l=o[1],c=o[2],u=s[0],f=s[1],h=s[2],g=u-a,p=f-l,y=g*g+p*p,S,w;if(y<Th)w=Math.log(h/c)/t,S=function(C){return[a+C*g,l+C*p,c*Math.exp(t*C*w)]};else{var m=Math.sqrt(y),b=(h*h-c*c+r*y)/(2*c*n*m),k=(h*h-c*c-r*y)/(2*h*n*m),E=Math.log(Math.sqrt(b*b+1)-b),N=Math.log(Math.sqrt(k*k+1)-k);w=(N-E)/t,S=function(C){var A=C*w,z=ha(E),O=c/(n*m)*(z*Dh(t*A+E)-Oh(E));return[a+O*g,l+O*p,c*z/ha(t*A+E)]}}return S.duration=w*1e3*t/Math.SQRT2,S}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return e(s,a,l)},i}(Math.SQRT2,2,4);var Gn=0,vr=0,dr=0,Zl=1e3,Oi,mr,Di=0,Mn=0,io=0,Mr=typeof performance=="object"&&performance.now?performance:Date,Ul=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function xs(){return Mn||(Ul(Rh),Mn=Mr.now()+io)}function Rh(){Mn=0}function Hi(){this._call=this._time=this._next=null}Hi.prototype=Jl.prototype={constructor:Hi,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?xs():+n)+(t==null?0:+t),!this._next&&mr!==this&&(mr?mr._next=this:Oi=this,mr=this),this._call=e,this._time=n,Fo()},stop:function(){this._call&&(this._call=null,this._time=1/0,Fo())}};function Jl(e,t,n){var r=new Hi;return r.restart(e,t,n),r}function Lh(){xs(),++Gn;for(var e=Oi,t;e;)(t=Mn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Gn}function ga(){Mn=(Di=Mr.now())+io,Gn=vr=0;try{Lh()}finally{Gn=0,Xh(),Mn=0}}function Vh(){var e=Mr.now(),t=e-Di;t>Zl&&(io-=t,Di=e)}function Xh(){for(var e,t=Oi,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Oi=n);mr=e,Fo(r)}function Fo(e){if(!Gn){vr&&(vr=clearTimeout(vr));var t=e-Mn;t>24?(e<1/0&&(vr=setTimeout(ga,e-Mr.now()-io)),dr&&(dr=clearInterval(dr))):(dr||(Di=Mr.now(),dr=setInterval(Vh,Zl)),Gn=1,Ul(ga))}}function va(e,t,n){var r=new Hi;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Yh=no("start","end","cancel","interrupt"),Wh=[],jl=0,ma=1,qo=2,xi=3,ya=4,$o=5,bi=6;function oo(e,t,n,r,i,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Bh(e,n,{name:t,index:r,group:i,on:Yh,tween:Wh,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:jl})}function bs(e,t){var n=Ht(e,t);if(n.state>jl)throw new Error("too late; already scheduled");return n}function $t(e,t){var n=Ht(e,t);if(n.state>xi)throw new Error("too late; already running");return n}function Ht(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Bh(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Jl(o,0,n.time);function o(c){n.state=ma,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var u,f,h,g;if(n.state!==ma)return l();for(u in r)if(g=r[u],g.name===n.name){if(g.state===xi)return va(s);g.state===ya?(g.state=bi,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete r[u]):+u<t&&(g.state=bi,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete r[u])}if(va(function(){n.state===xi&&(n.state=ya,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=qo,n.on.call("start",e,e.__data__,n.index,n.group),n.state===qo){for(n.state=xi,i=new Array(h=n.tween.length),u=0,f=-1;u<h;++u)(g=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=g);i.length=f+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=$o,1),f=-1,h=i.length;++f<h;)i[f].call(e,u);n.state===$o&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=bi,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function ki(e,t){var n=e.__transition,r,i,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){o=!1;continue}i=r.state>qo&&r.state<$o,r.state=bi,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}o&&delete e.__transition}}function Kh(e){return this.each(function(){ki(this,e)})}function Fh(e,t){var n,r;return function(){var i=$t(this,e),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function qh(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=$t(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=a;break}l===c&&i.push(a)}o.tween=i}}function $h(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Ht(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?Fh:qh)(n,e,t))}function ks(e,t,n){var r=e._id;return e.each(function(){var i=$t(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Ht(i,r).value[t]}}function Ql(e,t){var n;return(typeof t=="number"?ln:t instanceof Nr?da:(n=Nr(t))?(t=n,da):Mh)(e,t)}function Gh(e){return function(){this.removeAttribute(e)}}function Zh(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Uh(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function Jh(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function jh(e,t,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a)))}}function Qh(e,t,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a)))}}function eg(e,t){var n=ro(e),r=n==="transform"?Ih:Ql;return this.attrTween(e,typeof t=="function"?(n.local?Qh:jh)(n,r,ks(this,"attr."+e,t)):t==null?(n.local?Zh:Gh)(n):(n.local?Jh:Uh)(n,r,t))}function tg(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ng(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function rg(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&ng(e,o)),n}return i._value=t,i}function ig(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&tg(e,o)),n}return i._value=t,i}function og(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=ro(e);return this.tween(n,(r.local?rg:ig)(r,t))}function sg(e,t){return function(){bs(this,e).delay=+t.apply(this,arguments)}}function ag(e,t){return t=+t,function(){bs(this,e).delay=t}}function lg(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?sg:ag)(t,e)):Ht(this.node(),t).delay}function cg(e,t){return function(){$t(this,e).duration=+t.apply(this,arguments)}}function ug(e,t){return t=+t,function(){$t(this,e).duration=t}}function dg(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?cg:ug)(t,e)):Ht(this.node(),t).duration}function fg(e,t){if(typeof t!="function")throw new Error;return function(){$t(this,e).ease=t}}function hg(e){var t=this._id;return arguments.length?this.each(fg(t,e)):Ht(this.node(),t).ease}function gg(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;$t(this,e).ease=n}}function vg(e){if(typeof e!="function")throw new Error;return this.each(gg(this._id,e))}function mg(e){typeof e!="function"&&(e=zl(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],l,c=0;c<s;++c)(l=o[c])&&e.call(l,l.__data__,c,o)&&a.push(l);return new nn(r,this._parents,this._name,this._id)}function yg(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l=t[a],c=n[a],u=l.length,f=s[a]=new Array(u),h,g=0;g<u;++g)(h=l[g]||c[g])&&(f[g]=h);for(;a<r;++a)s[a]=t[a];return new nn(s,this._parents,this._name,this._id)}function pg(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function _g(e,t,n){var r,i,o=pg(t)?bs:$t;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}function wg(e,t){var n=this._id;return arguments.length<2?Ht(this.node(),n).on.on(e):this.each(_g(n,e,t))}function xg(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function bg(){return this.on("end.remove",xg(this._id))}function kg(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ps(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],l=a.length,c=o[s]=new Array(l),u,f,h=0;h<l;++h)(u=a[h])&&(f=e.call(u,u.__data__,h,a))&&("__data__"in u&&(f.__data__=u.__data__),c[h]=f,oo(c[h],t,n,h,c,Ht(u,n)));return new nn(o,this._parents,t,n)}function Eg(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Pl(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var l=r[a],c=l.length,u,f=0;f<c;++f)if(u=l[f]){for(var h=e.call(u,u.__data__,f,l),g,p=Ht(u,n),y=0,S=h.length;y<S;++y)(g=h[y])&&oo(g,t,n,y,h,p);o.push(h),s.push(u)}return new nn(o,s,t,n)}var Sg=ti.prototype.constructor;function Cg(){return new Sg(this._groups,this._parents)}function Ng(e,t){var n,r,i;return function(){var o=$n(this,e),s=(this.style.removeProperty(e),$n(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}function ec(e){return function(){this.style.removeProperty(e)}}function Mg(e,t,n){var r,i=n+"",o;return function(){var s=$n(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}function Pg(e,t,n){var r,i,o;return function(){var s=$n(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),$n(this,e))),s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a))}}function zg(e,t){var n,r,i,o="style."+t,s="end."+o,a;return function(){var l=$t(this,e),c=l.on,u=l.value[o]==null?a||(a=ec(t)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(s,i=u),l.on=r}}function Ag(e,t,n){var r=(e+="")=="transform"?Ah:Ql;return t==null?this.styleTween(e,Ng(e,r)).on("end.style."+e,ec(e)):typeof t=="function"?this.styleTween(e,Pg(e,r,ks(this,"style."+e,t))).each(zg(this._id,e)):this.styleTween(e,Mg(e,r,t),n).on("end.style."+e,null)}function Ig(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Tg(e,t,n){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&Ig(e,s,n)),r}return o._value=t,o}function Og(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Tg(e,t,n??""))}function Dg(e){return function(){this.textContent=e}}function Hg(e){return function(){var t=e(this);this.textContent=t??""}}function Rg(e){return this.tween("text",typeof e=="function"?Hg(ks(this,"text",e)):Dg(e==null?"":e+""))}function Lg(e){return function(t){this.textContent=e.call(this,t)}}function Vg(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Lg(i)),t}return r._value=e,r}function Xg(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Vg(e))}function Yg(){for(var e=this._name,t=this._id,n=tc(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,c=0;c<a;++c)if(l=s[c]){var u=Ht(l,t);oo(l,e,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new nn(r,this._parents,e,n)}function Wg(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){--i===0&&o()}};n.each(function(){var c=$t(this,r),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),i===0&&o()})}var Bg=0;function nn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function tc(){return++Bg}var Gt=ti.prototype;nn.prototype={constructor:nn,select:kg,selectAll:Eg,selectChild:Gt.selectChild,selectChildren:Gt.selectChildren,filter:mg,merge:yg,selection:Cg,transition:Yg,call:Gt.call,nodes:Gt.nodes,node:Gt.node,size:Gt.size,empty:Gt.empty,each:Gt.each,on:wg,attr:eg,attrTween:og,style:Ag,styleTween:Og,text:Rg,textTween:Xg,remove:bg,tween:$h,delay:lg,duration:dg,ease:hg,easeVarying:vg,end:Wg,[Symbol.iterator]:Gt[Symbol.iterator]};function Kg(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Fg={time:null,delay:0,duration:250,ease:Kg};function qg(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function $g(e){var t,n;e instanceof nn?(t=e._id,e=e._name):(t=tc(),(n=Fg).time=xs(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,c=0;c<a;++c)(l=s[c])&&oo(l,e,t,c,s,n||qg(l,t));return new nn(r,this._parents,e,t)}ti.prototype.interrupt=Kh;ti.prototype.transition=$g;const gi=e=>()=>e;function Gg(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Zt(e,t,n){this.k=e,this.x=t,this.y=n}Zt.prototype={constructor:Zt,scale:function(e){return e===1?this:new Zt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Zt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var so=new Zt(1,0,0);nc.prototype=Zt.prototype;function nc(e){for(;!e.__zoom;)if(!(e=e.parentNode))return so;return e.__zoom}function xo(e){e.stopImmediatePropagation()}function fr(e){e.preventDefault(),e.stopImmediatePropagation()}function Zg(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Ug(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function pa(){return this.__zoom||so}function Jg(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function jg(){return navigator.maxTouchPoints||"ontouchstart"in this}function Qg(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function rc(){var e=Zg,t=Ug,n=Qg,r=Jg,i=jg,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,l=Hh,c=no("start","zoom","end"),u,f,h,g=500,p=150,y=0,S=10;function w(x){x.property("__zoom",pa).on("wheel.zoom",A,{passive:!1}).on("mousedown.zoom",z).on("dblclick.zoom",O).filter(i).on("touchstart.zoom",L).on("touchmove.zoom",V).on("touchend.zoom touchcancel.zoom",D).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}w.transform=function(x,P,_,M){var T=x.selection?x.selection():x;T.property("__zoom",pa),x!==T?E(x,P,_,M):T.interrupt().each(function(){N(this,arguments).event(M).start().zoom(null,typeof P=="function"?P.apply(this,arguments):P).end()})},w.scaleBy=function(x,P,_,M){w.scaleTo(x,function(){var T=this.__zoom.k,I=typeof P=="function"?P.apply(this,arguments):P;return T*I},_,M)},w.scaleTo=function(x,P,_,M){w.transform(x,function(){var T=t.apply(this,arguments),I=this.__zoom,R=_==null?k(T):typeof _=="function"?_.apply(this,arguments):_,K=I.invert(R),Z=typeof P=="function"?P.apply(this,arguments):P;return n(b(m(I,Z),R,K),T,s)},_,M)},w.translateBy=function(x,P,_,M){w.transform(x,function(){return n(this.__zoom.translate(typeof P=="function"?P.apply(this,arguments):P,typeof _=="function"?_.apply(this,arguments):_),t.apply(this,arguments),s)},null,M)},w.translateTo=function(x,P,_,M,T){w.transform(x,function(){var I=t.apply(this,arguments),R=this.__zoom,K=M==null?k(I):typeof M=="function"?M.apply(this,arguments):M;return n(so.translate(K[0],K[1]).scale(R.k).translate(typeof P=="function"?-P.apply(this,arguments):-P,typeof _=="function"?-_.apply(this,arguments):-_),I,s)},M,T)};function m(x,P){return P=Math.max(o[0],Math.min(o[1],P)),P===x.k?x:new Zt(P,x.x,x.y)}function b(x,P,_){var M=P[0]-_[0]*x.k,T=P[1]-_[1]*x.k;return M===x.x&&T===x.y?x:new Zt(x.k,M,T)}function k(x){return[(+x[0][0]+ +x[1][0])/2,(+x[0][1]+ +x[1][1])/2]}function E(x,P,_,M){x.on("start.zoom",function(){N(this,arguments).event(M).start()}).on("interrupt.zoom end.zoom",function(){N(this,arguments).event(M).end()}).tween("zoom",function(){var T=this,I=arguments,R=N(T,I).event(M),K=t.apply(T,I),Z=_==null?k(K):typeof _=="function"?_.apply(T,I):_,ne=Math.max(K[1][0]-K[0][0],K[1][1]-K[0][1]),B=T.__zoom,J=typeof P=="function"?P.apply(T,I):P,re=l(B.invert(Z).concat(ne/B.k),J.invert(Z).concat(ne/J.k));return function(ue){if(ue===1)ue=J;else{var de=re(ue),G=ne/de[2];ue=new Zt(G,Z[0]-de[0]*G,Z[1]-de[1]*G)}R.zoom(null,ue)}})}function N(x,P,_){return!_&&x.__zooming||new C(x,P)}function C(x,P){this.that=x,this.args=P,this.active=0,this.sourceEvent=null,this.extent=t.apply(x,P),this.taps=0}C.prototype={event:function(x){return x&&(this.sourceEvent=x),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(x,P){return this.mouse&&x!=="mouse"&&(this.mouse[1]=P.invert(this.mouse[0])),this.touch0&&x!=="touch"&&(this.touch0[1]=P.invert(this.touch0[0])),this.touch1&&x!=="touch"&&(this.touch1[1]=P.invert(this.touch1[0])),this.that.__zoom=P,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(x){var P=wt(this.that).datum();c.call(x,this.that,new Gg(x,{sourceEvent:this.sourceEvent,target:w,type:x,transform:this.that.__zoom,dispatch:c}),P)}};function A(x,...P){if(!e.apply(this,arguments))return;var _=N(this,P).event(x),M=this.__zoom,T=Math.max(o[0],Math.min(o[1],M.k*Math.pow(2,r.apply(this,arguments)))),I=Pt(x);if(_.wheel)(_.mouse[0][0]!==I[0]||_.mouse[0][1]!==I[1])&&(_.mouse[1]=M.invert(_.mouse[0]=I)),clearTimeout(_.wheel);else{if(M.k===T)return;_.mouse=[I,M.invert(I)],ki(this),_.start()}fr(x),_.wheel=setTimeout(R,p),_.zoom("mouse",n(b(m(M,T),_.mouse[0],_.mouse[1]),_.extent,s));function R(){_.wheel=null,_.end()}}function z(x,...P){if(h||!e.apply(this,arguments))return;var _=x.currentTarget,M=N(this,P,!0).event(x),T=wt(x.view).on("mousemove.zoom",Z,!0).on("mouseup.zoom",ne,!0),I=Pt(x,_),R=x.clientX,K=x.clientY;Xl(x.view),xo(x),M.mouse=[I,this.__zoom.invert(I)],ki(this),M.start();function Z(B){if(fr(B),!M.moved){var J=B.clientX-R,re=B.clientY-K;M.moved=J*J+re*re>y}M.event(B).zoom("mouse",n(b(M.that.__zoom,M.mouse[0]=Pt(B,_),M.mouse[1]),M.extent,s))}function ne(B){T.on("mousemove.zoom mouseup.zoom",null),Yl(B.view,M.moved),fr(B),M.event(B).end()}}function O(x,...P){if(e.apply(this,arguments)){var _=this.__zoom,M=Pt(x.changedTouches?x.changedTouches[0]:x,this),T=_.invert(M),I=_.k*(x.shiftKey?.5:2),R=n(b(m(_,I),M,T),t.apply(this,P),s);fr(x),a>0?wt(this).transition().duration(a).call(E,R,M,x):wt(this).call(w.transform,R,M,x)}}function L(x,...P){if(e.apply(this,arguments)){var _=x.touches,M=_.length,T=N(this,P,x.changedTouches.length===M).event(x),I,R,K,Z;for(xo(x),R=0;R<M;++R)K=_[R],Z=Pt(K,this),Z=[Z,this.__zoom.invert(Z),K.identifier],T.touch0?!T.touch1&&T.touch0[2]!==Z[2]&&(T.touch1=Z,T.taps=0):(T.touch0=Z,I=!0,T.taps=1+!!u);u&&(u=clearTimeout(u)),I&&(T.taps<2&&(f=Z[0],u=setTimeout(function(){u=null},g)),ki(this),T.start())}}function V(x,...P){if(this.__zooming){var _=N(this,P).event(x),M=x.changedTouches,T=M.length,I,R,K,Z;for(fr(x),I=0;I<T;++I)R=M[I],K=Pt(R,this),_.touch0&&_.touch0[2]===R.identifier?_.touch0[0]=K:_.touch1&&_.touch1[2]===R.identifier&&(_.touch1[0]=K);if(R=_.that.__zoom,_.touch1){var ne=_.touch0[0],B=_.touch0[1],J=_.touch1[0],re=_.touch1[1],ue=(ue=J[0]-ne[0])*ue+(ue=J[1]-ne[1])*ue,de=(de=re[0]-B[0])*de+(de=re[1]-B[1])*de;R=m(R,Math.sqrt(ue/de)),K=[(ne[0]+J[0])/2,(ne[1]+J[1])/2],Z=[(B[0]+re[0])/2,(B[1]+re[1])/2]}else if(_.touch0)K=_.touch0[0],Z=_.touch0[1];else return;_.zoom("touch",n(b(R,K,Z),_.extent,s))}}function D(x,...P){if(this.__zooming){var _=N(this,P).event(x),M=x.changedTouches,T=M.length,I,R;for(xo(x),h&&clearTimeout(h),h=setTimeout(function(){h=null},g),I=0;I<T;++I)R=M[I],_.touch0&&_.touch0[2]===R.identifier?delete _.touch0:_.touch1&&_.touch1[2]===R.identifier&&delete _.touch1;if(_.touch1&&!_.touch0&&(_.touch0=_.touch1,delete _.touch1),_.touch0)_.touch0[1]=this.__zoom.invert(_.touch0[0]);else if(_.end(),_.taps===2&&(R=Pt(R,this),Math.hypot(f[0]-R[0],f[1]-R[1])<S)){var K=wt(this).on("dblclick.zoom");K&&K.apply(this,arguments)}}}return w.wheelDelta=function(x){return arguments.length?(r=typeof x=="function"?x:gi(+x),w):r},w.filter=function(x){return arguments.length?(e=typeof x=="function"?x:gi(!!x),w):e},w.touchable=function(x){return arguments.length?(i=typeof x=="function"?x:gi(!!x),w):i},w.extent=function(x){return arguments.length?(t=typeof x=="function"?x:gi([[+x[0][0],+x[0][1]],[+x[1][0],+x[1][1]]]),w):t},w.scaleExtent=function(x){return arguments.length?(o[0]=+x[0],o[1]=+x[1],w):[o[0],o[1]]},w.translateExtent=function(x){return arguments.length?(s[0][0]=+x[0][0],s[1][0]=+x[1][0],s[0][1]=+x[0][1],s[1][1]=+x[1][1],w):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},w.constrain=function(x){return arguments.length?(n=x,w):n},w.duration=function(x){return arguments.length?(a=+x,w):a},w.interpolate=function(x){return arguments.length?(l=x,w):l},w.on=function(){var x=c.on.apply(c,arguments);return x===c?w:x},w.clickDistance=function(x){return arguments.length?(y=(x=+x)*x,w):Math.sqrt(y)},w.tapDistance=function(x){return arguments.length?(S=+x,w):S},w}const ri={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`},Ri=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]];var Pn;(function(e){e.Strict="strict",e.Loose="loose"})(Pn||(Pn={}));var gn;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(gn||(gn={}));var Li;(function(e){e.Partial="partial",e.Full="full"})(Li||(Li={}));const Go={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Wn;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Wn||(Wn={}));var Vi;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Vi||(Vi={}));var fe;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(fe||(fe={}));const _a={[fe.Left]:fe.Right,[fe.Right]:fe.Left,[fe.Top]:fe.Bottom,[fe.Bottom]:fe.Top};function ic(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function wa(e,t,n){if(!n)return;const r=[];e.forEach((i,o)=>{t!=null&&t.has(o)||r.push(i)}),r.length&&n(r)}function ev(e){return e===null?null:e?"valid":"invalid"}const tv=e=>"id"in e&&"source"in e&&"target"in e,nv=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Es=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),ii=(e,t=[0,0])=>{const{width:n,height:r}=xn(e),i=e.origin??t,o=n*i[0],s=r*i[1];return{x:e.position.x-o,y:e.position.y-s}},rv=(e,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const o=typeof i=="string";let s=!t.nodeLookup&&!o?i:void 0;t.nodeLookup&&(s=o?t.nodeLookup.get(i):Es(i)?i:t.nodeLookup.get(i.id));const a=s?Xi(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return ao(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return lo(n)},oi=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const i=Xi(r);n=ao(n,i)}}),lo(n)},oc=(e,t,[n,r,i]=[0,0,1],o=!1,s=!1)=>{const a={...si(t,[n,r,i]),width:t.width/i,height:t.height/i},l=[];for(const c of e.values()){const{measured:u,selectable:f=!0,hidden:h=!1}=c;if(s&&!f||h)continue;const g=u.width??c.width??c.initialWidth??null,p=u.height??c.height??c.initialHeight??null,y=Pr(a,Un(c)),S=(g??0)*(p??0),w=o&&y>0;(!c.internals.handleBounds||w||y>=S||c.dragging)&&l.push(c)}return l},Zo=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function xa(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function ba({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:o},s){if(e.size===0)return Promise.resolve(!1);const a=oi(e),l=Cs(a,t,n,(s==null?void 0:s.minZoom)??i,(s==null?void 0:s.maxZoom)??o,(s==null?void 0:s.padding)??.1);return await r.setViewport(l,{duration:s==null?void 0:s.duration}),Promise.resolve(!0)}function iv({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:o}){const s=n.get(e),a=s.parentId?n.get(s.parentId):void 0,{x:l,y:c}=a?a.internals.positionAbsolute:{x:0,y:0},u=s.origin??r;let f=i;if(s.extent==="parent"&&!s.expandParent)if(!a)o==null||o("005",ri.error005());else{const g=a.measured.width,p=a.measured.height;g&&p&&(f=[[l,c],[l+g,c+p]])}else a&&Jn(s.extent)&&(f=[[s.extent[0][0]+l,s.extent[0][1]+c],[s.extent[1][0]+l,s.extent[1][1]+c]]);const h=Jn(f)?zn(t,f,s.measured):t;return{position:{x:h.x-l+s.measured.width*u[0],y:h.y-c+s.measured.height*u[1]},positionAbsolute:h}}async function sc({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const o=new Set(e.map(h=>h.id)),s=[];for(const h of n){if(h.deletable===!1)continue;const g=o.has(h.id),p=!g&&h.parentId&&s.find(y=>y.id===h.parentId);(g||p)&&s.push(h)}const a=new Set(t.map(h=>h.id)),l=r.filter(h=>h.deletable!==!1),u=Zo(s,l);for(const h of l)a.has(h.id)&&!u.find(p=>p.id===h.id)&&u.push(h);if(!i)return{edges:u,nodes:s};const f=await i({nodes:s,edges:u});return typeof f=="boolean"?f?{edges:u,nodes:s}:{edges:[],nodes:[]}:f}const Zn=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),zn=(e={x:0,y:0},t,n)=>({x:Zn(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Zn(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function ac(e,t,n){const{width:r,height:i}=xn(n),{x:o,y:s}=n.internals.positionAbsolute;return zn(e,[[o,s],[o+r,s+i]],t)}const ka=(e,t,n)=>e<t?Zn(Math.abs(e-t),1,t)/t:e>n?-Zn(Math.abs(e-n),1,t)/t:0,lc=(e,t,n=15,r=40)=>{const i=ka(e.x,r,t.width-r)*n,o=ka(e.y,r,t.height-r)*n;return[i,o]},ao=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Uo=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),lo=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Un=(e,t=[0,0])=>{var i,o;const{x:n,y:r}=Es(e)?e.internals.positionAbsolute:ii(e,t);return{x:n,y:r,width:((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0,height:((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0}},Xi=(e,t=[0,0])=>{var i,o;const{x:n,y:r}=Es(e)?e.internals.positionAbsolute:ii(e,t);return{x:n,y:r,x2:n+(((i=e.measured)==null?void 0:i.width)??e.width??e.initialWidth??0),y2:r+(((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0)}},cc=(e,t)=>lo(ao(Uo(e),Uo(t))),Pr=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Ea=e=>Ut(e.width)&&Ut(e.height)&&Ut(e.x)&&Ut(e.y),Ut=e=>!isNaN(e)&&isFinite(e),ov=(e,t)=>{},Ss=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),si=({x:e,y:t},[n,r,i],o=!1,s=[1,1])=>{const a={x:(e-n)/i,y:(t-r)/i};return o?Ss(a,s):a},uc=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r}),Cs=(e,t,n,r,i,o)=>{const s=t/(e.width*(1+o)),a=n/(e.height*(1+o)),l=Math.min(s,a),c=Zn(l,r,i),u=e.x+e.width/2,f=e.y+e.height/2,h=t/2-u*c,g=n/2-f*c;return{x:h,y:g,zoom:c}},Yi=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Jn(e){return e!==void 0&&e!=="parent"}function xn(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function dc(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function sv(e,t={width:0,height:0},n,r,i){const o={...e},s=r.get(n);if(s){const a=s.origin||i;o.x+=s.internals.positionAbsolute.x-(t.width??0)*a[0],o.y+=s.internals.positionAbsolute.y-(t.height??0)*a[1]}return o}function _r(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:o,y:s}=en(e),a=si({x:o-((i==null?void 0:i.left)??0),y:s-((i==null?void 0:i.top)??0)},r),{x:l,y:c}=n?Ss(a,t):a;return{xSnapped:l,ySnapped:c,...a}}const Ns=e=>({width:e.offsetWidth,height:e.offsetHeight}),av=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},lv=["INPUT","SELECT","TEXTAREA"];function cv(e){var r,i,o;const t=((i=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:i[0])||e.target;return lv.includes(t==null?void 0:t.nodeName)||((o=t==null?void 0:t.hasAttribute)==null?void 0:o.call(t,"contenteditable"))||!!(t!=null&&t.closest(".nokey"))}const fc=e=>"clientX"in e,en=(e,t)=>{var o,s;const n=fc(e),r=n?e.clientX:(o=e.touches)==null?void 0:o[0].clientX,i=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},Sa=(e,t,n,r,i)=>{const o=t.querySelectorAll(`.${e}`);return!o||!o.length?null:Array.from(o).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:i,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...Ns(s)}})};function uv({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:s,targetControlY:a}){const l=e*.125+i*.375+s*.375+n*.125,c=t*.125+o*.375+a*.375+r*.125,u=Math.abs(l-e),f=Math.abs(c-t);return[l,c,u,f]}function vi(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Ca({pos:e,x1:t,y1:n,x2:r,y2:i,c:o}){switch(e){case fe.Left:return[t-vi(t-r,o),n];case fe.Right:return[t+vi(r-t,o),n];case fe.Top:return[t,n-vi(n-i,o)];case fe.Bottom:return[t,n+vi(i-n,o)]}}function hc({sourceX:e,sourceY:t,sourcePosition:n=fe.Bottom,targetX:r,targetY:i,targetPosition:o=fe.Top,curvature:s=.25}){const[a,l]=Ca({pos:n,x1:e,y1:t,x2:r,y2:i,c:s}),[c,u]=Ca({pos:o,x1:r,y1:i,x2:e,y2:t,c:s}),[f,h,g,p]=uv({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${a},${l} ${c},${u} ${r},${i}`,f,h,g,p]}function gc({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,s=Math.abs(r-t)/2,a=r<t?r+s:r-s;return[o,a,i,s]}function dv({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1}){if(!i)return r;const o=n||t.selected||e.selected,s=Math.max(e.internals.z||0,t.internals.z||0,1e3);return r+(o?s:0)}function fv({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const o=ao(Xi(e),Xi(t));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const s={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return Pr(s,lo(o))>0}const hv=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,gv=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),vv=(e,t)=>{if(!e.source||!e.target)return t;let n;return tv(e)?n={...e}:n={...e,id:hv(e)},gv(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function Jo({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,o,s,a]=gc({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,o,s,a]}const Na={[fe.Left]:{x:-1,y:0},[fe.Right]:{x:1,y:0},[fe.Top]:{x:0,y:-1},[fe.Bottom]:{x:0,y:1}},mv=({source:e,sourcePosition:t=fe.Bottom,target:n})=>t===fe.Left||t===fe.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Ma=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function yv({source:e,sourcePosition:t=fe.Bottom,target:n,targetPosition:r=fe.Top,center:i,offset:o}){const s=Na[t],a=Na[r],l={x:e.x+s.x*o,y:e.y+s.y*o},c={x:n.x+a.x*o,y:n.y+a.y*o},u=mv({source:l,sourcePosition:t,target:c}),f=u.x!==0?"x":"y",h=u[f];let g=[],p,y;const S={x:0,y:0},w={x:0,y:0},[m,b,k,E]=gc({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[f]*a[f]===-1){p=i.x??m,y=i.y??b;const C=[{x:p,y:l.y},{x:p,y:c.y}],A=[{x:l.x,y},{x:c.x,y}];s[f]===h?g=f==="x"?C:A:g=f==="x"?A:C}else{const C=[{x:l.x,y:c.y}],A=[{x:c.x,y:l.y}];if(f==="x"?g=s.x===h?A:C:g=s.y===h?C:A,t===r){const D=Math.abs(e[f]-n[f]);if(D<=o){const x=Math.min(o-1,o-D);s[f]===h?S[f]=(l[f]>e[f]?-1:1)*x:w[f]=(c[f]>n[f]?-1:1)*x}}if(t!==r){const D=f==="x"?"y":"x",x=s[f]===a[D],P=l[D]>c[D],_=l[D]<c[D];(s[f]===1&&(!x&&P||x&&_)||s[f]!==1&&(!x&&_||x&&P))&&(g=f==="x"?C:A)}const z={x:l.x+S.x,y:l.y+S.y},O={x:c.x+w.x,y:c.y+w.y},L=Math.max(Math.abs(z.x-g[0].x),Math.abs(O.x-g[0].x)),V=Math.max(Math.abs(z.y-g[0].y),Math.abs(O.y-g[0].y));L>=V?(p=(z.x+O.x)/2,y=g[0].y):(p=g[0].x,y=(z.y+O.y)/2)}return[[e,{x:l.x+S.x,y:l.y+S.y},...g,{x:c.x+w.x,y:c.y+w.y},n],p,y,k,E]}function pv(e,t,n,r){const i=Math.min(Ma(e,t)/2,Ma(t,n)/2,r),{x:o,y:s}=t;if(e.x===o&&o===n.x||e.y===s&&s===n.y)return`L${o} ${s}`;if(e.y===s){const c=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${o+i*c},${s}Q ${o},${s} ${o},${s+i*u}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${o},${s+i*l}Q ${o},${s} ${o+i*a},${s}`}function Wi({sourceX:e,sourceY:t,sourcePosition:n=fe.Bottom,targetX:r,targetY:i,targetPosition:o=fe.Top,borderRadius:s=5,centerX:a,centerY:l,offset:c=20}){const[u,f,h,g,p]=yv({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:o,center:{x:a,y:l},offset:c});return[u.reduce((S,w,m)=>{let b="";return m>0&&m<u.length-1?b=pv(u[m-1],w,u[m+1],s):b=`${m===0?"M":"L"}${w.x} ${w.y}`,S+=b,S},""),f,h,g,p]}function Pa(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function _v(e){var f;const{sourceNode:t,targetNode:n}=e;if(!Pa(t)||!Pa(n))return null;const r=t.internals.handleBounds||za(t.handles),i=n.internals.handleBounds||za(n.handles),o=Aa((r==null?void 0:r.source)??[],e.sourceHandle),s=Aa(e.connectionMode===Pn.Strict?(i==null?void 0:i.target)??[]:((i==null?void 0:i.target)??[]).concat((i==null?void 0:i.source)??[]),e.targetHandle);if(!o||!s)return(f=e.onError)==null||f.call(e,"008",ri.error008(o?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(o==null?void 0:o.position)||fe.Bottom,l=(s==null?void 0:s.position)||fe.Top,c=zr(t,o,a),u=zr(n,s,l);return{sourceX:c.x,sourceY:c.y,targetX:u.x,targetY:u.y,sourcePosition:a,targetPosition:l}}function za(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function zr(e,t,n=fe.Left,r=!1){const i=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,o=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:s,height:a}=t??xn(e);if(r)return{x:i+s/2,y:o+a/2};switch((t==null?void 0:t.position)??n){case fe.Top:return{x:i+s/2,y:o};case fe.Right:return{x:i+s,y:o+a/2};case fe.Bottom:return{x:i+s/2,y:o+a};case fe.Left:return{x:i,y:o+a/2}}}function Aa(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function jo(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function wv(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const o=new Set;return e.reduce((s,a)=>([a.markerStart||r,a.markerEnd||i].forEach(l=>{if(l&&typeof l=="object"){const c=jo(l,t);o.has(c)||(s.push({id:c,color:l.color||n,...l}),o.add(c))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))}const Ms={nodeOrigin:[0,0],nodeExtent:Ri,elevateNodesOnSelect:!0,defaults:{}},xv={...Ms,checkEquality:!0};function Ps(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function bv(e,t,n){const r=Ps(Ms,n);for(const i of e.values())if(i.parentId)zs(i,e,t,r);else{const o=ii(i,r.nodeOrigin),s=Jn(i.extent)?i.extent:r.nodeExtent,a=zn(o,s,xn(i));i.internals.positionAbsolute=a}}function vc(e,t,n,r){var a,l;const i=Ps(xv,r),o=new Map(t),s=i!=null&&i.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const c of e){let u=o.get(c.id);if(i.checkEquality&&c===(u==null?void 0:u.internals.userNode))t.set(c.id,u);else{const f=ii(c,i.nodeOrigin),h=Jn(c.extent)?c.extent:i.nodeExtent,g=zn(f,h,xn(c));u={...i.defaults,...c,measured:{width:(a=c.measured)==null?void 0:a.width,height:(l=c.measured)==null?void 0:l.height},internals:{positionAbsolute:g,handleBounds:c.measured?u==null?void 0:u.internals.handleBounds:void 0,z:mc(c,s),userNode:c}},t.set(c.id,u)}c.parentId&&zs(u,t,n,r)}}function kv(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function zs(e,t,n,r){const{elevateNodesOnSelect:i,nodeOrigin:o,nodeExtent:s}=Ps(Ms,r),a=e.parentId,l=t.get(a);if(!l){console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}kv(e,n);const c=i?1e3:0,{x:u,y:f,z:h}=Ev(e,l,o,s,c),{positionAbsolute:g}=e.internals,p=u!==g.x||f!==g.y;(p||h!==e.internals.z)&&(e.internals={...e.internals,positionAbsolute:p?{x:u,y:f}:g,z:h})}function mc(e,t){return(Ut(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Ev(e,t,n,r,i){const{x:o,y:s}=t.internals.positionAbsolute,a=xn(e),l=ii(e,n),c=Jn(e.extent)?zn(l,e.extent,a):l;let u=zn({x:o+c.x,y:s+c.y},r,a);e.extent==="parent"&&(u=ac(u,a,t));const f=mc(e,i),h=t.internals.z??0;return{x:u.x,y:u.y,z:h>f?h:f}}function Sv(e,t,n,r=[0,0]){var s;const i=[],o=new Map;for(const a of e){const l=t.get(a.parentId);if(!l)continue;const c=((s=o.get(a.parentId))==null?void 0:s.expandedRect)??Un(l),u=cc(c,a.rect);o.set(a.parentId,{expandedRect:u,parent:l})}return o.size>0&&o.forEach(({expandedRect:a,parent:l},c)=>{var b;const u=l.internals.positionAbsolute,f=xn(l),h=l.origin??r,g=a.x<u.x?Math.round(Math.abs(u.x-a.x)):0,p=a.y<u.y?Math.round(Math.abs(u.y-a.y)):0,y=Math.max(f.width,Math.round(a.width)),S=Math.max(f.height,Math.round(a.height)),w=(y-f.width)*h[0],m=(S-f.height)*h[1];(g>0||p>0||w||m)&&(i.push({id:c,type:"position",position:{x:l.position.x-g+w,y:l.position.y-p+m}}),(b=n.get(c))==null||b.forEach(k=>{e.some(E=>E.id===k.id)||i.push({id:k.id,type:"position",position:{x:k.position.x+g,y:k.position.y+p}})})),(f.width<a.width||f.height<a.height||g||p)&&i.push({id:c,type:"dimensions",setAttributes:!0,dimensions:{width:y+(g?h[0]*g-w:0),height:S+(p?h[1]*p-m:0)}})}),i}function Cv(e,t,n,r,i,o){const s=r==null?void 0:r.querySelector(".xyflow__viewport");let a=!1;if(!s)return{changes:[],updatedInternals:a};const l=[],c=window.getComputedStyle(s),{m22:u}=new window.DOMMatrixReadOnly(c.transform),f=[];for(const h of e.values()){const g=t.get(h.id);if(g)if(g.hidden)g.internals={...g.internals,handleBounds:void 0},a=!0;else{const p=Ns(h.nodeElement),y=g.measured.width!==p.width||g.measured.height!==p.height;if(!!(p.width&&p.height&&(y||!g.internals.handleBounds||h.force))){const w=h.nodeElement.getBoundingClientRect(),m=Jn(g.extent)?g.extent:o;let{positionAbsolute:b}=g.internals;g.parentId&&g.extent==="parent"?b=ac(b,p,t.get(g.parentId)):m&&(b=zn(b,m,p)),g.measured=p,g.internals={...g.internals,positionAbsolute:b,handleBounds:{source:Sa("source",h.nodeElement,w,u,g.id),target:Sa("target",h.nodeElement,w,u,g.id)}},g.parentId&&zs(g,t,n,{nodeOrigin:i}),a=!0,y&&(l.push({id:g.id,type:"dimensions",dimensions:p}),g.expandParent&&g.parentId&&f.push({id:g.id,parentId:g.parentId,rect:Un(g,i)}))}}}if(f.length>0){const h=Sv(f,t,n,i);l.push(...h)}return{changes:l,updatedInternals:a}}async function Nv({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:o}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,o]],r),a=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(a)}function yc(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:o,sourceHandle:s=null,targetHandle:a=null}=r,l=`${i}-source-${s}`,c=`${o}-target-${a}`,u=e.get(l)||new Map,f=e.get(c)||new Map,h={edgeId:r.id,source:i,target:o,sourceHandle:s,targetHandle:a};t.set(r.id,r),e.set(l,u.set(`${o}-${a}`,h)),e.set(c,f.set(`${i}-${s}`,h))}}function pc(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:pc(n,t):!1}function Ia(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n)return!1;r=r.parentElement}while(r);return!1}function Mv(e,t,n,r){const i=new Map;for(const[o,s]of e)if((s.selected||s.id===r)&&(!s.parentId||!pc(s,e))&&(s.draggable||t&&typeof s.draggable>"u")){const a=e.get(o);a&&i.set(o,{id:o,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return i}function bo({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var s,a,l;const i=[];for(const[c,u]of t){const f=(s=n.get(c))==null?void 0:s.internals.userNode;f&&i.push({...f,position:u.position,dragging:r})}if(!e)return[i[0],i];const o=(a=n.get(e))==null?void 0:a.internals.userNode;return[o?{...o,position:((l=t.get(e))==null?void 0:l.position)||o.position,dragging:r}:i[0],i]}function Pv({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let o={x:null,y:null},s=0,a=new Map,l=!1,c={x:0,y:0},u=null,f=!1,h=null,g=!1;function p({noDragClassName:S,handleSelector:w,domNode:m,isSelectable:b,nodeId:k,nodeClickDistance:E=0}){h=wt(m);function N({x:O,y:L},V){const{nodeLookup:D,nodeExtent:x,snapGrid:P,snapToGrid:_,nodeOrigin:M,onNodeDrag:T,onSelectionDrag:I,onError:R,updateNodePositions:K}=t();o={x:O,y:L};let Z=!1,ne={x:0,y:0,x2:0,y2:0};if(a.size>1&&x){const B=oi(a);ne=Uo(B)}for(const[B,J]of a){if(!D.has(B))continue;let re={x:O-J.distance.x,y:L-J.distance.y};_&&(re=Ss(re,P));let ue=[[x[0][0],x[0][1]],[x[1][0],x[1][1]]];if(a.size>1&&x&&!J.extent){const{positionAbsolute:U}=J.internals,j=U.x-ne.x+x[0][0],ge=U.x+J.measured.width-ne.x2+x[1][0],ke=U.y-ne.y+x[0][1],pe=U.y+J.measured.height-ne.y2+x[1][1];ue=[[j,ke],[ge,pe]]}const{position:de,positionAbsolute:G}=iv({nodeId:B,nextPosition:re,nodeLookup:D,nodeExtent:ue,nodeOrigin:M,onError:R});Z=Z||J.position.x!==de.x||J.position.y!==de.y,J.position=de,J.internals.positionAbsolute=G}if(Z&&(K(a,!0),V&&(r||T||!k&&I))){const[B,J]=bo({nodeId:k,dragItems:a,nodeLookup:D});r==null||r(V,a,B,J),T==null||T(V,B,J),k||I==null||I(V,J)}}async function C(){if(!u)return;const{transform:O,panBy:L,autoPanSpeed:V}=t(),[D,x]=lc(c,u,V);(D!==0||x!==0)&&(o.x=(o.x??0)-D/O[2],o.y=(o.y??0)-x/O[2],await L({x:D,y:x})&&N(o,null)),s=requestAnimationFrame(C)}function A(O){var Z;const{nodeLookup:L,multiSelectionActive:V,nodesDraggable:D,transform:x,snapGrid:P,snapToGrid:_,selectNodesOnDrag:M,onNodeDragStart:T,onSelectionDragStart:I,unselectNodesAndEdges:R}=t();f=!0,(!M||!b)&&!V&&k&&((Z=L.get(k))!=null&&Z.selected||R()),b&&M&&k&&(e==null||e(k));const K=_r(O.sourceEvent,{transform:x,snapGrid:P,snapToGrid:_,containerBounds:u});if(o=K,a=Mv(L,D,K,k),a.size>0&&(n||T||!k&&I)){const[ne,B]=bo({nodeId:k,dragItems:a,nodeLookup:L});n==null||n(O.sourceEvent,a,ne,B),T==null||T(O.sourceEvent,ne,B),k||I==null||I(O.sourceEvent,B)}}const z=Wl().clickDistance(E).on("start",O=>{const{domNode:L,nodeDragThreshold:V,transform:D,snapGrid:x,snapToGrid:P}=t();u=(L==null?void 0:L.getBoundingClientRect())||null,g=!1,V===0&&A(O),o=_r(O.sourceEvent,{transform:D,snapGrid:x,snapToGrid:P,containerBounds:u}),c=en(O.sourceEvent,u)}).on("drag",O=>{const{autoPanOnNodeDrag:L,transform:V,snapGrid:D,snapToGrid:x,nodeDragThreshold:P,nodeLookup:_}=t(),M=_r(O.sourceEvent,{transform:V,snapGrid:D,snapToGrid:x,containerBounds:u});if((O.sourceEvent.type==="touchmove"&&O.sourceEvent.touches.length>1||k&&!_.has(k))&&(g=!0),!g){if(!l&&L&&f&&(l=!0,C()),!f){const T=M.xSnapped-(o.x??0),I=M.ySnapped-(o.y??0);Math.sqrt(T*T+I*I)>P&&A(O)}(o.x!==M.xSnapped||o.y!==M.ySnapped)&&a&&f&&(c=en(O.sourceEvent,u),N(M,O.sourceEvent))}}).on("end",O=>{if(!(!f||g)&&(l=!1,f=!1,cancelAnimationFrame(s),a.size>0)){const{nodeLookup:L,updateNodePositions:V,onNodeDragStop:D,onSelectionDragStop:x}=t();if(V(a,!1),i||D||!k&&x){const[P,_]=bo({nodeId:k,dragItems:a,nodeLookup:L,dragging:!1});i==null||i(O.sourceEvent,a,P,_),D==null||D(O.sourceEvent,P,_),k||x==null||x(O.sourceEvent,_)}}}).filter(O=>{const L=O.target;return!O.button&&(!S||!Ia(L,`.${S}`,m))&&(!w||Ia(L,w,m))});h.call(z)}function y(){h==null||h.on(".drag",null)}return{update:p,destroy:y}}function zv(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const o of t.values())Pr(i,Un(o))>0&&r.push(o);return r}const Av=250;function Iv(e,t,n,r){var a,l;let i=[],o=1/0;const s=zv(e,n,t+Av);for(const c of s){const u=[...((a=c.internals.handleBounds)==null?void 0:a.source)??[],...((l=c.internals.handleBounds)==null?void 0:l.target)??[]];for(const f of u){if(r.nodeId===f.nodeId&&r.type===f.type&&r.id===f.id)continue;const{x:h,y:g}=zr(c,f,f.position,!0),p=Math.sqrt(Math.pow(h-e.x,2)+Math.pow(g-e.y,2));p>t||(p<o?(i=[{...f,x:h,y:g}],o=p):p===o&&i.push({...f,x:h,y:g}))}}if(!i.length)return null;if(i.length>1){const c=r.type==="source"?"target":"source";return i.find(u=>u.type===c)??i[0]}return i[0]}function _c(e,t,n,r,i,o=!1){var c,u,f;const s=r.get(e);if(!s)return null;const a=i==="strict"?(c=s.internals.handleBounds)==null?void 0:c[t]:[...((u=s.internals.handleBounds)==null?void 0:u.source)??[],...((f=s.internals.handleBounds)==null?void 0:f.target)??[]],l=(n?a==null?void 0:a.find(h=>h.id===n):a==null?void 0:a[0])??null;return l&&o?{...l,...zr(s,l,l.position,!0)}:l}function wc(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Tv(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const xc=()=>!0;function Ov(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:o,isTarget:s,domNode:a,nodeLookup:l,lib:c,autoPanOnConnect:u,flowId:f,panBy:h,cancelConnection:g,onConnectStart:p,onConnect:y,onConnectEnd:S,isValidConnection:w=xc,onReconnectEnd:m,updateConnection:b,getTransform:k,getFromHandle:E,autoPanSpeed:N}){const C=av(e.target);let A=0,z;const{x:O,y:L}=en(e),V=C==null?void 0:C.elementFromPoint(O,L),D=wc(o,V),x=a==null?void 0:a.getBoundingClientRect();if(!x||!D)return;const P=_c(i,D,r,l,t);if(!P)return;let _=en(e,x),M=!1,T=null,I=!1,R=null;function K(){if(!u||!x)return;const[G,U]=lc(_,x,N);h({x:G,y:U}),A=requestAnimationFrame(K)}const Z={...P,nodeId:i,type:D,position:P.position},ne=l.get(i),J={inProgress:!0,isValid:null,from:zr(ne,Z,fe.Left,!0),fromHandle:Z,fromPosition:Z.position,fromNode:ne,to:_,toHandle:null,toPosition:_a[Z.position],toNode:null};b(J);let re=J;p==null||p(e,{nodeId:i,handleId:r,handleType:D});function ue(G){if(!E()||!Z){de(G);return}const U=k();_=en(G,x),z=Iv(si(_,U,!1,[1,1]),n,l,Z),M||(K(),M=!0);const j=bc(G,{handle:z,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:s?"target":"source",isValidConnection:w,doc:C,lib:c,flowId:f,nodeLookup:l});R=j.handleDomNode,T=j.connection,I=Tv(!!z,j.isValid);const ge={...re,isValid:I,to:z&&I?uc({x:z.x,y:z.y},U):_,toHandle:j.toHandle,toPosition:I&&j.toHandle?j.toHandle.position:_a[Z.position],toNode:j.toHandle?l.get(j.toHandle.nodeId):null};I&&z&&re.toHandle&&ge.toHandle&&re.toHandle.type===ge.toHandle.type&&re.toHandle.nodeId===ge.toHandle.nodeId&&re.toHandle.id===ge.toHandle.id&&re.to.x===ge.to.x&&re.to.y===ge.to.y||(b(ge),re=ge)}function de(G){(z||R)&&T&&I&&(y==null||y(T));const{inProgress:U,...j}=re,ge={...j,toPosition:re.toHandle?re.toPosition:null};S==null||S(G,ge),o&&(m==null||m(G,ge)),g(),cancelAnimationFrame(A),M=!1,I=!1,T=null,R=null,C.removeEventListener("mousemove",ue),C.removeEventListener("mouseup",de),C.removeEventListener("touchmove",ue),C.removeEventListener("touchend",de)}C.addEventListener("mousemove",ue),C.addEventListener("mouseup",de),C.addEventListener("touchmove",ue),C.addEventListener("touchend",de)}function bc(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:o,doc:s,lib:a,flowId:l,isValidConnection:c=xc,nodeLookup:u}){const f=o==="target",h=t?s.querySelector(`.${a}-flow__handle[data-id="${l}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:g,y:p}=en(e),y=s.elementFromPoint(g,p),S=y!=null&&y.classList.contains(`${a}-flow__handle`)?y:h,w={handleDomNode:S,isValid:!1,connection:null,toHandle:null};if(S){const m=wc(void 0,S),b=S.getAttribute("data-nodeid"),k=S.getAttribute("data-handleid"),E=S.classList.contains("connectable"),N=S.classList.contains("connectableend");if(!b||!m)return w;const C={source:f?b:r,sourceHandle:f?k:i,target:f?r:b,targetHandle:f?i:k};w.connection=C;const z=E&&N&&(n===Pn.Strict?f&&m==="source"||!f&&m==="target":b!==r||k!==i);w.isValid=z&&c(C),w.toHandle=_c(b,m,k,u,n,!1)}return w}const Dv={onPointerDown:Ov,isValid:bc};function Hv({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const i=wt(e);function o({translateExtent:a,width:l,height:c,zoomStep:u=10,pannable:f=!0,zoomable:h=!0,inversePan:g=!1}){const p=b=>{const k=n();if(b.sourceEvent.type!=="wheel"||!t)return;const E=-b.sourceEvent.deltaY*(b.sourceEvent.deltaMode===1?.05:b.sourceEvent.deltaMode?1:.002)*u,N=k[2]*Math.pow(2,E);t.scaleTo(N)};let y=[0,0];const S=b=>{(b.sourceEvent.type==="mousedown"||b.sourceEvent.type==="touchstart")&&(y=[b.sourceEvent.clientX??b.sourceEvent.touches[0].clientX,b.sourceEvent.clientY??b.sourceEvent.touches[0].clientY])},w=b=>{const k=n();if(b.sourceEvent.type!=="mousemove"&&b.sourceEvent.type!=="touchmove"||!t)return;const E=[b.sourceEvent.clientX??b.sourceEvent.touches[0].clientX,b.sourceEvent.clientY??b.sourceEvent.touches[0].clientY],N=[E[0]-y[0],E[1]-y[1]];y=E;const C=r()*Math.max(k[2],Math.log(k[2]))*(g?-1:1),A={x:k[0]-N[0]*C,y:k[1]-N[1]*C},z=[[0,0],[l,c]];t.setViewportConstrained({x:A.x,y:A.y,zoom:k[2]},z,a)},m=rc().on("start",S).on("zoom",f?w:null).on("zoom.wheel",h?p:null);i.call(m,{})}function s(){i.on("zoom",null)}return{update:o,destroy:s,pointer:Pt}}const Rv=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,co=e=>({x:e.x,y:e.y,zoom:e.k}),ko=({x:e,y:t,zoom:n})=>so.translate(e,t).scale(n),Rn=(e,t)=>e.target.closest(`.${t}`),kc=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Eo=(e,t=0,n=()=>{})=>{const r=typeof t=="number"&&t>0;return r||n(),r?e.transition().duration(t).on("end",n):e},Ec=e=>{const t=e.ctrlKey&&Yi()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Lv({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:o,zoomOnPinch:s,onPanZoomStart:a,onPanZoom:l,onPanZoomEnd:c}){return u=>{if(Rn(u,t))return!1;u.preventDefault(),u.stopImmediatePropagation();const f=n.property("__zoom").k||1;if(u.ctrlKey&&s){const S=Pt(u),w=Ec(u),m=f*Math.pow(2,w);r.scaleTo(n,m,S,u);return}const h=u.deltaMode===1?20:1;let g=i===gn.Vertical?0:u.deltaX*h,p=i===gn.Horizontal?0:u.deltaY*h;!Yi()&&u.shiftKey&&i!==gn.Vertical&&(g=u.deltaY*h,p=0),r.translateBy(n,-(g/f)*o,-(p/f)*o,{internal:!0});const y=co(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,a==null||a(u,y)),e.isPanScrolling&&(l==null||l(u,y),e.panScrollTimeout=setTimeout(()=>{c==null||c(u,y),e.isPanScrolling=!1},150))}}function Vv({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){if(!t&&r.type==="wheel"&&!r.ctrlKey||Rn(r,e))return null;r.preventDefault(),n.call(this,r,i)}}function Xv({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var o,s,a;if((o=r.sourceEvent)!=null&&o.internal)return;const i=co(r.transform);e.mouseButton=((s=r.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=i,((a=r.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,i))}}function Yv({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return o=>{var s,a;e.usedRightMouseButton=!!(n&&kc(t,e.mouseButton??0)),(s=o.sourceEvent)!=null&&s.sync||r([o.transform.x,o.transform.y,o.transform.k]),i&&!((a=o.sourceEvent)!=null&&a.internal)&&(i==null||i(o.sourceEvent,co(o.transform)))}}function Wv({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:o}){return s=>{var a;if(!((a=s.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,o&&kc(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&o(s.sourceEvent),e.usedRightMouseButton=!1,r(!1),i&&Rv(e.prevViewport,s.transform))){const l=co(s.transform);e.prevViewport=l,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i==null||i(s.sourceEvent,l)},n?150:0)}}}function Bv({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:o,userSelectionActive:s,noWheelClassName:a,noPanClassName:l,lib:c}){return u=>{var p;const f=e||t,h=n&&u.ctrlKey;if(u.button===1&&u.type==="mousedown"&&(Rn(u,`${c}-flow__node`)||Rn(u,`${c}-flow__edge`)))return!0;if(!r&&!f&&!i&&!o&&!n||s||Rn(u,a)&&u.type==="wheel"||Rn(u,l)&&(u.type!=="wheel"||i&&u.type==="wheel"&&!e)||!n&&u.ctrlKey&&u.type==="wheel")return!1;if(!n&&u.type==="touchstart"&&((p=u.touches)==null?void 0:p.length)>1)return u.preventDefault(),!1;if(!f&&!i&&!h&&u.type==="wheel"||!r&&(u.type==="mousedown"||u.type==="touchstart")||Array.isArray(r)&&!r.includes(u.button)&&u.type==="mousedown")return!1;const g=Array.isArray(r)&&r.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||u.type==="wheel")&&g}}function Kv({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:o,onPanZoom:s,onPanZoomStart:a,onPanZoomEnd:l,onDraggingChange:c}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=e.getBoundingClientRect(),h=rc().clickDistance(!Ut(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(i),g=wt(e).call(h);b({x:o.x,y:o.y,zoom:Zn(o.zoom,t,n)},[[0,0],[f.width,f.height]],i);const p=g.on("wheel.zoom"),y=g.on("dblclick.zoom");h.wheelDelta(Ec);function S(V,D){return g?new Promise(x=>{h==null||h.transform(Eo(g,D==null?void 0:D.duration,()=>x(!0)),V)}):Promise.resolve(!1)}function w({noWheelClassName:V,noPanClassName:D,onPaneContextMenu:x,userSelectionActive:P,panOnScroll:_,panOnDrag:M,panOnScrollMode:T,panOnScrollSpeed:I,preventScrolling:R,zoomOnPinch:K,zoomOnScroll:Z,zoomOnDoubleClick:ne,zoomActivationKeyPressed:B,lib:J,onTransformChange:re}){P&&!u.isZoomingOrPanning&&m();const de=_&&!B&&!P?Lv({zoomPanValues:u,noWheelClassName:V,d3Selection:g,d3Zoom:h,panOnScrollMode:T,panOnScrollSpeed:I,zoomOnPinch:K,onPanZoomStart:a,onPanZoom:s,onPanZoomEnd:l}):Vv({noWheelClassName:V,preventScrolling:R,d3ZoomHandler:p});if(g.on("wheel.zoom",de,{passive:!1}),!P){const U=Xv({zoomPanValues:u,onDraggingChange:c,onPanZoomStart:a});h.on("start",U);const j=Yv({zoomPanValues:u,panOnDrag:M,onPaneContextMenu:!!x,onPanZoom:s,onTransformChange:re});h.on("zoom",j);const ge=Wv({zoomPanValues:u,panOnDrag:M,panOnScroll:_,onPaneContextMenu:x,onPanZoomEnd:l,onDraggingChange:c});h.on("end",ge)}const G=Bv({zoomActivationKeyPressed:B,panOnDrag:M,zoomOnScroll:Z,panOnScroll:_,zoomOnDoubleClick:ne,zoomOnPinch:K,userSelectionActive:P,noPanClassName:D,noWheelClassName:V,lib:J});h.filter(G),ne?g.on("dblclick.zoom",y):g.on("dblclick.zoom",null)}function m(){h.on("zoom",null)}async function b(V,D,x){const P=ko(V),_=h==null?void 0:h.constrain()(P,D,x);return _&&await S(_),new Promise(M=>M(_))}async function k(V,D){const x=ko(V);return await S(x,D),new Promise(P=>P(x))}function E(V){if(g){const D=ko(V),x=g.property("__zoom");(x.k!==V.zoom||x.x!==V.x||x.y!==V.y)&&(h==null||h.transform(g,D,null,{sync:!0}))}}function N(){const V=g?nc(g.node()):{x:0,y:0,k:1};return{x:V.x,y:V.y,zoom:V.k}}function C(V,D){return g?new Promise(x=>{h==null||h.scaleTo(Eo(g,D==null?void 0:D.duration,()=>x(!0)),V)}):Promise.resolve(!1)}function A(V,D){return g?new Promise(x=>{h==null||h.scaleBy(Eo(g,D==null?void 0:D.duration,()=>x(!0)),V)}):Promise.resolve(!1)}function z(V){h==null||h.scaleExtent(V)}function O(V){h==null||h.translateExtent(V)}function L(V){const D=!Ut(V)||V<0?0:V;h==null||h.clickDistance(D)}return{update:w,destroy:m,setViewport:k,setViewportConstrained:b,getViewport:N,scaleTo:C,scaleBy:A,setScaleExtent:z,setTranslateExtent:O,syncViewport:E,setClickDistance:L}}var cn;(function(e){e.Line="line",e.Handle="handle"})(cn||(cn={}));const Fv=["top-left","top-right","bottom-left","bottom-right"],qv=["top","right","bottom","left"];function $v({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:i,affectsY:o}){const s=e-t,a=n-r,l=[s>0?1:s<0?-1:0,a>0?1:a<0?-1:0];return s&&i&&(l[0]=l[0]*-1),a&&o&&(l[1]=l[1]*-1),l}function Gv(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),i=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:i}}function on(e,t){return Math.max(0,t-e)}function sn(e,t){return Math.max(0,e-t)}function mi(e,t,n){return Math.max(0,t-e,e-n)}function Ta(e,t){return e?!t:t}function Zv(e,t,n,r,i,o,s,a){let{affectsX:l,affectsY:c}=t;const{isHorizontal:u,isVertical:f}=t,h=u&&f,{xSnapped:g,ySnapped:p}=n,{minWidth:y,maxWidth:S,minHeight:w,maxHeight:m}=r,{x:b,y:k,width:E,height:N,aspectRatio:C}=e;let A=Math.floor(u?g-e.pointerX:0),z=Math.floor(f?p-e.pointerY:0);const O=E+(l?-A:A),L=N+(c?-z:z),V=-o[0]*E,D=-o[1]*N;let x=mi(O,y,S),P=mi(L,w,m);if(s){let T=0,I=0;l&&A<0?T=on(b+A+V,s[0][0]):!l&&A>0&&(T=sn(b+O+V,s[1][0])),c&&z<0?I=on(k+z+D,s[0][1]):!c&&z>0&&(I=sn(k+L+D,s[1][1])),x=Math.max(x,T),P=Math.max(P,I)}if(a){let T=0,I=0;l&&A>0?T=sn(b+A,a[0][0]):!l&&A<0&&(T=on(b+O,a[1][0])),c&&z>0?I=sn(k+z,a[0][1]):!c&&z<0&&(I=on(k+L,a[1][1])),x=Math.max(x,T),P=Math.max(P,I)}if(i){if(u){const T=mi(O/C,w,m)*C;if(x=Math.max(x,T),s){let I=0;!l&&!c||l&&!c&&h?I=sn(k+D+O/C,s[1][1])*C:I=on(k+D+(l?A:-A)/C,s[0][1])*C,x=Math.max(x,I)}if(a){let I=0;!l&&!c||l&&!c&&h?I=on(k+O/C,a[1][1])*C:I=sn(k+(l?A:-A)/C,a[0][1])*C,x=Math.max(x,I)}}if(f){const T=mi(L*C,y,S)/C;if(P=Math.max(P,T),s){let I=0;!l&&!c||c&&!l&&h?I=sn(b+L*C+V,s[1][0])/C:I=on(b+(c?z:-z)*C+V,s[0][0])/C,P=Math.max(P,I)}if(a){let I=0;!l&&!c||c&&!l&&h?I=on(b+L*C,a[1][0])/C:I=sn(b+(c?z:-z)*C,a[0][0])/C,P=Math.max(P,I)}}}z=z+(z<0?P:-P),A=A+(A<0?x:-x),i&&(h?O>L*C?z=(Ta(l,c)?-A:A)/C:A=(Ta(l,c)?-z:z)*C:u?(z=A/C,c=l):(A=z*C,l=c));const _=l?b+A:b,M=c?k+z:k;return{width:E+(l?-A:A),height:N+(c?-z:z),x:o[0]*A*(l?-1:1)+_,y:o[1]*z*(c?-1:1)+M}}const Sc={width:0,height:0,x:0,y:0},Uv={...Sc,pointerX:0,pointerY:0,aspectRatio:1};function Jv(e){return[[0,0],[e.measured.width,e.measured.height]]}function jv(e,t,n){const r=t.position.x+e.position.x,i=t.position.y+e.position.y,o=e.measured.width??0,s=e.measured.height??0,a=n[0]*o,l=n[1]*s;return[[r-a,i-l],[r+o-a,i+s-l]]}function Qv({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:i}){const o=wt(e);function s({controlPosition:l,boundaries:c,keepAspectRatio:u,onResizeStart:f,onResize:h,onResizeEnd:g,shouldResize:p}){let y={...Sc},S={...Uv};const w=Gv(l);let m,b=null,k=[],E,N,C;const A=Wl().on("start",z=>{const{nodeLookup:O,transform:L,snapGrid:V,snapToGrid:D,nodeOrigin:x,paneDomNode:P}=n();if(m=O.get(t),!m)return;b=(P==null?void 0:P.getBoundingClientRect())??null;const{xSnapped:_,ySnapped:M}=_r(z.sourceEvent,{transform:L,snapGrid:V,snapToGrid:D,containerBounds:b});y={width:m.measured.width??0,height:m.measured.height??0,x:m.position.x??0,y:m.position.y??0},S={...y,pointerX:_,pointerY:M,aspectRatio:y.width/y.height},E=void 0,m.parentId&&(m.extent==="parent"||m.expandParent)&&(E=O.get(m.parentId),N=E&&m.extent==="parent"?Jv(E):void 0),k=[],C=void 0;for(const[T,I]of O)if(I.parentId===t&&(k.push({id:T,position:{...I.position},extent:I.extent}),I.extent==="parent"||I.expandParent)){const R=jv(I,m,I.origin??x);C?C=[[Math.min(R[0][0],C[0][0]),Math.min(R[0][1],C[0][1])],[Math.max(R[1][0],C[1][0]),Math.max(R[1][1],C[1][1])]]:C=R}f==null||f(z,{...y})}).on("drag",z=>{const{transform:O,snapGrid:L,snapToGrid:V,nodeOrigin:D}=n(),x=_r(z.sourceEvent,{transform:O,snapGrid:L,snapToGrid:V,containerBounds:b}),P=[];if(!m)return;const{x:_,y:M,width:T,height:I}=y,R={},K=m.origin??D,{width:Z,height:ne,x:B,y:J}=Zv(S,w,x,c,u,K,N,C),re=Z!==T,ue=ne!==I,de=B!==_&&re,G=J!==M&&ue;if(!de&&!G&&!re&&!ue)return;if((de||G||K[0]===1||K[1]===1)&&(R.x=de?B:y.x,R.y=G?J:y.y,y.x=R.x,y.y=R.y,k.length>0)){const ke=B-_,pe=J-M;for(const Ce of k)Ce.position={x:Ce.position.x-ke+K[0]*(Z-T),y:Ce.position.y-pe+K[1]*(ne-I)},P.push(Ce)}if((re||ue)&&(R.width=re?Z:y.width,R.height=ue?ne:y.height,y.width=R.width,y.height=R.height),E&&m.expandParent){const ke=K[0]*(R.width??0);R.x&&R.x<ke&&(y.x=ke,S.x=S.x-(R.x-ke));const pe=K[1]*(R.height??0);R.y&&R.y<pe&&(y.y=pe,S.y=S.y-(R.y-pe))}const U=$v({width:y.width,prevWidth:T,height:y.height,prevHeight:I,affectsX:w.affectsX,affectsY:w.affectsY}),j={...y,direction:U};(p==null?void 0:p(z,j))!==!1&&(h==null||h(z,j),r(R,P))}).on("end",z=>{g==null||g(z,{...y}),i==null||i()});o.call(A)}function a(){o.on(".drag",null)}return{update:s,destroy:a}}var e0=se('<div role="button" tabindex="-1"><!></div>');function _n(e,t){le(t,!1);const n=je(),r=()=>q(Z,"$connectable",n),i=()=>q(ue,"$connectionRadius",n),o=()=>q(J,"$domNode",n),s=()=>q(re,"$nodeLookup",n),a=()=>q(B,"$connectionMode",n),l=()=>q(U,"$lib",n),c=()=>q(Me,"$autoPanOnConnect",n),u=()=>q($e,"$flowId",n),f=()=>q(G,"$isValidConnectionStore",n),h=()=>q(ge,"$onedgecreate",n),g=()=>q(qe,"$onConnectAction",n),p=()=>q(Pe,"$onConnectStartAction",n),y=()=>q(be,"$onConnectEndAction",n),S=()=>q(de,"$viewport",n),w=()=>q(yt,"$connection",n),m=()=>q(Be,"$edges",n),b=()=>q(Ve,"$connectionLookup",n),k=F(),E=F(),N=F(),C=F(),A=F(),z=F(),O=F(),L=F();let V=v(t,"id",8,void 0),D=v(t,"type",8,"source"),x=v(t,"position",24,()=>fe.Top),P=v(t,"style",8,void 0),_=v(t,"isValidConnection",8,void 0),M=v(t,"onconnect",8,void 0),T=v(t,"ondisconnect",8,void 0),I=v(t,"isConnectable",8,void 0),R=v(t,"class",8,void 0);const K=qn("svelteflow__node_id"),Z=qn("svelteflow__node_connectable"),ne=Fe(),{connectionMode:B,domNode:J,nodeLookup:re,connectionRadius:ue,viewport:de,isValidConnection:G,lib:U,addEdge:j,onedgecreate:ge,panBy:ke,cancelConnection:pe,updateConnection:Ce,autoPanOnConnect:Me,edges:Be,connectionLookup:Ve,onconnect:qe,onconnectstart:Pe,onconnectend:be,flowId:$e,connection:yt}=ne;function Te(Ue){const tt=fc(Ue);(tt&&Ue.button===0||!tt)&&Dv.onPointerDown(Ue,{handleId:d(N),nodeId:K,isTarget:d(k),connectionRadius:i(),domNode:o(),nodeLookup:s(),connectionMode:a(),lib:l(),autoPanOnConnect:c(),flowId:u(),isValidConnection:_()??f(),updateConnection:Ce,cancelConnection:pe,panBy:ke,onConnect:ze=>{var kt;const nt=h()?h()(ze):ze;nt&&(j(nt),(kt=g())==null||kt(ze))},onConnectStart:(ze,nt)=>{var kt;(kt=p())==null||kt(ze,{nodeId:nt.nodeId,handleId:nt.handleId,handleType:nt.handleType})},onConnectEnd:(ze,nt)=>{var kt;(kt=y())==null||kt(ze,nt)},getTransform:()=>[S().x,S().y,S().zoom],getFromHandle:()=>w().fromHandle})}let Qe=F(null),Ke=F();$(()=>W(D()),()=>{H(k,D()==="target")}),$(()=>(W(I()),r()),()=>{H(E,I()!==void 0?I():r())}),$(()=>W(V()),()=>{H(N,V()||null)}),$(()=>(W(M()),W(T()),m(),b(),W(D()),W(V())),()=>{(M()||T())&&(m(),H(Ke,b().get(`${K}-${D()}-${V()||null}`)))}),$(()=>(d(Qe),d(Ke),W(T()),W(M())),()=>{if(d(Qe)&&!ic(d(Ke),d(Qe))){const Ue=d(Ke)??new Map;wa(d(Qe),Ue,T()),wa(Ue,d(Qe),M())}H(Qe,d(Ke)??new Map)}),$(()=>w(),()=>{H(C,!!w().fromHandle)}),$(()=>(w(),W(D()),d(N)),()=>{var Ue,tt,ze;H(A,((Ue=w().fromHandle)==null?void 0:Ue.nodeId)===K&&((tt=w().fromHandle)==null?void 0:tt.type)===D()&&((ze=w().fromHandle)==null?void 0:ze.id)===d(N))}),$(()=>(w(),W(D()),d(N)),()=>{var Ue,tt,ze;H(z,((Ue=w().toHandle)==null?void 0:Ue.nodeId)===K&&((tt=w().toHandle)==null?void 0:tt.type)===D()&&((ze=w().toHandle)==null?void 0:ze.id)===d(N))}),$(()=>(a(),w(),W(D()),d(N)),()=>{var Ue,tt,ze;H(O,a()===Pn.Strict?((Ue=w().fromHandle)==null?void 0:Ue.type)!==D():K!==((tt=w().fromHandle)==null?void 0:tt.nodeId)||d(N)!==((ze=w().fromHandle)==null?void 0:ze.id))}),$(()=>(d(z),w()),()=>{H(L,d(z)&&w().isValid)}),it(),he();var De=e0();Q(De,"data-nodeid",K);const bn=ae(()=>Dt(at(["svelte-flow__handle",`svelte-flow__handle-${x()}`,"nodrag","nopan",x(),R()])));var On=ee(De);Ie(On,t,"default",{}),me(()=>{Q(De,"data-handleid",d(N)),Q(De,"data-handlepos",x()),Q(De,"data-id",`${u()??""}-${K??""}-${(V()||null)??""}-${D()??""}`),ms(De,d(bn),""),Q(De,"style",P()),Ye(De,"valid",d(L)),Ye(De,"connectingto",d(z)),Ye(De,"connectingfrom",d(A)),Ye(De,"source",!d(k)),Ye(De,"target",d(k)),Ye(De,"connectablestart",d(E)),Ye(De,"connectableend",d(E)),Ye(De,"connectable",d(E)),Ye(De,"connectionindicator",d(E)&&(!d(C)||d(O)))}),Ae("mousedown",De,Te),Ae("touchstart",De,Te),Y(e,De),ce()}var t0=se("<!> <!>",1);function Qo(e,t){const n=ye(t,["children","$$slots","$$events","$$legacy"]);ye(n,["data","targetPosition","sourcePosition"]),le(t,!1);let r=v(t,"data",24,()=>({label:"Node"})),i=v(t,"targetPosition",8,void 0),o=v(t,"sourcePosition",8,void 0);he();var s=t0(),a=oe(s),l=ae(()=>i()??fe.Top);_n(a,{type:"target",get position(){return d(l)}});var c=te(a),u=te(c),f=ae(()=>o()??fe.Bottom);_n(u,{type:"source",get position(){return d(f)}}),me(()=>{var h;return qt(c,` ${((h=r())==null?void 0:h.label)??""} `)}),Y(e,s),ce()}var n0=se(" <!>",1);function r0(e,t){const n=ye(t,["children","$$slots","$$events","$$legacy"]);ye(n,["data","sourcePosition"]),le(t,!1);let r=v(t,"data",24,()=>({label:"Node"})),i=v(t,"sourcePosition",8,void 0);he();var o=n0(),s=oe(o),a=te(s),l=ae(()=>i()??fe.Bottom);_n(a,{type:"source",get position(){return d(l)}}),me(()=>{var c;return qt(s,`${((c=r())==null?void 0:c.label)??""} `)}),Y(e,o),ce()}var i0=se(" <!>",1);function o0(e,t){const n=ye(t,["children","$$slots","$$events","$$legacy"]);ye(n,["data","targetPosition"]),le(t,!1);let r=v(t,"data",24,()=>({label:"Node"})),i=v(t,"targetPosition",8,void 0);he();var o=i0(),s=oe(o),a=te(s),l=ae(()=>i()??fe.Top);_n(a,{type:"target",get position(){return d(l)}}),me(()=>{var c;return qt(s,`${((c=r())==null?void 0:c.label)??""} `)}),Y(e,o),ce()}function s0(e,t){const n=ye(t,["children","$$slots","$$events","$$legacy"]);ye(n,[])}function Oa(e,t,n){if(!t)return;const r=n?t.querySelector(n):t;r&&r.appendChild(e)}function So(e,{target:t,domNode:n}){return Oa(e,n,t),{async update({target:r,domNode:i}){Oa(e,i,r)},destroy(){e.parentNode&&e.parentNode.removeChild(e)}}}var a0=se("<div><!></div>");function l0(e,t){le(t,!1);const n=je(),r=()=>q(i,"$domNode",n),{domNode:i}=Fe();he();var o=a0(),s=ee(o);Ie(s,t,"default",{}),dt(o,(a,l)=>So==null?void 0:So(a,l),()=>({target:".svelte-flow__edgelabel-renderer",domNode:r()})),Y(e,o),ce()}function Cc(){const{edgeLookup:e,selectionRect:t,selectionRectMode:n,multiselectionKeyPressed:r,addSelectedEdges:i,unselectNodesAndEdges:o,elementsSelectable:s}=Fe();return a=>{const l=X(e).get(a);if(!l){console.warn("012",ri.error012(a));return}(l.selectable||X(s)&&typeof l.selectable>"u")&&(t.set(null),n.set(null),l.selected?l.selected&&X(r)&&o({nodes:[],edges:[l]}):i([a]))}}var c0=se('<div class="svelte-flow__edge-label" role="button" tabindex="-1"><!></div>');function u0(e,t){le(t,!1);let n=v(t,"style",8,void 0),r=v(t,"x",8,void 0),i=v(t,"y",8,void 0);const o=Cc(),s=qn("svelteflow__edge_id");he(),l0(e,{children:(a,l)=>{var c=c0(),u=ee(c);Ie(u,t,"default",{}),me(()=>{Q(c,"style","pointer-events: all;"+n()),We(c,"transform",`translate(-50%, -50%) translate(${r()??""}px,${i()??""}px)`)}),Ae("keyup",c,()=>{}),Ae("click",c,()=>{s&&o(s)}),Y(a,c)},$$slots:{default:!0}}),ce()}var d0=Je('<path fill="none" class="svelte-flow__edge-interaction"></path>'),f0=Je('<path fill="none"></path><!><!>',1);function uo(e,t){le(t,!1);let n=v(t,"id",8,void 0),r=v(t,"path",8),i=v(t,"label",8,void 0),o=v(t,"labelX",8,void 0),s=v(t,"labelY",8,void 0),a=v(t,"labelStyle",8,void 0),l=v(t,"markerStart",8,void 0),c=v(t,"markerEnd",8,void 0),u=v(t,"style",8,void 0),f=v(t,"interactionWidth",8,20),h=v(t,"class",8,void 0),g=f()===void 0?20:f();he();var p=f0(),y=oe(p);const S=ae(()=>Dt(at(["svelte-flow__edge-path",h()])));var w=te(y);{var m=E=>{var N=d0();Q(N,"stroke-opacity",0),Q(N,"stroke-width",g),me(()=>Q(N,"d",r())),Y(E,N)};we(w,E=>{g&&E(m)})}var b=te(w);{var k=E=>{u0(E,{get x(){return o()},get y(){return s()},get style(){return a()},children:(N,C)=>{var A=Ro();me(()=>qt(A,i())),Y(N,A)},$$slots:{default:!0}})};we(b,E=>{i()&&E(k)})}me(()=>{Q(y,"id",n()),Q(y,"d",r()),Tn(y,d(S),""),Q(y,"marker-start",l()),Q(y,"marker-end",c()),Q(y,"style",u())}),Y(e,p),ce()}function es(e,t){const n=ye(t,["children","$$slots","$$events","$$legacy"]);ye(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),le(t,!1);const r=F(),i=F(),o=F();let s=v(t,"label",8,void 0),a=v(t,"labelStyle",8,void 0),l=v(t,"style",8,void 0),c=v(t,"markerStart",8,void 0),u=v(t,"markerEnd",8,void 0),f=v(t,"interactionWidth",8,void 0),h=v(t,"sourceX",8),g=v(t,"sourceY",8),p=v(t,"sourcePosition",8),y=v(t,"targetX",8),S=v(t,"targetY",8),w=v(t,"targetPosition",8);$(()=>(d(r),d(i),d(o),W(h()),W(g()),W(y()),W(S()),W(p()),W(w())),()=>{(m=>(H(r,m[0]),H(i,m[1]),H(o,m[2])))(hc({sourceX:h(),sourceY:g(),targetX:y(),targetY:S(),sourcePosition:p(),targetPosition:w()}))}),it(),he(),uo(e,{get path(){return d(r)},get labelX(){return d(i)},get labelY(){return d(o)},get label(){return s()},get labelStyle(){return a()},get markerStart(){return c()},get markerEnd(){return u()},get interactionWidth(){return f()},get style(){return l()}}),ce()}function h0(e,t){const n=ye(t,["children","$$slots","$$events","$$legacy"]);ye(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),le(t,!1);const r=F(),i=F(),o=F();let s=v(t,"label",8,void 0),a=v(t,"labelStyle",8,void 0),l=v(t,"style",8,void 0),c=v(t,"markerStart",8,void 0),u=v(t,"markerEnd",8,void 0),f=v(t,"interactionWidth",8,void 0),h=v(t,"sourceX",8),g=v(t,"sourceY",8),p=v(t,"sourcePosition",8),y=v(t,"targetX",8),S=v(t,"targetY",8),w=v(t,"targetPosition",8);$(()=>(d(r),d(i),d(o),W(h()),W(g()),W(y()),W(S()),W(p()),W(w())),()=>{(m=>(H(r,m[0]),H(i,m[1]),H(o,m[2])))(Wi({sourceX:h(),sourceY:g(),targetX:y(),targetY:S(),sourcePosition:p(),targetPosition:w()}))}),it(),he(),uo(e,{get path(){return d(r)},get labelX(){return d(i)},get labelY(){return d(o)},get label(){return s()},get labelStyle(){return a()},get markerStart(){return c()},get markerEnd(){return u()},get interactionWidth(){return f()},get style(){return l()}}),ce()}function g0(e,t){const n=ye(t,["children","$$slots","$$events","$$legacy"]);ye(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","targetX","targetY"]),le(t,!1);const r=F(),i=F(),o=F();let s=v(t,"label",8,void 0),a=v(t,"labelStyle",8,void 0),l=v(t,"style",8,void 0),c=v(t,"markerStart",8,void 0),u=v(t,"markerEnd",8,void 0),f=v(t,"interactionWidth",8,void 0),h=v(t,"sourceX",8),g=v(t,"sourceY",8),p=v(t,"targetX",8),y=v(t,"targetY",8);$(()=>(d(r),d(i),d(o),W(h()),W(g()),W(p()),W(y())),()=>{(S=>(H(r,S[0]),H(i,S[1]),H(o,S[2])))(Jo({sourceX:h(),sourceY:g(),targetX:p(),targetY:y()}))}),it(),he(),uo(e,{get path(){return d(r)},get labelX(){return d(i)},get labelY(){return d(o)},get label(){return s()},get labelStyle(){return a()},get markerStart(){return c()},get markerEnd(){return u()},get interactionWidth(){return f()},get style(){return l()}}),ce()}function v0(e,t){const n=ye(t,["children","$$slots","$$events","$$legacy"]);ye(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),le(t,!1);const r=F(),i=F(),o=F();let s=v(t,"label",8,void 0),a=v(t,"labelStyle",8,void 0),l=v(t,"style",8,void 0),c=v(t,"markerStart",8,void 0),u=v(t,"markerEnd",8,void 0),f=v(t,"interactionWidth",8,void 0),h=v(t,"sourceX",8),g=v(t,"sourceY",8),p=v(t,"sourcePosition",8),y=v(t,"targetX",8),S=v(t,"targetY",8),w=v(t,"targetPosition",8);$(()=>(d(r),d(i),d(o),W(h()),W(g()),W(y()),W(S()),W(p()),W(w())),()=>{(m=>(H(r,m[0]),H(i,m[1]),H(o,m[2])))(Wi({sourceX:h(),sourceY:g(),targetX:y(),targetY:S(),sourcePosition:p(),targetPosition:w(),borderRadius:0}))}),it(),he(),uo(e,{get path(){return d(r)},get labelX(){return d(i)},get labelY(){return d(o)},get label(){return s()},get labelStyle(){return a()},get markerStart(){return c()},get markerEnd(){return u()},get interactionWidth(){return f()},get style(){return l()}}),ce()}function m0(e,t){const n=e.set,r=t.set,i=X(e),o=X(t);let a=i.length===0&&o.length>0?o:i;e.set(a);const l=c=>{const u=n(c);return a=u,r(a),u};e.set=t.set=l,e.update=t.update=c=>l(c(a))}function y0(e,t){const n=e.set,r=t.set;let i=X(t);e.set(i);const o=s=>{n(s),r(s),i=s};e.set=t.set=o,e.update=t.update=s=>o(s(i))}const p0=(e,t,n)=>{if(!n)return;const r=X(e),i=t.set,o=n.set;let s=n?X(n):{x:0,y:0,zoom:1};t.set(s),t.set=a=>(i(a),o(a),s=a,a),n.set=a=>(r==null||r.syncViewport(a),i(a),o(a),s=a,a),t.update=a=>{t.set(a(s))},n.update=a=>{n.set(a(s))}},_0=(e,t,n,r=[0,0],i=Ri)=>{const{subscribe:o,set:s,update:a}=ie([]);let l=e,c={},u=!0;const f=y=>(vc(y,t,n,{elevateNodesOnSelect:u,nodeOrigin:r,nodeExtent:i,defaults:c,checkEquality:!1}),l=y,s(l),l),h=y=>f(y(l)),g=y=>{c=y},p=y=>{u=y.elevateNodesOnSelect??u};return f(l),{subscribe:o,set:f,update:h,setDefaultOptions:g,setOptions:p}},w0=(e,t,n,r)=>{const{subscribe:i,set:o,update:s}=ie([]);let a=e,l={};const c=h=>{const g=l?h.map(p=>({...l,...p})):h;yc(t,n,g),a=g,o(a)},u=h=>c(h(a)),f=h=>{l=h};return c(a),{subscribe:i,set:c,update:u,setDefaultOptions:f}},Nc={input:r0,output:o0,default:Qo,group:s0},Mc={straight:g0,smoothstep:h0,default:es,step:v0},x0=({nodes:e=[],edges:t=[],width:n,height:r,fitView:i,nodeOrigin:o,nodeExtent:s})=>{const a=new Map,l=new Map,c=new Map,u=new Map,f=o??[0,0],h=s??Ri;vc(e,a,l,{nodeExtent:h,nodeOrigin:f,elevateNodesOnSelect:!1,checkEquality:!1}),yc(c,u,t);let g={x:0,y:0,zoom:1};if(i&&n&&r){const p=oi(a,{filter:y=>!!((y.width||y.initialWidth)&&(y.height||y.initialHeight))});g=Cs(p,n,r,.5,2,.1)}return{flowId:ie(null),nodes:_0(e,a,l,f,h),nodeLookup:Et(a),parentLookup:Et(l),edgeLookup:Et(u),visibleNodes:Et([]),edges:w0(t,c,u),visibleEdges:Et([]),connectionLookup:Et(c),height:ie(500),width:ie(500),minZoom:ie(.5),maxZoom:ie(2),nodeOrigin:ie(f),nodeDragThreshold:ie(1),nodeExtent:ie(h),translateExtent:ie(Ri),autoPanOnNodeDrag:ie(!0),autoPanOnConnect:ie(!0),fitViewOnInit:ie(!1),fitViewOnInitDone:ie(!1),fitViewOptions:ie(void 0),panZoom:ie(null),snapGrid:ie(null),dragging:ie(!1),selectionRect:ie(null),selectionKeyPressed:ie(!1),multiselectionKeyPressed:ie(!1),deleteKeyPressed:ie(!1),panActivationKeyPressed:ie(!1),zoomActivationKeyPressed:ie(!1),selectionRectMode:ie(null),selectionMode:ie(Li.Partial),nodeTypes:ie(Nc),edgeTypes:ie(Mc),viewport:ie(g),connectionMode:ie(Pn.Strict),domNode:ie(null),connection:Et(Go),connectionLineType:ie(Wn.Bezier),connectionRadius:ie(20),isValidConnection:ie(()=>!0),nodesDraggable:ie(!0),nodesConnectable:ie(!0),elementsSelectable:ie(!0),selectNodesOnDrag:ie(!0),markers:Et([]),defaultMarkerColor:ie("#b1b1b7"),lib:Et("svelte"),onlyRenderVisibleElements:ie(!1),onerror:ie(ov),ondelete:ie(void 0),onedgecreate:ie(void 0),onconnect:ie(void 0),onconnectstart:ie(void 0),onconnectend:ie(void 0),onbeforedelete:ie(void 0),nodesInitialized:ie(!1),edgesInitialized:ie(!1),viewportInitialized:ie(!1),initialized:Et(!1)}};function b0(e){const t=Cn([e.edges,e.nodes,e.nodeLookup,e.onlyRenderVisibleElements,e.viewport,e.width,e.height],([n,,r,i,o,s,a])=>i&&s&&a?n.filter(c=>{const u=r.get(c.source),f=r.get(c.target);return u&&f&&fv({sourceNode:u,targetNode:f,width:s,height:a,transform:[o.x,o.y,o.zoom]})}):n);return Cn([t,e.nodes,e.nodeLookup,e.connectionMode,e.onerror],([n,,r,i,o])=>n.reduce((a,l)=>{const c=r.get(l.source),u=r.get(l.target);if(!c||!u)return a;const f=_v({id:l.id,sourceNode:c,targetNode:u,sourceHandle:l.sourceHandle||null,targetHandle:l.targetHandle||null,connectionMode:i,onError:o});return f&&a.push({...l,zIndex:dv({selected:l.selected,zIndex:l.zIndex,sourceNode:c,targetNode:u,elevateOnSelect:!1}),...f}),a},[]))}function k0(e){return Cn([e.nodeLookup,e.onlyRenderVisibleElements,e.width,e.height,e.viewport,e.nodes],([t,n,r,i,o])=>{const s=[o.x,o.y,o.zoom];return n?oc(t,{x:0,y:0,width:r,height:i},s,!0):Array.from(t.values())})}const As=Symbol();function E0({nodes:e,edges:t,width:n,height:r,fitView:i,nodeOrigin:o,nodeExtent:s}){const a=x0({nodes:e,edges:t,width:n,height:r,fitView:i,nodeOrigin:o,nodeExtent:s});function l(_){a.nodeTypes.set({...Nc,..._})}function c(_){a.edgeTypes.set({...Mc,..._})}function u(_){const M=X(a.edges);a.edges.set(vv(_,M))}const f=(_,M=!1)=>{var I;const T=X(a.nodeLookup);for(const[R,K]of _){const Z=(I=T.get(R))==null?void 0:I.internals.userNode;Z&&(Z.position=K.position,Z.dragging=M)}a.nodes.update(R=>R)};function h(_){var K,Z,ne;const M=X(a.nodeLookup),T=X(a.parentLookup),{changes:I,updatedInternals:R}=Cv(_,M,X(a.parentLookup),X(a.domNode),X(a.nodeOrigin));if(R){if(bv(M,T,{nodeOrigin:o,nodeExtent:s}),!X(a.fitViewOnInitDone)&&X(a.fitViewOnInit)){const B=X(a.fitViewOptions),J=p({...B,nodes:B==null?void 0:B.nodes});a.fitViewOnInitDone.set(J)}for(const B of I){const J=(K=M.get(B.id))==null?void 0:K.internals.userNode;if(J)switch(B.type){case"dimensions":{const re={...J.measured,...B.dimensions};B.setAttributes&&(J.width=((Z=B.dimensions)==null?void 0:Z.width)??J.width,J.height=((ne=B.dimensions)==null?void 0:ne.height)??J.height),J.measured=re;break}case"position":J.position=B.position??J.position;break}}a.nodes.update(B=>B),X(a.nodesInitialized)||a.nodesInitialized.set(!0)}}function g(_){const M=X(a.panZoom),T=X(a.domNode);if(!M||!T)return Promise.resolve(!1);const{width:I,height:R}=Ns(T),K=xa(X(a.nodeLookup),_);return ba({nodes:K,width:I,height:R,minZoom:X(a.minZoom),maxZoom:X(a.maxZoom),panZoom:M},_)}function p(_){const M=X(a.panZoom);if(!M)return!1;const T=xa(X(a.nodeLookup),_);return ba({nodes:T,width:X(a.width),height:X(a.height),minZoom:X(a.minZoom),maxZoom:X(a.maxZoom),panZoom:M},_),T.size>0}function y(_,M){const T=X(a.panZoom);return T?T.scaleBy(_,M):Promise.resolve(!1)}function S(_){return y(1.2,_)}function w(_){return y(1/1.2,_)}function m(_){const M=X(a.panZoom);M&&(M.setScaleExtent([_,X(a.maxZoom)]),a.minZoom.set(_))}function b(_){const M=X(a.panZoom);M&&(M.setScaleExtent([X(a.minZoom),_]),a.maxZoom.set(_))}function k(_){const M=X(a.panZoom);M&&(M.setTranslateExtent(_),a.translateExtent.set(_))}function E(_){let M=!1;return _.forEach(T=>{T.selected&&(T.selected=!1,M=!0)}),M}function N(_){var M;(M=X(a.panZoom))==null||M.setClickDistance(_)}function C(_){E((_==null?void 0:_.nodes)||X(a.nodes))&&a.nodes.set(X(a.nodes)),E((_==null?void 0:_.edges)||X(a.edges))&&a.edges.set(X(a.edges))}a.deleteKeyPressed.subscribe(async _=>{var M;if(_){const T=X(a.nodes),I=X(a.edges),R=T.filter(B=>B.selected),K=I.filter(B=>B.selected),{nodes:Z,edges:ne}=await sc({nodesToRemove:R,edgesToRemove:K,nodes:T,edges:I,onBeforeDelete:X(a.onbeforedelete)});(Z.length||ne.length)&&(a.nodes.update(B=>B.filter(J=>!Z.some(re=>re.id===J.id))),a.edges.update(B=>B.filter(J=>!ne.some(re=>re.id===J.id))),(M=X(a.ondelete))==null||M({nodes:Z,edges:ne}))}});function A(_){const M=X(a.multiselectionKeyPressed);a.nodes.update(T=>T.map(I=>{const R=_.includes(I.id),K=M&&I.selected||R;return I.selected=K,I})),M||a.edges.update(T=>T.map(I=>(I.selected=!1,I)))}function z(_){const M=X(a.multiselectionKeyPressed);a.edges.update(T=>T.map(I=>{const R=_.includes(I.id),K=M&&I.selected||R;return I.selected=K,I})),M||a.nodes.update(T=>T.map(I=>(I.selected=!1,I)))}function O(_){var T;const M=(T=X(a.nodes))==null?void 0:T.find(I=>I.id===_);if(!M){console.warn("012",ri.error012(_));return}a.selectionRect.set(null),a.selectionRectMode.set(null),M.selected?M.selected&&X(a.multiselectionKeyPressed)&&C({nodes:[M],edges:[]}):A([_])}function L(_){const M=X(a.viewport);return Nv({delta:_,panZoom:X(a.panZoom),transform:[M.x,M.y,M.zoom],translateExtent:X(a.translateExtent),width:X(a.width),height:X(a.height)})}const V=ie(Go),D=_=>{V.set({..._})};function x(){V.set(Go)}function P(){a.fitViewOnInitDone.set(!1),a.selectionRect.set(null),a.selectionRectMode.set(null),a.snapGrid.set(null),a.isValidConnection.set(()=>!0),C(),x()}return{...a,visibleEdges:b0(a),visibleNodes:k0(a),connection:Cn([V,a.viewport],([_,M])=>_.inProgress?{..._,to:si(_.to,[M.x,M.y,M.zoom])}:{..._}),markers:Cn([a.edges,a.defaultMarkerColor,a.flowId],([_,M,T])=>wv(_,{defaultColor:M,id:T})),initialized:(()=>{let _=!1;const M=X(a.nodes).length,T=X(a.edges).length;return Cn([a.nodesInitialized,a.edgesInitialized,a.viewportInitialized],([I,R,K])=>_||(M===0?_=K:T===0?_=K&&I:_=K&&I&&R,_))})(),syncNodeStores:_=>m0(a.nodes,_),syncEdgeStores:_=>y0(a.edges,_),syncViewport:_=>p0(a.panZoom,a.viewport,_),setNodeTypes:l,setEdgeTypes:c,addEdge:u,updateNodePositions:f,updateNodeInternals:h,zoomIn:S,zoomOut:w,fitView:_=>g(_),setMinZoom:m,setMaxZoom:b,setTranslateExtent:k,setPaneClickDistance:N,unselectNodesAndEdges:C,addSelectedNodes:A,addSelectedEdges:z,handleNodeSelection:O,panBy:L,updateConnection:D,cancelConnection:x,reset:P}}function Fe(){const e=qn(As);if(!e)throw new Error("In order to use useStore you need to wrap your component in a <SvelteFlowProvider />");return e.getStore()}function S0({nodes:e,edges:t,width:n,height:r,fitView:i,nodeOrigin:o,nodeExtent:s}){const a=E0({nodes:e,edges:t,width:n,height:r,fitView:i,nodeOrigin:o,nodeExtent:s});return Pi(As,{getStore:()=>a}),a}function Co(e,t){const{panZoom:n,minZoom:r,maxZoom:i,initialViewport:o,viewport:s,dragging:a,translateExtent:l,paneClickDistance:c}=t,u=Kv({domNode:e,minZoom:r,maxZoom:i,translateExtent:l,viewport:o,paneClickDistance:c,onDraggingChange:a.set}),f=u.getViewport();return s.set(f),n.set(u),u.update(t),{update(h){u.update(h)}}}var C0=se('<div class="svelte-flow__zoom svelte-4xkw84"><!></div>');function N0(e,t){le(t,!1);const n=je(),r=()=>q(M,"$panActivationKeyPressed",n),i=()=>q(V,"$minZoom",n),o=()=>q(D,"$maxZoom",n),s=()=>q(T,"$zoomActivationKeyPressed",n),a=()=>q(L,"$selectionRect",n),l=()=>q(P,"$translateExtent",n),c=()=>q(_,"$lib",n),u=F(),f=F(),h=F();let g=v(t,"initialViewport",8,void 0),p=v(t,"onMoveStart",8,void 0),y=v(t,"onMove",8,void 0),S=v(t,"onMoveEnd",8,void 0),w=v(t,"panOnScrollMode",8),m=v(t,"preventScrolling",8),b=v(t,"zoomOnScroll",8),k=v(t,"zoomOnDoubleClick",8),E=v(t,"zoomOnPinch",8),N=v(t,"panOnDrag",8),C=v(t,"panOnScroll",8),A=v(t,"paneClickDistance",8);const{viewport:z,panZoom:O,selectionRect:L,minZoom:V,maxZoom:D,dragging:x,translateExtent:P,lib:_,panActivationKeyPressed:M,zoomActivationKeyPressed:T,viewportInitialized:I}=Fe(),R=ne=>z.set({x:ne[0],y:ne[1],zoom:ne[2]});or(()=>{kr(I,!0)}),$(()=>W(g()),()=>{H(u,g()||{x:0,y:0,zoom:1})}),$(()=>(r(),W(N())),()=>{H(f,r()||N())}),$(()=>(r(),W(C())),()=>{H(h,r()||C())}),it(),he();var K=C0(),Z=ee(K);Ie(Z,t,"default",{}),dt(K,(ne,B)=>Co==null?void 0:Co(ne,B),()=>({viewport:z,minZoom:i(),maxZoom:o(),initialViewport:d(u),dragging:x,panZoom:O,onPanZoomStart:p(),onPanZoom:y(),onPanZoomEnd:S(),zoomOnScroll:b(),zoomOnDoubleClick:k(),zoomOnPinch:E(),panOnScroll:d(h),panOnDrag:d(f),panOnScrollSpeed:.5,panOnScrollMode:w()||gn.Free,zoomActivationKeyPressed:s(),preventScrolling:typeof m()=="boolean"?m():!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!a(),translateExtent:l(),lib:c(),paneClickDistance:A(),onTransformChange:R})),Y(e,K),ce()}function Da(e,t){return n=>{n.target===t&&(e==null||e(n))}}function Ha(e){return t=>{const n=e.includes(t.id);return t.selected!==n&&(t.selected=n),t}}var M0=se('<div class="svelte-flow__pane svelte-1esy7hx"><!></div>');function P0(e,t){le(t,!1);const n=je(),r=()=>q(D,"$panActivationKeyPressed",n),i=()=>q(L,"$selectionKeyPressed",n),o=()=>q(z,"$selectionRect",n),s=()=>q(A,"$elementsSelectable",n),a=()=>q(O,"$selectionRectMode",n),l=()=>q(E,"$edges",n),c=()=>q(k,"$nodeLookup",n),u=()=>q(N,"$viewport",n),f=()=>q(V,"$selectionMode",n),h=()=>q(C,"$dragging",n),g=F(),p=F(),y=F();let S=v(t,"panOnDrag",8,void 0),w=v(t,"selectionOnDrag",8,void 0);const m=to(),{nodes:b,nodeLookup:k,edges:E,viewport:N,dragging:C,elementsSelectable:A,selectionRect:z,selectionRectMode:O,selectionKeyPressed:L,selectionMode:V,panActivationKeyPressed:D,unselectNodesAndEdges:x}=Fe();let P=F(),_=null,M=[],T=!1;function I(G){if(T){T=!1;return}m("paneclick",{event:G}),x(),O.set(null)}function R(G){var ge,ke;if(_=d(P).getBoundingClientRect(),!A||!d(p)||G.button!==0||G.target!==d(P)||!_)return;(ke=(ge=G.target)==null?void 0:ge.setPointerCapture)==null||ke.call(ge,G.pointerId);const{x:U,y:j}=en(G,_);x(),z.set({width:0,height:0,startX:U,startY:j,x:U,y:j})}function K(G){if(!d(p)||!_||!o())return;T=!0;const U=en(G,_),j=o().startX??0,ge=o().startY??0,ke={...o(),x:U.x<j?U.x:j,y:U.y<ge?U.y:ge,width:Math.abs(U.x-j),height:Math.abs(U.y-ge)},pe=M.map(Ve=>Ve.id),Ce=Zo(M,l()).map(Ve=>Ve.id);M=oc(c(),ke,[u().x,u().y,u().zoom],f()===Li.Partial,!0);const Me=Zo(M,l()).map(Ve=>Ve.id),Be=M.map(Ve=>Ve.id);(pe.length!==Be.length||Be.some(Ve=>!pe.includes(Ve)))&&b.update(Ve=>Ve.map(Ha(Be))),(Ce.length!==Me.length||Me.some(Ve=>!Ce.includes(Ve)))&&E.update(Ve=>Ve.map(Ha(Me))),O.set("user"),z.set(ke)}function Z(G){var U,j;G.button===0&&((j=(U=G.target)==null?void 0:U.releasePointerCapture)==null||j.call(U,G.pointerId),!d(p)&&a()==="user"&&G.target===d(P)&&(I==null||I(G)),z.set(null),M.length>0&&kr(O,"nodes"),i()&&(T=!1))}const ne=G=>{var U;if(Array.isArray(d(g))&&((U=d(g))!=null&&U.includes(2))){G.preventDefault();return}m("panecontextmenu",{event:G})};$(()=>(r(),W(S())),()=>{H(g,r()||S())}),$(()=>(i(),o(),W(w()),d(g)),()=>{H(p,i()||o()||w()&&d(g)!==!0)}),$(()=>(s(),d(p),a()),()=>{H(y,s()&&(d(p)||a()==="user"))}),it(),he();var B=M0(),J=mn(()=>d(y)?void 0:Da(I,d(P))),re=mn(()=>Da(ne,d(P)));const ue=ae(()=>S()===!0||Array.isArray(S())&&S().includes(0));me(()=>Ye(B,"draggable",d(ue)));var de=ee(B);Ie(de,t,"default",{}),ei(B,G=>H(P,G),()=>d(P)),me(()=>{Ye(B,"dragging",h()),Ye(B,"selection",d(p))}),Ae("click",B,function(...G){var U;(U=d(J))==null||U.apply(this,G)}),Ae("pointerdown",B,function(...G){var U;(U=d(y)?R:void 0)==null||U.apply(this,G)}),Ae("pointermove",B,function(...G){var U;(U=d(y)?K:void 0)==null||U.apply(this,G)}),Ae("pointerup",B,function(...G){var U;(U=d(y)?Z:void 0)==null||U.apply(this,G)}),Ae("contextmenu",B,function(...G){var U;(U=d(re))==null||U.apply(this,G)}),Y(e,B),ce()}var z0=se('<div class="svelte-flow__viewport xyflow__viewport svelte-1floaup"><!></div>');function A0(e,t){le(t,!1);const n=je(),r=()=>q(i,"$viewport",n),{viewport:i}=Fe();he();var o=z0(),s=ee(o);Ie(s,t,"default",{}),me(()=>Q(o,"style",`transform: translate(${r().x??""}px, ${r().y??""}px) scale(${r().zoom??""})`)),Y(e,o),ce()}function Bn(e,t){const{store:n,onDrag:r,onDragStart:i,onDragStop:o,onNodeMouseDown:s}=t,a=Pv({onDrag:r,onDragStart:i,onDragStop:o,onNodeMouseDown:s,getStoreItems:()=>{const c=X(n.snapGrid),u=X(n.viewport);return{nodes:X(n.nodes),nodeLookup:X(n.nodeLookup),edges:X(n.edges),nodeExtent:X(n.nodeExtent),snapGrid:c||[0,0],snapToGrid:!!c,nodeOrigin:X(n.nodeOrigin),multiSelectionActive:X(n.multiselectionKeyPressed),domNode:X(n.domNode),transform:[u.x,u.y,u.zoom],autoPanOnNodeDrag:X(n.autoPanOnNodeDrag),nodesDraggable:X(n.nodesDraggable),selectNodesOnDrag:X(n.selectNodesOnDrag),nodeDragThreshold:X(n.nodeDragThreshold),unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,panBy:n.panBy}}});function l(c,u){if(u.disabled){a.destroy();return}a.update({domNode:c,noDragClassName:u.noDragClass,handleSelector:u.handleSelector,nodeId:u.nodeId,isSelectable:u.isSelectable,nodeClickDistance:u.nodeClickDistance})}return l(e,t),{update(c){l(e,c)},destroy(){a.destroy()}}}function I0({width:e,height:t,initialWidth:n,initialHeight:r,measuredWidth:i,measuredHeight:o}){if(i===void 0&&o===void 0){const s=e??n,a=t??r;return{width:s?`width:${s}px;`:"",height:a?`height:${a}px;`:""}}return{width:e?`width:${e}px;`:"",height:t?`height:${t}px;`:""}}var T0=se("<div><!></div>");function O0(e,t){le(t,!1);const n=je(),r=()=>q(B,"$nodeTypes",n),i=()=>q(ge,"$connectableStore",n),o=F(void 0,!0),s=F(void 0,!0),a=F(void 0,!0),l=F(void 0,!0);let c=v(t,"node",9),u=v(t,"id",9),f=v(t,"data",25,()=>({})),h=v(t,"selected",9,!1),g=v(t,"draggable",9,void 0),p=v(t,"selectable",9,void 0),y=v(t,"connectable",9,!0),S=v(t,"deletable",9,!0),w=v(t,"hidden",9,!1),m=v(t,"dragging",9,!1),b=v(t,"resizeObserver",9,null),k=v(t,"style",9,void 0),E=v(t,"type",9,"default"),N=v(t,"isParent",9,!1),C=v(t,"positionX",9),A=v(t,"positionY",9),z=v(t,"sourcePosition",9,void 0),O=v(t,"targetPosition",9,void 0),L=v(t,"zIndex",9),V=v(t,"measuredWidth",9,void 0),D=v(t,"measuredHeight",9,void 0),x=v(t,"initialWidth",9,void 0),P=v(t,"initialHeight",9,void 0),_=v(t,"width",9,void 0),M=v(t,"height",9,void 0),T=v(t,"dragHandle",9,void 0),I=v(t,"initialized",9,!1),R=v(t,"parentId",9,void 0),K=v(t,"nodeClickDistance",9,void 0),Z=v(t,"class",9,"");const ne=Fe(),{nodeTypes:B,nodeDragThreshold:J,selectNodesOnDrag:re,handleNodeSelection:ue,updateNodeInternals:de}=ne;let G=F(void 0,!0),U=F(null,!0);const j=to(),ge=ie(y());let ke=F(void 0,!0),pe=F(void 0,!0),Ce=F(void 0,!0);Pi("svelteflow__node_id",u()),Pi("svelteflow__node_connectable",ge),Nl(()=>{var Pe;d(U)&&((Pe=b())==null||Pe.unobserve(d(U)))});function Me(Pe){p()&&(!X(re)||!g()||X(J)>0)&&ue(u()),j("nodeclick",{node:c().internals.userNode,event:Pe})}$(()=>W(E()),()=>{H(o,E()||"default")}),$(()=>(r(),d(o)),()=>{H(s,!!r()[d(o)])}),$(()=>(r(),d(o),Qo),()=>{H(a,r()[d(o)]||Qo)}),$(()=>(d(s),W(E())),()=>{d(s)||console.warn("003",ri.error003(E()))}),$(()=>(W(_()),W(M()),W(x()),W(P()),W(V()),W(D())),()=>{H(l,I0({width:_(),height:M(),initialWidth:x(),initialHeight:P(),measuredWidth:V(),measuredHeight:D()}))}),$(()=>W(y()),()=>{ge.set(!!y())}),$(()=>(d(ke),d(o),d(pe),W(z()),d(Ce),W(O()),W(u()),d(G)),()=>{(d(ke)&&d(o)!==d(ke)||d(pe)&&z()!==d(pe)||d(Ce)&&O()!==d(Ce))&&requestAnimationFrame(()=>de(new Map([[u(),{id:u(),nodeElement:d(G),force:!0}]]))),H(ke,d(o)),H(pe,z()),H(Ce,O())}),$(()=>(W(b()),d(G),d(U),W(I())),()=>{b()&&(d(G)!==d(U)||!I())&&(d(U)&&b().unobserve(d(U)),d(G)&&b().observe(d(G)),H(U,d(G)))}),it(),he(!0);var Be=xe(),Ve=oe(Be);{var qe=Pe=>{var be=T0();const $e=ae(()=>Dt(at(["svelte-flow__node",`svelte-flow__node-${d(o)}`,Z()])));var yt=ee(be);xl(yt,()=>d(a),(Te,Qe)=>{Qe(Te,{get data(){return f()},get id(){return u()},get selected(){return h()},get selectable(){return p()},get deletable(){return S()},get sourcePosition(){return z()},get targetPosition(){return O()},get zIndex(){return L()},get dragging(){return m()},get draggable(){return g()},get dragHandle(){return T()},get parentId(){return R()},get type(){return d(o)},get isConnectable(){return i()},get positionAbsoluteX(){return C()},get positionAbsoluteY(){return A()},get width(){return _()},get height(){return M()}})}),dt(be,(Te,Qe)=>Bn==null?void 0:Bn(Te,Qe),()=>({nodeId:u(),isSelectable:p(),disabled:!1,handleSelector:T(),noDragClass:"nodrag",nodeClickDistance:K(),onNodeMouseDown:ue,onDrag:(Te,Qe,Ke,De)=>{j("nodedrag",{event:Te,targetNode:Ke,nodes:De})},onDragStart:(Te,Qe,Ke,De)=>{j("nodedragstart",{event:Te,targetNode:Ke,nodes:De})},onDragStop:(Te,Qe,Ke,De)=>{j("nodedragstop",{event:Te,targetNode:Ke,nodes:De})},store:ne})),ei(be,Te=>H(G,Te),()=>d(G)),_t(()=>Ae("click",be,Me)),_t(()=>Ae("mouseenter",be,Te=>j("nodemouseenter",{node:c(),event:Te}))),_t(()=>Ae("mouseleave",be,Te=>j("nodemouseleave",{node:c(),event:Te}))),_t(()=>Ae("mousemove",be,Te=>j("nodemousemove",{node:c(),event:Te}))),_t(()=>Ae("contextmenu",be,Te=>j("nodecontextmenu",{node:c(),event:Te}))),me(()=>{Q(be,"data-id",u()),ms(be,d($e),""),Q(be,"style",`${k()??""??""};${d(l).width??""}${d(l).height??""}`),Ye(be,"dragging",m()),Ye(be,"selected",h()),Ye(be,"draggable",g()),Ye(be,"connectable",y()),Ye(be,"selectable",p()),Ye(be,"nopan",g()),Ye(be,"parent",N()),We(be,"z-index",L()),We(be,"transform",`translate(${C()??""}px, ${A()??""}px)`),We(be,"visibility",I()?"visible":"hidden")}),Y(Pe,be)};we(Ve,Pe=>{w()||Pe(qe)})}Y(e,Be),ce()}var D0=se('<div class="svelte-flow__nodes svelte-tf4uy4"></div>');function H0(e,t){le(t,!1);const n=je(),r=()=>q(c,"$visibleNodes",n),i=()=>q(u,"$nodesDraggable",n),o=()=>q(h,"$elementsSelectable",n),s=()=>q(f,"$nodesConnectable",n),a=()=>q(p,"$parentLookup",n);let l=v(t,"nodeClickDistance",8,0);const{visibleNodes:c,nodesDraggable:u,nodesConnectable:f,elementsSelectable:h,updateNodeInternals:g,parentLookup:p}=Fe(),y=typeof ResizeObserver>"u"?null:new ResizeObserver(w=>{const m=new Map;w.forEach(b=>{const k=b.target.getAttribute("data-id");m.set(k,{id:k,nodeElement:b.target,force:!0})}),g(m)});Nl(()=>{y==null||y.disconnect()}),he();var S=D0();St(S,5,r,w=>w.id,(w,m)=>{var b=ae(()=>!!d(m).selected),k=ae(()=>!!d(m).hidden),E=ae(()=>!!(d(m).draggable||i()&&typeof d(m).draggable>"u")),N=ae(()=>!!(d(m).selectable||o()&&typeof d(m).selectable>"u")),C=ae(()=>!!(d(m).connectable||s()&&typeof d(m).connectable>"u")),A=ae(()=>d(m).deletable??!0),z=ae(()=>a().has(d(m).id)),O=ae(()=>d(m).type??"default"),L=ae(()=>d(m).internals.z??0),V=ae(()=>dc(d(m)));O0(w,{get node(){return d(m)},get id(){return d(m).id},get data(){return d(m).data},get selected(){return d(b)},get hidden(){return d(k)},get draggable(){return d(E)},get selectable(){return d(N)},get connectable(){return d(C)},get deletable(){return d(A)},get positionX(){return d(m).internals.positionAbsolute.x},get positionY(){return d(m).internals.positionAbsolute.y},get isParent(){return d(z)},get style(){return d(m).style},get class(){return d(m).class},get type(){return d(O)},get sourcePosition(){return d(m).sourcePosition},get targetPosition(){return d(m).targetPosition},get dragging(){return d(m).dragging},get zIndex(){return d(L)},get dragHandle(){return d(m).dragHandle},get initialized(){return d(V)},get width(){return d(m).width},get height(){return d(m).height},get initialWidth(){return d(m).initialWidth},get initialHeight(){return d(m).initialHeight},get measuredWidth(){return d(m).measured.width},get measuredHeight(){return d(m).measured.height},get parentId(){return d(m).parentId},resizeObserver:y,get nodeClickDistance(){return l()},$$events:{nodeclick(D){Se.call(this,t,D)},nodemouseenter(D){Se.call(this,t,D)},nodemousemove(D){Se.call(this,t,D)},nodemouseleave(D){Se.call(this,t,D)},nodedrag(D){Se.call(this,t,D)},nodedragstart(D){Se.call(this,t,D)},nodedragstop(D){Se.call(this,t,D)},nodecontextmenu(D){Se.call(this,t,D)}}})}),Y(e,S),ce()}var R0=Je('<svg><g role="img"><!></g></svg>');function L0(e,t){le(t,!1);const n=je(),r=()=>q(B,"$edgeTypes",n),i=()=>q(J,"$flowId",n),o=()=>q(re,"$elementsSelectable",n),s=()=>q(ne,"$edgeLookup",n),a=F(void 0,!0),l=F(void 0,!0),c=F(void 0,!0),u=F(void 0,!0),f=F(void 0,!0);let h=v(t,"id",9),g=v(t,"type",9,"default"),p=v(t,"source",9,""),y=v(t,"target",9,""),S=v(t,"data",25,()=>({})),w=v(t,"style",9,void 0),m=v(t,"zIndex",9,void 0),b=v(t,"animated",9,!1),k=v(t,"selected",9,!1),E=v(t,"selectable",9,void 0),N=v(t,"deletable",9,void 0),C=v(t,"hidden",9,!1),A=v(t,"label",9,void 0),z=v(t,"labelStyle",9,void 0),O=v(t,"markerStart",9,void 0),L=v(t,"markerEnd",9,void 0),V=v(t,"sourceHandle",9,void 0),D=v(t,"targetHandle",9,void 0),x=v(t,"sourceX",9),P=v(t,"sourceY",9),_=v(t,"targetX",9),M=v(t,"targetY",9),T=v(t,"sourcePosition",9),I=v(t,"targetPosition",9),R=v(t,"ariaLabel",9,void 0),K=v(t,"interactionWidth",9,void 0),Z=v(t,"class",9,"");Pi("svelteflow__edge_id",h());const{edgeLookup:ne,edgeTypes:B,flowId:J,elementsSelectable:re}=Fe(),ue=to(),de=Cc();function G(pe){const Ce=s().get(h());Ce&&(de(h()),ue("edgeclick",{event:pe,edge:Ce}))}function U(pe,Ce){const Me=s().get(h());Me&&ue(Ce,{event:pe,edge:Me})}$(()=>W(g()),()=>{H(a,g()||"default")}),$(()=>(r(),d(a),es),()=>{H(l,r()[d(a)]||es)}),$(()=>(W(O()),i()),()=>{H(c,O()?`url('#${jo(O(),i())}')`:void 0)}),$(()=>(W(L()),i()),()=>{H(u,L()?`url('#${jo(L(),i())}')`:void 0)}),$(()=>(W(E()),o()),()=>{H(f,E()??o())}),it(),he(!0);var j=xe(),ge=oe(j);{var ke=pe=>{var Ce=R0(),Me=ee(Ce);const Be=ae(()=>Dt(at(["svelte-flow__edge",Z()])));var Ve=ee(Me),qe=ae(()=>N()??!0);xl(Ve,()=>d(l),(Pe,be)=>{be(Pe,{get id(){return h()},get source(){return p()},get target(){return y()},get sourceX(){return x()},get sourceY(){return P()},get targetX(){return _()},get targetY(){return M()},get sourcePosition(){return T()},get targetPosition(){return I()},get animated(){return b()},get selected(){return k()},get label(){return A()},get labelStyle(){return z()},get data(){return S()},get style(){return w()},get interactionWidth(){return K()},get selectable(){return d(f)},get deletable(){return d(qe)},get type(){return d(a)},get sourceHandleId(){return V()},get targetHandleId(){return D()},get markerStart(){return d(c)},get markerEnd(){return d(u)}})}),me(()=>{We(Ce,"z-index",m()),Tn(Me,d(Be),""),Q(Me,"data-id",h()),Q(Me,"aria-label",R()===null?void 0:R()?R():`Edge from ${p()} to ${y()}`),Ye(Me,"animated",b()),Ye(Me,"selected",k()),Ye(Me,"selectable",d(f))}),Ae("click",Me,G),Ae("contextmenu",Me,Pe=>{U(Pe,"edgecontextmenu")}),Ae("mouseenter",Me,Pe=>{U(Pe,"edgemouseenter")}),Ae("mouseleave",Me,Pe=>{U(Pe,"edgemouseleave")}),Y(pe,Ce)};we(ge,pe=>{C()||pe(ke)})}Y(e,j),ce()}function V0(e,t){le(t,!1);let n=v(t,"onMount",8,void 0),r=v(t,"onDestroy",8,void 0);or(()=>{var i;return(i=n())==null||i(),r()}),he(),ce()}var X0=Je("<defs></defs>");function Y0(e,t){le(t,!1);const n=je(),r=()=>q(i,"$markers",n),{markers:i}=Fe();he();var o=X0();St(o,5,r,s=>s.id,(s,a)=>{F0(s,Ze(()=>d(a)))}),Y(e,o),ce()}var W0=Je('<polyline stroke-linecap="round" stroke-linejoin="round" fill="none" points="-5,-4 0,0 -5,4"></polyline>'),B0=Je('<polyline stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),K0=Je('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');function F0(e,t){le(t,!1);let n=v(t,"id",8),r=v(t,"type",8),i=v(t,"width",8,12.5),o=v(t,"height",8,12.5),s=v(t,"markerUnits",8,"strokeWidth"),a=v(t,"orient",8,"auto-start-reverse"),l=v(t,"color",8,void 0),c=v(t,"strokeWidth",8,void 0);he();var u=K0(),f=ee(u);{var h=p=>{var y=W0();me(()=>{Q(y,"stroke",l()),Q(y,"stroke-width",c())}),Y(p,y)},g=p=>{var y=xe(),S=oe(y);{var w=m=>{var b=B0();me(()=>{Q(b,"stroke",l()),Q(b,"stroke-width",c()),Q(b,"fill",l())}),Y(m,b)};we(S,m=>{r()===Vi.ArrowClosed&&m(w)},!0)}Y(p,y)};we(f,p=>{r()===Vi.Arrow?p(h):p(g,!1)})}me(()=>{Q(u,"id",n()),Q(u,"markerWidth",`${i()}`),Q(u,"markerHeight",`${o()}`),Q(u,"markerUnits",s()),Q(u,"orient",a())}),Y(e,u),ce()}var q0=se('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!> <!></div>');function $0(e,t){le(t,!1);const n=je(),r=()=>q(s,"$visibleEdges",n),i=()=>q(c,"$elementsSelectable",n);let o=v(t,"defaultEdgeOptions",8);const{visibleEdges:s,edgesInitialized:a,edges:{setDefaultOptions:l},elementsSelectable:c}=Fe();or(()=>{o()&&l(o())}),he();var u=q0(),f=ee(u),h=ee(f);Y0(h,{});var g=te(f,2);St(g,1,r,S=>S.id,(S,w)=>{var m=ae(()=>d(w).selectable??i()),b=ae(()=>d(w).type||"default");L0(S,{get id(){return d(w).id},get source(){return d(w).source},get target(){return d(w).target},get data(){return d(w).data},get style(){return d(w).style},get animated(){return d(w).animated},get selected(){return d(w).selected},get selectable(){return d(m)},get deletable(){return d(w).deletable},get hidden(){return d(w).hidden},get label(){return d(w).label},get labelStyle(){return d(w).labelStyle},get markerStart(){return d(w).markerStart},get markerEnd(){return d(w).markerEnd},get sourceHandle(){return d(w).sourceHandle},get targetHandle(){return d(w).targetHandle},get sourceX(){return d(w).sourceX},get sourceY(){return d(w).sourceY},get targetX(){return d(w).targetX},get targetY(){return d(w).targetY},get sourcePosition(){return d(w).sourcePosition},get targetPosition(){return d(w).targetPosition},get ariaLabel(){return d(w).ariaLabel},get interactionWidth(){return d(w).interactionWidth},get class(){return d(w).class},get type(){return d(b)},get zIndex(){return d(w).zIndex},$$events:{edgeclick(k){Se.call(this,t,k)},edgecontextmenu(k){Se.call(this,t,k)},edgemouseenter(k){Se.call(this,t,k)},edgemouseleave(k){Se.call(this,t,k)}}})});var p=te(g,2);{var y=S=>{V0(S,{onMount:()=>{kr(a,!0)},onDestroy:()=>{kr(a,!1)}})};we(p,S=>{r().length>0&&S(y)})}Y(e,u),ce()}var G0=se('<div class="svelte-flow__selection svelte-1iugwpu"></div>');function Pc(e,t){let n=v(t,"x",8,0),r=v(t,"y",8,0),i=v(t,"width",8,0),o=v(t,"height",8,0),s=v(t,"isVisible",8,!0);var a=xe(),l=oe(a);{var c=u=>{var f=G0();me(()=>{We(f,"width",typeof i()=="string"?i():`${i()}px`),We(f,"height",typeof o()=="string"?o():`${o()}px`),We(f,"transform",`translate(${n()}px, ${r()}px)`)}),Y(u,f)};we(l,u=>{s()&&u(c)})}Y(e,a)}function Z0(e,t){le(t,!1);const n=je(),r=()=>q(o,"$selectionRect",n),i=()=>q(s,"$selectionRectMode",n),{selectionRect:o,selectionRectMode:s}=Fe();he();var a=ae(()=>!!(r()&&i()==="user")),l=ae(()=>{var h;return(h=r())==null?void 0:h.width}),c=ae(()=>{var h;return(h=r())==null?void 0:h.height}),u=ae(()=>{var h;return(h=r())==null?void 0:h.x}),f=ae(()=>{var h;return(h=r())==null?void 0:h.y});Pc(e,{get isVisible(){return d(a)},get width(){return d(l)},get height(){return d(c)},get x(){return d(u)},get y(){return d(f)}}),ce()}var U0=se('<div class="selection-wrapper nopan svelte-5pxri" role="button" tabindex="-1"><!></div>');function J0(e,t){le(t,!1);const n=je(),r=()=>q(a,"$selectionRectMode",n),i=()=>q(c,"$nodeLookup",n),o=()=>q(l,"$nodes",n),s=Fe(),{selectionRectMode:a,nodes:l,nodeLookup:c}=s,u=to();let f=F(null);function h(w){const m=o().filter(b=>b.selected);u("selectioncontextmenu",{nodes:m,event:w})}function g(w){const m=o().filter(b=>b.selected);u("selectionclick",{nodes:m,event:w})}$(()=>(r(),i(),o()),()=>{r()==="nodes"&&(H(f,oi(i(),{filter:w=>!!w.selected})),o())}),it(),he();var p=xe(),y=oe(p);{var S=w=>{var m=U0(),b=ee(m);Pc(b,{width:"100%",height:"100%",x:0,y:0}),dt(m,(k,E)=>Bn==null?void 0:Bn(k,E),()=>({disabled:!1,store:s,onDrag:(k,E,N,C)=>{u("nodedrag",{event:k,targetNode:null,nodes:C})},onDragStart:(k,E,N,C)=>{u("nodedragstart",{event:k,targetNode:null,nodes:C})},onDragStop:(k,E,N,C)=>{u("nodedragstop",{event:k,targetNode:null,nodes:C})}})),_t(()=>Ae("contextmenu",m,h)),_t(()=>Ae("click",m,g)),_t(()=>Ae("keyup",m,()=>{})),me(()=>Q(m,"style",`width: ${d(f).width??""}px; height: ${d(f).height??""}px; transform: translate(${d(f).x??""}px, ${d(f).y??""}px)`)),Y(w,m)};we(y,w=>{r()==="nodes"&&d(f)&&Ut(d(f).x)&&Ut(d(f).y)&&w(S)})}Y(e,p),ce()}function Oe(e,t){let{enabled:n=!0,trigger:r,type:i="keydown"}=t;function o(s){const a=Array.isArray(r)?r:[r],l={alt:s.altKey,ctrl:s.ctrlKey,shift:s.shiftKey,meta:s.metaKey};for(const c of a){const u={modifier:[],preventDefault:!1,enabled:!0,...c},{modifier:f,key:h,callback:g,preventDefault:p,enabled:y}=u;if(y){if(f.length&&!(Array.isArray(f)?f:[f]).map(m=>typeof m=="string"?[m]:m).some(m=>m.every(b=>l[b])))continue;if(s.key===h){p&&s.preventDefault();const S={node:e,trigger:u,originalEvent:s};e.dispatchEvent(new CustomEvent("shortcut",{detail:S})),g==null||g(S)}}}}return n&&e.addEventListener(i,o),{update:s=>{const{enabled:a=!0,type:l="keydown"}=s;n&&(!a||i!==l)?e.removeEventListener(i,o):!n&&a&&e.addEventListener(l,o),n=a,i=l,r=s.trigger},destroy:()=>{e.removeEventListener(i,o)}}}function j0(e,t){le(t,!1);let n=v(t,"selectionKey",8,"Shift"),r=v(t,"multiSelectionKey",24,()=>Yi()?"Meta":"Control"),i=v(t,"deleteKey",8,"Backspace"),o=v(t,"panActivationKey",8," "),s=v(t,"zoomActivationKey",24,()=>Yi()?"Meta":"Control");const{selectionKeyPressed:a,multiselectionKeyPressed:l,deleteKeyPressed:c,panActivationKeyPressed:u,zoomActivationKeyPressed:f,selectionRect:h}=Fe();function g(m){return m!==null&&typeof m=="object"}function p(m){return g(m)?m.modifier||[]:[]}function y(m){return m==null?"":g(m)?m.key:m}function S(m,b){return(Array.isArray(m)?m:[m]).map(E=>{const N=y(E);return{key:N,modifier:p(E),enabled:N!==null,callback:b}})}function w(){h.set(null),a.set(!1),l.set(!1),c.set(!1),u.set(!1),f.set(!1)}he(),Ae("blur",ut,w),Ae("contextmenu",ut,w),dt(ut,(m,b)=>Oe==null?void 0:Oe(m,b),()=>({trigger:S(n(),()=>a.set(!0)),type:"keydown"})),dt(ut,(m,b)=>Oe==null?void 0:Oe(m,b),()=>({trigger:S(n(),()=>a.set(!1)),type:"keyup"})),dt(ut,(m,b)=>Oe==null?void 0:Oe(m,b),()=>({trigger:S(r(),()=>l.set(!0)),type:"keydown"})),dt(ut,(m,b)=>Oe==null?void 0:Oe(m,b),()=>({trigger:S(r(),()=>l.set(!1)),type:"keyup"})),dt(ut,(m,b)=>Oe==null?void 0:Oe(m,b),()=>({trigger:S(i(),m=>{!(m.originalEvent.ctrlKey||m.originalEvent.metaKey||m.originalEvent.shiftKey)&&!cv(m.originalEvent)&&c.set(!0)}),type:"keydown"})),dt(ut,(m,b)=>Oe==null?void 0:Oe(m,b),()=>({trigger:S(i(),()=>c.set(!1)),type:"keyup"})),dt(ut,(m,b)=>Oe==null?void 0:Oe(m,b),()=>({trigger:S(o(),()=>u.set(!0)),type:"keydown"})),dt(ut,(m,b)=>Oe==null?void 0:Oe(m,b),()=>({trigger:S(o(),()=>u.set(!1)),type:"keyup"})),dt(ut,(m,b)=>Oe==null?void 0:Oe(m,b),()=>({trigger:S(s(),()=>f.set(!0)),type:"keydown"})),dt(ut,(m,b)=>Oe==null?void 0:Oe(m,b),()=>({trigger:S(s(),()=>f.set(!1)),type:"keyup"})),ce()}var Q0=Je('<path fill="none" class="svelte-flow__connection-path"></path>'),em=Je('<svg class="svelte-flow__connectionline"><g><!><!></g></svg>');function tm(e,t){le(t,!1);const n=je(),r=()=>q(h,"$connection",n),i=()=>q(g,"$connectionLineType",n),o=()=>q(u,"$width",n),s=()=>q(f,"$height",n);let a=v(t,"containerStyle",8,""),l=v(t,"style",8,""),c=v(t,"isCustomComponent",8,!1);const{width:u,height:f,connection:h,connectionLineType:g}=Fe();let p=F(null);$(()=>(r(),W(c()),i(),d(p),Jo),()=>{if(r().inProgress&&!c()){const{from:m,to:b,fromPosition:k,toPosition:E}=r(),N={sourceX:m.x,sourceY:m.y,sourcePosition:k,targetX:b.x,targetY:b.y,targetPosition:E};switch(i()){case Wn.Bezier:(C=>H(p,C[0]))(hc(N));break;case Wn.Step:(C=>H(p,C[0]))(Wi({...N,borderRadius:0}));break;case Wn.SmoothStep:(C=>H(p,C[0]))(Wi(N));break;default:(C=>H(p,C[0]))(Jo(N))}}}),it(),he();var y=xe(),S=oe(y);{var w=m=>{var b=em(),k=ee(b);const E=ae(()=>Dt(at(["svelte-flow__connection",ev(r().isValid)])));var N=ee(k);Ie(N,t,"connectionLine",{});var C=te(N);{var A=z=>{var O=Q0();me(()=>{Q(O,"d",d(p)),Q(O,"style",l())}),Y(z,O)};we(C,z=>{c()||z(A)})}me(()=>{Q(b,"width",o()),Q(b,"height",s()),Q(b,"style",a()),Tn(k,d(E),"")}),Y(m,b)};we(S,m=>{r().inProgress&&m(w)})}Y(e,y),ce()}var nm=se("<div><!></div>");function Is(e,t){const n=ye(t,["children","$$slots","$$events","$$legacy"]),r=ye(n,["position","style","class"]);le(t,!1);const i=je(),o=()=>q(u,"$selectionRectMode",i),s=F();let a=v(t,"position",8,"top-right"),l=v(t,"style",8,void 0),c=v(t,"class",8,void 0);const{selectionRectMode:u}=Fe();$(()=>W(a()),()=>{H(s,`${a()}`.split("-"))}),it(),he();var f=nm();let h;var g=ee(f);Ie(g,t,"default",{}),me(()=>{h=br(f,h,{class:at(["svelte-flow__panel",c(),...d(s)]),style:l(),...r}),We(f,"pointer-events",o()?"none":"")}),Y(e,f),ce()}var rm=se('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');function im(e,t){le(t,!1);let n=v(t,"proOptions",8,void 0),r=v(t,"position",8,"bottom-right");he();var i=xe(),o=oe(i);{var s=a=>{Is(a,{get position(){return r()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(l,c)=>{var u=rm();Y(l,u)},$$slots:{default:!0}})};we(o,a=>{var l;(l=n())!=null&&l.hideAttribution||a(s)})}Y(e,i),ce()}function Ra(e,{nodeTypes:t,edgeTypes:n,minZoom:r,maxZoom:i,translateExtent:o,paneClickDistance:s}){t!==void 0&&e.setNodeTypes(t),n!==void 0&&e.setEdgeTypes(n),r!==void 0&&e.setMinZoom(r),i!==void 0&&e.setMaxZoom(i),o!==void 0&&e.setTranslateExtent(o),s!==void 0&&e.setPaneClickDistance(s)}const om=e=>Object.keys(e);function La(e,t){om(t).forEach(n=>{const r=t[n];r!==void 0&&e[n].set(r)})}function sm(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function am(e="light"){return Et("light",n=>{if(e!=="system"){n(e);return}const r=sm(),i=()=>n(r!=null&&r.matches?"dark":"light");return n(r!=null&&r.matches?"dark":"light"),r==null||r.addEventListener("change",i),()=>{r==null||r.removeEventListener("change",i)}})}var lm=se('<!> <!> <div class="svelte-flow__edgelabel-renderer"></div> <div class="svelte-flow__viewport-portal"></div> <!> <!>',1),cm=se("<!> <!>",1),um=se("<div><!> <!> <!> <!></div>");function dm(e,t){const n=ud(t),r=ye(t,["children","$$slots","$$events","$$legacy"]),i=ye(r,["id","nodes","edges","fitView","fitViewOptions","minZoom","maxZoom","initialViewport","viewport","nodeTypes","edgeTypes","selectionKey","selectionMode","panActivationKey","multiSelectionKey","zoomActivationKey","nodesDraggable","nodesConnectable","nodeDragThreshold","elementsSelectable","snapGrid","deleteKey","connectionRadius","connectionLineType","connectionMode","connectionLineStyle","connectionLineContainerStyle","onMoveStart","onMove","onMoveEnd","isValidConnection","translateExtent","nodeExtent","onlyRenderVisibleElements","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","autoPanOnConnect","autoPanOnNodeDrag","onerror","ondelete","onedgecreate","attributionPosition","proOptions","defaultEdgeOptions","width","height","colorMode","onconnect","onconnectstart","onconnectend","onbeforedelete","oninit","nodeOrigin","paneClickDistance","nodeClickDistance","defaultMarkerColor","style","class"]);le(t,!1);const o=je(),s=()=>q(m(),"$viewport",o),a=()=>q(ar,"$initialized",o),l=()=>q(d(c),"$colorModeClass",o),c=F();let u=v(t,"id",8,"1"),f=v(t,"nodes",8),h=v(t,"edges",8),g=v(t,"fitView",8,void 0),p=v(t,"fitViewOptions",8,void 0),y=v(t,"minZoom",8,void 0),S=v(t,"maxZoom",8,void 0),w=v(t,"initialViewport",8,void 0),m=v(t,"viewport",8,void 0),b=v(t,"nodeTypes",8,void 0),k=v(t,"edgeTypes",8,void 0),E=v(t,"selectionKey",8,void 0),N=v(t,"selectionMode",8,void 0),C=v(t,"panActivationKey",8,void 0),A=v(t,"multiSelectionKey",8,void 0),z=v(t,"zoomActivationKey",8,void 0),O=v(t,"nodesDraggable",8,void 0),L=v(t,"nodesConnectable",8,void 0),V=v(t,"nodeDragThreshold",8,void 0),D=v(t,"elementsSelectable",8,void 0),x=v(t,"snapGrid",8,void 0),P=v(t,"deleteKey",8,void 0),_=v(t,"connectionRadius",8,void 0),M=v(t,"connectionLineType",8,void 0),T=v(t,"connectionMode",24,()=>Pn.Strict),I=v(t,"connectionLineStyle",8,""),R=v(t,"connectionLineContainerStyle",8,""),K=v(t,"onMoveStart",8,void 0),Z=v(t,"onMove",8,void 0),ne=v(t,"onMoveEnd",8,void 0),B=v(t,"isValidConnection",8,void 0),J=v(t,"translateExtent",8,void 0),re=v(t,"nodeExtent",8,void 0),ue=v(t,"onlyRenderVisibleElements",8,void 0),de=v(t,"panOnScrollMode",24,()=>gn.Free),G=v(t,"preventScrolling",8,!0),U=v(t,"zoomOnScroll",8,!0),j=v(t,"zoomOnDoubleClick",8,!0),ge=v(t,"zoomOnPinch",8,!0),ke=v(t,"panOnScroll",8,!1),pe=v(t,"panOnDrag",8,!0),Ce=v(t,"selectionOnDrag",8,void 0),Me=v(t,"autoPanOnConnect",8,!0),Be=v(t,"autoPanOnNodeDrag",8,!0),Ve=v(t,"onerror",8,void 0),qe=v(t,"ondelete",8,void 0),Pe=v(t,"onedgecreate",8,void 0),be=v(t,"attributionPosition",8,void 0),$e=v(t,"proOptions",8,void 0),yt=v(t,"defaultEdgeOptions",8,void 0),Te=v(t,"width",8,void 0),Qe=v(t,"height",8,void 0),Ke=v(t,"colorMode",8,"light"),De=v(t,"onconnect",8,void 0),bn=v(t,"onconnectstart",8,void 0),On=v(t,"onconnectend",8,void 0),Ue=v(t,"onbeforedelete",8,void 0),tt=v(t,"oninit",8,void 0),ze=v(t,"nodeOrigin",8,void 0),nt=v(t,"paneClickDistance",8,0),kt=v(t,"nodeClickDistance",8,0),sr=v(t,"defaultMarkerColor",8,"#b1b1b7"),fo=v(t,"style",8,void 0),Nt=v(t,"class",8,void 0),Mt=F(),Rt=F(),lt=F();const ho=s()||w(),rt=Fu(As)?Fe():S0({nodes:X(f()),edges:X(h()),width:Te(),height:Qe(),fitView:g(),nodeOrigin:ze(),nodeExtent:re()});or(()=>(rt.width.set(d(Rt)),rt.height.set(d(lt)),rt.domNode.set(d(Mt)),rt.syncNodeStores(f()),rt.syncEdgeStores(h()),rt.syncViewport(m()),g()!==void 0&&rt.fitViewOnInit.set(g()),p()&&rt.fitViewOptions.set(p()),Ra(rt,{nodeTypes:b(),edgeTypes:k(),minZoom:y(),maxZoom:S(),translateExtent:J(),paneClickDistance:nt()}),()=>{rt.reset()}));const{initialized:ar}=rt;let lr=F(!1);$(()=>(d(Rt),d(lt)),()=>{d(Rt)!==void 0&&d(lt)!==void 0&&(rt.width.set(d(Rt)),rt.height.set(d(lt)))}),$(()=>(d(lr),a(),W(tt())),()=>{var ot;!d(lr)&&a()&&((ot=tt())==null||ot(),H(lr,!0))}),$(()=>(W(u()),W(M()),W(_()),W(N()),W(x()),W(sr()),W(O()),W(L()),W(D()),W(ue()),W(B()),W(Me()),W(Be()),W(Ve()),W(qe()),W(Pe()),W(T()),W(V()),W(De()),W(bn()),W(On()),W(Ue()),W(ze()),La),()=>{const ot={flowId:u(),connectionLineType:M(),connectionRadius:_(),selectionMode:N(),snapGrid:x(),defaultMarkerColor:sr(),nodesDraggable:O(),nodesConnectable:L(),elementsSelectable:D(),onlyRenderVisibleElements:ue(),isValidConnection:B(),autoPanOnConnect:Me(),autoPanOnNodeDrag:Be(),onerror:Ve(),ondelete:qe(),onedgecreate:Pe(),connectionMode:T(),nodeDragThreshold:V(),onconnect:De(),onconnectstart:bn(),onconnectend:On(),onbeforedelete:Ue(),nodeOrigin:ze()};La(rt,ot)}),$(()=>(W(b()),W(k()),W(y()),W(S()),W(J()),W(nt())),()=>{Ra(rt,{nodeTypes:b(),edgeTypes:k(),minZoom:y(),maxZoom:S(),translateExtent:J(),paneClickDistance:nt()})}),$(()=>W(Ke()),()=>{md(H(c,am(Ke())),"$colorModeClass",o)}),it(),he();var Lt=um();let ai;var li=ee(Lt);j0(li,{get selectionKey(){return E()},get deleteKey(){return P()},get panActivationKey(){return C()},get multiSelectionKey(){return A()},get zoomActivationKey(){return z()}});var Os=te(li,2),Vc=ae(()=>de()===void 0?gn.Free:de()),Xc=ae(()=>G()===void 0?!0:G()),Yc=ae(()=>U()===void 0?!0:U()),Wc=ae(()=>j()===void 0?!0:j()),Bc=ae(()=>ge()===void 0?!0:ge()),Kc=ae(()=>ke()===void 0?!1:ke()),Fc=ae(()=>pe()===void 0?!0:pe()),qc=ae(()=>nt()===void 0?0:nt());N0(Os,{initialViewport:ho,get onMoveStart(){return K()},get onMove(){return Z()},get onMoveEnd(){return ne()},get panOnScrollMode(){return d(Vc)},get preventScrolling(){return d(Xc)},get zoomOnScroll(){return d(Yc)},get zoomOnDoubleClick(){return d(Wc)},get zoomOnPinch(){return d(Bc)},get panOnScroll(){return d(Kc)},get panOnDrag(){return d(Fc)},get paneClickDistance(){return d(qc)},children:(ot,ip)=>{var Gc=ae(()=>pe()===void 0?!0:pe());P0(ot,{get panOnDrag(){return d(Gc)},get selectionOnDrag(){return Ce()},$$events:{paneclick(cr){Se.call(this,t,cr)},panecontextmenu(cr){Se.call(this,t,cr)}},children:(cr,op)=>{var Hs=cm(),Rs=oe(Hs);A0(Rs,{children:(Uc,sp)=>{var Ls=lm(),Vs=oe(Ls);$0(Vs,{get defaultEdgeOptions(){return yt()},$$events:{edgeclick(Ee){Se.call(this,t,Ee)},edgecontextmenu(Ee){Se.call(this,t,Ee)},edgemouseenter(Ee){Se.call(this,t,Ee)},edgemouseleave(Ee){Se.call(this,t,Ee)}}});var Xs=te(Vs,2);tm(Xs,{get containerStyle(){return R()},get style(){return I()},isCustomComponent:n.connectionLine,$$slots:{connectionLine:(Ee,ap)=>{var Ws=xe(),jc=oe(Ws);Ie(jc,t,"connectionLine",{}),Y(Ee,Ws)}}});var Ys=te(Xs,6);H0(Ys,{get nodeClickDistance(){return kt()},$$events:{nodeclick(Ee){Se.call(this,t,Ee)},nodemouseenter(Ee){Se.call(this,t,Ee)},nodemousemove(Ee){Se.call(this,t,Ee)},nodemouseleave(Ee){Se.call(this,t,Ee)},nodedragstart(Ee){Se.call(this,t,Ee)},nodedrag(Ee){Se.call(this,t,Ee)},nodedragstop(Ee){Se.call(this,t,Ee)},nodecontextmenu(Ee){Se.call(this,t,Ee)}}});var Jc=te(Ys,2);J0(Jc,{$$events:{selectionclick(Ee){Se.call(this,t,Ee)},selectioncontextmenu(Ee){Se.call(this,t,Ee)},nodedragstart(Ee){Se.call(this,t,Ee)},nodedrag(Ee){Se.call(this,t,Ee)},nodedragstop(Ee){Se.call(this,t,Ee)}}}),Y(Uc,Ls)},$$slots:{default:!0}});var Zc=te(Rs,2);Z0(Zc,{}),Y(cr,Hs)},$$slots:{default:!0}})},$$slots:{default:!0}});var Ds=te(Os,2);im(Ds,{get proOptions(){return $e()},get position(){return be()}});var $c=te(Ds,2);Ie($c,t,"default",{}),ei(Lt,ot=>H(Mt,ot),()=>d(Mt)),me(()=>ai=br(Lt,ai,{style:fo(),class:at(["svelte-flow",Nt(),l()]),"data-testid":"svelte-flow__wrapper",...i,role:"application"},"svelte-12wlba6")),zi(Lt,"clientWidth",ot=>H(Rt,ot)),zi(Lt,"clientHeight",ot=>H(lt,ot)),Ae("dragover",Lt,function(ot){Se.call(this,t,ot)}),Ae("drop",Lt,function(ot){Se.call(this,t,ot)}),Y(e,Lt),ce()}var fm=se("<button><!></button>");function Jt(e,t){const n=ye(t,["children","$$slots","$$events","$$legacy"]),r=ye(n,["class"]);le(t,!1);let i=v(t,"class",8,void 0),o,s,a,l,c;he();var u=fm();let f;var h=ee(u);Ie(h,t,"default",{class:"button-svg"}),me(()=>{f=br(u,f,{type:"button",class:at(["svelte-flow__controls-button",i()]),...r}),We(u,"--xy-controls-button-background-color-props",o),We(u,"--xy-controls-button-background-color-hover-props",s),We(u,"--xy-controls-button-color-props",a),We(u,"--xy-controls-button-color-hover-props",l),We(u,"--xy-controls-button-border-color-props",c)}),Ae("click",u,function(g){Se.call(this,t,g)}),Y(e,u),ce()}var hm=Je('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"></path></svg>');function gm(e){var t=hm();Y(e,t)}var vm=Je('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 5"><path d="M0 0h32v4.2H0z"></path></svg>');function mm(e){var t=vm();Y(e,t)}var ym=Je('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 30"><path d="M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"></path></svg>');function pm(e){var t=ym();Y(e,t)}var _m=Je('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"></path></svg>');function wm(e){var t=_m();Y(e,t)}var xm=Je('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"></path></svg>');function bm(e){var t=xm();Y(e,t)}var km=se("<!> <!>",1),Em=se("<!> <!> <!> <!> <!> <!>",1);function zc(e,t){le(t,!1);const n=je(),r=()=>q(M,"$nodesDraggable",n),i=()=>q(T,"$nodesConnectable",n),o=()=>q(I,"$elementsSelectable",n),s=()=>q(x,"$viewport",n),a=()=>q(P,"$minZoom",n),l=()=>q(_,"$maxZoom",n),c=F(),u=F(),f=F(),h=F();let g=v(t,"position",8,"bottom-left"),p=v(t,"showZoom",8,!0),y=v(t,"showFitView",8,!0),S=v(t,"showLock",8,!0),w=v(t,"buttonBgColor",8,void 0),m=v(t,"buttonBgColorHover",8,void 0),b=v(t,"buttonColor",8,void 0),k=v(t,"buttonColorHover",8,void 0),E=v(t,"buttonBorderColor",8,void 0),N=v(t,"ariaLabel",8,void 0),C=v(t,"style",8,void 0),A=v(t,"orientation",8,"vertical"),z=v(t,"fitViewOptions",8,void 0),O=v(t,"class",8,"");const{zoomIn:L,zoomOut:V,fitView:D,viewport:x,minZoom:P,maxZoom:_,nodesDraggable:M,nodesConnectable:T,elementsSelectable:I}=Fe(),R={bgColor:w(),bgColorHover:m(),color:b(),colorHover:k(),borderColor:E()},K=()=>{L()},Z=()=>{V()},ne=()=>{D(z())},B=()=>{H(c,!d(c)),M.set(d(c)),T.set(d(c)),I.set(d(c))};$(()=>(r(),i(),o()),()=>{H(c,r()||i()||o())}),$(()=>(s(),a()),()=>{H(u,s().zoom<=a())}),$(()=>(s(),l()),()=>{H(f,s().zoom>=l())}),$(()=>W(A()),()=>{H(h,A()==="horizontal"?"horizontal":"vertical")}),it(),he();var J=ae(()=>at(["svelte-flow__controls",d(h),O()])),re=ae(()=>N()??"Svelte Flow controls");Is(e,{get class(){return d(J)},get position(){return g()},"data-testid":"svelte-flow__controls",get"aria-label"(){return d(re)},get style(){return C()},children:(ue,de)=>{var G=Em(),U=oe(G);Ie(U,t,"before",{});var j=te(U,2);{var ge=qe=>{var Pe=km(),be=oe(Pe);Jt(be,Ze({class:"svelte-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",get disabled(){return d(f)}},R,{$$events:{click:K},children:(yt,Te)=>{gm(yt)},$$slots:{default:!0}}));var $e=te(be,2);Jt($e,Ze({class:"svelte-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",get disabled(){return d(u)}},R,{$$events:{click:Z},children:(yt,Te)=>{mm(yt)},$$slots:{default:!0}})),Y(qe,Pe)};we(j,qe=>{p()&&qe(ge)})}var ke=te(j,2);{var pe=qe=>{Jt(qe,Ze({class:"svelte-flow__controls-fitview",title:"fit view","aria-label":"fit view"},R,{$$events:{click:ne},children:(Pe,be)=>{pm(Pe)},$$slots:{default:!0}}))};we(ke,qe=>{y()&&qe(pe)})}var Ce=te(ke,2);{var Me=qe=>{Jt(qe,Ze({class:"svelte-flow__controls-interactive",title:"toggle interactivity","aria-label":"toggle interactivity"},R,{$$events:{click:B},children:(Pe,be)=>{var $e=xe(),yt=oe($e);{var Te=Ke=>{bm(Ke)},Qe=Ke=>{wm(Ke)};we(yt,Ke=>{d(c)?Ke(Te):Ke(Qe,!1)})}Y(Pe,$e)},$$slots:{default:!0}}))};we(Ce,qe=>{S()&&qe(Me)})}var Be=te(Ce,2);Ie(Be,t,"default",{});var Ve=te(Be,2);Ie(Ve,t,"after",{}),Y(ue,G)},$$slots:{default:!0}}),ce()}var tn;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(tn||(tn={}));var Sm=Je("<circle></circle>");function Cm(e,t){le(t,!1);let n=v(t,"radius",8,5),r=v(t,"class",8,"");he();var i=Sm();const o=ae(()=>Dt(at(["svelte-flow__background-pattern","dots",r()])));me(()=>{Q(i,"cx",n()),Q(i,"cy",n()),Q(i,"r",n()),Tn(i,d(o),"")}),Y(e,i),ce()}var Nm=Je("<path></path>");function Mm(e,t){le(t,!1);let n=v(t,"lineWidth",8,1),r=v(t,"dimensions",8),i=v(t,"variant",8,void 0),o=v(t,"class",8,"");he();var s=Nm();const a=ae(()=>Dt(at(["svelte-flow__background-pattern",i(),o()])));me(()=>{Q(s,"stroke-width",n()),Q(s,"d",`M${r()[0]/2} 0 V${r()[1]} M0 ${r()[1]/2} H${r()[0]}`),Tn(s,d(a),"")}),Y(e,s),ce()}const Pm={[tn.Dots]:1,[tn.Lines]:1,[tn.Cross]:6};var zm=Je('<svg data-testid="svelte-flow__background"><pattern patternUnits="userSpaceOnUse"><!></pattern><rect x="0" y="0" width="100%" height="100%"></rect></svg>');function Am(e,t){le(t,!1);const n=je(),r=()=>q(k,"$flowId",n),i=()=>q(b,"$viewport",n),o=F(),s=F(),a=F(),l=F(),c=F();let u=v(t,"id",8,void 0),f=v(t,"variant",24,()=>tn.Dots),h=v(t,"gap",8,20),g=v(t,"size",8,1),p=v(t,"lineWidth",8,1),y=v(t,"bgColor",8,void 0),S=v(t,"patternColor",8,void 0),w=v(t,"patternClass",8,void 0),m=v(t,"class",8,"");const{viewport:b,flowId:k}=Fe(),E=g()||Pm[f()],N=f()===tn.Dots,C=f()===tn.Cross,A=Array.isArray(h())?h():[h(),h()];$(()=>(r(),W(u())),()=>{H(o,`background-pattern-${r()}-${u()?u():""}`)}),$(()=>i(),()=>{H(s,[A[0]*i().zoom||1,A[1]*i().zoom||1])}),$(()=>i(),()=>{H(a,E*i().zoom)}),$(()=>(d(a),d(s)),()=>{H(l,C?[d(a),d(a)]:d(s))}),$(()=>(d(a),d(l)),()=>{H(c,N?[d(a)/2,d(a)/2]:[d(l)[0]/2,d(l)[1]/2])}),it(),he();var z=zm();const O=ae(()=>Dt(at(["svelte-flow__background",m()])));var L=ee(z),V=ee(L);{var D=_=>{var M=ae(()=>d(a)/2);Cm(_,{get radius(){return d(M)},get class(){return w()}})},x=_=>{Mm(_,{get dimensions(){return d(l)},get variant(){return f()},get lineWidth(){return p()},get class(){return w()}})};we(V,_=>{N?_(D):_(x,!1)})}var P=te(L);me(()=>{Tn(z,d(O),"svelte-1r7pe8d"),We(z,"--xy-background-color-props",y()),We(z,"--xy-background-pattern-color-props",S()),Q(L,"id",d(o)),Q(L,"x",i().x%d(s)[0]),Q(L,"y",i().y%d(s)[1]),Q(L,"width",d(s)[0]),Q(L,"height",d(s)[1]),Q(L,"patternTransform",`translate(-${d(c)[0]},-${d(c)[1]})`),Q(P,"fill",`url(#${d(o)})`)}),Y(e,z),ce()}var Im=Je("<rect></rect>");function Tm(e,t){le(t,!1);let n=v(t,"x",8),r=v(t,"y",8),i=v(t,"width",8,0),o=v(t,"height",8,0),s=v(t,"borderRadius",8,5),a=v(t,"color",8,void 0),l=v(t,"shapeRendering",8),c=v(t,"strokeColor",8,void 0),u=v(t,"strokeWidth",8,2),f=v(t,"selected",8,!1),h=v(t,"class",8,"");he();var g=Im();const p=ae(()=>Dt(at(["svelte-flow__minimap-node",h()])));me(()=>{Tn(g,d(p),""),Q(g,"x",n()),Q(g,"y",r()),Q(g,"rx",s()),Q(g,"ry",s()),Q(g,"width",i()),Q(g,"height",o()),Q(g,"style",`${a()?`fill: ${a()};`:""}${c()?`stroke: ${c()};`:""}${u()?`stroke-width: ${u()};`:""}`),Q(g,"shape-rendering",l()),Ye(g,"selected",f())}),Y(e,g),ce()}function No(e,t){const n=Hv({domNode:e,panZoom:t.panZoom,getTransform:()=>{const i=X(t.viewport);return[i.x,i.y,i.zoom]},getViewScale:t.getViewScale});function r(i){n.update({translateExtent:i.translateExtent,width:i.width,height:i.height,inversePan:i.inversePan,zoomStep:i.zoomStep,pannable:i.pannable,zoomable:i.zoomable})}return{update:r,destroy(){n.destroy()}}}const Mo=e=>e instanceof Function?e:()=>e;var Om=se("<title> </title>"),Dm=Je('<svg class="svelte-flow__minimap-svg" role="img"><!><!><path class="svelte-flow__minimap-mask" fill-rule="evenodd" pointer-events="none"></path></svg>');function Hm(e,t){le(t,!1);const n=je(),r=()=>q(pe,"$flowId",n),i=()=>q(j,"$viewport",n),o=()=>q(ge,"$containerWidth",n),s=()=>q(ke,"$containerHeight",n),a=()=>q(U,"$nodeLookup",n),l=()=>q(G,"$nodes",n),c=()=>q(Ce,"$panZoom",n),u=()=>q(Me,"$translateExtent",n),f=F(),h=F(),g=F(),p=F(),y=F(),S=F(),w=F(),m=F(),b=F(),k=F(),E=F(),N=F(),C=F();let A=v(t,"position",8,"bottom-right"),z=v(t,"ariaLabel",8,"Mini map"),O=v(t,"nodeStrokeColor",8,"transparent"),L=v(t,"nodeColor",8,void 0),V=v(t,"nodeClass",8,""),D=v(t,"nodeBorderRadius",8,5),x=v(t,"nodeStrokeWidth",8,2),P=v(t,"bgColor",8,void 0),_=v(t,"maskColor",8,void 0),M=v(t,"maskStrokeColor",8,void 0),T=v(t,"maskStrokeWidth",8,void 0),I=v(t,"width",8,void 0),R=v(t,"height",8,void 0),K=v(t,"pannable",8,!0),Z=v(t,"zoomable",8,!0),ne=v(t,"inversePan",8,void 0),B=v(t,"zoomStep",8,void 0),J=v(t,"style",8,""),re=v(t,"class",8,"");const ue=200,de=150,{nodes:G,nodeLookup:U,viewport:j,width:ge,height:ke,flowId:pe,panZoom:Ce,translateExtent:Me}=Fe(),Be=L()===void 0?void 0:Mo(L()),Ve=Mo(O()),qe=Mo(V()),Pe=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",be=`svelte-flow__minimap-desc-${r()}`;let $e=F(d(f));const yt=()=>d(S);$(()=>(i(),o(),s()),()=>{H(f,{x:-i().x/i().zoom,y:-i().y/i().zoom,width:o()/i().zoom,height:s()/i().zoom})}),$(()=>(a(),d(f),l()),()=>{H($e,a().size>0?cc(oi(a()),d(f)):d(f)),l()}),$(()=>W(I()),()=>{H(h,I()??ue)}),$(()=>W(R()),()=>{H(g,R()??de)}),$(()=>(d($e),d(h)),()=>{H(p,d($e).width/d(h))}),$(()=>(d($e),d(g)),()=>{H(y,d($e).height/d(g))}),$(()=>(d(p),d(y)),()=>{H(S,Math.max(d(p),d(y)))}),$(()=>(d(S),d(h)),()=>{H(w,d(S)*d(h))}),$(()=>(d(S),d(g)),()=>{H(m,d(S)*d(g))}),$(()=>d(S),()=>{H(b,5*d(S))}),$(()=>(d($e),d(w),d(b)),()=>{H(k,d($e).x-(d(w)-d($e).width)/2-d(b))}),$(()=>(d($e),d(m),d(b)),()=>{H(E,d($e).y-(d(m)-d($e).height)/2-d(b))}),$(()=>(d(w),d(b)),()=>{H(N,d(w)+d(b)*2)}),$(()=>(d(m),d(b)),()=>{H(C,d(m)+d(b)*2)}),it(),he();var Te=ae(()=>J()+(P()?`;--xy-minimap-background-color-props:${P()}`:"")),Qe=ae(()=>at(["svelte-flow__minimap",re()]));Is(e,{get position(){return A()},get style(){return d(Te)},get class(){return d(Qe)},"data-testid":"svelte-flow__minimap",children:(Ke,De)=>{var bn=xe(),On=oe(bn);{var Ue=tt=>{var ze=Dm();Q(ze,"aria-labelledby",be);var nt=ee(ze);{var kt=Nt=>{var Mt=Om();Q(Mt,"id",be);var Rt=ee(Mt);me(()=>qt(Rt,z())),Y(Nt,Mt)};we(nt,Nt=>{z()&&Nt(kt)})}var sr=te(nt);St(sr,1,l,Nt=>Nt.id,(Nt,Mt)=>{var Rt=xe();const lt=ae(()=>a().get(d(Mt).id));var ho=oe(Rt);{var rt=ar=>{const lr=ae(()=>xn(d(lt)));var Lt=ae(()=>Be==null?void 0:Be(d(lt))),ai=ae(()=>Ve(d(lt))),li=ae(()=>qe(d(lt)));Tm(ar,Ze({get x(){return d(lt).internals.positionAbsolute.x},get y(){return d(lt).internals.positionAbsolute.y}},()=>d(lr),{get selected(){return d(lt).selected},get color(){return d(Lt)},get borderRadius(){return D()},get strokeColor(){return d(ai)},get strokeWidth(){return x()},shapeRendering:Pe,get class(){return d(li)}}))};we(ho,ar=>{d(lt)&&dc(d(lt))&&ar(rt)})}Y(Nt,Rt)});var fo=te(sr);dt(ze,(Nt,Mt)=>No==null?void 0:No(Nt,Mt),()=>({panZoom:c(),viewport:j,getViewScale:yt,translateExtent:u(),width:o(),height:s(),inversePan:ne(),zoomStep:B(),pannable:K(),zoomable:Z()})),me(()=>{Q(ze,"width",d(h)),Q(ze,"height",d(g)),Q(ze,"viewBox",`${d(k)??""} ${d(E)??""} ${d(N)??""} ${d(C)??""}`),We(ze,"--xy-minimap-mask-background-color-props",_()),We(ze,"--xy-minimap-mask-stroke-color-props",M()),We(ze,"--xy-minimap-mask-stroke-width-props",T()?T()*d(S):void 0),Q(fo,"d",`M${d(k)-d(b)},${d(E)-d(b)}h${d(N)+d(b)*2}v${d(C)+d(b)*2}h${-d(N)-d(b)*2}z
      M${d(f).x??""},${d(f).y??""}h${d(f).width??""}v${d(f).height??""}h${-d(f).width}z`)}),Y(tt,ze)};we(On,tt=>{c()&&tt(Ue)})}Y(Ke,bn)},$$slots:{default:!0}}),ce()}const Va=e=>nv(e);function Rm(){const{zoomIn:e,zoomOut:t,fitView:n,onbeforedelete:r,snapGrid:i,viewport:o,width:s,height:a,minZoom:l,maxZoom:c,panZoom:u,nodes:f,edges:h,domNode:g,nodeLookup:p,nodeOrigin:y,edgeLookup:S,connectionLookup:w}=Fe(),m=E=>{var O,L;const N=X(p),C=Va(E)?E:N.get(E.id),A=C.parentId?sv(C.position,C.measured,C.parentId,N,X(y)):C.position,z={...C,position:A,width:((O=C.measured)==null?void 0:O.width)??C.width,height:((L=C.measured)==null?void 0:L.height)??C.height};return Un(z)},b=(E,N,C={replace:!1})=>{var O;const A=(O=X(p).get(E))==null?void 0:O.internals.userNode;if(!A)return;const z=typeof N=="function"?N(A):N;C.replace?f.update(L=>L.map(V=>V.id===E?Va(z)?z:{...V,...z}:V)):(Object.assign(A,z),f.update(L=>L))},k=E=>X(p).get(E);return{zoomIn:e,zoomOut:t,getInternalNode:k,getNode:E=>{var N;return(N=k(E))==null?void 0:N.internals.userNode},getNodes:E=>E===void 0?X(f):Xa(X(p),E),getEdge:E=>X(S).get(E),getEdges:E=>E===void 0?X(h):Xa(X(S),E),setZoom:(E,N)=>{const C=X(u);return C?C.scaleTo(E,{duration:N==null?void 0:N.duration}):Promise.resolve(!1)},getZoom:()=>X(o).zoom,setViewport:async(E,N)=>{const C=X(o),A=X(u);return A?(await A.setViewport({x:E.x??C.x,y:E.y??C.y,zoom:E.zoom??C.zoom},{duration:N==null?void 0:N.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>X(o),setCenter:async(E,N,C)=>{const A=typeof(C==null?void 0:C.zoom)<"u"?C.zoom:X(c),z=X(u);return z?(await z.setViewport({x:X(s)/2-E*A,y:X(a)/2-N*A,zoom:A},{duration:C==null?void 0:C.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:n,fitBounds:async(E,N)=>{const C=X(u);if(!C)return Promise.resolve(!1);const A=Cs(E,X(s),X(a),X(l),X(c),(N==null?void 0:N.padding)??.1);return await C.setViewport(A,{duration:N==null?void 0:N.duration}),Promise.resolve(!0)},getIntersectingNodes:(E,N=!0,C)=>{const A=Ea(E),z=A?E:m(E);return z?(C||X(f)).filter(O=>{const L=X(p).get(O.id);if(!L||!A&&O.id===E.id)return!1;const V=Un(L),D=Pr(V,z);return N&&D>0||D>=z.width*z.height}):[]},isNodeIntersecting:(E,N,C=!0)=>{const z=Ea(E)?E:m(E);if(!z)return!1;const O=Pr(z,N);return C&&O>0||O>=z.width*z.height},deleteElements:async({nodes:E=[],edges:N=[]})=>{const{nodes:C,edges:A}=await sc({nodesToRemove:E,edgesToRemove:N,nodes:X(f),edges:X(h),onBeforeDelete:X(r)});return C&&f.update(z=>z.filter(O=>!C.some(({id:L})=>L===O.id))),A&&h.update(z=>z.filter(O=>!A.some(({id:L})=>L===O.id))),{deletedNodes:C,deletedEdges:A}},screenToFlowPosition:(E,N={snapToGrid:!0})=>{const C=X(g);if(!C)return E;const A=N.snapToGrid?X(i):!1,{x:z,y:O,zoom:L}=X(o),{x:V,y:D}=C.getBoundingClientRect(),x={x:E.x-V,y:E.y-D};return si(x,[z,O,L],A!==null,A||[1,1])},flowToScreenPosition:E=>{const N=X(g);if(!N)return E;const{x:C,y:A,zoom:z}=X(o),{x:O,y:L}=N.getBoundingClientRect(),V=uc(E,[C,A,z]);return{x:V.x+O,y:V.y+L}},toObject:()=>({nodes:X(f).map(E=>({...E,position:{...E.position},data:{...E.data}})),edges:X(h).map(E=>({...E})),viewport:{...X(o)}}),updateNode:b,updateNodeData:(E,N,C)=>{var O;const A=(O=X(p).get(E))==null?void 0:O.internals.userNode;if(!A)return;const z=typeof N=="function"?N(A):N;A.data=C!=null&&C.replace?z:{...A.data,...z},f.update(L=>L)},getNodesBounds:E=>{const N=X(p),C=X(y);return rv(E,{nodeLookup:N,nodeOrigin:C})},getHandleConnections:({type:E,id:N,nodeId:C})=>{var A;return Array.from(((A=X(w).get(`${C}-${E}-${N??null}`))==null?void 0:A.values())??[])},viewport:o}}function Xa(e,t){var r;const n=[];for(const i of t){const o=e.get(i);if(o){const s="internals"in o?(r=o.internals)==null?void 0:r.userNode:o;n.push(s)}}return n}var Lm=se("<div><!></div>");function Ya(e,t){le(t,!1);const n=je(),r=()=>q(I,"$nodeLookup",n),i=()=>q(K,"$viewport",n),o=()=>q(R,"$snapGrid",n),s=()=>q(ne,"$nodeOrigin",n),a=()=>q(B,"$domNode",n),l=()=>q(Z,"$nodes",n),c=F(),u=F(),f=F(),h=F(),g=F(),p=F(),y=F(),S=F(),w=F(),m=F(),b=F();let k=v(t,"nodeId",8,void 0),E=v(t,"position",8,void 0),N=v(t,"variant",24,()=>cn.Handle),C=v(t,"color",8,void 0),A=v(t,"minWidth",8,10),z=v(t,"minHeight",8,10),O=v(t,"maxWidth",24,()=>Number.MAX_VALUE),L=v(t,"maxHeight",24,()=>Number.MAX_VALUE),V=v(t,"keepAspectRatio",8,!1),D=v(t,"shouldResize",8,void 0),x=v(t,"onResizeStart",8,void 0),P=v(t,"onResize",8,void 0),_=v(t,"onResizeEnd",8,void 0),M=v(t,"style",8,""),T=v(t,"class",8,"");const{nodeLookup:I,snapGrid:R,viewport:K,nodes:Z,nodeOrigin:ne,domNode:B}=Fe(),J=qn("svelteflow__node_id");let re=F(),ue=F(null);or(()=>(d(re)&&H(ue,Qv({domNode:d(re),nodeId:d(g),getStoreItems:()=>({nodeLookup:r(),transform:[i().x,i().y,i().zoom],snapGrid:o()??void 0,snapToGrid:!!o(),nodeOrigin:s(),paneDomNode:a()}),onChange:(j,ge)=>{var pe,Ce;const ke=(pe=r().get(d(g)))==null?void 0:pe.internals.userNode;if(ke){j.x!==void 0&&j.y!==void 0&&(ke.position={x:j.x,y:j.y}),j.width!==void 0&&j.height!==void 0&&(ke.width=j.width,ke.height=j.height);for(const Me of ge){const Be=(Ce=r().get(Me.id))==null?void 0:Ce.internals.userNode;Be&&(Be.position=Me.position)}kr(Z,l())}}})),()=>{var j;(j=d(ue))==null||j.destroy()})),$(()=>W(A()),()=>{H(c,A()??10)}),$(()=>W(z()),()=>{H(u,z()??10)}),$(()=>W(O()),()=>{H(f,O()??Number.MAX_VALUE)}),$(()=>W(L()),()=>{H(h,L()??Number.MAX_VALUE)}),$(()=>W(k()),()=>{H(g,typeof k()=="string"?k():J)}),$(()=>(W(N()),cn),()=>{H(p,N()===cn.Line?"right":"bottom-right")}),$(()=>(W(E()),d(p)),()=>{H(y,E()??d(p))}),$(()=>d(y),()=>{H(S,d(y).split("-"))}),$(()=>(W(N()),cn),()=>{H(w,N()===cn.Line?"border-color":"background-color")}),$(()=>W(M()),()=>{H(m,M()??"")}),$(()=>(W(C()),d(m),d(w)),()=>{H(b,C()?`${d(m)} ${d(w)}: ${C()};`:d(m))}),$(()=>(d(ue),d(y),d(c),d(u),d(f),d(h),W(V()),W(x()),W(P()),W(_()),W(D())),()=>{var j;(j=d(ue))==null||j.update({controlPosition:d(y),boundaries:{minWidth:d(c),minHeight:d(u),maxWidth:d(f),maxHeight:d(h)},keepAspectRatio:!!V(),onResizeStart:x(),onResize:P(),onResizeEnd:_(),shouldResize:D()})}),it(),he();var de=Lm();const G=ae(()=>Dt(at(["svelte-flow__resize-control","nodrag",...d(S),N(),T()])));var U=ee(de);Ie(U,t,"default",{}),ei(de,j=>H(re,j),()=>d(re)),me(()=>{ms(de,d(G),""),Q(de,"style",d(b))}),Y(e,de),ce()}var Vm=se("<!> <!>",1);function Ac(e,t){le(t,!1);let n=v(t,"nodeId",8,void 0),r=v(t,"isVisible",8,!0),i=v(t,"handleClass",8,void 0),o=v(t,"handleStyle",8,void 0),s=v(t,"lineClass",8,void 0),a=v(t,"lineStyle",8,void 0),l=v(t,"color",8,void 0),c=v(t,"minWidth",8,10),u=v(t,"minHeight",8,10),f=v(t,"maxWidth",24,()=>Number.MAX_VALUE),h=v(t,"maxHeight",24,()=>Number.MAX_VALUE),g=v(t,"keepAspectRatio",8,!1),p=v(t,"shouldResize",8,void 0),y=v(t,"onResizeStart",8,void 0),S=v(t,"onResize",8,void 0),w=v(t,"onResizeEnd",8,void 0),m=c()||10,b=u()||10,k=f()||Number.MAX_VALUE,E=h()||Number.MAX_VALUE;he();var N=xe(),C=oe(N);{var A=z=>{var O=Vm(),L=oe(O);St(L,1,()=>qv,D=>D,(D,x)=>{Ya(D,{get class(){return s()},get style(){return a()},get nodeId(){return n()},get position(){return d(x)},get variant(){return cn.Line},get color(){return l()},minWidth:m,minHeight:b,maxWidth:k,maxHeight:E,get onResizeStart(){return y()},get keepAspectRatio(){return g()},get shouldResize(){return p()},get onResize(){return S()},get onResizeEnd(){return w()}})});var V=te(L,2);St(V,1,()=>Fv,D=>D,(D,x)=>{Ya(D,{get class(){return i()},get style(){return o()},get nodeId(){return n()},get position(){return d(x)},get color(){return l()},minWidth:m,minHeight:b,maxWidth:k,maxHeight:E,get onResizeStart(){return y()},get keepAspectRatio(){return g()},get shouldResize(){return p()},get onResize(){return S()},get onResizeEnd(){return w()}})}),Y(z,O)};we(C,z=>{r()&&z(A)})}Y(e,N),ce()}const Xm=[];function Ym({type:e,nodeId:t,id:n=null}){const{edges:r,connectionLookup:i}=Fe(),o=qn("svelteflow__node_id"),s=t??o;let a;return Cn([r,i],([,l],c)=>{const u=l.get(`${s}-${e}-${n||null}`);ic(u,a)||(a=u,c(Array.from((a==null?void 0:a.values())||[])))},Xm)}/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wm={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var Bm=Je("<svg><!><!></svg>");function gt(e,t){const n=ye(t,["children","$$slots","$$events","$$legacy"]),r=ye(n,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);le(t,!1);let i=v(t,"name",8,void 0),o=v(t,"color",8,"currentColor"),s=v(t,"size",8,24),a=v(t,"strokeWidth",8,2),l=v(t,"absoluteStrokeWidth",8,!1),c=v(t,"iconNode",24,()=>[]);const u=(...y)=>y.filter((S,w,m)=>!!S&&m.indexOf(S)===w).join(" ");he();var f=Bm();let h;var g=ee(f);St(g,1,c,Vn,(y,S)=>{let w=()=>d(S)[0],m=()=>d(S)[1];var b=xe(),k=oe(b);dd(k,w,!0,(E,N)=>{let C;me(()=>C=br(E,C,{...m()},void 0,E.namespaceURI===ja,E.nodeName.includes("-")))}),Y(y,b)});var p=te(g);Ie(p,t,"default",{}),me(()=>h=br(f,h,{...Wm,...r,width:s(),height:s(),stroke:o(),"stroke-width":l()?Number(a())*24/Number(s()):a(),class:u("lucide-icon","lucide",i()?`lucide-${i()}`:"",n.class)},void 0,!0)),Y(e,f),ce()}function Km(e,t){const n=ye(t,["children","$$slots","$$events","$$legacy"]);gt(e,Ze({name:"circle-help"},()=>n,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}],["path",{d:"M12 17h.01"}]],children:(i,o)=>{var s=xe(),a=oe(s);Ie(a,t,"default",{}),Y(i,s)},$$slots:{default:!0}}))}function Fm(e,t){const n=ye(t,["children","$$slots","$$events","$$legacy"]);gt(e,Ze({name:"copy"},()=>n,{iconNode:[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"}]],children:(i,o)=>{var s=xe(),a=oe(s);Ie(a,t,"default",{}),Y(i,s)},$$slots:{default:!0}}))}function qm(e,t){const n=ye(t,["children","$$slots","$$events","$$legacy"]);gt(e,Ze({name:"download"},()=>n,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"7 10 12 15 17 10"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3"}]],children:(i,o)=>{var s=xe(),a=oe(s);Ie(a,t,"default",{}),Y(i,s)},$$slots:{default:!0}}))}function $m(e,t){const n=ye(t,["children","$$slots","$$events","$$legacy"]);gt(e,Ze({name:"ellipsis-vertical"},()=>n,{iconNode:[["circle",{cx:"12",cy:"12",r:"1"}],["circle",{cx:"12",cy:"5",r:"1"}],["circle",{cx:"12",cy:"19",r:"1"}]],children:(i,o)=>{var s=xe(),a=oe(s);Ie(a,t,"default",{}),Y(i,s)},$$slots:{default:!0}}))}function Ic(e,t){const n=ye(t,["children","$$slots","$$events","$$legacy"]);gt(e,Ze({name:"loader"},()=>n,{iconNode:[["path",{d:"M12 2v4"}],["path",{d:"m16.2 7.8 2.9-2.9"}],["path",{d:"M18 12h4"}],["path",{d:"m16.2 16.2 2.9 2.9"}],["path",{d:"M12 18v4"}],["path",{d:"m4.9 19.1 2.9-2.9"}],["path",{d:"M2 12h4"}],["path",{d:"m4.9 4.9 2.9 2.9"}]],children:(i,o)=>{var s=xe(),a=oe(s);Ie(a,t,"default",{}),Y(i,s)},$$slots:{default:!0}}))}function Gm(e,t){const n=ye(t,["children","$$slots","$$events","$$legacy"]);gt(e,Ze({name:"map"},()=>n,{iconNode:[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z"}],["path",{d:"M15 5.764v15"}],["path",{d:"M9 3.236v15"}]],children:(i,o)=>{var s=xe(),a=oe(s);Ie(a,t,"default",{}),Y(i,s)},$$slots:{default:!0}}))}function Zm(e,t){const n=ye(t,["children","$$slots","$$events","$$legacy"]);gt(e,Ze({name:"messages-square"},()=>n,{iconNode:[["path",{d:"M14 9a2 2 0 0 1-2 2H6l-4 4V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2z"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v11l-4-4h-6a2 2 0 0 1-2-2v-1"}]],children:(i,o)=>{var s=xe(),a=oe(s);Ie(a,t,"default",{}),Y(i,s)},$$slots:{default:!0}}))}function Um(e,t){const n=ye(t,["children","$$slots","$$events","$$legacy"]);gt(e,Ze({name:"play"},()=>n,{iconNode:[["polygon",{points:"6 3 20 12 6 21 6 3"}]],children:(i,o)=>{var s=xe(),a=oe(s);Ie(a,t,"default",{}),Y(i,s)},$$slots:{default:!0}}))}function Jm(e,t){const n=ye(t,["children","$$slots","$$events","$$legacy"]);gt(e,Ze({name:"settings"},()=>n,{iconNode:[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}],["circle",{cx:"12",cy:"12",r:"3"}]],children:(i,o)=>{var s=xe(),a=oe(s);Ie(a,t,"default",{}),Y(i,s)},$$slots:{default:!0}}))}function jm(e,t){const n=ye(t,["children","$$slots","$$events","$$legacy"]);gt(e,Ze({name:"square-arrow-out-up-right"},()=>n,{iconNode:[["path",{d:"M21 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h6"}],["path",{d:"m21 3-9 9"}],["path",{d:"M15 3h6v6"}]],children:(i,o)=>{var s=xe(),a=oe(s);Ie(a,t,"default",{}),Y(i,s)},$$slots:{default:!0}}))}function Qm(e,t){const n=ye(t,["children","$$slots","$$events","$$legacy"]);gt(e,Ze({name:"square-play"},()=>n,{iconNode:[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}],["path",{d:"m9 8 6 4-6 4Z"}]],children:(i,o)=>{var s=xe(),a=oe(s);Ie(a,t,"default",{}),Y(i,s)},$$slots:{default:!0}}))}function Wa(e,t){const n=ye(t,["children","$$slots","$$events","$$legacy"]);gt(e,Ze({name:"square-x"},()=>n,{iconNode:[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}],["path",{d:"m15 9-6 6"}],["path",{d:"m9 9 6 6"}]],children:(i,o)=>{var s=xe(),a=oe(s);Ie(a,t,"default",{}),Y(i,s)},$$slots:{default:!0}}))}function ey(e,t){const n=ye(t,["children","$$slots","$$events","$$legacy"]);gt(e,Ze({name:"text-cursor-input"},()=>n,{iconNode:[["path",{d:"M5 4h1a3 3 0 0 1 3 3 3 3 0 0 1 3-3h1"}],["path",{d:"M13 20h-1a3 3 0 0 1-3-3 3 3 0 0 1-3 3H5"}],["path",{d:"M5 16H4a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h1"}],["path",{d:"M13 8h7a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-7"}],["path",{d:"M9 7v10"}]],children:(i,o)=>{var s=xe(),a=oe(s);Ie(a,t,"default",{}),Y(i,s)},$$slots:{default:!0}}))}function ty(e,t){const n=ye(t,["children","$$slots","$$events","$$legacy"]);gt(e,Ze({name:"upload"},()=>n,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"17 8 12 3 7 8"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15"}]],children:(i,o)=>{var s=xe(),a=oe(s);Ie(a,t,"default",{}),Y(i,s)},$$slots:{default:!0}}))}function Tc(e,t){const n=ye(t,["children","$$slots","$$events","$$legacy"]);gt(e,Ze({name:"x"},()=>n,{iconNode:[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]],children:(i,o)=>{var s=xe(),a=oe(s);Ie(a,t,"default",{}),Y(i,s)},$$slots:{default:!0}}))}const ny={nodes:[{id:"1",type:"textInput",position:{x:-20,y:0},data:{value:"What is AGI?"},width:180,height:100},{id:"2",type:"generate",position:{x:240,y:0},width:460,height:340,data:{markdowns:"",htmls:"",model:"gemini-2.0-flash-exp"}}],edges:[{source:"1",target:"2"}]};var An,Oc,ts;class ry{constructor(){Xe(this,An);const t=ct(this,An,Oc).call(this);ct(this,An,ts).call(this,t),this.nodes=ie(t.nodes),this.edges=ie(t.edges)}LoadFromFile(t){ct(this,An,ts).call(this,t),this.nodes.set(t.nodes),this.edges.set(t.edges),this.Save()}AddNode(t){this.nodes.update(n=>(n.push(t),n)),this.Save()}AddEdge(t,n){this.edges.update(r=>(r.push({source:t,target:n,id:new Date().getTime().toString()}),r)),this.Save()}RemoveNode(t){this.nodes.update(n=>n.filter(r=>r.id!=t.id)),this.Save()}RemoveEdge(t){this.edges.update(n=>n.filter(r=>r.source!=t.source||r.target!=t.target)),this.Save()}RemovePrevEdge(t){const n={};n[t.fromHandle.type]=t.fromHandle.nodeId,n[t.toHandle.type]=t.toHandle.nodeId,this.edges.update(r=>{for(let i=r.length-1;i>=0;i--){let o=r[i];n.id?o.target==n.target&&o.id!=n.id&&r.splice(i,1):o.source==n.source&&o.target==n.target&&(n.id=o.id)}return r}),this.Save()}UpdateNode(t,n){this.nodes.update(r=>{const i=r.find(o=>o.id===t);return i&&(i.data={...i.data,...n}),r}),this.Save()}Dump(){return{nodes:X(this.nodes),edges:X(this.edges)}}Save(){const t=this.Dump();localStorage.graph=JSON.stringify(t)}GetPrompt(t){const r=X(this.edges).find(a=>a.target===t);if(!r)return"";const o=X(this.nodes).find(a=>a.id===r.source);let s;switch(o.type){case"textInput":s={role:"user",content:[o.data.value]};break;case"generate":s={role:"model",content:o.data.markdowns};break}return[...this.GetPrompt(o.id),s]}}An=new WeakSet,Oc=function(){return localStorage.graph?JSON.parse(localStorage.graph):ny},ts=function(t){t.nodes.forEach(n=>{n.data.markdown&&(n.data.markdowns=[n.data.markdown],delete n.data.markdown),n.data.html&&(n.data.htmls=[n.data.html],delete n.data.html)})};const et=new ry;var Ir,Tr,Or,Dr,Hr,Rr,Lr,Vr,Xr,Sn,yr;class iy{constructor(){Xe(this,Sn);Xe(this,Ir,Ge(!1));Xe(this,Tr,Ge(null));Xe(this,Or,Ge(null));Xe(this,Dr,Ge(void 0));Xe(this,Hr,Ge(void 0));Xe(this,Rr,Ge(void 0));Xe(this,Lr,Ge(void 0));Xe(this,Vr,Ge(0));Xe(this,Xr,Ge(0))}get IsVisible(){return d(ve(this,Ir))}set IsVisible(t){H(ve(this,Ir),Re(t))}get Node(){return d(ve(this,Tr))}set Node(t){H(ve(this,Tr),Re(t))}get Edge(){return d(ve(this,Or))}set Edge(t){H(ve(this,Or),Re(t))}get Top(){return d(ve(this,Dr))}set Top(t){H(ve(this,Dr),Re(t))}get Left(){return d(ve(this,Hr))}set Left(t){H(ve(this,Hr),Re(t))}get Right(){return d(ve(this,Rr))}set Right(t){H(ve(this,Rr),Re(t))}get Bottom(){return d(ve(this,Lr))}set Bottom(t){H(ve(this,Lr),Re(t))}get CanvasWidth(){return d(ve(this,Vr))}set CanvasWidth(t){H(ve(this,Vr),Re(t))}get CanvasHeight(){return d(ve(this,Xr))}set CanvasHeight(t){H(ve(this,Xr),Re(t))}ShowPane(t){ct(this,Sn,yr).call(this,t)}ShowNode(t,n){ct(this,Sn,yr).call(this,t,n)}ShowEdge(t,n){ct(this,Sn,yr).call(this,t,null,n)}ShowConnect(t,n){ct(this,Sn,yr).call(this,t,null,null,n)}Hide(){this.IsVisible&&(this.Event=null,this.Node=null,this.Edge=null,this.IsVisible=!1)}}Ir=new WeakMap,Tr=new WeakMap,Or=new WeakMap,Dr=new WeakMap,Hr=new WeakMap,Rr=new WeakMap,Lr=new WeakMap,Vr=new WeakMap,Xr=new WeakMap,Sn=new WeakSet,yr=function(t,n,r,i){if(t.target.closest(".nomenu")){this.Hide();return}this.Event=t,this.Node=n,this.Edge=r,this.Connection=i,t.preventDefault(),this.Top=t.clientY<this.CanvasHeight-200?t.clientY+"px":void 0,this.Left=t.clientX<this.CanvasWidth-200?t.clientX+"px":void 0,this.Right=t.clientX>=this.CanvasWidth-200?this.CanvasWidth-t.clientX+"px":void 0,this.Bottom=t.clientY>=this.CanvasHeight-200?this.CanvasHeight-t.clientY+"px":void 0,this.IsVisible=!0};const He=new iy,oy={models:[{id:"google",free:!0,name:"Google",link:"https://aistudio.google.com/app/apikey",models:[{id:"gemini-2.0-flash-exp"},{id:"gemini-2.0-flash-thinking-exp",thinking:!0},{id:"gemini-exp-1206"},{id:"gemini-1.5-pro"},{id:"gemini-1.5-flash"},{id:"gemini-1.5-flash-8b"},{id:"learnlm-1.5-pro-experimental"}]},{id:"openai",name:"OpenAI",link:"https://platform.openai.com/api-keys",models:[{id:"gpt-4o"},{id:"gpt-4o-mini"},{id:"chatgpt-4o-latest"},{id:"o1"},{id:"o1-mini"},{id:"o1-preview"}]},{id:"anthropic",name:"Anthropic",link:"https://console.anthropic.com/account/keys",models:[{id:"claude-3-5-sonnet-latest"},{id:"claude-3-5-haiku-latest"},{id:"claude-3-opus-latest"},{id:"claude-3-sonnet-20240229"},{id:"claude-3-haiku-20240307"}]},{id:"deepseek",name:"DeepSeek",link:"https://platform.deepseek.com/api_keys",models:[{id:"deepseek-chat"},{id:"deepseek-reasoner"}]},{id:"openrouter",free:!0,name:"OpenRouter",link:"https://openrouter.ai/settings/keys",models:[]}]};var Yr,Wr,Bt,Dc,Hc,Ei;class sy{constructor(){Xe(this,Bt);Xe(this,Yr,Ge(Re([])));Xe(this,Wr,Ge(Re({})));ct(this,Bt,Dc).call(this),ct(this,Bt,Hc).call(this)}get providers(){return d(ve(this,Yr))}set providers(t){H(ve(this,Yr),Re(t))}get models(){return d(ve(this,Wr))}set models(t){H(ve(this,Wr),Re(t))}}Yr=new WeakMap,Wr=new WeakMap,Bt=new WeakSet,Dc=function(){if(!localStorage.info){ct(this,Bt,Ei).call(this,oy);return}try{const t=JSON.parse(localStorage.info);ct(this,Bt,Ei).call(this,t)}catch(t){console.log("[AppInfo > readLocal]",t,localStorage.info)}},Hc=async function(){const t="https://script.google.com/macros/s/AKfycbwysMaVEisDNRycEFgz7LHkFnCJwTzc4MsmEquJ4CdCbmVFdqelgYGKuuWcUodOLBkfRQ/exec?app="+window.location,n=await fetch(t);if(!n.ok)throw new Error(`[AppInfo > readRemote] ${n.status}: ${n.statusText}`);const r=await n.json();localStorage.info=JSON.stringify(r),ct(this,Bt,Ei).call(this,r)},Ei=function(t){const n={};for(let r=0;r<t.models.length;r++){let i=t.models[r];for(let o=0;o<i.models.length;o++){let s=i.models[o];s.providerId=i.id,n[s.id]=s}}this.models=n,this.providers=t.models};const wn=new sy;var Br,Kr,qi,Rc;class ay{constructor(){Xe(this,qi);Xe(this,Br,Ge(!1));Xe(this,Kr,Ge(Re({defaultModel:"gemini-2.0-flash-exp"})));if(localStorage.settings){const t=JSON.parse(localStorage.settings);t.geminiKey&&(t.googleKey=t.geminiKey,delete t.geminiKey,localStorage.settings=JSON.stringify(t)),this.Data=t}ct(this,qi,Rc).call(this)}get IsVisible(){return d(ve(this,Br))}set IsVisible(t){H(ve(this,Br),Re(t))}get Data(){return d(ve(this,Kr))}set Data(t){H(ve(this,Kr),Re(t))}Save(){localStorage.settings=JSON.stringify(this.Data)}Show(){this.IsVisible=!0}Hide(){this.IsVisible=!1}}Br=new WeakMap,Kr=new WeakMap,qi=new WeakSet,Rc=async function(){for(let t=0;t<wn.providers.length;t++){let n=wn.providers[t];if(this.Data[n.id+"Key"])return}this.Show()};const xt=new ay;var Fr;class ly{constructor(){Xe(this,Fr,Ge(!1))}get IsVisible(){return d(ve(this,Fr))}set IsVisible(t){H(ve(this,Fr),Re(t))}Show(){this.IsVisible=!0}Hide(){this.IsVisible=!1}}Fr=new WeakMap;const Bi=new ly;var cy=se("<!> <!> <!> <!>",1),uy=se('<input type="file" id="fileInput" style="display: none;" accept=".json"> <!>',1);function dy(e,t){le(t,!1);let n=F();function r(l){const c=l.target.files[0];if(!c||c.type!="application/json")throw"Invalid file";const u=new FileReader;u.onload=f=>{const h=f.target.result.toString(),g=JSON.parse(h);if(!Array.isArray(g.nodes)||!Array.isArray(g.edges))throw"Invalid file";et.LoadFromFile(g)},u.readAsText(c)}function i(){const l=et.Dump(),c=JSON.stringify(l,null,2),u=new Blob([c],{type:"application/json"}),f=URL.createObjectURL(u),h=document.createElement("a");h.href=f,h.download="llm-graph.json",h.click(),URL.revokeObjectURL(f)}he();var o=uy(),s=oe(o);s.__change=r,ei(s,l=>H(n,l),()=>d(n));var a=te(s,2);zc(a,{position:"top-left",showFitView:!1,showLock:!1,showZoom:!1,children:(l,c)=>{var u=cy(),f=oe(u);Jt(f,{title:"Import",class:"canvas-llm-controll-button",$$events:{click:()=>d(n).click()},children:(y,S)=>{ty(y,{size:24})},$$slots:{default:!0}});var h=te(f,2);Jt(h,{title:"Export",class:"canvas-llm-controll-button",$$events:{click:i},children:(y,S)=>{qm(y,{size:24})},$$slots:{default:!0}});var g=te(h,2);Jt(g,{title:"Settings",class:"canvas-llm-controll-button",$$events:{click:()=>xt.Show()},children:(y,S)=>{Jm(y,{size:24})},$$slots:{default:!0}});var p=te(g,2);Jt(p,{title:"Help",class:"canvas-llm-controll-button",$$events:{click:()=>Bi.Show()},children:(y,S)=>{Km(y,{size:24})},$$slots:{default:!0}}),Y(l,u)},$$slots:{default:!0}}),Y(e,o),ce()}rn(["change"]);var fy=se('<button class="context-menu-item svelte-1llxoho"><!> Delete node</button>'),hy=se('<button class="context-menu-item svelte-1llxoho"><!> Delete edge</button>'),gy=se('<div class="context-menu-item svelte-1llxoho" style="padding: 0.5em;background: #ddd; color: #666;">Add node:</div> <button class="context-menu-item svelte-1llxoho"><!> TextInput</button> <button class="context-menu-item svelte-1llxoho"><!> Generate</button>',1),vy=se('<div class="context-menu svelte-1llxoho"><!></div>');function my(e,t){le(t,!1);const{screenToFlowPosition:n}=Rm();function r(f){f.id=new Date().getTime().toString(),f.origin=[0,0],f.position=n({x:He.Event.clientX,y:He.Event.clientY}),et.AddNode(f),He.Connection&&(He.Connection.fromHandle.type=="source"?et.AddEdge(He.Connection.fromNode.id,f.id):et.AddEdge(f.id,He.Connection.fromNode.id)),He.Hide()}function i(){r({type:"textInput",width:260,height:120,data:{value:""}})}function o(){r({type:"generate",width:460,height:340,data:{markdowns:"",htmls:"",model:xt.Data.defaultModel}})}function s(){et.RemoveNode(He.Node),He.Hide()}function a(){et.RemoveEdge(He.Edge),He.Hide()}he();var l=xe(),c=oe(l);{var u=f=>{var h=vy(),g=ee(h);{var p=S=>{var w=fy(),m=ee(w);Wa(m,{size:24,color:"red"}),Ae("click",w,s),Y(S,w)},y=S=>{var w=xe(),m=oe(w);{var b=E=>{var N=hy(),C=ee(N);Wa(C,{size:24,color:"red"}),Ae("click",N,a),Y(E,N)},k=E=>{var N=gy(),C=te(oe(N),2),A=ee(C);ey(A,{size:24,color:"#00abff"});var z=te(C,2),O=ee(z);Qm(O,{size:24,color:"#00abff"}),Ae("click",C,i),Ae("click",z,o),Y(E,N)};we(m,E=>{He.Edge?E(b):E(k,!1)},!0)}Y(S,w)};we(g,S=>{He.Node?S(p):S(y,!1)})}me(()=>{We(h,"top",He.Top),We(h,"left",He.Left),We(h,"right",He.Right),We(h,"bottom",He.Bottom)}),Y(f,h)};we(c,f=>{He.IsVisible&&f(u)})}Y(e,l),ce()}function yy(e,t){t.text&&(navigator.clipboard?navigator.clipboard.writeText(t.text):console.log("[clipboard]",t.text))}var py=se('<button class="btn-dark svelte-1fizegg" title="Copy text" aria-label="Copy text"><!></button>');function Lc(e,t){var n=py();n.__click=[yy,t];var r=ee(n);Fm(r,{size:16}),Y(e,n)}rn(["click"]);function _y(e,t,n){et.UpdateNode(t.id,{value:d(n)})}var wy=se('<!> <!> <!> <node-content><node-header><node-header-left>Input</node-header-left> <node-header-right><!></node-header-right></node-header> <node-body><textarea class="nodrag nozoom node-text"></textarea></node-body></node-content>',3);function xy(e,t){le(t,!0),je();let n=Ge(Re(t.data.value));Ym({nodeId:t.id,type:"target"});var r=wy(),i=oe(r);Ac(i,{minWidth:100,minHeight:30,onResizeEnd:()=>et.Save()});var o=te(i,2);_n(o,{type:"target",get position(){return fe.Left}});var s=te(o,2);_n(s,{type:"source",get position(){return fe.Right}});var a=te(s,2),l=ee(a),c=ee(l),u=te(c,2),f=ee(u);Lc(f,{get text(){return d(n)}});var h=te(l,2);_i(h,"class","nomenu");var g=ee(h);g.__change=[_y,t,n],El(g,()=>d(n),p=>H(n,p)),Y(e,r),ce()}rn(["change"]);var by=se('<button type="button" class="btn-dark svelte-1fizegg"><!></button>');function ky(e,t){var n=by();n.__click=function(...i){var o;(o=t.onclick)==null||o.apply(this,i)};var r=ee(n);$m(r,{size:16}),Y(e,n)}rn(["click"]);class Ey{async Call(t,n){const r=wn.models[t];let i;switch(r.providerId){case"openai":i=await this.CallOpenAI(r,n);break;case"google":i=await this.CallGoogle(r,n);break;case"anthropic":i=await this.CallAnthropic(r,n);break;case"deepseek":i=await this.CallDeepSeek(r,n);break;case"openrouter":i=await this.CallOpenRouter(r,n);break;default:throw`[AiClient > Call] Invalid LLM: ${r.providerId} / ${r.id}`}const o=i.map(s=>marked.parse(s));return{markdowns:i,htmls:o}}async CallOpenAI(t,n){var o;const r="https://api.openai.com/v1/chat/completions",i=[];n.forEach(s=>{s.content.forEach(a=>{i.push({content:a,role:s.role==="model"?"assistant":s.role})})});try{const s=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+xt.Data.openaiKey},body:JSON.stringify({model:t.id,messages:i})}),a=await s.json();if((o=a==null?void 0:a.error)!=null&&o.message)throw a.error.message;if(!s.ok)throw`${s.status}: ${s.statusText}`;return a.choices.map(c=>c.message.content)}catch(s){throw console.error("[AiClient > CallOpenAI]",s),s}}async CallGoogle(t,n){var s;const r=`https://generativelanguage.googleapis.com/v1alpha/models/${t.id}:generateContent`,i=[];n.forEach(a=>{let l={parts:[],role:a.role=="system"?"user":a.role};a.content.forEach(c=>{l.parts.push({text:a.role=="system"?`*${c}*`:c})}),i.push(l)});const o={contents:i,generationConfig:{},safetySettings:[{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"BLOCK_NONE"}]};t.thinking&&(o.generationConfig.thinkingConfig={includeThoughts:!0});try{const a=await fetch(r,{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json","x-goog-api-key":xt.Data.googleKey}}),l=await a.json();if((s=l==null?void 0:l.error)!=null&&s.message)throw l.error.message;if(!a.ok)throw`${a.status}: ${a.statusText}`;return l.candidates[0].content.parts.map(u=>u.text)}catch(a){throw console.error("[AiClient > CallGoogle]",a),a}}async CallAnthropic(t,n){var o;const r="https://api.anthropic.com/v1/messages",i=[];n.forEach(s=>{s.content.forEach(a=>{i.push({content:a,role:s.role==="model"?"assistant":s.role==="system"?"user":s.role})})});try{const s=await fetch(r,{method:"POST",headers:{"x-api-key":xt.Data.anthropicKey,"anthropic-version":"2023-06-01","content-type":"application/json","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:t.id,messages:i,max_tokens:2048})}),a=await s.json();if((o=a==null?void 0:a.error)!=null&&o.message)throw a.error.message;if(!s.ok)throw`${s.status}: ${s.statusText}`;return a.content.map(c=>c.text)}catch(s){throw console.error("[AiClient > CallAnthropic]",s),s}}async CallDeepSeek(t,n){var o;const r="https://api.deepseek.com/chat/completions",i=[];n.forEach(s=>{s.content.forEach(a=>{i.push({content:a,role:s.role==="model"?"assistant":s.role})})});try{const s=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+xt.Data.deepseekKey},body:JSON.stringify({model:t.id,messages:i,stream:!1})}),a=await s.json();if((o=a==null?void 0:a.error)!=null&&o.message)throw a.error.message;if(!s.ok)throw`${s.status}: ${s.statusText}`;const l=a.choices[0].message;return l.reasoning_content?[l.reasoning_content,l.content]:[l.content]}catch(s){throw console.error("[AiClient > CallDeepSeek]",s),s}}async CallOpenRouter(t,n){var o;const r="https://openrouter.ai/api/v1/chat/completions",i=[];n.forEach(s=>{s.content.forEach(a=>{i.push({content:a,role:s.role==="model"?"assistant":s.role})})});try{const s=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+xt.Data.openrouterKey},body:JSON.stringify({model:t.id,messages:i,stream:!1})}),a=await s.json();if((o=a==null?void 0:a.error)!=null&&o.message)throw a.error.message;if(!s.ok)throw`${s.status}: ${s.statusText}`;const l=a.choices[0].message;return l.reasoning_content?[l.reasoning_content,l.content]:[l.content]}catch(s){throw console.error("[AiClient > CallOpenRouter]",s),s}}}const Sy=new Ey;var qr,$r,$i,Ba;let Cy=(Ba=class{constructor(){Xe(this,qr,Ge(0));Xe(this,$r,Ge(""));Xe(this,$i,mn(()=>this.NodeID>0))}get NodeID(){return d(ve(this,qr))}set NodeID(t){H(ve(this,qr),Re(t))}get ModelID(){return d(ve(this,$r))}set ModelID(t){H(ve(this,$r),Re(t))}get IsVisible(){return d(ve(this,$i))}Show(t,n){this.NodeID=t,this.ModelID=n}Hide(){this.NodeID=0}},qr=new WeakMap,$r=new WeakMap,$i=new WeakMap,Ba);const jt=new Cy;async function Ny(e,t,n,r,i){if(H(t,""),!n().model){jt.Show(r.id);return}const o=wn.models[n().model];if(!o){jt.Show(r.id);return}if(!xt.Data[o.providerId+"Key"]){xt.Show();return}H(i,!0);try{const s=et.GetPrompt(r.id),{markdowns:a,htmls:l}=await Sy.Call(n().model,s);et.UpdateNode(r.id,{markdowns:a,htmls:l,part:0})}catch(s){console.error("[GenerateNode > Exec]",n().model,s),H(t,Re(s))}H(i,!1)}var My=se('<button class="btn-main svelte-m2bf90" title="Call LLM" aria-label="Call LLM"><!></button>'),Py=se('<button class="btn-main svelte-m2bf90" title="In progress..." aria-label="In progress..." disabled><!></button>'),zy=se('<button class="svelte-m2bf90"></button>'),Ay=se('<tabs class="svelte-m2bf90"></tabs>'),Iy=(e,t)=>{H(t,"")},Ty=se('<error class="svelte-m2bf90"> <button type="button" class="btn-dark svelte-m2bf90"><!></button></error>'),Oy=se("<!> <!> <!> <node-content><node-header><node-header-left><!></node-header-left> <node-header-right><!> <!> <!></node-header-right></node-header> <!> <node-body><!> <!></node-body></node-content>",3);function Dy(e,t){le(t,!0);let n=v(t,"data",7),r=Ge(!1),i=Ge(""),o=Ge(Re(n().part??0));function s(P){n().part=P,H(o,Re(P)),et.Save()}var a=Oy(),l=oe(a);Ac(l,{minWidth:100,minHeight:30,onResizeEnd:()=>et.Save()});var c=te(l,2);_n(c,{type:"target",get position(){return fe.Left}});var u=te(c,2);_n(u,{type:"source",get position(){return fe.Right}});var f=te(u,2),h=ee(f),g=ee(h);_i(g,"class","svelte-m2bf90");var p=ee(g);{var y=P=>{var _=Ro();me(()=>qt(_,n().model)),Y(P,_)},S=P=>{var _=Ro("Generate");Y(P,_)};we(p,P=>{n().model?P(y):P(S,!1)})}var w=te(g,2);_i(w,"class","svelte-m2bf90");var m=ee(w);{var b=P=>{var _=My();_.__click=[Ny,i,n,t,r];var M=ee(_);Um(M,{size:16}),Y(P,_)},k=P=>{var _=Py(),M=ee(_);Ic(M,{size:16,class:"rotate"}),Y(P,_)};we(m,P=>{d(r)?P(k,!1):P(b)})}var E=te(m,2);Lc(E,{get text(){return n().markdowns[d(o)]}});var N=te(E,2);ky(N,{onclick:()=>jt.Show(t.id,n().model)});var C=te(h,2);{var A=P=>{var _=Ay();St(_,21,()=>n().htmls,Vn,(M,T,I)=>{var R=zy();R.__click=()=>s(I),R.textContent=`Part ${I+1}`,me(()=>Ye(R,"active",d(o)==I)),Y(M,R)}),Y(P,_)};we(C,P=>{n().htmls.length>1&&P(A)})}var z=te(C,2);_i(z,"class","nodrag nozoom nomenu node-text");var O=ee(z);{var L=P=>{var _=xe(),M=oe(_);Js(M,()=>n().htmls[0]),Y(P,_)},V=P=>{var _=xe(),M=oe(_);Js(M,()=>n().htmls[d(o)]),Y(P,_)};we(O,P=>{n().htmls.length==1?P(L):P(V,!1)})}var D=te(O,2);{var x=P=>{var _=Ty(),M=ee(_),T=te(M);T.__click=[Iy,i];var I=ee(T);Tc(I,{size:24,strokeWidth:2}),me(()=>qt(M,`${d(i)??""} `)),Y(P,_)};we(D,P=>{d(i)&&P(x)})}me(()=>Ye(f,"has-tabs",n().htmls.length>1)),Y(e,a),ce()}rn(["click"]);var Hy=se("<!> <!> <!> <!> <!>",1),Ry=se("<div><!></div>");function Ly(e,t){le(t,!0);const n={textInput:xy,generate:Dy};let r=Ge(!1),i=Ge(!0),o=mn(()=>d(i));async function s(c,u){if(u.isValid){et.RemovePrevEdge(u);return}await new Promise(f=>setTimeout(f,100)),He.ShowConnect(c,u)}var a=Ry();We(a,"height","100%");var l=ee(a);dm(l,{get nodes(){return et.nodes},get edges(){return et.edges},nodeTypes:n,get zoomOnScroll(){return d(i)},get preventScrolling(){return d(o)},fitView:!0,fitViewOptions:{maxZoom:1,minZoom:1},proOptions:{hideAttribution:!0},colorMode:"dark",snapGrid:[20,20],onconnectstart:()=>He.Hide(),onconnectend:s,ondelete:c=>et.Save(),$$events:{paneclick:()=>He.Hide(),nodeclick:()=>He.Hide(),edgeclick:()=>He.Hide(),nodedragstart:()=>He.Hide(),nodedragstop:()=>et.Save(),panecontextmenu:({detail:{event:c}})=>He.ShowPane(c),nodecontextmenu:({detail:{event:c,node:u}})=>He.ShowNode(c,u),edgecontextmenu:({detail:{event:c,edge:u}})=>He.ShowEdge(c,u),nodemousemove:({detail:{event:c}})=>{H(i,c.target.closest(".nozoom")==null)},nodemouseleave:()=>{H(i,!0)}},children:(c,u)=>{var f=Hy(),h=oe(f);zc(h,{children:(m,b)=>{Jt(m,{title:"MiniMap",class:"canvas-llm-controll-button",$$events:{click:()=>H(r,!d(r))},children:(k,E)=>{Gm(k,{size:24})},$$slots:{default:!0}})},$$slots:{default:!0}});var g=te(h,2);my(g,{});var p=te(g,2);dy(p,{});var y=te(p,2);{var S=m=>{Hm(m,{})};we(y,m=>{d(r)&&m(S)})}var w=te(y,2);Am(w,{get variant(){return tn.Dots},patternColor:"rgba(255,255,255,0.5)",gap:20}),Y(c,f)},$$slots:{default:!0}}),zi(a,"clientWidth",c=>He.CanvasWidth=c),zi(a,"clientHeight",c=>He.CanvasHeight=c),Y(e,a),ce()}var Vy=se('<button type="button" class="btn-dark svelte-1sun3k7"><!> Close</button>');function Ts(e,t){le(t,!0);function n(o){o.key==="Escape"&&t.onclick()}var r=Vy();Ae("keydown",ut,n),r.__click=function(...o){var s;(s=t.onclick)==null||s.apply(this,o)};var i=ee(r);Tc(i,{size:48,strokeWidth:1}),Y(e,r),ce()}rn(["click"]);var yi=Cl(()=>xt),Xy=se('<th class="svelte-1lfplf3"><h1 class="svelte-1lfplf3"> </h1></th>'),Yy=(e,t,n)=>{t(d(n).id)},Wy=(e,t,n)=>{t(e,d(n).id)},By=se('<button class="svelte-1lfplf3"> <input type="radio" name="defaultModel" title="Default Model" class="svelte-1lfplf3"></button>'),Ky=se('<td class="svelte-1lfplf3"></td>'),Fy=se('<!> <table class="form"><thead><tr></tr></thead><tbody><tr></tr></tbody></table>',1);function qy(e,t){le(t,!1);function n(f){et.UpdateNode(jt.NodeID,{model:f}),jt.Hide()}function r(f,h){yi(yi().Data.defaultModel=h),yi().Save(),f.stopPropagation()}he();var i=Fy(),o=oe(i);Ts(o,{onclick:()=>jt.Hide()});var s=te(o,2),a=ee(s),l=ee(a);St(l,5,()=>wn.providers,Vn,(f,h)=>{var g=xe(),p=oe(g);{var y=S=>{var w=Xy(),m=ee(w),b=ee(m);me(()=>qt(b,d(h).name)),Y(S,w)};we(p,S=>{d(h).models.length>0&&S(y)})}Y(f,g)});var c=te(a),u=ee(c);St(u,5,()=>wn.providers,Vn,(f,h)=>{var g=xe(),p=oe(g);{var y=S=>{var w=Ky();St(w,5,()=>d(h).models,Vn,(m,b)=>{var k=By();k.__click=[Yy,n,b];var E=ee(k),N=te(E);N.__click=[Wy,r,b],me(()=>{Ye(k,"selected",jt.ModelID==d(b).id),qt(E,`${d(b).id??""} `),hd(N,d(b).id==yi().Data.defaultModel)}),Y(m,k)}),Y(S,w)};we(p,S=>{d(h).models.length>0&&S(y)})}Y(f,g)}),Y(e,i),ce()}rn(["click"]);var hr=Cl(()=>xt),$y=se('<div style="animation: rotate 3s infinite linear, blink 1s infinite linear"><!></div>'),Gy=se('<tr><td class="svelte-1xsv1sz"><div class="provider svelte-1xsv1sz"> <a target="_blank" title="Get API Key" class="svelte-1xsv1sz"><!></a></div></td><td class="key svelte-1xsv1sz"><input type="text" class="svelte-1xsv1sz"></td></tr>'),Zy=se('<div class="settings svelte-1xsv1sz"><h3 class="text-lg font-bold">API Keys</h3> <table class="form svelte-1xsv1sz"><tbody></tbody></table></div>'),Uy=se("<!> <!>",1);function Jy(e,t){le(t,!1),he();var n=Uy(),r=oe(n);Ts(r,{onclick:()=>hr().Hide()});var i=te(r,2);{var o=a=>{var l=$y(),c=ee(l);Ic(c,{size:32}),Y(a,l)},s=a=>{var l=Zy(),c=te(ee(l),2),u=ee(c);St(u,5,()=>wn.providers,Vn,(f,h)=>{var g=Gy(),p=ee(g),y=ee(p),S=ee(y),w=te(S),m=ee(w);jm(m,{size:16});var b=te(p),k=ee(b);k.__change=()=>hr().Save(),me(()=>{qt(S,`${d(h).name??""} `),Q(w,"href",d(h).link)}),El(k,()=>hr().Data[d(h).id+"Key"],E=>hr(hr().Data[d(h).id+"Key"]=E)),Y(f,g)}),Y(a,l)};we(i,a=>{wn.providers.length==0?a(o):a(s,!1)})}Y(e,n),ce()}rn(["change"]);var jy=se('<!> <div class="help svelte-1ksccvz">Hello! <br> Feel free to ask for assistance: <br> <a href="https://t.me/xyz4fun" target="_blank" class="svelte-1ksccvz">@xyz4fun</a> <div class="icon svelte-1ksccvz"><!></div></div>',1);function Qy(e,t){le(t,!1),he();var n=jy(),r=oe(n);Ts(r,{onclick:()=>Bi.Hide()});var i=te(r,2),o=te(ee(i),7),s=ee(o);Zm(s,{size:32,strokeWidth:1.5}),Y(e,n),ce()}var ep=se('<div class="full-screen center-h svelte-uz21qr"><div class="relative max-size center-v"><!></div></div>');function tp(e,t){le(t,!1),he();var n=xe(),r=oe(n);{var i=o=>{var s=ep(),a=ee(s),l=ee(a);{var c=f=>{Jy(f,{})},u=f=>{var h=xe(),g=oe(h);{var p=S=>{Qy(S,{})},y=S=>{var w=xe(),m=oe(w);{var b=k=>{qy(k,{})};we(m,k=>{jt.IsVisible&&k(b)},!0)}Y(S,w)};we(g,S=>{Bi.IsVisible?S(p):S(y,!1)},!0)}Y(f,h)};we(l,f=>{xt.IsVisible?f(c):f(u,!1)})}Y(o,s)};we(r,o=>{(xt.IsVisible||Bi.IsVisible||jt.IsVisible)&&o(i)})}Y(e,n),ce()}var np=se("<!> <!>",1);function rp(e){var t=np(),n=oe(t);Ly(n,{});var r=te(n,2);tp(r,{}),Y(e,t)}rd(rp,{target:document.getElementById("app")});
